{"version":3,"sources":["../webpack/bootstrap",".././node_modules/vscode-jsonrpc/lib/main.js","../external \"vscode\"",".././node_modules/vscode-languageserver-protocol/lib/main.js",".././node_modules/vscode-languageclient/lib/utils/is.js",".././node_modules/vscode-jsonrpc/lib/is.js",".././node_modules/vscode-languageserver/node_modules/vscode-languageserver-protocol/lib/main.js","../external \"path\"",".././node_modules/vscode-languageclient/lib/client.js",".././node_modules/vscode-jsonrpc/lib/events.js",".././node_modules/vscode-languageclient/lib/utils/uuid.js","../external \"fs\"",".././node_modules/vscode-jsonrpc/lib/messageReader.js",".././node_modules/vscode-jsonrpc/lib/messageWriter.js","../external \"child_process\"","../external \"net\"",".././node_modules/tsmetrics-core/lib/MetricsModel.js",".././node_modules/vscode-languageserver/lib/main.js",".././node_modules/vscode-languageserver/node_modules/vscode-languageserver-types/lib/esm/main.js",".././node_modules/vscode-languageserver/lib/utils/is.js",".././node_modules/vscode-languageserver/lib/utils/uuid.js",".././node_modules/vscode-textbuffer/lib/pieceTreeBase.js",".././node_modules/vscode-textbuffer/lib/common/position.js","../external \"os\"","../external \"crypto\"",".././node_modules/tsmetrics-core/lib/MetricsConfiguration.js",".././node_modules/vscode-jsonrpc/lib/messages.js",".././node_modules/vscode-jsonrpc/lib/cancellation.js",".././node_modules/vscode-jsonrpc/lib/linkedMap.js",".././node_modules/vscode-jsonrpc/lib/pipeSupport.js",".././node_modules/vscode-jsonrpc/lib/socketSupport.js",".././src/metrics/common/protocol.ts",".././node_modules/vscode-languageserver/node_modules/vscode-languageserver-protocol/lib/protocol.js",".././node_modules/vscode-languageserver/node_modules/vscode-languageserver-protocol/lib/utils/is.js",".././node_modules/vscode-languageserver/node_modules/vscode-languageserver-protocol/lib/protocol.implementation.js",".././node_modules/vscode-languageserver/node_modules/vscode-languageserver-protocol/lib/protocol.typeDefinition.js",".././node_modules/vscode-languageserver/node_modules/vscode-languageserver-protocol/lib/protocol.workspaceFolders.js",".././node_modules/vscode-languageserver/node_modules/vscode-languageserver-protocol/lib/protocol.configuration.js",".././node_modules/vscode-languageserver/node_modules/vscode-languageserver-protocol/lib/protocol.colorProvider.js",".././node_modules/vscode-languageserver/node_modules/vscode-languageserver-protocol/lib/protocol.foldingRange.js",".././node_modules/vscode-languageserver/node_modules/vscode-languageserver-protocol/lib/protocol.declaration.js",".././node_modules/vscode-languageserver/node_modules/vscode-languageserver-protocol/lib/protocol.callHierarchy.proposed.js",".././node_modules/vscode-languageserver/node_modules/vscode-languageserver-protocol/lib/protocol.progress.proposed.js",".././node_modules/vscode-languageserver/node_modules/vscode-languageserver-protocol/lib/protocol.selectionRange.proposed.js",".././node_modules/vscode-languageserver/lib/configuration.js",".././node_modules/vscode-languageserver/lib/workspaceFolders.js",".././node_modules/vscode-languageserver/lib/files.js","../external \"url\"",".././node_modules/vscode-textbuffer/lib/index.js",".././node_modules/vscode-textbuffer/lib/rbTreeBase.js",".././node_modules/vscode-textbuffer/lib/pieceTreeBuilder.js",".././node_modules/vscode-textbuffer/lib/common/range.js",".././node_modules/vscode-languageserver/lib/proposed.progress.js",".././node_modules/vscode-languageclient/lib/protocolCompletionItem.js",".././node_modules/vscode-languageclient/lib/protocolCodeLens.js",".././node_modules/vscode-languageclient/lib/protocolDocumentLink.js",".././src/extension.ts",".././src/codelensprovider/CodeMetricsCodeLensProvider.ts",".././src/models/CodeMetricsCodeLens.ts",".././src/models/AppConfiguration.ts",".././src/metrics/common/VSCodeMetricsConfiguration.ts",".././src/metrics/common/LuaStatementMetricsConfiguration.ts",".././src/metrics/MetricsUtil.ts",".././node_modules/vscode-languageclient/lib/main.js",".././node_modules/vscode-languageclient/node_modules/semver/semver.js",".././node_modules/vscode-languageserver-types/lib/esm/main.js",".././node_modules/vscode-languageserver-protocol/lib/protocol.js",".././node_modules/vscode-languageserver-protocol/lib/utils/is.js",".././node_modules/vscode-languageserver-protocol/lib/protocol.implementation.js",".././node_modules/vscode-languageserver-protocol/lib/protocol.typeDefinition.js",".././node_modules/vscode-languageserver-protocol/lib/protocol.workspaceFolders.js",".././node_modules/vscode-languageserver-protocol/lib/protocol.configuration.js",".././node_modules/vscode-languageserver-protocol/lib/protocol.colorProvider.js",".././node_modules/vscode-languageserver-protocol/lib/protocol.foldingRange.js",".././node_modules/vscode-languageserver-protocol/lib/protocol.declaration.js",".././node_modules/vscode-languageserver-protocol/lib/protocol.selectionRange.js",".././node_modules/vscode-languageserver-protocol/lib/protocol.callHierarchy.proposed.js",".././node_modules/vscode-languageserver-protocol/lib/protocol.progress.proposed.js",".././node_modules/vscode-languageclient/lib/codeConverter.js",".././node_modules/vscode-languageclient/lib/protocolConverter.js",".././node_modules/vscode-languageclient/lib/utils/async.js",".././node_modules/vscode-languageclient/lib/colorProvider.js",".././node_modules/vscode-languageclient/lib/configuration.js",".././node_modules/vscode-languageclient/lib/implementation.js",".././node_modules/vscode-languageclient/lib/typeDefinition.js",".././node_modules/vscode-languageclient/lib/workspaceFolders.js",".././node_modules/vscode-languageclient/lib/foldingRange.js",".././node_modules/vscode-languageclient/lib/declaration.js",".././node_modules/vscode-languageclient/lib/selectionRange.js",".././node_modules/vscode-languageclient/lib/progress.proposed.js",".././node_modules/vscode-languageclient/lib/callHierarchy.proposed.js",".././node_modules/vscode-languageclient/lib/utils/processes.js",".././src/editordecoration/EditorDecoration.ts"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","__export","Is","messages_1","RequestType","RequestType0","RequestType1","RequestType2","RequestType3","RequestType4","RequestType5","RequestType6","RequestType7","RequestType8","RequestType9","ResponseError","ErrorCodes","NotificationType","NotificationType0","NotificationType1","NotificationType2","NotificationType3","NotificationType4","NotificationType5","NotificationType6","NotificationType7","NotificationType8","NotificationType9","messageReader_1","MessageReader","StreamMessageReader","IPCMessageReader","SocketMessageReader","messageWriter_1","MessageWriter","StreamMessageWriter","IPCMessageWriter","SocketMessageWriter","events_1","Disposable","Event","Emitter","cancellation_1","CancellationTokenSource","CancellationToken","linkedMap_1","CancelNotification","ProgressNotification","Trace","TraceFormat","SetTraceNotification","LogTraceNotification","ConnectionErrors","ConnectionState","type","ProgressType","this","_","undefined","NullLogger","freeze","error","warn","info","log","fromString","toLowerCase","Off","Messages","Verbose","toString","JSON","Text","ConnectionError","Error","code","message","super","setPrototypeOf","_createMessageConnection","messageReader","messageWriter","logger","strategy","sequenceNumber","notificationSquenceNumber","unknownResponseSquenceNumber","version","timer","tracer","starRequestHandler","requestHandlers","starNotificationHandler","notificationHandlers","progressHandlers","Map","messageQueue","LinkedMap","responsePromises","requestTokens","trace","traceFormat","state","New","errorEmitter","closeEmitter","unhandledNotificationEmitter","unhandledProgressEmitter","disposeEmitter","createRequestQueueKey","id","addMessageToQueue","queue","isRequestMessage","set","isResponseMessage","cancelUndispatched","_message","isListening","Listening","isClosed","Closed","isDisposed","Disposed","closeHandler","fire","triggerMessageQueue","size","setImmediate","shift","requestMessage","reply","resultOrError","method","startTime","jsonrpc","toJson","result","traceSendingResponse","write","replyError","data","params","stringify","logLSPMessage","traceReceivedRequest","requestHandler","element","handler","Date","now","cancellationSource","tokenKey","String","handlerResult","numberOfParams","token","array","promise","then","string","InternalError","replySuccess","MethodNotFound","handleRequest","isNotificationMessage","notificationHandler","source","cancel","traceReceivedNotification","handleNotification","responseMessage","responsePromise","timerStart","traceReceivedResponse","reject","resolve","handleResponse","number","responseHandler","handleInvalidMessage","processMessageQueue","onClose","onError","callback","toCancel","response","delete","lspMessage","isLSPMessage","timestamp","throwIfClosedOrDisposed","undefinedToNull","param","computeMessageParams","length","push","connection","sendNotification","messageParams","notificationMessage","traceSendingNotification","onNotification","func","onProgress","_type","has","dispose","sendProgress","onUnhandledProgress","event","sendRequest","throwIfNotListening","is","last","slice","map","Promise","traceSendingRequest","e","MessageWriteError","onCancellationRequested","onRequest","_value","_tracer","sendNotificationOrTraceOptions","_sendNotification","_traceFormat","boolean","onUnhandledNotification","onDispose","keys","forEach","listen","AlreadyListening","throwIfListening","inspect","console","verbose","ConnectionStrategy","candidate","createMessageConnection","input","output","read","end","isMessageWriter","require","vscode_jsonrpc_1","createClientPipeTransport","createServerPipeTransport","generateRandomPipeName","createClientSocketTransport","createServerSocketTransport","callHierarchy","progress","Proposed","CallHierarchyRequest","CallHierarchyDirection","WorkDoneProgress","WorkDoneProgressCreateRequest","WorkDoneProgressCancelNotification","CallsFrom","CallsTo","createProtocolConnection","reader","writer","Array","isArray","Number","stringArray","every","elem","typedArray","check","thenable","sr","SelectionRangeRequest","ProgressStartNotification","ProgressReportNotification","ProgressDoneNotification","ProgressCancelNotification","vscode_1","vscode_languageserver_protocol_1","c2p","p2c","async_1","UUID","ConsoleLogger","ErrorAction","CloseAction","RevealOutputChannelOn","State","ClientState","DefaultErrorHandler","restarts","_error","count","Continue","Shutdown","Restart","window","showErrorMessage","DoNotRestart","SupportedSymbolKinds","SymbolKind","File","Module","Namespace","Package","Class","Method","Property","Field","Constructor","Enum","Interface","Function","Variable","Constant","Boolean","Key","Null","EnumMember","Struct","Operator","TypeParameter","SupportedCompletionItemKinds","CompletionItemKind","Unit","Value","Keyword","Snippet","Color","Reference","Folder","ensure","target","DynamicFeature","register","unregister","messages","DocumentNotifiactions","_client","_event","_middleware","_createParams","_selectorFilter","_selectors","selectors","textDocument","selector","languages","match","registerOptions","documentSelector","_listener","values","notificationSent","_data","clear","DidOpenTextDocumentFeature","client","_syncedDocuments","workspace","onDidOpenTextDocument","DidOpenTextDocumentNotification","clientOptions","middleware","didOpen","code2ProtocolConverter","asOpenTextDocumentParams","textDocumentFilter","capabilities","dynamicRegistration","textDocumentSyncOptions","resolvedTextDocumentSync","openClose","generateUuid","textDocuments","uri","DidCloseTextDocumentFeature","onDidCloseTextDocument","DidCloseTextDocumentNotification","didClose","asCloseTextDocumentParams","DidChangeTextDocumentFeature","_changeData","_forcingDelivery","DidChangeTextDocumentNotification","change","TextDocumentSyncKind","None","assign","syncKind","onDidChangeTextDocument","contentChanges","changeData","document","Incremental","asChangeTextDocumentParams","didChange","Full","_changeDelayer","forceDelivery","delayer","trigger","Delayer","WillSaveFeature","onWillSaveTextDocument","WillSaveTextDocumentNotification","willSave","willSaveEvent","asWillSaveTextDocumentParams","WillSaveWaitUntilFeature","WillSaveTextDocumentWaitUntilRequest","willSaveWaitUntil","edits","vEdits","protocol2CodeConverter","asTextEdits","waitUntil","DidSaveTextDocumentFeature","onDidSaveTextDocument","DidSaveTextDocumentNotification","didSave","asSaveTextDocumentParams","_includeText","save","includeText","FileSystemWatcherFeature","_notifyFileEvent","_watchers","DidChangeWatchedFilesNotification","_capabilities","_documentSelector","_method","watchers","disposeables","watcher","globPattern","watchCreate","watchChange","watchDelete","kind","WatchKind","Create","Change","Delete","fileSystemWatcher","createFileSystemWatcher","hookListeners","fileSystemWatchers","listeners","onDidCreate","resource","asUri","FileChangeType","Created","onDidChange","Changed","onDidDelete","Deleted","disposable","TextDocumentFeature","_providers","provider","registerLanguageProvider","WorkspaceFeature","CompletionItemFeature","CompletionRequest","capabilites","completion","contextSupport","completionItem","snippetSupport","commitCharactersSupport","documentationFormat","MarkupKind","Markdown","PlainText","deprecatedSupport","preselectSupport","completionItemKind","valueSet","completionProvider","options","triggerCharacters","provideCompletionItems","position","context","asCompletionParams","asCompletionResult","logFailedRequest","resolveCompletionItem","item","CompletionResolveRequest","asCompletionItem","registerCompletionItemProvider","provideCompletionItem","resolveProvider","HoverFeature","HoverRequest","hoverCapability","contentFormat","hoverProvider","provideHover","asTextDocumentPositionParams","asHover","registerHoverProvider","SignatureHelpFeature","SignatureHelpRequest","config","signatureInformation","parameterInformation","labelOffsetSupport","signatureHelpProvider","providerSignatureHelp","asSignatureHelp","registerSignatureHelpProvider","provideSignatureHelp","DefinitionFeature","DefinitionRequest","definitionSupport","linkSupport","definitionProvider","provideDefinition","asDefinitionResult","registerDefinitionProvider","ReferencesFeature","ReferencesRequest","referencesProvider","providerReferences","asReferenceParams","asReferences","registerReferenceProvider","provideReferences","DocumentHighlightFeature","DocumentHighlightRequest","documentHighlightProvider","provideDocumentHighlights","asDocumentHighlights","registerDocumentHighlightProvider","DocumentSymbolFeature","DocumentSymbolRequest","symbolCapabilities","symbolKind","hierarchicalDocumentSymbolSupport","documentSymbolProvider","provideDocumentSymbols","asDocumentSymbolParams","DocumentSymbol","asDocumentSymbols","asSymbolInformations","registerDocumentSymbolProvider","WorkspaceSymbolFeature","WorkspaceSymbolRequest","workspaceSymbolProvider","_options","provideWorkspaceSymbols","query","registerWorkspaceSymbolProvider","CodeActionFeature","CodeActionRequest","cap","codeActionLiteralSupport","codeActionKind","CodeActionKind","QuickFix","Refactor","RefactorExtract","RefactorInline","RefactorRewrite","Source","SourceOrganizeImports","codeActionProvider","codeActionKinds","provideCodeActions","range","asTextDocumentIdentifier","asRange","asCodeActionContext","Command","asCommand","asCodeAction","registerCodeActionsProvider","providedCodeActionKinds","asCodeActionKinds","CodeLensFeature","CodeLensRequest","codeLensProvider","provideCodeLenses","asCodeLensParams","asCodeLenses","resolveCodeLens","codeLens","CodeLensResolveRequest","asCodeLens","registerCodeLensProvider","DocumentFormattingFeature","DocumentFormattingRequest","documentFormattingProvider","provideDocumentFormattingEdits","asFormattingOptions","registerDocumentFormattingEditProvider","DocumentRangeFormattingFeature","DocumentRangeFormattingRequest","documentRangeFormattingProvider","provideDocumentRangeFormattingEdits","registerDocumentRangeFormattingEditProvider","DocumentOnTypeFormattingFeature","DocumentOnTypeFormattingRequest","documentOnTypeFormattingProvider","moreTriggerCharacter","provideOnTypeFormattingEdits","ch","asPosition","registerOnTypeFormattingEditProvider","firstTriggerCharacter","RenameFeature","RenameRequest","rename","prepareSupport","renameProvider","prepareProvider","provideRenameEdits","newName","asWorkspaceEdit","prepareRename","PrepareRenameRequest","Range","placeholder","registerRenameProvider","DocumentLinkFeature","DocumentLinkRequest","documentLinkProvider","provideDocumentLinks","asDocumentLinkParams","asDocumentLinks","resolveDocumentLink","link","DocumentLinkResolveRequest","asDocumentLink","registerDocumentLinkProvider","ConfigurationFeature","_listeners","DidChangeConfigurationNotification","section","synchronize","configurationSection","onDidChangeConfiguration","sections","some","affectsConfiguration","didChangeConfiguration","settings","extractSettingsInformation","getMiddleware","ensurePath","path","current","obj","workspaceFolder","index","indexOf","getConfiguration","substr","split","ExecuteCommandFeature","_commands","ExecuteCommandRequest","executeCommandProvider","commands","command","registerCommand","args","arguments","MessageTransports","OnReady","_resolve","_reject","_used","BaseLanguageClient","_features","_method2Message","_dynamicFeatures","_id","_name","_clientOptions","diagnosticCollectionName","outputChannelName","revealOutputChannelOn","stdioEncoding","initializationOptions","initializationFailedHandler","errorHandler","uriConverters","Initial","_connectionPromise","_resolvedConnection","_initializeResult","outputChannel","_outputChannel","_disposeOutputChannel","_traceOutputChannel","traceOutputChannel","_diagnostics","_fileEvents","_fileEventDelayer","_onReady","_onReadyCallbacks","_onStop","_telemetryEmitter","_stateChangeEmitter","messageOrDataObject","logTrace","logObjectTrace","_c2p","createConverter","code2Protocol","_p2c","protocol2Code","registerBuiltinFeatures","_state","oldState","getPublicState","newState","Running","Starting","Stopped","isConnectionActive","forceDocumentSync","createOutputChannel","_trace","onReady","resolveConnection","responseError","stack","appendLine","toLocaleTimeString","data2String","Info","showNotificationMessage","Warn","showInformationMessage","show","append","Stopping","isUsed","createDiagnosticCollection","onLogMessage","MessageType","Warning","onShowMessage","showWarningMessage","ShowMessageRequest","messageFunc","actions","onTelemetry","initialize","StartFailed","needsStop","stop","createConnection","refreshTrace","initOption","rootPath","fsPath","_clientGetRootPath","initParams","processId","process","pid","rootUri","Uri","file","computeClientCapabilities","workspaceFolders","fillInitializeParams","textDocumentSync","onDiagnostics","handleDiagnostics","RegistrationRequest","handleRegistrationRequest","UnregistrationRequest","handleUnregistrationRequest","ApplyWorkspaceEditRequest","handleApplyWorkspaceEdit","InitializedNotification","hookFileEvents","hookConfigurationChanged","initializeFeatures","retry","title","folders","folder","scheme","cleanUp","shutdown","exit","channel","diagnostics","listener","didChangeWatchedFiles","changes","asDiagnostics","setDiagnostics","handleConnectionError","handleConnectionClosed","createMessageTransports","transports","defaultTraceOptions","InitializeRequest","ShutdownRequest","ExitNotification","LogMessageNotification","ShowMessageNotification","TelemetryEventNotification","didOpenTextDocument","didChangeTextDocument","didCloseTextDocument","didSaveTextDocument","PublishDiagnosticsNotification","action","closed","start","traceConfig","_connection","fileEvents","registerRaw","features","feature","registerFeature","notifyFileEvent","applyEdit","workspaceEdit","documentChanges","resourceOperations","ResourceOperationKind","Rename","failureHandling","FailureHandlingKind","TextOnlyTransactional","relatedInformation","tagSupport","fillClientCapabilities","registration","registrations","unregistration","unregisterations","edit","openTextDocuments","versionMismatch","TextDocumentEdit","applied","RequestCancelled","_disposable","CallbackList","bucket","_callbacks","_contexts","remove","foundCallbackWithDifferentContext","len","splice","ret","callbacks","contexts","apply","thisArgs","disposables","onFirstListenerAdd","isEmpty","add","_noop","onLastListenerRemove","invoke","ValueUUID","other","asHex","V4UUID","_randomHex","_oneOf","_timeHighBits","join","Math","floor","random","_chars","v4","empty","_UUIDPattern","isUUID","test","parse","DefaultSize","CR","Buffer","from","LF","CRLF","MessageBuffer","encoding","buffer","allocUnsafe","chunk","toAppend","str","bufferLen","byteLength","copy","newSize","ceil","concat","header","trim","nextStart","onPartialMessage","AbstractMessageReader","partialMessageEmitter","asError","readable","_partialMessageTimeout","timeout","nextMessageLength","messageToken","partialMessageTimer","on","onData","fireError","fireClose","headers","tryReadHeaders","contentLength","parseInt","isNaN","msg","tryReadContent","setPartialMessageTimer","clearPartialMessageTimer","json","clearTimeout","setTimeout","firePartialMessage","waitingTime","eventEmitter","socket","ContentLength","AbstractMessageWriter","writable","errorCount","sending","doWriteMessage","send","destroy","handleError","MetricsModel","text","line","column","complexity","description","visible","collectorType","children","storeText","lineFeedIndex","substring","getCollectedComplexity","reduce","acc","max","toLogString","level","pad","roundComplexity","lenghtToFit","complexitySum","instruction","ComplexityLevelExtreme","ComplexityLevelExtremeDescription","ComplexityLevelHigh","ComplexityLevelHighDescription","ComplexityLevelNormal","ComplexityLevelNormalDescription","ComplexityLevelLow","ComplexityLevelLowDescription","template","ComplexityTemplate","replace","getExplanation","_this","item1","item2","clone","deepClone","model","toFixed","configuration_1","workspaceFolders_1","fm","vscode_textbuffer_1","range_1","Files","uriToFilePath","resolveGlobalNodePath","resolveGlobalYarnPath","resolveModulePath","shutdownReceived","exitTimer","null2Undefined","runTimer","setInterval","kill","ex","argv","arg","setupExitTimer","IncrementalTextDocument","languageId","content","_uri","_languageId","_version","ptBuilder","PieceTreeTextBufferBuilder","acceptChunk","ptFactory","finish","_tree","clampedEndLine","clampedEndChar","lineCount","getLineLength","character","ptRange","getValueInRange","getLinesRawContent","startOffset","offsetAt","endOffset","insert","offset","clampedOffset","min","getLength","ptPosition","getPositionAt","Position","lineNumber","clampedChar","getOffsetAt","getLineCount","TextDocuments","_documents","_syncKind","_onDidChangeContent","_onDidOpen","_onDidClose","_onDidSave","_onWillSave","_willSaveWaitUntil","__textDocumentSync","td","TextDocument","toFire","update","isUpdateableDocument","updatedDoc","workingTextDoc","reason","onWillSaveTextDocumentWaitUntil","ErrorMessageTracker","_messages","BulkRegistration","BulkRegistrationImpl","_registrations","_registered","Set","BulkUnregistration","BulkUnregistrationImpl","unregistrations","_unregistrations","ConnectionLogger","_rawConnection","Log","RemoteWindowImpl","RemoteClientImpl","typeOrRegistrations","registerOptionsOrType","registerMany","registerSingle1","registerSingle2","isAttached","attach","_result","unregisterSingle","asRegistrationParams","RemoteWorkspaceImpl","WorkspaceFoldersFeature","paramOrEdit","TracerImpl","TelemetryImpl","combineConsoleFeatures","one","two","Base","combineTelemetryFeatures","combineTracerFeatures","combineClientFeatures","combineWindowFeatures","combineWorkspaceFeatures","combineFeatures","combine","__brand","telemetry","arg1","arg2","arg3","arg4","factories","port","pipeName","stdin","stdout","transport","commandLineMessage","inputStream","rawAttach","remoteWindow","allRemotes","shutdownHandler","initializeHandler","exitHandler","protocolConnection","onInitialize","onInitialized","onShutdown","onExit","onDidChangeWatchedFiles","sendDiagnostics","onHover","onCompletion","onCompletionResolve","onSignatureHelp","onDeclaration","DeclarationRequest","onDefinition","onTypeDefinition","TypeDefinitionRequest","onImplementation","ImplementationRequest","onReferences","onDocumentHighlight","onDocumentSymbol","onWorkspaceSymbol","onCodeAction","onCodeLens","onCodeLensResolve","onDocumentFormatting","onDocumentRangeFormatting","onDocumentOnTypeFormatting","onRenameRequest","onPrepareRename","onDocumentLinks","onDocumentLinkResolve","onDocumentColor","DocumentColorRequest","onColorPresentation","ColorPresentationRequest","onFoldingRanges","FoldingRangeRequest","onExecuteCommand","remote","asThenable","fillServerCapabilities","_createConnection","proposed_progress_1","ProposedFeatures","all","ProgressFeature","Location","LocationLink","ColorInformation","ColorPresentation","FoldingRangeKind","FoldingRange","DiagnosticRelatedInformation","DiagnosticSeverity","DiagnosticTag","Diagnostic","TextEdit","CreateFile","RenameFile","DeleteFile","WorkspaceEdit","objectLiteral","three","four","defined","targetUri","targetRange","targetSelectionRange","originSelectionRange","red","green","blue","alpha","color","label","textEdit","additionalTextEdits","startLine","endLine","startCharacter","endCharacter","location","Information","Hint","Unnecessary","severity","_i","newText","del","VersionedTextDocumentIdentifier","overwrite","ignoreIfExists","oldUri","newUri","recursive","ignoreIfNotExists","TextDocumentIdentifier","TextDocumentItem","MarkupContent","InsertTextFormat","CompletionItem","CompletionList","MarkedString","Hover","ParameterInformation","SignatureInformation","DocumentHighlightKind","DocumentHighlight","SymbolInformation","TextEditChangeImpl","WorkspaceChange","_textEditChanges","_workspaceEdit","textEditChange","configurable","getTextEditChange","textDocumentEdit","createFile","checkDocumentChanges","renameFile","deleteFile","items","isIncomplete","fromPlainText","plainText","language","contents","documentation","parameters","Read","Write","containerName","CodeActionContext","CodeAction","CodeLens","FormattingOptions","detail","selectionRange","deprecated","only","commandOrEdit","tabSize","insertSpaces","DocumentLink","TextDocumentSaveReason","EOL","FullTextDocument","getText","positionAt","applyEdits","sortedEdits","mergeSort","compare","left","right","leftIdx","rightIdx","a","b","diff","lastModifiedOffset","Manual","AfterDelay","FocusOut","_content","_lineOffsets","getLineOffsets","lineOffsets","isLineStart","charAt","low","high","mid","lineOffset","nextLineOffset","position_1","rbTreeBase_1","createUintArray","arr","Uint16Array","Uint32Array","AverageBufferSize","LineStarts","lineStarts","cr","lf","crlf","isBasicASCII","createLineStartsFast","readonly","rLength","chr","charCodeAt","createLineStarts","Piece","bufferIndex","lineFeedCnt","StringBuffer","PieceTreeSnapshot","tree","BOM","_pieces","_BOM","_index","root","SENTINEL","iterate","node","piece","getPieceContent","PieceTreeSearchCache","limit","_limit","_cache","nodePos","nodeStartOffset","nodeStartLineNumber","nodePosition","hasInvalidVal","tmp","parent","newArr","entry","PieceTreeBase","chunks","eol","eolNormalized","_buffers","_lastChangeBufferPos","_lineCnt","_length","_EOL","_EOLLength","_EOLNormalized","lastNode","rbInsertRight","_searchCache","_lastVisitedLine","computeBufferMetadata","averageBufferSize","tempChunk","tempChunkLen","getNodeContent","newEOL","normalizeEOL","startPosition","nodeAt","endPosition","getValueInRange2","leftLen","x","lf_left","size_left","getAccumulatedValue","lfCnt","originalOffset","out","getIndexOf","remainder","startLineNumber","endLineNumber","startColumn","endColumn","nodeAt2","getEOL","offsetInBuffer","next","getContentOfSubTree","getLineRawContent","matchingNode","targetOffset","insertPosInBuffer","positionInBuffer","appendToNode","insertContentToNodeLeft","valdiate","nodesToDel","newRightPiece","getLineFeedCnt","shouldCheckCRLF","endWithCR","nodeCharCodeAt","newStart","startWithLF","previousPos","deleteNodeTail","newPieces","createNewPieces","tmpNode","k","deleteNodes","insertContentToNodeRight","pieces","rbInsertLeft","cnt","startNode","endNode","startSplitPosInBuffer","endSplitPosInBuffer","rbDelete","validateCRLFWithPrevNode","deleteNodeHead","validateCRLFWithNextNode","shrinkNode","prev","nPiece","updateTreeMetadata","newNode","adjustCarriageReturnFromNext","midStop","midStart","nextLineStartOffset","previousCharOffset","cursor","nodes","lastChar","splitText","endIndex","endPos","newPiece","cache","get2","prevAccumualtedValue","accumualtedValue","originalLineNumber","accumulatedValue","pos","lineCnt","realLineCnt","expectedLineStartIndex","originalLFCnt","originalEndOffset","newEnd","newEndOffset","newLineFeedCnt","lf_delta","size_delta","newLength","originalStartOffset","originalStartPos","originalEndPos","oldLength","oldLFCnt","hitCRLF","prevStartOffset","pop","oldLineFeedCnt","offsetOfNode","newOffset","val","nextNode","fixCRLF","prevNewLength","prevNewLFCnt","leftRet","currentContent","z","TreeNode","leftest","fixInsert","prevNode","righttest","newLineNumber","newColumn","deltaLineNumber","deltaColumn","with","equals","isBefore","isBeforeOrEqual","aLineNumber","bLineNumber","MetricsConfiguration","MetricsForClassDeclarationsToggled","MetricsForConstructorsToggled","MetricsForEnumDeclarationsToggled","MetricsForFunctionDeclarationsToggled","MetricsForFunctionExpressionsToggled","MetricsForMethodDeclarationsToggled","MetricsForArrowFunctionsToggled","CodeLensHiddenUnder","AnyKeyword","AnyKeywordDescription","ArrayBindingPattern","ArrayBindingPatternDescription","ArrayLiteralExpression","ArrayLiteralExpressionDescription","ArrowFunction","ArrowFunctionDescription","BinaryExpression","BinaryExpressionDescription","BindingElement","BindingElementDescription","Block","BlockDescription","BreakStatement","BreakStatementDescription","CallExpression","CallExpressionDescription","CallSignature","CallSignatureDescription","CaseClause","CaseClauseDescription","ClassDeclaration","ClassDeclarationDescription","CatchClause","CatchClauseDescription","ConditionalExpression","ConditionalExpressionDescription","ConstructorDescription","ConstructorType","ConstructorTypeDescription","ContinueStatement","ContinueStatementDescription","DebuggerStatement","DebuggerStatementDescription","DefaultClause","DefaultClauseDescription","DoStatement","DoStatementDescription","ElementAccessExpression","ElementAccessExpressionDescription","EnumDeclaration","EnumDeclarationDescription","ExportAssignment","ExportAssignmentDescription","ExpressionStatement","ExpressionStatementDescription","ForStatement","ForStatementDescription","ForInStatement","ForInStatementDescription","ForOfStatement","ForOfStatementDescription","FunctionDeclaration","FunctionDeclarationDescription","FunctionExpression","FunctionExpressionDescription","FunctionType","FunctionTypeDescription","GetAccessor","GetAccessorDescription","Identifier","IdentifierDescription","IfWithElseStatement","IfWithElseStatementDescription","IfStatement","IfStatementDescription","ImportDeclaration","ImportDeclarationDescription","ImportEqualsDeclaration","ImportEqualsDeclarationDescription","IndexSignature","IndexSignatureDescription","InterfaceDeclaration","InterfaceDeclarationDescription","JsxElement","JsxElementDescription","JsxSelfClosingElement","JsxSelfClosingElementDescription","LabeledStatement","LabeledStatementDescription","MethodDeclaration","MethodDeclarationDescription","MethodSignature","MethodSignatureDescription","ModuleDeclaration","ModuleDeclarationDescription","NamedImports","NamedImportsDescription","NamespaceImport","NamespaceImportDescription","NewExpression","NewExpressionDescription","ObjectBindingPattern","ObjectBindingPatternDescription","ObjectLiteralExpression","ObjectLiteralExpressionDescription","Parameter","ParameterDescription","PostfixUnaryExpression","PostfixUnaryExpressionDescription","PrefixUnaryExpression","PrefixUnaryExpressionDescription","PropertyAccessExpression","PropertyAccessExpressionDescription","PropertyAssignment","PropertyAssignmentDescription","PropertyDeclaration","PropertyDeclarationDescription","PropertySignature","PropertySignatureDescription","RegularExpressionLiteral","RegularExpressionLiteralDescription","ReturnStatement","ReturnStatementDescription","SetAccessor","SetAccessorDescription","SourceFile","SourceFileDescription","StringLiteral","StringLiteralDescription","SwitchStatement","SwitchStatementDescription","TemplateExpression","TemplateExpressionDescription","ThrowStatement","ThrowStatementDescription","TryStatement","TryStatementDescription","TypeAssertionExpression","TypeAssertionExpressionDescription","TypeLiteral","TypeLiteralDescription","TypeReference","TypeReferenceDescription","VariableDeclaration","VariableDeclarationDescription","VariableStatement","VariableStatementDescription","WhileStatement","WhileStatementDescription","WithStatement","WithStatementDescription","ParseError","InvalidRequest","InvalidParams","serverErrorStart","serverErrorEnd","ServerNotInitialized","UnknownErrorCode","ContentModified","MessageReadError","AbstractMessageType","_numberOfParams","isCancellationRequested","Cancelled","shortcutEvent","handle","MutableToken","_isCancelled","_emitter","_token","Touch","First","Last","_map","_head","_tail","_size","touch","previous","addItemLast","addItemFirst","removeItem","callbackfn","thisArg","path_1","os_1","crypto_1","net_1","randomSuffix","randomBytes","platform","tmpdir","connectResolve","connected","server","createServer","close","removeListener","onConnected","RequestData","MetricsRequestType","protocol_implementation_1","protocol_typeDefinition_1","protocol_workspaceFolders_1","WorkspaceFoldersRequest","DidChangeWorkspaceFoldersNotification","protocol_configuration_1","ConfigurationRequest","protocol_colorProvider_1","protocol_foldingRange_1","protocol_declaration_1","DocumentFilter","pattern","Abort","Transactional","Undo","InitializeError","unknownProtocolVersion","CompletionTriggerKind","Invoked","TriggerCharacter","TriggerForIncompleteCompletions","vscode_languageserver_types_1","SelectionRange","_getConfiguration","workspaceCapabilities","_onDidChangeWorkspaceFolders","_unregistration","url","fs","child_process_1","isWindows","moduleName","nodePath","cwd","app","env","newEnv","delimiter","cp","fork","execArgv","npmCommand","shell","spawnSync","prefix","err","FileSystem","parsed","protocol","segments","decodeURIComponent","first","second","normalize","yarnCommand","results","stderr","lines","yarn","_isCaseSensitive","isCaseSensitive","existsSync","__filename","toUpperCase","isParent","child","workspaceRoot","isAbsolute","calculateSize","calculateLF","resetSentinel","leftRotate","y","rightRotate","delta","lineFeedCntDelta","recomputeTreeMetadata","detach","w","yWasRed","newSizeLeft","newLFLeft","pieceTreeBase_1","startsWithUTF8BOM","UTF8_BOM_CHARACTER","fromCharCode","PieceTreeTextBufferFactory","_chunks","_bom","_cr","_lf","_crlf","_normalizeEOL","defaultEOL","totalEOLCount","totalCRCount","_getEOL","newLineStart","lengthLimit","_hasPreviousChar","_previousChar","_tmpLineStarts","_acceptChunk1","allowEmptyStrings","_acceptChunk2","_finish","lastChunk","newLineStarts","containsPosition","containsRange","otherRange","plusRange","intersectRanges","resultStartLineNumber","resultStartColumn","resultEndLineNumber","resultEndColumn","otherStartLineNumber","otherStartColumn","otherEndLineNumber","otherEndColumn","equalsRange","collapseToStart","aStartLineNumber","bStartLineNumber","aStartColumn","bStartColumn","aEndLineNumber","bEndLineNumber","uuid_1","ProgressImpl","percentage","cancellable","Instances","_source","arg0","NullProgress","_progressSupported","ProtocolCompletionItem","default","ProtocolCodeLens","ProtocolDocumentLink","AppConfiguration","metricsUtil","MetricsUtil","CodeMetricsCodeLensProvider","EditorDecoration","triggerCodeLensComputation","activeTextEditor","selection","editbuilder","executeCommand","codeMetricsForArrowFunctionsToggled","toggleCodeMetricsForArrowFunctionsExecuted","codeMetricsDisplayed","codelens","getChildren","filter","explanations","complexityForItem","jumpTo","selected","selectedCodeLens","revealRange","Selection","showQuickPick","onDidSelectItem","subscriptions","appConfig","getCodeMetricsSettings","CodeLensEnabled","getMetrics","metrics","CodeMetricsCodeLens","toRange","format","extensionName","resultingSettings","getInitialVSCodeMetricsConfiguration","propertyName","LuaStatementMetricsConfiguration","VSCodeMetricsConfigurationDefaults","Exclude","EnabledForLua","EnabledForJS","EnabledForJSX","EnabledForTS","EnabledForTSX","EnabledForVue","EnabledForHTML","DecorationModeEnabled","DecorationTemplate","OverviewRulerModeEnabled","DiagnosticsEnabled","ComplexityColorLow","ComplexityColorNormal","ComplexityColorHigh","ComplexityColorExtreme","FileSizeLimitMB","getInitialLuaStatementMetricsConfiguration","LabelStatement","GotoStatement","IfClause","ElseifClause","ElseClause","RepeatStatement","LocalStatement","AssignmentStatement","CallStatement","ForNumericStatement","ForGenericStatement","Chunk","NumericLiteral","BooleanLiteral","NilLiteral","VarargLiteral","TableKey","TableKeyString","TableValue","TableConstructorExpression","LogicalExpression","UnaryExpression","MemberExpression","IndexExpression","TableCallExpression","StringCallExpression","Comment","serverModule","asAbsolutePath","serverOptions","run","TransportKind","ipc","debug","LanguageClient","supportedSchemes","cur","requestData","configuration","convert","toRangeFromOffset","toDecorationRange","lineRange","lineAt","SemVer","client_1","colorProvider_1","implementation_1","typeDefinition_1","foldingRange_1","declaration_1","selectionRange_1","progress_proposed_1","callHierarchy_proposed_1","processes_1","REQUIRED_VSCODE_VERSION","Executable","Transport","NodeModule","StreamInfo","ChildProcessInfo","isSocket","detached","arg5","forceDebug","_serverOptions","_forceDebug","checkVersion","codeVersion","prerelease","satisfies","_serverProcess","toCheck","_isDetached","checkProcessDied","childProcess","terminate","runDebug","v8debug","startedInDebugMode","_getServerWorkingDir","serverWorkingDir","stdio","runtime","pipe","silent","sp","execOptions","getEnvironment","serverProcess","spawn","registerFeatures","createAll","TypeDefinitionFeature","ImplementationFeature","ColorProviderFeature","FoldingRangeFeature","DeclarationFeature","_mainGetRootPath","lstat","stats","isDirectory","SettingMonitor","_setting","primary","rest","enabled","needsStart","SelectionRangeFeature","CallHierarchyFeature","NODE_DEBUG","unshift","SEMVER_SPEC_VERSION","MAX_LENGTH","MAX_SAFE_INTEGER","re","src","R","NUMERICIDENTIFIER","NUMERICIDENTIFIERLOOSE","NONNUMERICIDENTIFIER","MAINVERSION","MAINVERSIONLOOSE","PRERELEASEIDENTIFIER","PRERELEASEIDENTIFIERLOOSE","PRERELEASE","PRERELEASELOOSE","BUILDIDENTIFIER","BUILD","FULL","FULLPLAIN","LOOSEPLAIN","LOOSE","GTLT","XRANGEIDENTIFIERLOOSE","XRANGEIDENTIFIER","XRANGEPLAIN","XRANGEPLAINLOOSE","XRANGE","XRANGELOOSE","COERCE","LONETILDE","TILDETRIM","RegExp","TILDE","TILDELOOSE","LONECARET","CARETTRIM","CARET","CARETLOOSE","COMPARATORLOOSE","COMPARATOR","COMPARATORTRIM","HYPHENRANGE","HYPHENRANGELOOSE","STAR","loose","includePrerelease","er","TypeError","raw","major","minor","patch","num","build","valid","v","clean","compareMain","comparePre","compareIdentifiers","inc","release","identifier","version1","version2","eq","v1","v2","defaultResult","numeric","anum","bnum","gt","lt","neq","gte","lte","cmp","op","Comparator","comp","semver","ANY","operator","rcompareIdentifiers","compareLoose","rcompare","sort","list","rsort","parseRange","isX","hyphenReplace","$0","fM","fp","fpr","fb","to","tM","tm","tp","tpr","tb","testSet","allowed","outside","hilo","gtfn","ltefn","ltfn","ecomp","comparators","comparator","intersects","rangeTmp","sameDirectionIncreasing","sameDirectionDecreasing","sameSemVer","differentDirectionsInclusive","oppositeDirectionsLessThan","oppositeDirectionsGreaterThan","comps","hr","compRe","M","pr","replaceCaret","replaceCarets","replaceTilde","replaceTildes","gtlt","xM","xm","xp","replaceXRange","replaceXRanges","replaceStars","parseComparator","thisComparators","thisComparator","rangeComparators","rangeComparator","toComparators","maxSatisfying","versions","maxSV","rangeObj","minSatisfying","minSV","minVersion","minver","compver","validRange","ltr","gtr","r1","r2","coerce","Empty","protocol_selectionRange_1","DocumentSelector","StaticRegistrationOptions","hasId","TextDocumentRegistrationOptions","WorkDoneProgressOptions","workDoneProgress","hasWorkDoneProgress","resultType","proto","protocolCompletionItem_1","protocolCodeLens_1","protocolDocumentLink_1","uriConverter","_uriConverter","asVersionedTextDocumentIdentifier","asTextDocumentSaveReason","asTriggerKind","triggerKind","asWorkerPosition","asDiagnosticSeverity","asDiagnosticTag","tag","asDiagnostic","tags","converted","asDiagnosticTags","asTextEdit","isTextDocument","isTextDocumentChangeEvent","rangeLength","includeContent","triggerCharacter","asPositions","protocolItem","original","asDocumentation","filterText","insertText","SnippetString","insertTextFormat","fromEdit","fillPrimaryInsertText","originalItemKind","sortText","commitCharacters","preselect","includeDeclaration","ls","CodeBlock","diagnostic","asDiagnosticRelatedInformation","information","asLocation","MarkdownString","asCompletionInsertText","itemKind","asSignatureInformations","asSignatureInformation","asParameterInformations","asParameterInformation","asLocationLink","asLocationResult","asDocumentHighlight","asDocumentHighlightKind","asSymbolKind","asSymbolInformation","asDocumentSymbol","kindMapping","asCodeActionKind","parts","part","asColor","asColorInformation","ci","asColorPresentation","presentation","asFoldingRangeKind","Imports","Region","asFoldingRange","asSelectionRange","hover","appendCodeblock","appendMarkdown","appendText","asHoverContent","SignatureHelp","activeSignature","activeParameter","signatures","asDeclarationResult","asCommands","asFoldingRanges","foldingRanges","asColorInformations","colorInformation","asColorPresentations","colorPresentations","asSelectionRanges","selectionRanges","defaultDelay","completionPromise","onSuccess","task","delay","cancelTimeout","colorProvider","implCapabilities","provideColorPresentations","requestParams","provideDocumentColors","registerColorProvider","scopeUri","lastIndexOf","implementationSupport","implementationProvider","provideImplementation","registerImplementationProvider","typeDefinitionSupport","typeDefinitionProvider","provideTypeDefinition","registerTypeDefinitionProvider","access","asProtocol","onDidChangeWorkspaceFolders","didChangeWorkspaceFolders","added","removed","capability","rangeLimit","lineFoldingOnly","foldingRangeProvider","provideFoldingRanges","registerFoldingRangeProvider","declarationSupport","declarationProvider","declCapabilities","provideDeclaration","registerDeclarationProvider","selectionRangeProvider","provideSelectionRanges","positions","ranges","registerSelectionRangeProvider","__awaiter","_arguments","P","generator","fulfilled","step","rejected","done","ProgressPart","ProgressLocation","Notification","Window","_reported","withProgress","_progress","_infinite","report","increment","_progresses","progresses","CallHierarchyProvider","postion","provideCallHierarchy","doProvideCallHierarchyItem","direction","resolveCallHierarchy","doResolveCallHierarchyItem","asCallHierarchyParams","asCallHierarchyItem","converter","makeKey","relation","resultItem","CallHierarchyItem","callHierarchyProvider","registerCallHierarchyProvider","isMacintosh","isLinux","execFileSync","cmd","__dirname","decorationModeEnabled","overviewRulerModeEnabled","debouncedUpdate","debounce","onDidChangeActiveTextEditor","disposeDecorators","editor","languageDisabled","clearDecorators","thisContext","settingsChanged","updateDecorators","toDecoration","hoverMessage","complexityAndModel","lowLevelDecorations","normalLevelDecorations","highLevelDecorations","extremeLevelDecorations","setDecorations","normal","extreme","exmsg","changed","decorationTemplate","createDecorationType","overviewRulerLane","OverviewRulerLane","Right","overviewRulerColor","before","contentIconPath","getContentIconPath","margin","rangeBehavior","DecorationRangeBehavior","ClosedClosed","createTextEditorDecorationType","templateVariables","decoration","varName","encodeURIComponent"],"mappings":"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","file":"extension.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 60);\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n/// <reference path=\"./thenable.ts\" />\r\n'use strict';\r\nfunction __export(m) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst Is = require(\"./is\");\r\nconst messages_1 = require(\"./messages\");\r\nexports.RequestType = messages_1.RequestType;\r\nexports.RequestType0 = messages_1.RequestType0;\r\nexports.RequestType1 = messages_1.RequestType1;\r\nexports.RequestType2 = messages_1.RequestType2;\r\nexports.RequestType3 = messages_1.RequestType3;\r\nexports.RequestType4 = messages_1.RequestType4;\r\nexports.RequestType5 = messages_1.RequestType5;\r\nexports.RequestType6 = messages_1.RequestType6;\r\nexports.RequestType7 = messages_1.RequestType7;\r\nexports.RequestType8 = messages_1.RequestType8;\r\nexports.RequestType9 = messages_1.RequestType9;\r\nexports.ResponseError = messages_1.ResponseError;\r\nexports.ErrorCodes = messages_1.ErrorCodes;\r\nexports.NotificationType = messages_1.NotificationType;\r\nexports.NotificationType0 = messages_1.NotificationType0;\r\nexports.NotificationType1 = messages_1.NotificationType1;\r\nexports.NotificationType2 = messages_1.NotificationType2;\r\nexports.NotificationType3 = messages_1.NotificationType3;\r\nexports.NotificationType4 = messages_1.NotificationType4;\r\nexports.NotificationType5 = messages_1.NotificationType5;\r\nexports.NotificationType6 = messages_1.NotificationType6;\r\nexports.NotificationType7 = messages_1.NotificationType7;\r\nexports.NotificationType8 = messages_1.NotificationType8;\r\nexports.NotificationType9 = messages_1.NotificationType9;\r\nconst messageReader_1 = require(\"./messageReader\");\r\nexports.MessageReader = messageReader_1.MessageReader;\r\nexports.StreamMessageReader = messageReader_1.StreamMessageReader;\r\nexports.IPCMessageReader = messageReader_1.IPCMessageReader;\r\nexports.SocketMessageReader = messageReader_1.SocketMessageReader;\r\nconst messageWriter_1 = require(\"./messageWriter\");\r\nexports.MessageWriter = messageWriter_1.MessageWriter;\r\nexports.StreamMessageWriter = messageWriter_1.StreamMessageWriter;\r\nexports.IPCMessageWriter = messageWriter_1.IPCMessageWriter;\r\nexports.SocketMessageWriter = messageWriter_1.SocketMessageWriter;\r\nconst events_1 = require(\"./events\");\r\nexports.Disposable = events_1.Disposable;\r\nexports.Event = events_1.Event;\r\nexports.Emitter = events_1.Emitter;\r\nconst cancellation_1 = require(\"./cancellation\");\r\nexports.CancellationTokenSource = cancellation_1.CancellationTokenSource;\r\nexports.CancellationToken = cancellation_1.CancellationToken;\r\nconst linkedMap_1 = require(\"./linkedMap\");\r\n__export(require(\"./pipeSupport\"));\r\n__export(require(\"./socketSupport\"));\r\nvar CancelNotification;\r\n(function (CancelNotification) {\r\n    CancelNotification.type = new messages_1.NotificationType('$/cancelRequest');\r\n})(CancelNotification || (CancelNotification = {}));\r\nvar ProgressNotification;\r\n(function (ProgressNotification) {\r\n    ProgressNotification.type = new messages_1.NotificationType('$/progress');\r\n})(ProgressNotification || (ProgressNotification = {}));\r\nclass ProgressType {\r\n    constructor() {\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.ProgressType = ProgressType;\r\nexports.NullLogger = Object.freeze({\r\n    error: () => { },\r\n    warn: () => { },\r\n    info: () => { },\r\n    log: () => { }\r\n});\r\nvar Trace;\r\n(function (Trace) {\r\n    Trace[Trace[\"Off\"] = 0] = \"Off\";\r\n    Trace[Trace[\"Messages\"] = 1] = \"Messages\";\r\n    Trace[Trace[\"Verbose\"] = 2] = \"Verbose\";\r\n})(Trace = exports.Trace || (exports.Trace = {}));\r\n(function (Trace) {\r\n    function fromString(value) {\r\n        value = value.toLowerCase();\r\n        switch (value) {\r\n            case 'off':\r\n                return Trace.Off;\r\n            case 'messages':\r\n                return Trace.Messages;\r\n            case 'verbose':\r\n                return Trace.Verbose;\r\n            default:\r\n                return Trace.Off;\r\n        }\r\n    }\r\n    Trace.fromString = fromString;\r\n    function toString(value) {\r\n        switch (value) {\r\n            case Trace.Off:\r\n                return 'off';\r\n            case Trace.Messages:\r\n                return 'messages';\r\n            case Trace.Verbose:\r\n                return 'verbose';\r\n            default:\r\n                return 'off';\r\n        }\r\n    }\r\n    Trace.toString = toString;\r\n})(Trace = exports.Trace || (exports.Trace = {}));\r\nvar TraceFormat;\r\n(function (TraceFormat) {\r\n    TraceFormat[\"Text\"] = \"text\";\r\n    TraceFormat[\"JSON\"] = \"json\";\r\n})(TraceFormat = exports.TraceFormat || (exports.TraceFormat = {}));\r\n(function (TraceFormat) {\r\n    function fromString(value) {\r\n        value = value.toLowerCase();\r\n        if (value === 'json') {\r\n            return TraceFormat.JSON;\r\n        }\r\n        else {\r\n            return TraceFormat.Text;\r\n        }\r\n    }\r\n    TraceFormat.fromString = fromString;\r\n})(TraceFormat = exports.TraceFormat || (exports.TraceFormat = {}));\r\nvar SetTraceNotification;\r\n(function (SetTraceNotification) {\r\n    SetTraceNotification.type = new messages_1.NotificationType('$/setTraceNotification');\r\n})(SetTraceNotification = exports.SetTraceNotification || (exports.SetTraceNotification = {}));\r\nvar LogTraceNotification;\r\n(function (LogTraceNotification) {\r\n    LogTraceNotification.type = new messages_1.NotificationType('$/logTraceNotification');\r\n})(LogTraceNotification = exports.LogTraceNotification || (exports.LogTraceNotification = {}));\r\nvar ConnectionErrors;\r\n(function (ConnectionErrors) {\r\n    /**\r\n     * The connection is closed.\r\n     */\r\n    ConnectionErrors[ConnectionErrors[\"Closed\"] = 1] = \"Closed\";\r\n    /**\r\n     * The connection got disposed.\r\n     */\r\n    ConnectionErrors[ConnectionErrors[\"Disposed\"] = 2] = \"Disposed\";\r\n    /**\r\n     * The connection is already in listening mode.\r\n     */\r\n    ConnectionErrors[ConnectionErrors[\"AlreadyListening\"] = 3] = \"AlreadyListening\";\r\n})(ConnectionErrors = exports.ConnectionErrors || (exports.ConnectionErrors = {}));\r\nclass ConnectionError extends Error {\r\n    constructor(code, message) {\r\n        super(message);\r\n        this.code = code;\r\n        Object.setPrototypeOf(this, ConnectionError.prototype);\r\n    }\r\n}\r\nexports.ConnectionError = ConnectionError;\r\nvar ConnectionStrategy;\r\n(function (ConnectionStrategy) {\r\n    function is(value) {\r\n        let candidate = value;\r\n        return candidate && Is.func(candidate.cancelUndispatched);\r\n    }\r\n    ConnectionStrategy.is = is;\r\n})(ConnectionStrategy = exports.ConnectionStrategy || (exports.ConnectionStrategy = {}));\r\nvar ConnectionState;\r\n(function (ConnectionState) {\r\n    ConnectionState[ConnectionState[\"New\"] = 1] = \"New\";\r\n    ConnectionState[ConnectionState[\"Listening\"] = 2] = \"Listening\";\r\n    ConnectionState[ConnectionState[\"Closed\"] = 3] = \"Closed\";\r\n    ConnectionState[ConnectionState[\"Disposed\"] = 4] = \"Disposed\";\r\n})(ConnectionState || (ConnectionState = {}));\r\nfunction _createMessageConnection(messageReader, messageWriter, logger, strategy) {\r\n    let sequenceNumber = 0;\r\n    let notificationSquenceNumber = 0;\r\n    let unknownResponseSquenceNumber = 0;\r\n    const version = '2.0';\r\n    let starRequestHandler = undefined;\r\n    let requestHandlers = Object.create(null);\r\n    let starNotificationHandler = undefined;\r\n    let notificationHandlers = Object.create(null);\r\n    let progressHandlers = new Map();\r\n    let timer;\r\n    let messageQueue = new linkedMap_1.LinkedMap();\r\n    let responsePromises = Object.create(null);\r\n    let requestTokens = Object.create(null);\r\n    let trace = Trace.Off;\r\n    let traceFormat = TraceFormat.Text;\r\n    let tracer;\r\n    let state = ConnectionState.New;\r\n    let errorEmitter = new events_1.Emitter();\r\n    let closeEmitter = new events_1.Emitter();\r\n    let unhandledNotificationEmitter = new events_1.Emitter();\r\n    let unhandledProgressEmitter = new events_1.Emitter();\r\n    let disposeEmitter = new events_1.Emitter();\r\n    function createRequestQueueKey(id) {\r\n        return 'req-' + id.toString();\r\n    }\r\n    function createResponseQueueKey(id) {\r\n        if (id === null) {\r\n            return 'res-unknown-' + (++unknownResponseSquenceNumber).toString();\r\n        }\r\n        else {\r\n            return 'res-' + id.toString();\r\n        }\r\n    }\r\n    function createNotificationQueueKey() {\r\n        return 'not-' + (++notificationSquenceNumber).toString();\r\n    }\r\n    function addMessageToQueue(queue, message) {\r\n        if (messages_1.isRequestMessage(message)) {\r\n            queue.set(createRequestQueueKey(message.id), message);\r\n        }\r\n        else if (messages_1.isResponseMessage(message)) {\r\n            queue.set(createResponseQueueKey(message.id), message);\r\n        }\r\n        else {\r\n            queue.set(createNotificationQueueKey(), message);\r\n        }\r\n    }\r\n    function cancelUndispatched(_message) {\r\n        return undefined;\r\n    }\r\n    function isListening() {\r\n        return state === ConnectionState.Listening;\r\n    }\r\n    function isClosed() {\r\n        return state === ConnectionState.Closed;\r\n    }\r\n    function isDisposed() {\r\n        return state === ConnectionState.Disposed;\r\n    }\r\n    function closeHandler() {\r\n        if (state === ConnectionState.New || state === ConnectionState.Listening) {\r\n            state = ConnectionState.Closed;\r\n            closeEmitter.fire(undefined);\r\n        }\r\n        // If the connection is disposed don't sent close events.\r\n    }\r\n    ;\r\n    function readErrorHandler(error) {\r\n        errorEmitter.fire([error, undefined, undefined]);\r\n    }\r\n    function writeErrorHandler(data) {\r\n        errorEmitter.fire(data);\r\n    }\r\n    messageReader.onClose(closeHandler);\r\n    messageReader.onError(readErrorHandler);\r\n    messageWriter.onClose(closeHandler);\r\n    messageWriter.onError(writeErrorHandler);\r\n    function triggerMessageQueue() {\r\n        if (timer || messageQueue.size === 0) {\r\n            return;\r\n        }\r\n        timer = setImmediate(() => {\r\n            timer = undefined;\r\n            processMessageQueue();\r\n        });\r\n    }\r\n    function processMessageQueue() {\r\n        if (messageQueue.size === 0) {\r\n            return;\r\n        }\r\n        let message = messageQueue.shift();\r\n        try {\r\n            if (messages_1.isRequestMessage(message)) {\r\n                handleRequest(message);\r\n            }\r\n            else if (messages_1.isNotificationMessage(message)) {\r\n                handleNotification(message);\r\n            }\r\n            else if (messages_1.isResponseMessage(message)) {\r\n                handleResponse(message);\r\n            }\r\n            else {\r\n                handleInvalidMessage(message);\r\n            }\r\n        }\r\n        finally {\r\n            triggerMessageQueue();\r\n        }\r\n    }\r\n    let callback = (message) => {\r\n        try {\r\n            // We have received a cancellation message. Check if the message is still in the queue\r\n            // and cancel it if allowed to do so.\r\n            if (messages_1.isNotificationMessage(message) && message.method === CancelNotification.type.method) {\r\n                let key = createRequestQueueKey(message.params.id);\r\n                let toCancel = messageQueue.get(key);\r\n                if (messages_1.isRequestMessage(toCancel)) {\r\n                    let response = strategy && strategy.cancelUndispatched ? strategy.cancelUndispatched(toCancel, cancelUndispatched) : cancelUndispatched(toCancel);\r\n                    if (response && (response.error !== void 0 || response.result !== void 0)) {\r\n                        messageQueue.delete(key);\r\n                        response.id = toCancel.id;\r\n                        traceSendingResponse(response, message.method, Date.now());\r\n                        messageWriter.write(response);\r\n                        return;\r\n                    }\r\n                }\r\n            }\r\n            addMessageToQueue(messageQueue, message);\r\n        }\r\n        finally {\r\n            triggerMessageQueue();\r\n        }\r\n    };\r\n    function handleRequest(requestMessage) {\r\n        if (isDisposed()) {\r\n            // we return here silently since we fired an event when the\r\n            // connection got disposed.\r\n            return;\r\n        }\r\n        function reply(resultOrError, method, startTime) {\r\n            let message = {\r\n                jsonrpc: version,\r\n                id: requestMessage.id\r\n            };\r\n            if (resultOrError instanceof messages_1.ResponseError) {\r\n                message.error = resultOrError.toJson();\r\n            }\r\n            else {\r\n                message.result = resultOrError === void 0 ? null : resultOrError;\r\n            }\r\n            traceSendingResponse(message, method, startTime);\r\n            messageWriter.write(message);\r\n        }\r\n        function replyError(error, method, startTime) {\r\n            let message = {\r\n                jsonrpc: version,\r\n                id: requestMessage.id,\r\n                error: error.toJson()\r\n            };\r\n            traceSendingResponse(message, method, startTime);\r\n            messageWriter.write(message);\r\n        }\r\n        function replySuccess(result, method, startTime) {\r\n            // The JSON RPC defines that a response must either have a result or an error\r\n            // So we can't treat undefined as a valid response result.\r\n            if (result === void 0) {\r\n                result = null;\r\n            }\r\n            let message = {\r\n                jsonrpc: version,\r\n                id: requestMessage.id,\r\n                result: result\r\n            };\r\n            traceSendingResponse(message, method, startTime);\r\n            messageWriter.write(message);\r\n        }\r\n        traceReceivedRequest(requestMessage);\r\n        let element = requestHandlers[requestMessage.method];\r\n        let type;\r\n        let requestHandler;\r\n        if (element) {\r\n            type = element.type;\r\n            requestHandler = element.handler;\r\n        }\r\n        let startTime = Date.now();\r\n        if (requestHandler || starRequestHandler) {\r\n            let cancellationSource = new cancellation_1.CancellationTokenSource();\r\n            let tokenKey = String(requestMessage.id);\r\n            requestTokens[tokenKey] = cancellationSource;\r\n            try {\r\n                let handlerResult;\r\n                if (requestMessage.params === void 0 || (type !== void 0 && type.numberOfParams === 0)) {\r\n                    handlerResult = requestHandler\r\n                        ? requestHandler(cancellationSource.token)\r\n                        : starRequestHandler(requestMessage.method, cancellationSource.token);\r\n                }\r\n                else if (Is.array(requestMessage.params) && (type === void 0 || type.numberOfParams > 1)) {\r\n                    handlerResult = requestHandler\r\n                        ? requestHandler(...requestMessage.params, cancellationSource.token)\r\n                        : starRequestHandler(requestMessage.method, ...requestMessage.params, cancellationSource.token);\r\n                }\r\n                else {\r\n                    handlerResult = requestHandler\r\n                        ? requestHandler(requestMessage.params, cancellationSource.token)\r\n                        : starRequestHandler(requestMessage.method, requestMessage.params, cancellationSource.token);\r\n                }\r\n                let promise = handlerResult;\r\n                if (!handlerResult) {\r\n                    delete requestTokens[tokenKey];\r\n                    replySuccess(handlerResult, requestMessage.method, startTime);\r\n                }\r\n                else if (promise.then) {\r\n                    promise.then((resultOrError) => {\r\n                        delete requestTokens[tokenKey];\r\n                        reply(resultOrError, requestMessage.method, startTime);\r\n                    }, error => {\r\n                        delete requestTokens[tokenKey];\r\n                        if (error instanceof messages_1.ResponseError) {\r\n                            replyError(error, requestMessage.method, startTime);\r\n                        }\r\n                        else if (error && Is.string(error.message)) {\r\n                            replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InternalError, `Request ${requestMessage.method} failed with message: ${error.message}`), requestMessage.method, startTime);\r\n                        }\r\n                        else {\r\n                            replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InternalError, `Request ${requestMessage.method} failed unexpectedly without providing any details.`), requestMessage.method, startTime);\r\n                        }\r\n                    });\r\n                }\r\n                else {\r\n                    delete requestTokens[tokenKey];\r\n                    reply(handlerResult, requestMessage.method, startTime);\r\n                }\r\n            }\r\n            catch (error) {\r\n                delete requestTokens[tokenKey];\r\n                if (error instanceof messages_1.ResponseError) {\r\n                    reply(error, requestMessage.method, startTime);\r\n                }\r\n                else if (error && Is.string(error.message)) {\r\n                    replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InternalError, `Request ${requestMessage.method} failed with message: ${error.message}`), requestMessage.method, startTime);\r\n                }\r\n                else {\r\n                    replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InternalError, `Request ${requestMessage.method} failed unexpectedly without providing any details.`), requestMessage.method, startTime);\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            replyError(new messages_1.ResponseError(messages_1.ErrorCodes.MethodNotFound, `Unhandled method ${requestMessage.method}`), requestMessage.method, startTime);\r\n        }\r\n    }\r\n    function handleResponse(responseMessage) {\r\n        if (isDisposed()) {\r\n            // See handle request.\r\n            return;\r\n        }\r\n        if (responseMessage.id === null) {\r\n            if (responseMessage.error) {\r\n                logger.error(`Received response message without id: Error is: \\n${JSON.stringify(responseMessage.error, undefined, 4)}`);\r\n            }\r\n            else {\r\n                logger.error(`Received response message without id. No further error information provided.`);\r\n            }\r\n        }\r\n        else {\r\n            let key = String(responseMessage.id);\r\n            let responsePromise = responsePromises[key];\r\n            traceReceivedResponse(responseMessage, responsePromise);\r\n            if (responsePromise) {\r\n                delete responsePromises[key];\r\n                try {\r\n                    if (responseMessage.error) {\r\n                        let error = responseMessage.error;\r\n                        responsePromise.reject(new messages_1.ResponseError(error.code, error.message, error.data));\r\n                    }\r\n                    else if (responseMessage.result !== void 0) {\r\n                        responsePromise.resolve(responseMessage.result);\r\n                    }\r\n                    else {\r\n                        throw new Error('Should never happen.');\r\n                    }\r\n                }\r\n                catch (error) {\r\n                    if (error.message) {\r\n                        logger.error(`Response handler '${responsePromise.method}' failed with message: ${error.message}`);\r\n                    }\r\n                    else {\r\n                        logger.error(`Response handler '${responsePromise.method}' failed unexpectedly.`);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    function handleNotification(message) {\r\n        if (isDisposed()) {\r\n            // See handle request.\r\n            return;\r\n        }\r\n        let type = undefined;\r\n        let notificationHandler;\r\n        if (message.method === CancelNotification.type.method) {\r\n            notificationHandler = (params) => {\r\n                let id = params.id;\r\n                let source = requestTokens[String(id)];\r\n                if (source) {\r\n                    source.cancel();\r\n                }\r\n            };\r\n        }\r\n        else {\r\n            let element = notificationHandlers[message.method];\r\n            if (element) {\r\n                notificationHandler = element.handler;\r\n                type = element.type;\r\n            }\r\n        }\r\n        if (notificationHandler || starNotificationHandler) {\r\n            try {\r\n                traceReceivedNotification(message);\r\n                if (message.params === void 0 || (type !== void 0 && type.numberOfParams === 0)) {\r\n                    notificationHandler ? notificationHandler() : starNotificationHandler(message.method);\r\n                }\r\n                else if (Is.array(message.params) && (type === void 0 || type.numberOfParams > 1)) {\r\n                    notificationHandler ? notificationHandler(...message.params) : starNotificationHandler(message.method, ...message.params);\r\n                }\r\n                else {\r\n                    notificationHandler ? notificationHandler(message.params) : starNotificationHandler(message.method, message.params);\r\n                }\r\n            }\r\n            catch (error) {\r\n                if (error.message) {\r\n                    logger.error(`Notification handler '${message.method}' failed with message: ${error.message}`);\r\n                }\r\n                else {\r\n                    logger.error(`Notification handler '${message.method}' failed unexpectedly.`);\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            unhandledNotificationEmitter.fire(message);\r\n        }\r\n    }\r\n    function handleInvalidMessage(message) {\r\n        if (!message) {\r\n            logger.error('Received empty message.');\r\n            return;\r\n        }\r\n        logger.error(`Received message which is neither a response nor a notification message:\\n${JSON.stringify(message, null, 4)}`);\r\n        // Test whether we find an id to reject the promise\r\n        let responseMessage = message;\r\n        if (Is.string(responseMessage.id) || Is.number(responseMessage.id)) {\r\n            let key = String(responseMessage.id);\r\n            let responseHandler = responsePromises[key];\r\n            if (responseHandler) {\r\n                responseHandler.reject(new Error('The received response has neither a result nor an error property.'));\r\n            }\r\n        }\r\n    }\r\n    function traceSendingRequest(message) {\r\n        if (trace === Trace.Off || !tracer) {\r\n            return;\r\n        }\r\n        if (traceFormat === TraceFormat.Text) {\r\n            let data = undefined;\r\n            if (trace === Trace.Verbose && message.params) {\r\n                data = `Params: ${JSON.stringify(message.params, null, 4)}\\n\\n`;\r\n            }\r\n            tracer.log(`Sending request '${message.method} - (${message.id})'.`, data);\r\n        }\r\n        else {\r\n            logLSPMessage('send-request', message);\r\n        }\r\n    }\r\n    function traceSendingNotification(message) {\r\n        if (trace === Trace.Off || !tracer) {\r\n            return;\r\n        }\r\n        if (traceFormat === TraceFormat.Text) {\r\n            let data = undefined;\r\n            if (trace === Trace.Verbose) {\r\n                if (message.params) {\r\n                    data = `Params: ${JSON.stringify(message.params, null, 4)}\\n\\n`;\r\n                }\r\n                else {\r\n                    data = 'No parameters provided.\\n\\n';\r\n                }\r\n            }\r\n            tracer.log(`Sending notification '${message.method}'.`, data);\r\n        }\r\n        else {\r\n            logLSPMessage('send-notification', message);\r\n        }\r\n    }\r\n    function traceSendingResponse(message, method, startTime) {\r\n        if (trace === Trace.Off || !tracer) {\r\n            return;\r\n        }\r\n        if (traceFormat === TraceFormat.Text) {\r\n            let data = undefined;\r\n            if (trace === Trace.Verbose) {\r\n                if (message.error && message.error.data) {\r\n                    data = `Error data: ${JSON.stringify(message.error.data, null, 4)}\\n\\n`;\r\n                }\r\n                else {\r\n                    if (message.result) {\r\n                        data = `Result: ${JSON.stringify(message.result, null, 4)}\\n\\n`;\r\n                    }\r\n                    else if (message.error === void 0) {\r\n                        data = 'No result returned.\\n\\n';\r\n                    }\r\n                }\r\n            }\r\n            tracer.log(`Sending response '${method} - (${message.id})'. Processing request took ${Date.now() - startTime}ms`, data);\r\n        }\r\n        else {\r\n            logLSPMessage('send-response', message);\r\n        }\r\n    }\r\n    function traceReceivedRequest(message) {\r\n        if (trace === Trace.Off || !tracer) {\r\n            return;\r\n        }\r\n        if (traceFormat === TraceFormat.Text) {\r\n            let data = undefined;\r\n            if (trace === Trace.Verbose && message.params) {\r\n                data = `Params: ${JSON.stringify(message.params, null, 4)}\\n\\n`;\r\n            }\r\n            tracer.log(`Received request '${message.method} - (${message.id})'.`, data);\r\n        }\r\n        else {\r\n            logLSPMessage('receive-request', message);\r\n        }\r\n    }\r\n    function traceReceivedNotification(message) {\r\n        if (trace === Trace.Off || !tracer || message.method === LogTraceNotification.type.method) {\r\n            return;\r\n        }\r\n        if (traceFormat === TraceFormat.Text) {\r\n            let data = undefined;\r\n            if (trace === Trace.Verbose) {\r\n                if (message.params) {\r\n                    data = `Params: ${JSON.stringify(message.params, null, 4)}\\n\\n`;\r\n                }\r\n                else {\r\n                    data = 'No parameters provided.\\n\\n';\r\n                }\r\n            }\r\n            tracer.log(`Received notification '${message.method}'.`, data);\r\n        }\r\n        else {\r\n            logLSPMessage('receive-notification', message);\r\n        }\r\n    }\r\n    function traceReceivedResponse(message, responsePromise) {\r\n        if (trace === Trace.Off || !tracer) {\r\n            return;\r\n        }\r\n        if (traceFormat === TraceFormat.Text) {\r\n            let data = undefined;\r\n            if (trace === Trace.Verbose) {\r\n                if (message.error && message.error.data) {\r\n                    data = `Error data: ${JSON.stringify(message.error.data, null, 4)}\\n\\n`;\r\n                }\r\n                else {\r\n                    if (message.result) {\r\n                        data = `Result: ${JSON.stringify(message.result, null, 4)}\\n\\n`;\r\n                    }\r\n                    else if (message.error === void 0) {\r\n                        data = 'No result returned.\\n\\n';\r\n                    }\r\n                }\r\n            }\r\n            if (responsePromise) {\r\n                let error = message.error ? ` Request failed: ${message.error.message} (${message.error.code}).` : '';\r\n                tracer.log(`Received response '${responsePromise.method} - (${message.id})' in ${Date.now() - responsePromise.timerStart}ms.${error}`, data);\r\n            }\r\n            else {\r\n                tracer.log(`Received response ${message.id} without active response promise.`, data);\r\n            }\r\n        }\r\n        else {\r\n            logLSPMessage('receive-response', message);\r\n        }\r\n    }\r\n    function logLSPMessage(type, message) {\r\n        if (!tracer || trace === Trace.Off) {\r\n            return;\r\n        }\r\n        const lspMessage = {\r\n            isLSPMessage: true,\r\n            type,\r\n            message,\r\n            timestamp: Date.now()\r\n        };\r\n        tracer.log(lspMessage);\r\n    }\r\n    function throwIfClosedOrDisposed() {\r\n        if (isClosed()) {\r\n            throw new ConnectionError(ConnectionErrors.Closed, 'Connection is closed.');\r\n        }\r\n        if (isDisposed()) {\r\n            throw new ConnectionError(ConnectionErrors.Disposed, 'Connection is disposed.');\r\n        }\r\n    }\r\n    function throwIfListening() {\r\n        if (isListening()) {\r\n            throw new ConnectionError(ConnectionErrors.AlreadyListening, 'Connection is already listening');\r\n        }\r\n    }\r\n    function throwIfNotListening() {\r\n        if (!isListening()) {\r\n            throw new Error('Call listen() first.');\r\n        }\r\n    }\r\n    function undefinedToNull(param) {\r\n        if (param === void 0) {\r\n            return null;\r\n        }\r\n        else {\r\n            return param;\r\n        }\r\n    }\r\n    function computeMessageParams(type, params) {\r\n        let result;\r\n        let numberOfParams = type.numberOfParams;\r\n        switch (numberOfParams) {\r\n            case 0:\r\n                result = null;\r\n                break;\r\n            case 1:\r\n                result = undefinedToNull(params[0]);\r\n                break;\r\n            default:\r\n                result = [];\r\n                for (let i = 0; i < params.length && i < numberOfParams; i++) {\r\n                    result.push(undefinedToNull(params[i]));\r\n                }\r\n                if (params.length < numberOfParams) {\r\n                    for (let i = params.length; i < numberOfParams; i++) {\r\n                        result.push(null);\r\n                    }\r\n                }\r\n                break;\r\n        }\r\n        return result;\r\n    }\r\n    let connection = {\r\n        sendNotification: (type, ...params) => {\r\n            throwIfClosedOrDisposed();\r\n            let method;\r\n            let messageParams;\r\n            if (Is.string(type)) {\r\n                method = type;\r\n                switch (params.length) {\r\n                    case 0:\r\n                        messageParams = null;\r\n                        break;\r\n                    case 1:\r\n                        messageParams = params[0];\r\n                        break;\r\n                    default:\r\n                        messageParams = params;\r\n                        break;\r\n                }\r\n            }\r\n            else {\r\n                method = type.method;\r\n                messageParams = computeMessageParams(type, params);\r\n            }\r\n            let notificationMessage = {\r\n                jsonrpc: version,\r\n                method: method,\r\n                params: messageParams\r\n            };\r\n            traceSendingNotification(notificationMessage);\r\n            messageWriter.write(notificationMessage);\r\n        },\r\n        onNotification: (type, handler) => {\r\n            throwIfClosedOrDisposed();\r\n            if (Is.func(type)) {\r\n                starNotificationHandler = type;\r\n            }\r\n            else if (handler) {\r\n                if (Is.string(type)) {\r\n                    notificationHandlers[type] = { type: undefined, handler };\r\n                }\r\n                else {\r\n                    notificationHandlers[type.method] = { type, handler };\r\n                }\r\n            }\r\n        },\r\n        onProgress: (_type, token, handler) => {\r\n            if (progressHandlers.has(token)) {\r\n                throw new Error(`Progress handler for token ${token} already registered`);\r\n            }\r\n            progressHandlers.set(token, handler);\r\n            return {\r\n                dispose: () => {\r\n                    progressHandlers.delete(token);\r\n                }\r\n            };\r\n        },\r\n        sendProgress: (_type, token, value) => {\r\n            connection.sendNotification(ProgressNotification.type, { token, value });\r\n        },\r\n        onUnhandledProgress: unhandledProgressEmitter.event,\r\n        sendRequest: (type, ...params) => {\r\n            throwIfClosedOrDisposed();\r\n            throwIfNotListening();\r\n            let method;\r\n            let messageParams;\r\n            let token = undefined;\r\n            if (Is.string(type)) {\r\n                method = type;\r\n                switch (params.length) {\r\n                    case 0:\r\n                        messageParams = null;\r\n                        break;\r\n                    case 1:\r\n                        // The cancellation token is optional so it can also be undefined.\r\n                        if (cancellation_1.CancellationToken.is(params[0])) {\r\n                            messageParams = null;\r\n                            token = params[0];\r\n                        }\r\n                        else {\r\n                            messageParams = undefinedToNull(params[0]);\r\n                        }\r\n                        break;\r\n                    default:\r\n                        const last = params.length - 1;\r\n                        if (cancellation_1.CancellationToken.is(params[last])) {\r\n                            token = params[last];\r\n                            if (params.length === 2) {\r\n                                messageParams = undefinedToNull(params[0]);\r\n                            }\r\n                            else {\r\n                                messageParams = params.slice(0, last).map(value => undefinedToNull(value));\r\n                            }\r\n                        }\r\n                        else {\r\n                            messageParams = params.map(value => undefinedToNull(value));\r\n                        }\r\n                        break;\r\n                }\r\n            }\r\n            else {\r\n                method = type.method;\r\n                messageParams = computeMessageParams(type, params);\r\n                let numberOfParams = type.numberOfParams;\r\n                token = cancellation_1.CancellationToken.is(params[numberOfParams]) ? params[numberOfParams] : undefined;\r\n            }\r\n            let id = sequenceNumber++;\r\n            let result = new Promise((resolve, reject) => {\r\n                let requestMessage = {\r\n                    jsonrpc: version,\r\n                    id: id,\r\n                    method: method,\r\n                    params: messageParams\r\n                };\r\n                let responsePromise = { method: method, timerStart: Date.now(), resolve, reject };\r\n                traceSendingRequest(requestMessage);\r\n                try {\r\n                    messageWriter.write(requestMessage);\r\n                }\r\n                catch (e) {\r\n                    // Writing the message failed. So we need to reject the promise.\r\n                    responsePromise.reject(new messages_1.ResponseError(messages_1.ErrorCodes.MessageWriteError, e.message ? e.message : 'Unknown reason'));\r\n                    responsePromise = null;\r\n                }\r\n                if (responsePromise) {\r\n                    responsePromises[String(id)] = responsePromise;\r\n                }\r\n            });\r\n            if (token) {\r\n                token.onCancellationRequested(() => {\r\n                    connection.sendNotification(CancelNotification.type, { id });\r\n                });\r\n            }\r\n            return result;\r\n        },\r\n        onRequest: (type, handler) => {\r\n            throwIfClosedOrDisposed();\r\n            if (Is.func(type)) {\r\n                starRequestHandler = type;\r\n            }\r\n            else if (handler) {\r\n                if (Is.string(type)) {\r\n                    requestHandlers[type] = { type: undefined, handler };\r\n                }\r\n                else {\r\n                    requestHandlers[type.method] = { type, handler };\r\n                }\r\n            }\r\n        },\r\n        trace: (_value, _tracer, sendNotificationOrTraceOptions) => {\r\n            let _sendNotification = false;\r\n            let _traceFormat = TraceFormat.Text;\r\n            if (sendNotificationOrTraceOptions !== void 0) {\r\n                if (Is.boolean(sendNotificationOrTraceOptions)) {\r\n                    _sendNotification = sendNotificationOrTraceOptions;\r\n                }\r\n                else {\r\n                    _sendNotification = sendNotificationOrTraceOptions.sendNotification || false;\r\n                    _traceFormat = sendNotificationOrTraceOptions.traceFormat || TraceFormat.Text;\r\n                }\r\n            }\r\n            trace = _value;\r\n            traceFormat = _traceFormat;\r\n            if (trace === Trace.Off) {\r\n                tracer = undefined;\r\n            }\r\n            else {\r\n                tracer = _tracer;\r\n            }\r\n            if (_sendNotification && !isClosed() && !isDisposed()) {\r\n                connection.sendNotification(SetTraceNotification.type, { value: Trace.toString(_value) });\r\n            }\r\n        },\r\n        onError: errorEmitter.event,\r\n        onClose: closeEmitter.event,\r\n        onUnhandledNotification: unhandledNotificationEmitter.event,\r\n        onDispose: disposeEmitter.event,\r\n        dispose: () => {\r\n            if (isDisposed()) {\r\n                return;\r\n            }\r\n            state = ConnectionState.Disposed;\r\n            disposeEmitter.fire(undefined);\r\n            let error = new Error('Connection got disposed.');\r\n            Object.keys(responsePromises).forEach((key) => {\r\n                responsePromises[key].reject(error);\r\n            });\r\n            responsePromises = Object.create(null);\r\n            requestTokens = Object.create(null);\r\n            messageQueue = new linkedMap_1.LinkedMap();\r\n            // Test for backwards compatibility\r\n            if (Is.func(messageWriter.dispose)) {\r\n                messageWriter.dispose();\r\n            }\r\n            if (Is.func(messageReader.dispose)) {\r\n                messageReader.dispose();\r\n            }\r\n        },\r\n        listen: () => {\r\n            throwIfClosedOrDisposed();\r\n            throwIfListening();\r\n            state = ConnectionState.Listening;\r\n            messageReader.listen(callback);\r\n        },\r\n        inspect: () => {\r\n            console.log(\"inspect\");\r\n        }\r\n    };\r\n    connection.onNotification(LogTraceNotification.type, (params) => {\r\n        if (trace === Trace.Off || !tracer) {\r\n            return;\r\n        }\r\n        tracer.log(params.message, trace === Trace.Verbose ? params.verbose : undefined);\r\n    });\r\n    connection.onNotification(ProgressNotification.type, (params) => {\r\n        const handler = progressHandlers.get(params.token);\r\n        if (handler) {\r\n            handler(params.value);\r\n        }\r\n        else {\r\n            unhandledProgressEmitter.fire(params);\r\n        }\r\n    });\r\n    return connection;\r\n}\r\nfunction isMessageReader(value) {\r\n    return value.listen !== void 0 && value.read === void 0;\r\n}\r\nfunction isMessageWriter(value) {\r\n    return value.write !== void 0 && value.end === void 0;\r\n}\r\nfunction createMessageConnection(input, output, logger, strategy) {\r\n    if (!logger) {\r\n        logger = exports.NullLogger;\r\n    }\r\n    let reader = isMessageReader(input) ? input : new messageReader_1.StreamMessageReader(input);\r\n    let writer = isMessageWriter(output) ? output : new messageWriter_1.StreamMessageWriter(output);\r\n    return _createMessageConnection(reader, writer, logger, strategy);\r\n}\r\nexports.createMessageConnection = createMessageConnection;\r\n","module.exports = require(\"vscode\");","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nfunction __export(m) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\nexports.ErrorCodes = vscode_jsonrpc_1.ErrorCodes;\r\nexports.ResponseError = vscode_jsonrpc_1.ResponseError;\r\nexports.CancellationToken = vscode_jsonrpc_1.CancellationToken;\r\nexports.CancellationTokenSource = vscode_jsonrpc_1.CancellationTokenSource;\r\nexports.Disposable = vscode_jsonrpc_1.Disposable;\r\nexports.Event = vscode_jsonrpc_1.Event;\r\nexports.Emitter = vscode_jsonrpc_1.Emitter;\r\nexports.Trace = vscode_jsonrpc_1.Trace;\r\nexports.TraceFormat = vscode_jsonrpc_1.TraceFormat;\r\nexports.SetTraceNotification = vscode_jsonrpc_1.SetTraceNotification;\r\nexports.LogTraceNotification = vscode_jsonrpc_1.LogTraceNotification;\r\nexports.RequestType = vscode_jsonrpc_1.RequestType;\r\nexports.RequestType0 = vscode_jsonrpc_1.RequestType0;\r\nexports.NotificationType = vscode_jsonrpc_1.NotificationType;\r\nexports.NotificationType0 = vscode_jsonrpc_1.NotificationType0;\r\nexports.MessageReader = vscode_jsonrpc_1.MessageReader;\r\nexports.MessageWriter = vscode_jsonrpc_1.MessageWriter;\r\nexports.ConnectionStrategy = vscode_jsonrpc_1.ConnectionStrategy;\r\nexports.StreamMessageReader = vscode_jsonrpc_1.StreamMessageReader;\r\nexports.StreamMessageWriter = vscode_jsonrpc_1.StreamMessageWriter;\r\nexports.IPCMessageReader = vscode_jsonrpc_1.IPCMessageReader;\r\nexports.IPCMessageWriter = vscode_jsonrpc_1.IPCMessageWriter;\r\nexports.createClientPipeTransport = vscode_jsonrpc_1.createClientPipeTransport;\r\nexports.createServerPipeTransport = vscode_jsonrpc_1.createServerPipeTransport;\r\nexports.generateRandomPipeName = vscode_jsonrpc_1.generateRandomPipeName;\r\nexports.createClientSocketTransport = vscode_jsonrpc_1.createClientSocketTransport;\r\nexports.createServerSocketTransport = vscode_jsonrpc_1.createServerSocketTransport;\r\nexports.ProgressType = vscode_jsonrpc_1.ProgressType;\r\n__export(require(\"vscode-languageserver-types\"));\r\n__export(require(\"./protocol\"));\r\nconst callHierarchy = require(\"./protocol.callHierarchy.proposed\");\r\nconst progress = require(\"./protocol.progress.proposed\");\r\nvar Proposed;\r\n(function (Proposed) {\r\n    let CallHierarchyRequest;\r\n    (function (CallHierarchyRequest) {\r\n        CallHierarchyRequest.type = callHierarchy.CallHierarchyRequest.type;\r\n    })(CallHierarchyRequest = Proposed.CallHierarchyRequest || (Proposed.CallHierarchyRequest = {}));\r\n    let CallHierarchyDirection;\r\n    (function (CallHierarchyDirection) {\r\n        CallHierarchyDirection.CallsFrom = callHierarchy.CallHierarchyDirection.CallsFrom;\r\n        CallHierarchyDirection.CallsTo = callHierarchy.CallHierarchyDirection.CallsTo;\r\n    })(CallHierarchyDirection = Proposed.CallHierarchyDirection || (Proposed.CallHierarchyDirection = {}));\r\n    // export type ProgressServerCapabilities = progress.ProgressServerCapabilities;\r\n    let WorkDoneProgress;\r\n    (function (WorkDoneProgress) {\r\n        WorkDoneProgress.type = progress.WorkDoneProgress.type;\r\n    })(WorkDoneProgress = Proposed.WorkDoneProgress || (Proposed.WorkDoneProgress = {}));\r\n    let WorkDoneProgressCreateRequest;\r\n    (function (WorkDoneProgressCreateRequest) {\r\n        WorkDoneProgressCreateRequest.type = progress.WorkDoneProgressCreateRequest.type;\r\n    })(WorkDoneProgressCreateRequest = Proposed.WorkDoneProgressCreateRequest || (Proposed.WorkDoneProgressCreateRequest = {}));\r\n    let WorkDoneProgressCancelNotification;\r\n    (function (WorkDoneProgressCancelNotification) {\r\n        WorkDoneProgressCancelNotification.type = progress.WorkDoneProgressCancelNotification.type;\r\n    })(WorkDoneProgressCancelNotification = Proposed.WorkDoneProgressCancelNotification || (Proposed.WorkDoneProgressCancelNotification = {}));\r\n})(Proposed = exports.Proposed || (exports.Proposed = {}));\r\nfunction createProtocolConnection(reader, writer, logger, strategy) {\r\n    return vscode_jsonrpc_1.createMessageConnection(reader, writer, logger, strategy);\r\n}\r\nexports.createProtocolConnection = createProtocolConnection;\r\n","/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\n'use strict';\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction boolean(value) {\n    return value === true || value === false;\n}\nexports.boolean = boolean;\nfunction string(value) {\n    return typeof value === 'string' || value instanceof String;\n}\nexports.string = string;\nfunction number(value) {\n    return typeof value === 'number' || value instanceof Number;\n}\nexports.number = number;\nfunction error(value) {\n    return value instanceof Error;\n}\nexports.error = error;\nfunction func(value) {\n    return typeof value === 'function';\n}\nexports.func = func;\nfunction array(value) {\n    return Array.isArray(value);\n}\nexports.array = array;\nfunction stringArray(value) {\n    return array(value) && value.every(elem => string(elem));\n}\nexports.stringArray = stringArray;\nfunction typedArray(value, check) {\n    return Array.isArray(value) && value.every(check);\n}\nexports.typedArray = typedArray;\nfunction thenable(value) {\n    return value && func(value.then);\n}\nexports.thenable = thenable;\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nfunction boolean(value) {\r\n    return value === true || value === false;\r\n}\r\nexports.boolean = boolean;\r\nfunction string(value) {\r\n    return typeof value === 'string' || value instanceof String;\r\n}\r\nexports.string = string;\r\nfunction number(value) {\r\n    return typeof value === 'number' || value instanceof Number;\r\n}\r\nexports.number = number;\r\nfunction error(value) {\r\n    return value instanceof Error;\r\n}\r\nexports.error = error;\r\nfunction func(value) {\r\n    return typeof value === 'function';\r\n}\r\nexports.func = func;\r\nfunction array(value) {\r\n    return Array.isArray(value);\r\n}\r\nexports.array = array;\r\nfunction stringArray(value) {\r\n    return array(value) && value.every(elem => string(elem));\r\n}\r\nexports.stringArray = stringArray;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nfunction __export(m) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\nexports.ErrorCodes = vscode_jsonrpc_1.ErrorCodes;\r\nexports.ResponseError = vscode_jsonrpc_1.ResponseError;\r\nexports.CancellationToken = vscode_jsonrpc_1.CancellationToken;\r\nexports.CancellationTokenSource = vscode_jsonrpc_1.CancellationTokenSource;\r\nexports.Disposable = vscode_jsonrpc_1.Disposable;\r\nexports.Event = vscode_jsonrpc_1.Event;\r\nexports.Emitter = vscode_jsonrpc_1.Emitter;\r\nexports.Trace = vscode_jsonrpc_1.Trace;\r\nexports.TraceFormat = vscode_jsonrpc_1.TraceFormat;\r\nexports.SetTraceNotification = vscode_jsonrpc_1.SetTraceNotification;\r\nexports.LogTraceNotification = vscode_jsonrpc_1.LogTraceNotification;\r\nexports.RequestType = vscode_jsonrpc_1.RequestType;\r\nexports.RequestType0 = vscode_jsonrpc_1.RequestType0;\r\nexports.NotificationType = vscode_jsonrpc_1.NotificationType;\r\nexports.NotificationType0 = vscode_jsonrpc_1.NotificationType0;\r\nexports.MessageReader = vscode_jsonrpc_1.MessageReader;\r\nexports.MessageWriter = vscode_jsonrpc_1.MessageWriter;\r\nexports.ConnectionStrategy = vscode_jsonrpc_1.ConnectionStrategy;\r\nexports.StreamMessageReader = vscode_jsonrpc_1.StreamMessageReader;\r\nexports.StreamMessageWriter = vscode_jsonrpc_1.StreamMessageWriter;\r\nexports.IPCMessageReader = vscode_jsonrpc_1.IPCMessageReader;\r\nexports.IPCMessageWriter = vscode_jsonrpc_1.IPCMessageWriter;\r\nexports.createClientPipeTransport = vscode_jsonrpc_1.createClientPipeTransport;\r\nexports.createServerPipeTransport = vscode_jsonrpc_1.createServerPipeTransport;\r\nexports.generateRandomPipeName = vscode_jsonrpc_1.generateRandomPipeName;\r\nexports.createClientSocketTransport = vscode_jsonrpc_1.createClientSocketTransport;\r\nexports.createServerSocketTransport = vscode_jsonrpc_1.createServerSocketTransport;\r\n__export(require(\"vscode-languageserver-types\"));\r\n__export(require(\"./protocol\"));\r\nconst callHierarchy = require(\"./protocol.callHierarchy.proposed\");\r\nconst progress = require(\"./protocol.progress.proposed\");\r\nconst sr = require(\"./protocol.selectionRange.proposed\");\r\nvar Proposed;\r\n(function (Proposed) {\r\n    let SelectionRangeRequest;\r\n    (function (SelectionRangeRequest) {\r\n        SelectionRangeRequest.type = sr.SelectionRangeRequest.type;\r\n    })(SelectionRangeRequest = Proposed.SelectionRangeRequest || (Proposed.SelectionRangeRequest = {}));\r\n    let CallHierarchyRequest;\r\n    (function (CallHierarchyRequest) {\r\n        CallHierarchyRequest.type = callHierarchy.CallHierarchyRequest.type;\r\n    })(CallHierarchyRequest = Proposed.CallHierarchyRequest || (Proposed.CallHierarchyRequest = {}));\r\n    let CallHierarchyDirection;\r\n    (function (CallHierarchyDirection) {\r\n        CallHierarchyDirection.CallsFrom = callHierarchy.CallHierarchyDirection.CallsFrom;\r\n        CallHierarchyDirection.CallsTo = callHierarchy.CallHierarchyDirection.CallsTo;\r\n    })(CallHierarchyDirection = Proposed.CallHierarchyDirection || (Proposed.CallHierarchyDirection = {}));\r\n    let ProgressStartNotification;\r\n    (function (ProgressStartNotification) {\r\n        ProgressStartNotification.type = progress.ProgressStartNotification.type;\r\n    })(ProgressStartNotification = Proposed.ProgressStartNotification || (Proposed.ProgressStartNotification = {}));\r\n    let ProgressReportNotification;\r\n    (function (ProgressReportNotification) {\r\n        ProgressReportNotification.type = progress.ProgressReportNotification.type;\r\n    })(ProgressReportNotification = Proposed.ProgressReportNotification || (Proposed.ProgressReportNotification = {}));\r\n    let ProgressDoneNotification;\r\n    (function (ProgressDoneNotification) {\r\n        ProgressDoneNotification.type = progress.ProgressDoneNotification.type;\r\n    })(ProgressDoneNotification = Proposed.ProgressDoneNotification || (Proposed.ProgressDoneNotification = {}));\r\n    let ProgressCancelNotification;\r\n    (function (ProgressCancelNotification) {\r\n        ProgressCancelNotification.type = progress.ProgressCancelNotification.type;\r\n    })(ProgressCancelNotification = Proposed.ProgressCancelNotification || (Proposed.ProgressCancelNotification = {}));\r\n})(Proposed = exports.Proposed || (exports.Proposed = {}));\r\nfunction createProtocolConnection(reader, writer, logger, strategy) {\r\n    return vscode_jsonrpc_1.createMessageConnection(reader, writer, logger, strategy);\r\n}\r\nexports.createProtocolConnection = createProtocolConnection;\r\n","module.exports = require(\"path\");","/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\n'use strict';\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst vscode_1 = require(\"vscode\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst c2p = require(\"./codeConverter\");\nconst p2c = require(\"./protocolConverter\");\nconst Is = require(\"./utils/is\");\nconst async_1 = require(\"./utils/async\");\nconst UUID = require(\"./utils/uuid\");\n__export(require(\"vscode-languageserver-protocol\"));\nclass ConsoleLogger {\n    error(message) {\n        console.error(message);\n    }\n    warn(message) {\n        console.warn(message);\n    }\n    info(message) {\n        console.info(message);\n    }\n    log(message) {\n        console.log(message);\n    }\n}\nfunction createConnection(input, output, errorHandler, closeHandler) {\n    let logger = new ConsoleLogger();\n    let connection = vscode_languageserver_protocol_1.createProtocolConnection(input, output, logger);\n    connection.onError((data) => { errorHandler(data[0], data[1], data[2]); });\n    connection.onClose(closeHandler);\n    let result = {\n        listen: () => connection.listen(),\n        sendRequest: (type, ...params) => connection.sendRequest(Is.string(type) ? type : type.method, ...params),\n        onRequest: (type, handler) => connection.onRequest(Is.string(type) ? type : type.method, handler),\n        sendNotification: (type, params) => connection.sendNotification(Is.string(type) ? type : type.method, params),\n        onNotification: (type, handler) => connection.onNotification(Is.string(type) ? type : type.method, handler),\n        trace: (value, tracer, sendNotificationOrTraceOptions) => {\n            const defaultTraceOptions = {\n                sendNotification: false,\n                traceFormat: vscode_languageserver_protocol_1.TraceFormat.Text\n            };\n            if (sendNotificationOrTraceOptions === void 0) {\n                connection.trace(value, tracer, defaultTraceOptions);\n            }\n            else if (Is.boolean(sendNotificationOrTraceOptions)) {\n                connection.trace(value, tracer, sendNotificationOrTraceOptions);\n            }\n            else {\n                connection.trace(value, tracer, sendNotificationOrTraceOptions);\n            }\n        },\n        initialize: (params) => connection.sendRequest(vscode_languageserver_protocol_1.InitializeRequest.type, params),\n        shutdown: () => connection.sendRequest(vscode_languageserver_protocol_1.ShutdownRequest.type, undefined),\n        exit: () => connection.sendNotification(vscode_languageserver_protocol_1.ExitNotification.type),\n        onLogMessage: (handler) => connection.onNotification(vscode_languageserver_protocol_1.LogMessageNotification.type, handler),\n        onShowMessage: (handler) => connection.onNotification(vscode_languageserver_protocol_1.ShowMessageNotification.type, handler),\n        onTelemetry: (handler) => connection.onNotification(vscode_languageserver_protocol_1.TelemetryEventNotification.type, handler),\n        didChangeConfiguration: (params) => connection.sendNotification(vscode_languageserver_protocol_1.DidChangeConfigurationNotification.type, params),\n        didChangeWatchedFiles: (params) => connection.sendNotification(vscode_languageserver_protocol_1.DidChangeWatchedFilesNotification.type, params),\n        didOpenTextDocument: (params) => connection.sendNotification(vscode_languageserver_protocol_1.DidOpenTextDocumentNotification.type, params),\n        didChangeTextDocument: (params) => connection.sendNotification(vscode_languageserver_protocol_1.DidChangeTextDocumentNotification.type, params),\n        didCloseTextDocument: (params) => connection.sendNotification(vscode_languageserver_protocol_1.DidCloseTextDocumentNotification.type, params),\n        didSaveTextDocument: (params) => connection.sendNotification(vscode_languageserver_protocol_1.DidSaveTextDocumentNotification.type, params),\n        onDiagnostics: (handler) => connection.onNotification(vscode_languageserver_protocol_1.PublishDiagnosticsNotification.type, handler),\n        dispose: () => connection.dispose()\n    };\n    return result;\n}\n/**\n * An action to be performed when the connection is producing errors.\n */\nvar ErrorAction;\n(function (ErrorAction) {\n    /**\n     * Continue running the server.\n     */\n    ErrorAction[ErrorAction[\"Continue\"] = 1] = \"Continue\";\n    /**\n     * Shutdown the server.\n     */\n    ErrorAction[ErrorAction[\"Shutdown\"] = 2] = \"Shutdown\";\n})(ErrorAction = exports.ErrorAction || (exports.ErrorAction = {}));\n/**\n * An action to be performed when the connection to a server got closed.\n */\nvar CloseAction;\n(function (CloseAction) {\n    /**\n     * Don't restart the server. The connection stays closed.\n     */\n    CloseAction[CloseAction[\"DoNotRestart\"] = 1] = \"DoNotRestart\";\n    /**\n     * Restart the server.\n     */\n    CloseAction[CloseAction[\"Restart\"] = 2] = \"Restart\";\n})(CloseAction = exports.CloseAction || (exports.CloseAction = {}));\nclass DefaultErrorHandler {\n    constructor(name) {\n        this.name = name;\n        this.restarts = [];\n    }\n    error(_error, _message, count) {\n        if (count && count <= 3) {\n            return ErrorAction.Continue;\n        }\n        return ErrorAction.Shutdown;\n    }\n    closed() {\n        this.restarts.push(Date.now());\n        if (this.restarts.length < 5) {\n            return CloseAction.Restart;\n        }\n        else {\n            let diff = this.restarts[this.restarts.length - 1] - this.restarts[0];\n            if (diff <= 3 * 60 * 1000) {\n                vscode_1.window.showErrorMessage(`The ${this.name} server crashed 5 times in the last 3 minutes. The server will not be restarted.`);\n                return CloseAction.DoNotRestart;\n            }\n            else {\n                this.restarts.shift();\n                return CloseAction.Restart;\n            }\n        }\n    }\n}\nvar RevealOutputChannelOn;\n(function (RevealOutputChannelOn) {\n    RevealOutputChannelOn[RevealOutputChannelOn[\"Info\"] = 1] = \"Info\";\n    RevealOutputChannelOn[RevealOutputChannelOn[\"Warn\"] = 2] = \"Warn\";\n    RevealOutputChannelOn[RevealOutputChannelOn[\"Error\"] = 3] = \"Error\";\n    RevealOutputChannelOn[RevealOutputChannelOn[\"Never\"] = 4] = \"Never\";\n})(RevealOutputChannelOn = exports.RevealOutputChannelOn || (exports.RevealOutputChannelOn = {}));\nvar State;\n(function (State) {\n    State[State[\"Stopped\"] = 1] = \"Stopped\";\n    State[State[\"Starting\"] = 3] = \"Starting\";\n    State[State[\"Running\"] = 2] = \"Running\";\n})(State = exports.State || (exports.State = {}));\nvar ClientState;\n(function (ClientState) {\n    ClientState[ClientState[\"Initial\"] = 0] = \"Initial\";\n    ClientState[ClientState[\"Starting\"] = 1] = \"Starting\";\n    ClientState[ClientState[\"StartFailed\"] = 2] = \"StartFailed\";\n    ClientState[ClientState[\"Running\"] = 3] = \"Running\";\n    ClientState[ClientState[\"Stopping\"] = 4] = \"Stopping\";\n    ClientState[ClientState[\"Stopped\"] = 5] = \"Stopped\";\n})(ClientState || (ClientState = {}));\nconst SupportedSymbolKinds = [\n    vscode_languageserver_protocol_1.SymbolKind.File,\n    vscode_languageserver_protocol_1.SymbolKind.Module,\n    vscode_languageserver_protocol_1.SymbolKind.Namespace,\n    vscode_languageserver_protocol_1.SymbolKind.Package,\n    vscode_languageserver_protocol_1.SymbolKind.Class,\n    vscode_languageserver_protocol_1.SymbolKind.Method,\n    vscode_languageserver_protocol_1.SymbolKind.Property,\n    vscode_languageserver_protocol_1.SymbolKind.Field,\n    vscode_languageserver_protocol_1.SymbolKind.Constructor,\n    vscode_languageserver_protocol_1.SymbolKind.Enum,\n    vscode_languageserver_protocol_1.SymbolKind.Interface,\n    vscode_languageserver_protocol_1.SymbolKind.Function,\n    vscode_languageserver_protocol_1.SymbolKind.Variable,\n    vscode_languageserver_protocol_1.SymbolKind.Constant,\n    vscode_languageserver_protocol_1.SymbolKind.String,\n    vscode_languageserver_protocol_1.SymbolKind.Number,\n    vscode_languageserver_protocol_1.SymbolKind.Boolean,\n    vscode_languageserver_protocol_1.SymbolKind.Array,\n    vscode_languageserver_protocol_1.SymbolKind.Object,\n    vscode_languageserver_protocol_1.SymbolKind.Key,\n    vscode_languageserver_protocol_1.SymbolKind.Null,\n    vscode_languageserver_protocol_1.SymbolKind.EnumMember,\n    vscode_languageserver_protocol_1.SymbolKind.Struct,\n    vscode_languageserver_protocol_1.SymbolKind.Event,\n    vscode_languageserver_protocol_1.SymbolKind.Operator,\n    vscode_languageserver_protocol_1.SymbolKind.TypeParameter\n];\nconst SupportedCompletionItemKinds = [\n    vscode_languageserver_protocol_1.CompletionItemKind.Text,\n    vscode_languageserver_protocol_1.CompletionItemKind.Method,\n    vscode_languageserver_protocol_1.CompletionItemKind.Function,\n    vscode_languageserver_protocol_1.CompletionItemKind.Constructor,\n    vscode_languageserver_protocol_1.CompletionItemKind.Field,\n    vscode_languageserver_protocol_1.CompletionItemKind.Variable,\n    vscode_languageserver_protocol_1.CompletionItemKind.Class,\n    vscode_languageserver_protocol_1.CompletionItemKind.Interface,\n    vscode_languageserver_protocol_1.CompletionItemKind.Module,\n    vscode_languageserver_protocol_1.CompletionItemKind.Property,\n    vscode_languageserver_protocol_1.CompletionItemKind.Unit,\n    vscode_languageserver_protocol_1.CompletionItemKind.Value,\n    vscode_languageserver_protocol_1.CompletionItemKind.Enum,\n    vscode_languageserver_protocol_1.CompletionItemKind.Keyword,\n    vscode_languageserver_protocol_1.CompletionItemKind.Snippet,\n    vscode_languageserver_protocol_1.CompletionItemKind.Color,\n    vscode_languageserver_protocol_1.CompletionItemKind.File,\n    vscode_languageserver_protocol_1.CompletionItemKind.Reference,\n    vscode_languageserver_protocol_1.CompletionItemKind.Folder,\n    vscode_languageserver_protocol_1.CompletionItemKind.EnumMember,\n    vscode_languageserver_protocol_1.CompletionItemKind.Constant,\n    vscode_languageserver_protocol_1.CompletionItemKind.Struct,\n    vscode_languageserver_protocol_1.CompletionItemKind.Event,\n    vscode_languageserver_protocol_1.CompletionItemKind.Operator,\n    vscode_languageserver_protocol_1.CompletionItemKind.TypeParameter\n];\nfunction ensure(target, key) {\n    if (target[key] === void 0) {\n        target[key] = {};\n    }\n    return target[key];\n}\nvar DynamicFeature;\n(function (DynamicFeature) {\n    function is(value) {\n        let candidate = value;\n        return candidate && Is.func(candidate.register) && Is.func(candidate.unregister) && Is.func(candidate.dispose) && candidate.messages !== void 0;\n    }\n    DynamicFeature.is = is;\n})(DynamicFeature || (DynamicFeature = {}));\nclass DocumentNotifiactions {\n    constructor(_client, _event, _type, _middleware, _createParams, _selectorFilter) {\n        this._client = _client;\n        this._event = _event;\n        this._type = _type;\n        this._middleware = _middleware;\n        this._createParams = _createParams;\n        this._selectorFilter = _selectorFilter;\n        this._selectors = new Map();\n    }\n    static textDocumentFilter(selectors, textDocument) {\n        for (const selector of selectors) {\n            if (vscode_1.languages.match(selector, textDocument)) {\n                return true;\n            }\n        }\n        return false;\n    }\n    register(_message, data) {\n        if (!data.registerOptions.documentSelector) {\n            return;\n        }\n        if (!this._listener) {\n            this._listener = this._event(this.callback, this);\n        }\n        this._selectors.set(data.id, data.registerOptions.documentSelector);\n    }\n    callback(data) {\n        if (!this._selectorFilter || this._selectorFilter(this._selectors.values(), data)) {\n            if (this._middleware) {\n                this._middleware(data, (data) => this._client.sendNotification(this._type, this._createParams(data)));\n            }\n            else {\n                this._client.sendNotification(this._type, this._createParams(data));\n            }\n            this.notificationSent(data);\n        }\n    }\n    notificationSent(_data) {\n    }\n    unregister(id) {\n        this._selectors.delete(id);\n        if (this._selectors.size === 0 && this._listener) {\n            this._listener.dispose();\n            this._listener = undefined;\n        }\n    }\n    dispose() {\n        this._selectors.clear();\n        if (this._listener) {\n            this._listener.dispose();\n            this._listener = undefined;\n        }\n    }\n}\nclass DidOpenTextDocumentFeature extends DocumentNotifiactions {\n    constructor(client, _syncedDocuments) {\n        super(client, vscode_1.workspace.onDidOpenTextDocument, vscode_languageserver_protocol_1.DidOpenTextDocumentNotification.type, client.clientOptions.middleware.didOpen, (textDocument) => client.code2ProtocolConverter.asOpenTextDocumentParams(textDocument), DocumentNotifiactions.textDocumentFilter);\n        this._syncedDocuments = _syncedDocuments;\n    }\n    get messages() {\n        return vscode_languageserver_protocol_1.DidOpenTextDocumentNotification.type;\n    }\n    fillClientCapabilities(capabilities) {\n        ensure(ensure(capabilities, 'textDocument'), 'synchronization').dynamicRegistration = true;\n    }\n    initialize(capabilities, documentSelector) {\n        let textDocumentSyncOptions = capabilities.resolvedTextDocumentSync;\n        if (documentSelector && textDocumentSyncOptions && textDocumentSyncOptions.openClose) {\n            this.register(this.messages, { id: UUID.generateUuid(), registerOptions: { documentSelector: documentSelector } });\n        }\n    }\n    register(message, data) {\n        super.register(message, data);\n        if (!data.registerOptions.documentSelector) {\n            return;\n        }\n        let documentSelector = data.registerOptions.documentSelector;\n        vscode_1.workspace.textDocuments.forEach((textDocument) => {\n            let uri = textDocument.uri.toString();\n            if (this._syncedDocuments.has(uri)) {\n                return;\n            }\n            if (vscode_1.languages.match(documentSelector, textDocument)) {\n                let middleware = this._client.clientOptions.middleware;\n                let didOpen = (textDocument) => {\n                    this._client.sendNotification(this._type, this._createParams(textDocument));\n                };\n                if (middleware.didOpen) {\n                    middleware.didOpen(textDocument, didOpen);\n                }\n                else {\n                    didOpen(textDocument);\n                }\n                this._syncedDocuments.set(uri, textDocument);\n            }\n        });\n    }\n    notificationSent(textDocument) {\n        super.notificationSent(textDocument);\n        this._syncedDocuments.set(textDocument.uri.toString(), textDocument);\n    }\n}\nclass DidCloseTextDocumentFeature extends DocumentNotifiactions {\n    constructor(client, _syncedDocuments) {\n        super(client, vscode_1.workspace.onDidCloseTextDocument, vscode_languageserver_protocol_1.DidCloseTextDocumentNotification.type, client.clientOptions.middleware.didClose, (textDocument) => client.code2ProtocolConverter.asCloseTextDocumentParams(textDocument), DocumentNotifiactions.textDocumentFilter);\n        this._syncedDocuments = _syncedDocuments;\n    }\n    get messages() {\n        return vscode_languageserver_protocol_1.DidCloseTextDocumentNotification.type;\n    }\n    fillClientCapabilities(capabilities) {\n        ensure(ensure(capabilities, 'textDocument'), 'synchronization').dynamicRegistration = true;\n    }\n    initialize(capabilities, documentSelector) {\n        let textDocumentSyncOptions = capabilities.resolvedTextDocumentSync;\n        if (documentSelector && textDocumentSyncOptions && textDocumentSyncOptions.openClose) {\n            this.register(this.messages, { id: UUID.generateUuid(), registerOptions: { documentSelector: documentSelector } });\n        }\n    }\n    notificationSent(textDocument) {\n        super.notificationSent(textDocument);\n        this._syncedDocuments.delete(textDocument.uri.toString());\n    }\n    unregister(id) {\n        let selector = this._selectors.get(id);\n        // The super call removed the selector from the map\n        // of selectors.\n        super.unregister(id);\n        let selectors = this._selectors.values();\n        this._syncedDocuments.forEach((textDocument) => {\n            if (vscode_1.languages.match(selector, textDocument) && !this._selectorFilter(selectors, textDocument)) {\n                let middleware = this._client.clientOptions.middleware;\n                let didClose = (textDocument) => {\n                    this._client.sendNotification(this._type, this._createParams(textDocument));\n                };\n                this._syncedDocuments.delete(textDocument.uri.toString());\n                if (middleware.didClose) {\n                    middleware.didClose(textDocument, didClose);\n                }\n                else {\n                    didClose(textDocument);\n                }\n            }\n        });\n    }\n}\nclass DidChangeTextDocumentFeature {\n    constructor(_client) {\n        this._client = _client;\n        this._changeData = new Map();\n        this._forcingDelivery = false;\n    }\n    get messages() {\n        return vscode_languageserver_protocol_1.DidChangeTextDocumentNotification.type;\n    }\n    fillClientCapabilities(capabilities) {\n        ensure(ensure(capabilities, 'textDocument'), 'synchronization').dynamicRegistration = true;\n    }\n    initialize(capabilities, documentSelector) {\n        let textDocumentSyncOptions = capabilities.resolvedTextDocumentSync;\n        if (documentSelector && textDocumentSyncOptions && textDocumentSyncOptions.change !== void 0 && textDocumentSyncOptions.change !== vscode_languageserver_protocol_1.TextDocumentSyncKind.None) {\n            this.register(this.messages, {\n                id: UUID.generateUuid(),\n                registerOptions: Object.assign({}, { documentSelector: documentSelector }, { syncKind: textDocumentSyncOptions.change })\n            });\n        }\n    }\n    register(_message, data) {\n        if (!data.registerOptions.documentSelector) {\n            return;\n        }\n        if (!this._listener) {\n            this._listener = vscode_1.workspace.onDidChangeTextDocument(this.callback, this);\n        }\n        this._changeData.set(data.id, {\n            documentSelector: data.registerOptions.documentSelector,\n            syncKind: data.registerOptions.syncKind\n        });\n    }\n    callback(event) {\n        // Text document changes are send for dirty changes as well. We don't\n        // have dirty / undirty events in the LSP so we ignore content changes\n        // with length zero.\n        if (event.contentChanges.length === 0) {\n            return;\n        }\n        for (const changeData of this._changeData.values()) {\n            if (vscode_1.languages.match(changeData.documentSelector, event.document)) {\n                let middleware = this._client.clientOptions.middleware;\n                if (changeData.syncKind === vscode_languageserver_protocol_1.TextDocumentSyncKind.Incremental) {\n                    let params = this._client.code2ProtocolConverter.asChangeTextDocumentParams(event);\n                    if (middleware.didChange) {\n                        middleware.didChange(event, () => this._client.sendNotification(vscode_languageserver_protocol_1.DidChangeTextDocumentNotification.type, params));\n                    }\n                    else {\n                        this._client.sendNotification(vscode_languageserver_protocol_1.DidChangeTextDocumentNotification.type, params);\n                    }\n                }\n                else if (changeData.syncKind === vscode_languageserver_protocol_1.TextDocumentSyncKind.Full) {\n                    let didChange = (event) => {\n                        if (this._changeDelayer) {\n                            if (this._changeDelayer.uri !== event.document.uri.toString()) {\n                                // Use this force delivery to track boolean state. Otherwise we might call two times.\n                                this.forceDelivery();\n                                this._changeDelayer.uri = event.document.uri.toString();\n                            }\n                            this._changeDelayer.delayer.trigger(() => {\n                                this._client.sendNotification(vscode_languageserver_protocol_1.DidChangeTextDocumentNotification.type, this._client.code2ProtocolConverter.asChangeTextDocumentParams(event.document));\n                            });\n                        }\n                        else {\n                            this._changeDelayer = {\n                                uri: event.document.uri.toString(),\n                                delayer: new async_1.Delayer(200)\n                            };\n                            this._changeDelayer.delayer.trigger(() => {\n                                this._client.sendNotification(vscode_languageserver_protocol_1.DidChangeTextDocumentNotification.type, this._client.code2ProtocolConverter.asChangeTextDocumentParams(event.document));\n                            }, -1);\n                        }\n                    };\n                    if (middleware.didChange) {\n                        middleware.didChange(event, didChange);\n                    }\n                    else {\n                        didChange(event);\n                    }\n                }\n            }\n        }\n    }\n    unregister(id) {\n        this._changeData.delete(id);\n        if (this._changeData.size === 0 && this._listener) {\n            this._listener.dispose();\n            this._listener = undefined;\n        }\n    }\n    dispose() {\n        this._changeDelayer = undefined;\n        this._forcingDelivery = false;\n        this._changeData.clear();\n        if (this._listener) {\n            this._listener.dispose();\n            this._listener = undefined;\n        }\n    }\n    forceDelivery() {\n        if (this._forcingDelivery || !this._changeDelayer) {\n            return;\n        }\n        try {\n            this._forcingDelivery = true;\n            this._changeDelayer.delayer.forceDelivery();\n        }\n        finally {\n            this._forcingDelivery = false;\n        }\n    }\n}\nclass WillSaveFeature extends DocumentNotifiactions {\n    constructor(client) {\n        super(client, vscode_1.workspace.onWillSaveTextDocument, vscode_languageserver_protocol_1.WillSaveTextDocumentNotification.type, client.clientOptions.middleware.willSave, (willSaveEvent) => client.code2ProtocolConverter.asWillSaveTextDocumentParams(willSaveEvent), (selectors, willSaveEvent) => DocumentNotifiactions.textDocumentFilter(selectors, willSaveEvent.document));\n    }\n    get messages() {\n        return vscode_languageserver_protocol_1.WillSaveTextDocumentNotification.type;\n    }\n    fillClientCapabilities(capabilities) {\n        let value = ensure(ensure(capabilities, 'textDocument'), 'synchronization');\n        value.willSave = true;\n    }\n    initialize(capabilities, documentSelector) {\n        let textDocumentSyncOptions = capabilities.resolvedTextDocumentSync;\n        if (documentSelector && textDocumentSyncOptions && textDocumentSyncOptions.willSave) {\n            this.register(this.messages, {\n                id: UUID.generateUuid(),\n                registerOptions: { documentSelector: documentSelector }\n            });\n        }\n    }\n}\nclass WillSaveWaitUntilFeature {\n    constructor(_client) {\n        this._client = _client;\n        this._selectors = new Map();\n    }\n    get messages() {\n        return vscode_languageserver_protocol_1.WillSaveTextDocumentWaitUntilRequest.type;\n    }\n    fillClientCapabilities(capabilities) {\n        let value = ensure(ensure(capabilities, 'textDocument'), 'synchronization');\n        value.willSaveWaitUntil = true;\n    }\n    initialize(capabilities, documentSelector) {\n        let textDocumentSyncOptions = capabilities.resolvedTextDocumentSync;\n        if (documentSelector && textDocumentSyncOptions && textDocumentSyncOptions.willSaveWaitUntil) {\n            this.register(this.messages, {\n                id: UUID.generateUuid(),\n                registerOptions: { documentSelector: documentSelector }\n            });\n        }\n    }\n    register(_message, data) {\n        if (!data.registerOptions.documentSelector) {\n            return;\n        }\n        if (!this._listener) {\n            this._listener = vscode_1.workspace.onWillSaveTextDocument(this.callback, this);\n        }\n        this._selectors.set(data.id, data.registerOptions.documentSelector);\n    }\n    callback(event) {\n        if (DocumentNotifiactions.textDocumentFilter(this._selectors.values(), event.document)) {\n            let middleware = this._client.clientOptions.middleware;\n            let willSaveWaitUntil = (event) => {\n                return this._client.sendRequest(vscode_languageserver_protocol_1.WillSaveTextDocumentWaitUntilRequest.type, this._client.code2ProtocolConverter.asWillSaveTextDocumentParams(event)).then((edits) => {\n                    let vEdits = this._client.protocol2CodeConverter.asTextEdits(edits);\n                    return vEdits === void 0 ? [] : vEdits;\n                });\n            };\n            event.waitUntil(middleware.willSaveWaitUntil\n                ? middleware.willSaveWaitUntil(event, willSaveWaitUntil)\n                : willSaveWaitUntil(event));\n        }\n    }\n    unregister(id) {\n        this._selectors.delete(id);\n        if (this._selectors.size === 0 && this._listener) {\n            this._listener.dispose();\n            this._listener = undefined;\n        }\n    }\n    dispose() {\n        this._selectors.clear();\n        if (this._listener) {\n            this._listener.dispose();\n            this._listener = undefined;\n        }\n    }\n}\nclass DidSaveTextDocumentFeature extends DocumentNotifiactions {\n    constructor(client) {\n        super(client, vscode_1.workspace.onDidSaveTextDocument, vscode_languageserver_protocol_1.DidSaveTextDocumentNotification.type, client.clientOptions.middleware.didSave, (textDocument) => client.code2ProtocolConverter.asSaveTextDocumentParams(textDocument, this._includeText), DocumentNotifiactions.textDocumentFilter);\n    }\n    get messages() {\n        return vscode_languageserver_protocol_1.DidSaveTextDocumentNotification.type;\n    }\n    fillClientCapabilities(capabilities) {\n        ensure(ensure(capabilities, 'textDocument'), 'synchronization').didSave = true;\n    }\n    initialize(capabilities, documentSelector) {\n        let textDocumentSyncOptions = capabilities.resolvedTextDocumentSync;\n        if (documentSelector && textDocumentSyncOptions && textDocumentSyncOptions.save) {\n            this.register(this.messages, {\n                id: UUID.generateUuid(),\n                registerOptions: Object.assign({}, { documentSelector: documentSelector }, { includeText: !!textDocumentSyncOptions.save.includeText })\n            });\n        }\n    }\n    register(method, data) {\n        this._includeText = !!data.registerOptions.includeText;\n        super.register(method, data);\n    }\n}\nclass FileSystemWatcherFeature {\n    constructor(_client, _notifyFileEvent) {\n        this._client = _client;\n        this._notifyFileEvent = _notifyFileEvent;\n        this._watchers = new Map();\n    }\n    get messages() {\n        return vscode_languageserver_protocol_1.DidChangeWatchedFilesNotification.type;\n    }\n    fillClientCapabilities(capabilities) {\n        ensure(ensure(capabilities, 'workspace'), 'didChangeWatchedFiles').dynamicRegistration = true;\n    }\n    initialize(_capabilities, _documentSelector) {\n    }\n    register(_method, data) {\n        if (!Array.isArray(data.registerOptions.watchers)) {\n            return;\n        }\n        let disposeables = [];\n        for (let watcher of data.registerOptions.watchers) {\n            if (!Is.string(watcher.globPattern)) {\n                continue;\n            }\n            let watchCreate = true, watchChange = true, watchDelete = true;\n            if (watcher.kind !== void 0 && watcher.kind !== null) {\n                watchCreate = (watcher.kind & vscode_languageserver_protocol_1.WatchKind.Create) !== 0;\n                watchChange = (watcher.kind & vscode_languageserver_protocol_1.WatchKind.Change) != 0;\n                watchDelete = (watcher.kind & vscode_languageserver_protocol_1.WatchKind.Delete) != 0;\n            }\n            let fileSystemWatcher = vscode_1.workspace.createFileSystemWatcher(watcher.globPattern, !watchCreate, !watchChange, !watchDelete);\n            this.hookListeners(fileSystemWatcher, watchCreate, watchChange, watchDelete);\n            disposeables.push(fileSystemWatcher);\n        }\n        this._watchers.set(data.id, disposeables);\n    }\n    registerRaw(id, fileSystemWatchers) {\n        let disposeables = [];\n        for (let fileSystemWatcher of fileSystemWatchers) {\n            this.hookListeners(fileSystemWatcher, true, true, true, disposeables);\n        }\n        this._watchers.set(id, disposeables);\n    }\n    hookListeners(fileSystemWatcher, watchCreate, watchChange, watchDelete, listeners) {\n        if (watchCreate) {\n            fileSystemWatcher.onDidCreate((resource) => this._notifyFileEvent({\n                uri: this._client.code2ProtocolConverter.asUri(resource),\n                type: vscode_languageserver_protocol_1.FileChangeType.Created\n            }), null, listeners);\n        }\n        if (watchChange) {\n            fileSystemWatcher.onDidChange((resource) => this._notifyFileEvent({\n                uri: this._client.code2ProtocolConverter.asUri(resource),\n                type: vscode_languageserver_protocol_1.FileChangeType.Changed\n            }), null, listeners);\n        }\n        if (watchDelete) {\n            fileSystemWatcher.onDidDelete((resource) => this._notifyFileEvent({\n                uri: this._client.code2ProtocolConverter.asUri(resource),\n                type: vscode_languageserver_protocol_1.FileChangeType.Deleted\n            }), null, listeners);\n        }\n    }\n    unregister(id) {\n        let disposeables = this._watchers.get(id);\n        if (disposeables) {\n            for (let disposable of disposeables) {\n                disposable.dispose();\n            }\n        }\n    }\n    dispose() {\n        this._watchers.forEach((disposeables) => {\n            for (let disposable of disposeables) {\n                disposable.dispose();\n            }\n        });\n        this._watchers.clear();\n    }\n}\nclass TextDocumentFeature {\n    constructor(_client, _message) {\n        this._client = _client;\n        this._message = _message;\n        this._providers = new Map();\n    }\n    get messages() {\n        return this._message;\n    }\n    register(message, data) {\n        if (message.method !== this.messages.method) {\n            throw new Error(`Register called on wrong feature. Requested ${message.method} but reached feature ${this.messages.method}`);\n        }\n        if (!data.registerOptions.documentSelector) {\n            return;\n        }\n        let provider = this.registerLanguageProvider(data.registerOptions);\n        if (provider) {\n            this._providers.set(data.id, provider);\n        }\n    }\n    unregister(id) {\n        let provider = this._providers.get(id);\n        if (provider) {\n            provider.dispose();\n        }\n    }\n    dispose() {\n        this._providers.forEach((value) => {\n            value.dispose();\n        });\n        this._providers.clear();\n    }\n}\nexports.TextDocumentFeature = TextDocumentFeature;\nclass WorkspaceFeature {\n    constructor(_client, _message) {\n        this._client = _client;\n        this._message = _message;\n        this._providers = new Map();\n    }\n    get messages() {\n        return this._message;\n    }\n    register(message, data) {\n        if (message.method !== this.messages.method) {\n            throw new Error(`Register called on wron feature. Requested ${message.method} but reached feature ${this.messages.method}`);\n        }\n        let provider = this.registerLanguageProvider(data.registerOptions);\n        if (provider) {\n            this._providers.set(data.id, provider);\n        }\n    }\n    unregister(id) {\n        let provider = this._providers.get(id);\n        if (provider) {\n            provider.dispose();\n        }\n    }\n    dispose() {\n        this._providers.forEach((value) => {\n            value.dispose();\n        });\n        this._providers.clear();\n    }\n}\nclass CompletionItemFeature extends TextDocumentFeature {\n    constructor(client) {\n        super(client, vscode_languageserver_protocol_1.CompletionRequest.type);\n    }\n    fillClientCapabilities(capabilites) {\n        let completion = ensure(ensure(capabilites, 'textDocument'), 'completion');\n        completion.dynamicRegistration = true;\n        completion.contextSupport = true;\n        completion.completionItem = {\n            snippetSupport: true,\n            commitCharactersSupport: true,\n            documentationFormat: [vscode_languageserver_protocol_1.MarkupKind.Markdown, vscode_languageserver_protocol_1.MarkupKind.PlainText],\n            deprecatedSupport: true,\n            preselectSupport: true\n        };\n        completion.completionItemKind = { valueSet: SupportedCompletionItemKinds };\n    }\n    initialize(capabilities, documentSelector) {\n        if (!capabilities.completionProvider || !documentSelector) {\n            return;\n        }\n        this.register(this.messages, {\n            id: UUID.generateUuid(),\n            registerOptions: Object.assign({}, { documentSelector: documentSelector }, capabilities.completionProvider)\n        });\n    }\n    registerLanguageProvider(options) {\n        let triggerCharacters = options.triggerCharacters || [];\n        let client = this._client;\n        let provideCompletionItems = (document, position, context, token) => {\n            return client.sendRequest(vscode_languageserver_protocol_1.CompletionRequest.type, client.code2ProtocolConverter.asCompletionParams(document, position, context), token).then(client.protocol2CodeConverter.asCompletionResult, (error) => {\n                client.logFailedRequest(vscode_languageserver_protocol_1.CompletionRequest.type, error);\n                return Promise.resolve([]);\n            });\n        };\n        let resolveCompletionItem = (item, token) => {\n            return client.sendRequest(vscode_languageserver_protocol_1.CompletionResolveRequest.type, client.code2ProtocolConverter.asCompletionItem(item), token).then(client.protocol2CodeConverter.asCompletionItem, (error) => {\n                client.logFailedRequest(vscode_languageserver_protocol_1.CompletionResolveRequest.type, error);\n                return Promise.resolve(item);\n            });\n        };\n        let middleware = this._client.clientOptions.middleware;\n        return vscode_1.languages.registerCompletionItemProvider(options.documentSelector, {\n            provideCompletionItems: (document, position, token, context) => {\n                return middleware.provideCompletionItem\n                    ? middleware.provideCompletionItem(document, position, context, token, provideCompletionItems)\n                    : provideCompletionItems(document, position, context, token);\n            },\n            resolveCompletionItem: options.resolveProvider\n                ? (item, token) => {\n                    return middleware.resolveCompletionItem\n                        ? middleware.resolveCompletionItem(item, token, resolveCompletionItem)\n                        : resolveCompletionItem(item, token);\n                }\n                : undefined\n        }, ...triggerCharacters);\n    }\n}\nclass HoverFeature extends TextDocumentFeature {\n    constructor(client) {\n        super(client, vscode_languageserver_protocol_1.HoverRequest.type);\n    }\n    fillClientCapabilities(capabilites) {\n        const hoverCapability = (ensure(ensure(capabilites, 'textDocument'), 'hover'));\n        hoverCapability.dynamicRegistration = true;\n        hoverCapability.contentFormat = [vscode_languageserver_protocol_1.MarkupKind.Markdown, vscode_languageserver_protocol_1.MarkupKind.PlainText];\n    }\n    initialize(capabilities, documentSelector) {\n        if (!capabilities.hoverProvider || !documentSelector) {\n            return;\n        }\n        this.register(this.messages, {\n            id: UUID.generateUuid(),\n            registerOptions: Object.assign({}, { documentSelector: documentSelector })\n        });\n    }\n    registerLanguageProvider(options) {\n        let client = this._client;\n        let provideHover = (document, position, token) => {\n            return client.sendRequest(vscode_languageserver_protocol_1.HoverRequest.type, client.code2ProtocolConverter.asTextDocumentPositionParams(document, position), token).then(client.protocol2CodeConverter.asHover, (error) => {\n                client.logFailedRequest(vscode_languageserver_protocol_1.HoverRequest.type, error);\n                return Promise.resolve(null);\n            });\n        };\n        let middleware = client.clientOptions.middleware;\n        return vscode_1.languages.registerHoverProvider(options.documentSelector, {\n            provideHover: (document, position, token) => {\n                return middleware.provideHover\n                    ? middleware.provideHover(document, position, token, provideHover)\n                    : provideHover(document, position, token);\n            }\n        });\n    }\n}\nclass SignatureHelpFeature extends TextDocumentFeature {\n    constructor(client) {\n        super(client, vscode_languageserver_protocol_1.SignatureHelpRequest.type);\n    }\n    fillClientCapabilities(capabilites) {\n        let config = ensure(ensure(capabilites, 'textDocument'), 'signatureHelp');\n        config.dynamicRegistration = true;\n        config.signatureInformation = { documentationFormat: [vscode_languageserver_protocol_1.MarkupKind.Markdown, vscode_languageserver_protocol_1.MarkupKind.PlainText] };\n        config.signatureInformation.parameterInformation = { labelOffsetSupport: true };\n    }\n    initialize(capabilities, documentSelector) {\n        if (!capabilities.signatureHelpProvider || !documentSelector) {\n            return;\n        }\n        this.register(this.messages, {\n            id: UUID.generateUuid(),\n            registerOptions: Object.assign({}, { documentSelector: documentSelector }, capabilities.signatureHelpProvider)\n        });\n    }\n    registerLanguageProvider(options) {\n        let client = this._client;\n        let providerSignatureHelp = (document, position, token) => {\n            return client.sendRequest(vscode_languageserver_protocol_1.SignatureHelpRequest.type, client.code2ProtocolConverter.asTextDocumentPositionParams(document, position), token).then(client.protocol2CodeConverter.asSignatureHelp, (error) => {\n                client.logFailedRequest(vscode_languageserver_protocol_1.SignatureHelpRequest.type, error);\n                return Promise.resolve(null);\n            });\n        };\n        let middleware = client.clientOptions.middleware;\n        let triggerCharacters = options.triggerCharacters || [];\n        return vscode_1.languages.registerSignatureHelpProvider(options.documentSelector, {\n            provideSignatureHelp: (document, position, token) => {\n                return middleware.provideSignatureHelp\n                    ? middleware.provideSignatureHelp(document, position, token, providerSignatureHelp)\n                    : providerSignatureHelp(document, position, token);\n            }\n        }, ...triggerCharacters);\n    }\n}\nclass DefinitionFeature extends TextDocumentFeature {\n    constructor(client) {\n        super(client, vscode_languageserver_protocol_1.DefinitionRequest.type);\n    }\n    fillClientCapabilities(capabilites) {\n        let definitionSupport = ensure(ensure(capabilites, 'textDocument'), 'definition');\n        definitionSupport.dynamicRegistration = true;\n        definitionSupport.linkSupport = true;\n    }\n    initialize(capabilities, documentSelector) {\n        if (!capabilities.definitionProvider || !documentSelector) {\n            return;\n        }\n        this.register(this.messages, {\n            id: UUID.generateUuid(),\n            registerOptions: Object.assign({}, { documentSelector: documentSelector })\n        });\n    }\n    registerLanguageProvider(options) {\n        let client = this._client;\n        let provideDefinition = (document, position, token) => {\n            return client.sendRequest(vscode_languageserver_protocol_1.DefinitionRequest.type, client.code2ProtocolConverter.asTextDocumentPositionParams(document, position), token).then(client.protocol2CodeConverter.asDefinitionResult, (error) => {\n                client.logFailedRequest(vscode_languageserver_protocol_1.DefinitionRequest.type, error);\n                return Promise.resolve(null);\n            });\n        };\n        let middleware = client.clientOptions.middleware;\n        return vscode_1.languages.registerDefinitionProvider(options.documentSelector, {\n            provideDefinition: (document, position, token) => {\n                return middleware.provideDefinition\n                    ? middleware.provideDefinition(document, position, token, provideDefinition)\n                    : provideDefinition(document, position, token);\n            }\n        });\n    }\n}\nclass ReferencesFeature extends TextDocumentFeature {\n    constructor(client) {\n        super(client, vscode_languageserver_protocol_1.ReferencesRequest.type);\n    }\n    fillClientCapabilities(capabilites) {\n        ensure(ensure(capabilites, 'textDocument'), 'references').dynamicRegistration = true;\n    }\n    initialize(capabilities, documentSelector) {\n        if (!capabilities.referencesProvider || !documentSelector) {\n            return;\n        }\n        this.register(this.messages, {\n            id: UUID.generateUuid(),\n            registerOptions: Object.assign({}, { documentSelector: documentSelector })\n        });\n    }\n    registerLanguageProvider(options) {\n        let client = this._client;\n        let providerReferences = (document, position, options, token) => {\n            return client.sendRequest(vscode_languageserver_protocol_1.ReferencesRequest.type, client.code2ProtocolConverter.asReferenceParams(document, position, options), token).then(client.protocol2CodeConverter.asReferences, (error) => {\n                client.logFailedRequest(vscode_languageserver_protocol_1.ReferencesRequest.type, error);\n                return Promise.resolve([]);\n            });\n        };\n        let middleware = client.clientOptions.middleware;\n        return vscode_1.languages.registerReferenceProvider(options.documentSelector, {\n            provideReferences: (document, position, options, token) => {\n                return middleware.provideReferences\n                    ? middleware.provideReferences(document, position, options, token, providerReferences)\n                    : providerReferences(document, position, options, token);\n            }\n        });\n    }\n}\nclass DocumentHighlightFeature extends TextDocumentFeature {\n    constructor(client) {\n        super(client, vscode_languageserver_protocol_1.DocumentHighlightRequest.type);\n    }\n    fillClientCapabilities(capabilites) {\n        ensure(ensure(capabilites, 'textDocument'), 'documentHighlight').dynamicRegistration = true;\n    }\n    initialize(capabilities, documentSelector) {\n        if (!capabilities.documentHighlightProvider || !documentSelector) {\n            return;\n        }\n        this.register(this.messages, {\n            id: UUID.generateUuid(),\n            registerOptions: Object.assign({}, { documentSelector: documentSelector })\n        });\n    }\n    registerLanguageProvider(options) {\n        let client = this._client;\n        let provideDocumentHighlights = (document, position, token) => {\n            return client.sendRequest(vscode_languageserver_protocol_1.DocumentHighlightRequest.type, client.code2ProtocolConverter.asTextDocumentPositionParams(document, position), token).then(client.protocol2CodeConverter.asDocumentHighlights, (error) => {\n                client.logFailedRequest(vscode_languageserver_protocol_1.DocumentHighlightRequest.type, error);\n                return Promise.resolve([]);\n            });\n        };\n        let middleware = client.clientOptions.middleware;\n        return vscode_1.languages.registerDocumentHighlightProvider(options.documentSelector, {\n            provideDocumentHighlights: (document, position, token) => {\n                return middleware.provideDocumentHighlights\n                    ? middleware.provideDocumentHighlights(document, position, token, provideDocumentHighlights)\n                    : provideDocumentHighlights(document, position, token);\n            }\n        });\n    }\n}\nclass DocumentSymbolFeature extends TextDocumentFeature {\n    constructor(client) {\n        super(client, vscode_languageserver_protocol_1.DocumentSymbolRequest.type);\n    }\n    fillClientCapabilities(capabilites) {\n        let symbolCapabilities = ensure(ensure(capabilites, 'textDocument'), 'documentSymbol');\n        symbolCapabilities.dynamicRegistration = true;\n        symbolCapabilities.symbolKind = {\n            valueSet: SupportedSymbolKinds\n        };\n        symbolCapabilities.hierarchicalDocumentSymbolSupport = true;\n    }\n    initialize(capabilities, documentSelector) {\n        if (!capabilities.documentSymbolProvider || !documentSelector) {\n            return;\n        }\n        this.register(this.messages, {\n            id: UUID.generateUuid(),\n            registerOptions: Object.assign({}, { documentSelector: documentSelector })\n        });\n    }\n    registerLanguageProvider(options) {\n        let client = this._client;\n        let provideDocumentSymbols = (document, token) => {\n            return client.sendRequest(vscode_languageserver_protocol_1.DocumentSymbolRequest.type, client.code2ProtocolConverter.asDocumentSymbolParams(document), token).then((data) => {\n                if (data === null) {\n                    return undefined;\n                }\n                if (data.length === 0) {\n                    return [];\n                }\n                else {\n                    let element = data[0];\n                    if (vscode_languageserver_protocol_1.DocumentSymbol.is(element)) {\n                        return client.protocol2CodeConverter.asDocumentSymbols(data);\n                    }\n                    else {\n                        return client.protocol2CodeConverter.asSymbolInformations(data);\n                    }\n                }\n            }, (error) => {\n                client.logFailedRequest(vscode_languageserver_protocol_1.DocumentSymbolRequest.type, error);\n                return Promise.resolve([]);\n            });\n        };\n        let middleware = client.clientOptions.middleware;\n        return vscode_1.languages.registerDocumentSymbolProvider(options.documentSelector, {\n            provideDocumentSymbols: (document, token) => {\n                return middleware.provideDocumentSymbols\n                    ? middleware.provideDocumentSymbols(document, token, provideDocumentSymbols)\n                    : provideDocumentSymbols(document, token);\n            }\n        });\n    }\n}\nclass WorkspaceSymbolFeature extends WorkspaceFeature {\n    constructor(client) {\n        super(client, vscode_languageserver_protocol_1.WorkspaceSymbolRequest.type);\n    }\n    fillClientCapabilities(capabilites) {\n        let symbolCapabilities = ensure(ensure(capabilites, 'workspace'), 'symbol');\n        symbolCapabilities.dynamicRegistration = true;\n        symbolCapabilities.symbolKind = {\n            valueSet: SupportedSymbolKinds\n        };\n    }\n    initialize(capabilities) {\n        if (!capabilities.workspaceSymbolProvider) {\n            return;\n        }\n        this.register(this.messages, {\n            id: UUID.generateUuid(),\n            registerOptions: undefined\n        });\n    }\n    registerLanguageProvider(_options) {\n        let client = this._client;\n        let provideWorkspaceSymbols = (query, token) => {\n            return client.sendRequest(vscode_languageserver_protocol_1.WorkspaceSymbolRequest.type, { query }, token).then(client.protocol2CodeConverter.asSymbolInformations, (error) => {\n                client.logFailedRequest(vscode_languageserver_protocol_1.WorkspaceSymbolRequest.type, error);\n                return Promise.resolve([]);\n            });\n        };\n        let middleware = client.clientOptions.middleware;\n        return vscode_1.languages.registerWorkspaceSymbolProvider({\n            provideWorkspaceSymbols: (query, token) => {\n                return middleware.provideWorkspaceSymbols\n                    ? middleware.provideWorkspaceSymbols(query, token, provideWorkspaceSymbols)\n                    : provideWorkspaceSymbols(query, token);\n            }\n        });\n    }\n}\nclass CodeActionFeature extends TextDocumentFeature {\n    constructor(client) {\n        super(client, vscode_languageserver_protocol_1.CodeActionRequest.type);\n    }\n    fillClientCapabilities(capabilites) {\n        const cap = ensure(ensure(capabilites, 'textDocument'), 'codeAction');\n        cap.dynamicRegistration = true;\n        cap.codeActionLiteralSupport = {\n            codeActionKind: {\n                valueSet: [\n                    '',\n                    vscode_languageserver_protocol_1.CodeActionKind.QuickFix,\n                    vscode_languageserver_protocol_1.CodeActionKind.Refactor,\n                    vscode_languageserver_protocol_1.CodeActionKind.RefactorExtract,\n                    vscode_languageserver_protocol_1.CodeActionKind.RefactorInline,\n                    vscode_languageserver_protocol_1.CodeActionKind.RefactorRewrite,\n                    vscode_languageserver_protocol_1.CodeActionKind.Source,\n                    vscode_languageserver_protocol_1.CodeActionKind.SourceOrganizeImports\n                ]\n            }\n        };\n    }\n    initialize(capabilities, documentSelector) {\n        if (!capabilities.codeActionProvider || !documentSelector) {\n            return;\n        }\n        let codeActionKinds = undefined;\n        if (!Is.boolean(capabilities.codeActionProvider)) {\n            codeActionKinds = capabilities.codeActionProvider.codeActionKinds;\n        }\n        this.register(this.messages, {\n            id: UUID.generateUuid(),\n            registerOptions: { documentSelector: documentSelector, codeActionKinds }\n        });\n    }\n    registerLanguageProvider(options) {\n        let client = this._client;\n        let provideCodeActions = (document, range, context, token) => {\n            let params = {\n                textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document),\n                range: client.code2ProtocolConverter.asRange(range),\n                context: client.code2ProtocolConverter.asCodeActionContext(context)\n            };\n            return client.sendRequest(vscode_languageserver_protocol_1.CodeActionRequest.type, params, token).then((values) => {\n                if (values === null) {\n                    return undefined;\n                }\n                let result = [];\n                for (let item of values) {\n                    if (vscode_languageserver_protocol_1.Command.is(item)) {\n                        result.push(client.protocol2CodeConverter.asCommand(item));\n                    }\n                    else {\n                        result.push(client.protocol2CodeConverter.asCodeAction(item));\n                    }\n                    ;\n                }\n                return result;\n            }, (error) => {\n                client.logFailedRequest(vscode_languageserver_protocol_1.CodeActionRequest.type, error);\n                return Promise.resolve([]);\n            });\n        };\n        let middleware = client.clientOptions.middleware;\n        return vscode_1.languages.registerCodeActionsProvider(options.documentSelector, {\n            provideCodeActions: (document, range, context, token) => {\n                return middleware.provideCodeActions\n                    ? middleware.provideCodeActions(document, range, context, token, provideCodeActions)\n                    : provideCodeActions(document, range, context, token);\n            }\n        }, options.codeActionKinds\n            ? { providedCodeActionKinds: client.protocol2CodeConverter.asCodeActionKinds(options.codeActionKinds) }\n            : undefined);\n    }\n}\nclass CodeLensFeature extends TextDocumentFeature {\n    constructor(client) {\n        super(client, vscode_languageserver_protocol_1.CodeLensRequest.type);\n    }\n    fillClientCapabilities(capabilites) {\n        ensure(ensure(capabilites, 'textDocument'), 'codeLens').dynamicRegistration = true;\n    }\n    initialize(capabilities, documentSelector) {\n        if (!capabilities.codeLensProvider || !documentSelector) {\n            return;\n        }\n        this.register(this.messages, {\n            id: UUID.generateUuid(),\n            registerOptions: Object.assign({}, { documentSelector: documentSelector }, capabilities.codeLensProvider)\n        });\n    }\n    registerLanguageProvider(options) {\n        let client = this._client;\n        let provideCodeLenses = (document, token) => {\n            return client.sendRequest(vscode_languageserver_protocol_1.CodeLensRequest.type, client.code2ProtocolConverter.asCodeLensParams(document), token).then(client.protocol2CodeConverter.asCodeLenses, (error) => {\n                client.logFailedRequest(vscode_languageserver_protocol_1.CodeLensRequest.type, error);\n                return Promise.resolve([]);\n            });\n        };\n        let resolveCodeLens = (codeLens, token) => {\n            return client.sendRequest(vscode_languageserver_protocol_1.CodeLensResolveRequest.type, client.code2ProtocolConverter.asCodeLens(codeLens), token).then(client.protocol2CodeConverter.asCodeLens, (error) => {\n                client.logFailedRequest(vscode_languageserver_protocol_1.CodeLensResolveRequest.type, error);\n                return codeLens;\n            });\n        };\n        let middleware = client.clientOptions.middleware;\n        return vscode_1.languages.registerCodeLensProvider(options.documentSelector, {\n            provideCodeLenses: (document, token) => {\n                return middleware.provideCodeLenses\n                    ? middleware.provideCodeLenses(document, token, provideCodeLenses)\n                    : provideCodeLenses(document, token);\n            },\n            resolveCodeLens: (options.resolveProvider)\n                ? (codeLens, token) => {\n                    return middleware.resolveCodeLens\n                        ? middleware.resolveCodeLens(codeLens, token, resolveCodeLens)\n                        : resolveCodeLens(codeLens, token);\n                }\n                : undefined\n        });\n    }\n}\nclass DocumentFormattingFeature extends TextDocumentFeature {\n    constructor(client) {\n        super(client, vscode_languageserver_protocol_1.DocumentFormattingRequest.type);\n    }\n    fillClientCapabilities(capabilites) {\n        ensure(ensure(capabilites, 'textDocument'), 'formatting').dynamicRegistration = true;\n    }\n    initialize(capabilities, documentSelector) {\n        if (!capabilities.documentFormattingProvider || !documentSelector) {\n            return;\n        }\n        this.register(this.messages, {\n            id: UUID.generateUuid(),\n            registerOptions: Object.assign({}, { documentSelector: documentSelector })\n        });\n    }\n    registerLanguageProvider(options) {\n        let client = this._client;\n        let provideDocumentFormattingEdits = (document, options, token) => {\n            let params = {\n                textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document),\n                options: client.code2ProtocolConverter.asFormattingOptions(options)\n            };\n            return client.sendRequest(vscode_languageserver_protocol_1.DocumentFormattingRequest.type, params, token).then(client.protocol2CodeConverter.asTextEdits, (error) => {\n                client.logFailedRequest(vscode_languageserver_protocol_1.DocumentFormattingRequest.type, error);\n                return Promise.resolve([]);\n            });\n        };\n        let middleware = client.clientOptions.middleware;\n        return vscode_1.languages.registerDocumentFormattingEditProvider(options.documentSelector, {\n            provideDocumentFormattingEdits: (document, options, token) => {\n                return middleware.provideDocumentFormattingEdits\n                    ? middleware.provideDocumentFormattingEdits(document, options, token, provideDocumentFormattingEdits)\n                    : provideDocumentFormattingEdits(document, options, token);\n            }\n        });\n    }\n}\nclass DocumentRangeFormattingFeature extends TextDocumentFeature {\n    constructor(client) {\n        super(client, vscode_languageserver_protocol_1.DocumentRangeFormattingRequest.type);\n    }\n    fillClientCapabilities(capabilites) {\n        ensure(ensure(capabilites, 'textDocument'), 'rangeFormatting').dynamicRegistration = true;\n    }\n    initialize(capabilities, documentSelector) {\n        if (!capabilities.documentRangeFormattingProvider || !documentSelector) {\n            return;\n        }\n        this.register(this.messages, {\n            id: UUID.generateUuid(),\n            registerOptions: Object.assign({}, { documentSelector: documentSelector })\n        });\n    }\n    registerLanguageProvider(options) {\n        let client = this._client;\n        let provideDocumentRangeFormattingEdits = (document, range, options, token) => {\n            let params = {\n                textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document),\n                range: client.code2ProtocolConverter.asRange(range),\n                options: client.code2ProtocolConverter.asFormattingOptions(options)\n            };\n            return client.sendRequest(vscode_languageserver_protocol_1.DocumentRangeFormattingRequest.type, params, token).then(client.protocol2CodeConverter.asTextEdits, (error) => {\n                client.logFailedRequest(vscode_languageserver_protocol_1.DocumentRangeFormattingRequest.type, error);\n                return Promise.resolve([]);\n            });\n        };\n        let middleware = client.clientOptions.middleware;\n        return vscode_1.languages.registerDocumentRangeFormattingEditProvider(options.documentSelector, {\n            provideDocumentRangeFormattingEdits: (document, range, options, token) => {\n                return middleware.provideDocumentRangeFormattingEdits\n                    ? middleware.provideDocumentRangeFormattingEdits(document, range, options, token, provideDocumentRangeFormattingEdits)\n                    : provideDocumentRangeFormattingEdits(document, range, options, token);\n            }\n        });\n    }\n}\nclass DocumentOnTypeFormattingFeature extends TextDocumentFeature {\n    constructor(client) {\n        super(client, vscode_languageserver_protocol_1.DocumentOnTypeFormattingRequest.type);\n    }\n    fillClientCapabilities(capabilites) {\n        ensure(ensure(capabilites, 'textDocument'), 'onTypeFormatting').dynamicRegistration = true;\n    }\n    initialize(capabilities, documentSelector) {\n        if (!capabilities.documentOnTypeFormattingProvider || !documentSelector) {\n            return;\n        }\n        this.register(this.messages, {\n            id: UUID.generateUuid(),\n            registerOptions: Object.assign({}, { documentSelector: documentSelector }, capabilities.documentOnTypeFormattingProvider)\n        });\n    }\n    registerLanguageProvider(options) {\n        let client = this._client;\n        let moreTriggerCharacter = options.moreTriggerCharacter || [];\n        let provideOnTypeFormattingEdits = (document, position, ch, options, token) => {\n            let params = {\n                textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document),\n                position: client.code2ProtocolConverter.asPosition(position),\n                ch: ch,\n                options: client.code2ProtocolConverter.asFormattingOptions(options)\n            };\n            return client.sendRequest(vscode_languageserver_protocol_1.DocumentOnTypeFormattingRequest.type, params, token).then(client.protocol2CodeConverter.asTextEdits, (error) => {\n                client.logFailedRequest(vscode_languageserver_protocol_1.DocumentOnTypeFormattingRequest.type, error);\n                return Promise.resolve([]);\n            });\n        };\n        let middleware = client.clientOptions.middleware;\n        return vscode_1.languages.registerOnTypeFormattingEditProvider(options.documentSelector, {\n            provideOnTypeFormattingEdits: (document, position, ch, options, token) => {\n                return middleware.provideOnTypeFormattingEdits\n                    ? middleware.provideOnTypeFormattingEdits(document, position, ch, options, token, provideOnTypeFormattingEdits)\n                    : provideOnTypeFormattingEdits(document, position, ch, options, token);\n            }\n        }, options.firstTriggerCharacter, ...moreTriggerCharacter);\n    }\n}\nclass RenameFeature extends TextDocumentFeature {\n    constructor(client) {\n        super(client, vscode_languageserver_protocol_1.RenameRequest.type);\n    }\n    fillClientCapabilities(capabilites) {\n        let rename = ensure(ensure(capabilites, 'textDocument'), 'rename');\n        rename.dynamicRegistration = true;\n        rename.prepareSupport = true;\n    }\n    initialize(capabilities, documentSelector) {\n        if (!capabilities.renameProvider || !documentSelector) {\n            return;\n        }\n        let options = Object.assign({}, { documentSelector: documentSelector });\n        if (Is.boolean(capabilities.renameProvider)) {\n            options.prepareProvider = false;\n        }\n        else {\n            options.prepareProvider = capabilities.renameProvider.prepareProvider;\n        }\n        this.register(this.messages, {\n            id: UUID.generateUuid(),\n            registerOptions: options\n        });\n    }\n    registerLanguageProvider(options) {\n        let client = this._client;\n        let provideRenameEdits = (document, position, newName, token) => {\n            let params = {\n                textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document),\n                position: client.code2ProtocolConverter.asPosition(position),\n                newName: newName\n            };\n            return client.sendRequest(vscode_languageserver_protocol_1.RenameRequest.type, params, token).then(client.protocol2CodeConverter.asWorkspaceEdit, (error) => {\n                client.logFailedRequest(vscode_languageserver_protocol_1.RenameRequest.type, error);\n                return Promise.reject(new Error(error.message));\n            });\n        };\n        let prepareRename = (document, position, token) => {\n            let params = {\n                textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document),\n                position: client.code2ProtocolConverter.asPosition(position),\n            };\n            return client.sendRequest(vscode_languageserver_protocol_1.PrepareRenameRequest.type, params, token).then((result) => {\n                if (vscode_languageserver_protocol_1.Range.is(result)) {\n                    return client.protocol2CodeConverter.asRange(result);\n                }\n                else if (result && vscode_languageserver_protocol_1.Range.is(result.range)) {\n                    return {\n                        range: client.protocol2CodeConverter.asRange(result.range),\n                        placeholder: result.placeholder\n                    };\n                }\n                // To cancel the rename vscode API expects a rejected promise.\n                return Promise.reject(new Error(`The element can't be renamed.`));\n            }, (error) => {\n                client.logFailedRequest(vscode_languageserver_protocol_1.PrepareRenameRequest.type, error);\n                return Promise.reject(new Error(error.message));\n            });\n        };\n        let middleware = client.clientOptions.middleware;\n        return vscode_1.languages.registerRenameProvider(options.documentSelector, {\n            provideRenameEdits: (document, position, newName, token) => {\n                return middleware.provideRenameEdits\n                    ? middleware.provideRenameEdits(document, position, newName, token, provideRenameEdits)\n                    : provideRenameEdits(document, position, newName, token);\n            },\n            prepareRename: options.prepareProvider\n                ? (document, position, token) => {\n                    return middleware.prepareRename\n                        ? middleware.prepareRename(document, position, token, prepareRename)\n                        : prepareRename(document, position, token);\n                }\n                : undefined\n        });\n    }\n}\nclass DocumentLinkFeature extends TextDocumentFeature {\n    constructor(client) {\n        super(client, vscode_languageserver_protocol_1.DocumentLinkRequest.type);\n    }\n    fillClientCapabilities(capabilites) {\n        ensure(ensure(capabilites, 'textDocument'), 'documentLink').dynamicRegistration = true;\n    }\n    initialize(capabilities, documentSelector) {\n        if (!capabilities.documentLinkProvider || !documentSelector) {\n            return;\n        }\n        this.register(this.messages, {\n            id: UUID.generateUuid(),\n            registerOptions: Object.assign({}, { documentSelector: documentSelector }, capabilities.documentLinkProvider)\n        });\n    }\n    registerLanguageProvider(options) {\n        let client = this._client;\n        let provideDocumentLinks = (document, token) => {\n            return client.sendRequest(vscode_languageserver_protocol_1.DocumentLinkRequest.type, client.code2ProtocolConverter.asDocumentLinkParams(document), token).then(client.protocol2CodeConverter.asDocumentLinks, (error) => {\n                client.logFailedRequest(vscode_languageserver_protocol_1.DocumentLinkRequest.type, error);\n                Promise.resolve(new Error(error.message));\n            });\n        };\n        let resolveDocumentLink = (link, token) => {\n            return client.sendRequest(vscode_languageserver_protocol_1.DocumentLinkResolveRequest.type, client.code2ProtocolConverter.asDocumentLink(link), token).then(client.protocol2CodeConverter.asDocumentLink, (error) => {\n                client.logFailedRequest(vscode_languageserver_protocol_1.DocumentLinkResolveRequest.type, error);\n                Promise.resolve(new Error(error.message));\n            });\n        };\n        let middleware = client.clientOptions.middleware;\n        return vscode_1.languages.registerDocumentLinkProvider(options.documentSelector, {\n            provideDocumentLinks: (document, token) => {\n                return middleware.provideDocumentLinks\n                    ? middleware.provideDocumentLinks(document, token, provideDocumentLinks)\n                    : provideDocumentLinks(document, token);\n            },\n            resolveDocumentLink: options.resolveProvider\n                ? (link, token) => {\n                    return middleware.resolveDocumentLink\n                        ? middleware.resolveDocumentLink(link, token, resolveDocumentLink)\n                        : resolveDocumentLink(link, token);\n                }\n                : undefined\n        });\n    }\n}\nclass ConfigurationFeature {\n    constructor(_client) {\n        this._client = _client;\n        this._listeners = new Map();\n    }\n    get messages() {\n        return vscode_languageserver_protocol_1.DidChangeConfigurationNotification.type;\n    }\n    fillClientCapabilities(capabilities) {\n        ensure(ensure(capabilities, 'workspace'), 'didChangeConfiguration').dynamicRegistration = true;\n    }\n    initialize() {\n        let section = this._client.clientOptions.synchronize.configurationSection;\n        if (section !== void 0) {\n            this.register(this.messages, {\n                id: UUID.generateUuid(),\n                registerOptions: {\n                    section: section\n                }\n            });\n        }\n    }\n    register(_message, data) {\n        let disposable = vscode_1.workspace.onDidChangeConfiguration((event) => {\n            this.onDidChangeConfiguration(data.registerOptions.section, event);\n        });\n        this._listeners.set(data.id, disposable);\n        if (data.registerOptions.section !== void 0) {\n            this.onDidChangeConfiguration(data.registerOptions.section, undefined);\n        }\n    }\n    unregister(id) {\n        let disposable = this._listeners.get(id);\n        if (disposable) {\n            this._listeners.delete(id);\n            disposable.dispose();\n        }\n    }\n    dispose() {\n        for (let disposable of this._listeners.values()) {\n            disposable.dispose();\n        }\n        this._listeners.clear();\n    }\n    onDidChangeConfiguration(configurationSection, event) {\n        let sections;\n        if (Is.string(configurationSection)) {\n            sections = [configurationSection];\n        }\n        else {\n            sections = configurationSection;\n        }\n        if (sections !== void 0 && event !== void 0) {\n            let affected = sections.some((section) => event.affectsConfiguration(section));\n            if (!affected) {\n                return;\n            }\n        }\n        let didChangeConfiguration = (sections) => {\n            if (sections === void 0) {\n                this._client.sendNotification(vscode_languageserver_protocol_1.DidChangeConfigurationNotification.type, { settings: null });\n                return;\n            }\n            this._client.sendNotification(vscode_languageserver_protocol_1.DidChangeConfigurationNotification.type, { settings: this.extractSettingsInformation(sections) });\n        };\n        let middleware = this.getMiddleware();\n        middleware\n            ? middleware(sections, didChangeConfiguration)\n            : didChangeConfiguration(sections);\n    }\n    extractSettingsInformation(keys) {\n        function ensurePath(config, path) {\n            let current = config;\n            for (let i = 0; i < path.length - 1; i++) {\n                let obj = current[path[i]];\n                if (!obj) {\n                    obj = Object.create(null);\n                    current[path[i]] = obj;\n                }\n                current = obj;\n            }\n            return current;\n        }\n        let resource = this._client.clientOptions.workspaceFolder\n            ? this._client.clientOptions.workspaceFolder.uri\n            : undefined;\n        let result = Object.create(null);\n        for (let i = 0; i < keys.length; i++) {\n            let key = keys[i];\n            let index = key.indexOf('.');\n            let config = null;\n            if (index >= 0) {\n                config = vscode_1.workspace.getConfiguration(key.substr(0, index), resource).get(key.substr(index + 1));\n            }\n            else {\n                config = vscode_1.workspace.getConfiguration(key, resource);\n            }\n            if (config) {\n                let path = keys[i].split('.');\n                ensurePath(result, path)[path[path.length - 1]] = config;\n            }\n        }\n        return result;\n    }\n    getMiddleware() {\n        let middleware = this._client.clientOptions.middleware;\n        if (middleware.workspace && middleware.workspace.didChangeConfiguration) {\n            return middleware.workspace.didChangeConfiguration;\n        }\n        else {\n            return undefined;\n        }\n    }\n}\nclass ExecuteCommandFeature {\n    constructor(_client) {\n        this._client = _client;\n        this._commands = new Map();\n    }\n    get messages() {\n        return vscode_languageserver_protocol_1.ExecuteCommandRequest.type;\n    }\n    fillClientCapabilities(capabilities) {\n        ensure(ensure(capabilities, 'workspace'), 'executeCommand').dynamicRegistration = true;\n    }\n    initialize(capabilities) {\n        if (!capabilities.executeCommandProvider) {\n            return;\n        }\n        this.register(this.messages, {\n            id: UUID.generateUuid(),\n            registerOptions: Object.assign({}, capabilities.executeCommandProvider)\n        });\n    }\n    register(_message, data) {\n        let client = this._client;\n        if (data.registerOptions.commands) {\n            let disposeables = [];\n            for (const command of data.registerOptions.commands) {\n                disposeables.push(vscode_1.commands.registerCommand(command, (...args) => {\n                    let params = {\n                        command,\n                        arguments: args\n                    };\n                    return client.sendRequest(vscode_languageserver_protocol_1.ExecuteCommandRequest.type, params).then(undefined, (error) => {\n                        client.logFailedRequest(vscode_languageserver_protocol_1.ExecuteCommandRequest.type, error);\n                    });\n                }));\n            }\n            this._commands.set(data.id, disposeables);\n        }\n    }\n    unregister(id) {\n        let disposeables = this._commands.get(id);\n        if (disposeables) {\n            disposeables.forEach(disposable => disposable.dispose());\n        }\n    }\n    dispose() {\n        this._commands.forEach((value) => {\n            value.forEach(disposable => disposable.dispose());\n        });\n        this._commands.clear();\n    }\n}\nvar MessageTransports;\n(function (MessageTransports) {\n    function is(value) {\n        let candidate = value;\n        return candidate && vscode_languageserver_protocol_1.MessageReader.is(value.reader) && vscode_languageserver_protocol_1.MessageWriter.is(value.writer);\n    }\n    MessageTransports.is = is;\n})(MessageTransports = exports.MessageTransports || (exports.MessageTransports = {}));\nclass OnReady {\n    constructor(_resolve, _reject) {\n        this._resolve = _resolve;\n        this._reject = _reject;\n        this._used = false;\n    }\n    get isUsed() {\n        return this._used;\n    }\n    resolve() {\n        this._used = true;\n        this._resolve();\n    }\n    reject(error) {\n        this._used = true;\n        this._reject(error);\n    }\n}\nclass BaseLanguageClient {\n    constructor(id, name, clientOptions) {\n        this._traceFormat = vscode_languageserver_protocol_1.TraceFormat.Text;\n        this._features = [];\n        this._method2Message = new Map();\n        this._dynamicFeatures = new Map();\n        this._id = id;\n        this._name = name;\n        clientOptions = clientOptions || {};\n        this._clientOptions = {\n            documentSelector: clientOptions.documentSelector || [],\n            synchronize: clientOptions.synchronize || {},\n            diagnosticCollectionName: clientOptions.diagnosticCollectionName,\n            outputChannelName: clientOptions.outputChannelName || this._name,\n            revealOutputChannelOn: clientOptions.revealOutputChannelOn || RevealOutputChannelOn.Error,\n            stdioEncoding: clientOptions.stdioEncoding || 'utf8',\n            initializationOptions: clientOptions.initializationOptions,\n            initializationFailedHandler: clientOptions.initializationFailedHandler,\n            errorHandler: clientOptions.errorHandler || new DefaultErrorHandler(this._name),\n            middleware: clientOptions.middleware || {},\n            uriConverters: clientOptions.uriConverters,\n            workspaceFolder: clientOptions.workspaceFolder\n        };\n        this._clientOptions.synchronize = this._clientOptions.synchronize || {};\n        this.state = ClientState.Initial;\n        this._connectionPromise = undefined;\n        this._resolvedConnection = undefined;\n        this._initializeResult = undefined;\n        if (clientOptions.outputChannel) {\n            this._outputChannel = clientOptions.outputChannel;\n            this._disposeOutputChannel = false;\n        }\n        else {\n            this._outputChannel = undefined;\n            this._disposeOutputChannel = true;\n        }\n        this._traceOutputChannel = clientOptions.traceOutputChannel;\n        this._listeners = undefined;\n        this._providers = undefined;\n        this._diagnostics = undefined;\n        this._fileEvents = [];\n        this._fileEventDelayer = new async_1.Delayer(250);\n        this._onReady = new Promise((resolve, reject) => {\n            this._onReadyCallbacks = new OnReady(resolve, reject);\n        });\n        this._onStop = undefined;\n        this._telemetryEmitter = new vscode_languageserver_protocol_1.Emitter();\n        this._stateChangeEmitter = new vscode_languageserver_protocol_1.Emitter();\n        this._tracer = {\n            log: (messageOrDataObject, data) => {\n                if (Is.string(messageOrDataObject)) {\n                    this.logTrace(messageOrDataObject, data);\n                }\n                else {\n                    this.logObjectTrace(messageOrDataObject);\n                }\n            },\n        };\n        this._c2p = c2p.createConverter(clientOptions.uriConverters ? clientOptions.uriConverters.code2Protocol : undefined);\n        this._p2c = p2c.createConverter(clientOptions.uriConverters ? clientOptions.uriConverters.protocol2Code : undefined);\n        this._syncedDocuments = new Map();\n        this.registerBuiltinFeatures();\n    }\n    get state() {\n        return this._state;\n    }\n    set state(value) {\n        let oldState = this.getPublicState();\n        this._state = value;\n        let newState = this.getPublicState();\n        if (newState !== oldState) {\n            this._stateChangeEmitter.fire({ oldState, newState });\n        }\n    }\n    getPublicState() {\n        if (this.state === ClientState.Running) {\n            return State.Running;\n        }\n        else if (this.state === ClientState.Starting) {\n            return State.Starting;\n        }\n        else {\n            return State.Stopped;\n        }\n    }\n    get initializeResult() {\n        return this._initializeResult;\n    }\n    sendRequest(type, ...params) {\n        if (!this.isConnectionActive()) {\n            throw new Error('Language client is not ready yet');\n        }\n        this.forceDocumentSync();\n        try {\n            return this._resolvedConnection.sendRequest(type, ...params);\n        }\n        catch (error) {\n            this.error(`Sending request ${Is.string(type) ? type : type.method} failed.`, error);\n            throw error;\n        }\n    }\n    onRequest(type, handler) {\n        if (!this.isConnectionActive()) {\n            throw new Error('Language client is not ready yet');\n        }\n        try {\n            this._resolvedConnection.onRequest(type, handler);\n        }\n        catch (error) {\n            this.error(`Registering request handler ${Is.string(type) ? type : type.method} failed.`, error);\n            throw error;\n        }\n    }\n    sendNotification(type, params) {\n        if (!this.isConnectionActive()) {\n            throw new Error('Language client is not ready yet');\n        }\n        this.forceDocumentSync();\n        try {\n            this._resolvedConnection.sendNotification(type, params);\n        }\n        catch (error) {\n            this.error(`Sending notification ${Is.string(type) ? type : type.method} failed.`, error);\n            throw error;\n        }\n    }\n    onNotification(type, handler) {\n        if (!this.isConnectionActive()) {\n            throw new Error('Language client is not ready yet');\n        }\n        try {\n            this._resolvedConnection.onNotification(type, handler);\n        }\n        catch (error) {\n            this.error(`Registering notification handler ${Is.string(type) ? type : type.method} failed.`, error);\n            throw error;\n        }\n    }\n    get clientOptions() {\n        return this._clientOptions;\n    }\n    get protocol2CodeConverter() {\n        return this._p2c;\n    }\n    get code2ProtocolConverter() {\n        return this._c2p;\n    }\n    get onTelemetry() {\n        return this._telemetryEmitter.event;\n    }\n    get onDidChangeState() {\n        return this._stateChangeEmitter.event;\n    }\n    get outputChannel() {\n        if (!this._outputChannel) {\n            this._outputChannel = vscode_1.window.createOutputChannel(this._clientOptions.outputChannelName ? this._clientOptions.outputChannelName : this._name);\n        }\n        return this._outputChannel;\n    }\n    get traceOutputChannel() {\n        if (this._traceOutputChannel) {\n            return this._traceOutputChannel;\n        }\n        return this.outputChannel;\n    }\n    get diagnostics() {\n        return this._diagnostics;\n    }\n    createDefaultErrorHandler() {\n        return new DefaultErrorHandler(this._name);\n    }\n    set trace(value) {\n        this._trace = value;\n        this.onReady().then(() => {\n            this.resolveConnection().then((connection) => {\n                connection.trace(this._trace, this._tracer, {\n                    sendNotification: false,\n                    traceFormat: this._traceFormat\n                });\n            });\n        }, () => {\n        });\n    }\n    data2String(data) {\n        if (data instanceof vscode_languageserver_protocol_1.ResponseError) {\n            const responseError = data;\n            return `  Message: ${responseError.message}\\n  Code: ${responseError.code} ${responseError.data ? '\\n' + responseError.data.toString() : ''}`;\n        }\n        if (data instanceof Error) {\n            if (Is.string(data.stack)) {\n                return data.stack;\n            }\n            return data.message;\n        }\n        if (Is.string(data)) {\n            return data;\n        }\n        return data.toString();\n    }\n    info(message, data) {\n        this.outputChannel.appendLine(`[Info  - ${(new Date().toLocaleTimeString())}] ${message}`);\n        if (data) {\n            this.outputChannel.appendLine(this.data2String(data));\n        }\n        if (this._clientOptions.revealOutputChannelOn <= RevealOutputChannelOn.Info) {\n            this.showNotificationMessage();\n        }\n    }\n    warn(message, data) {\n        this.outputChannel.appendLine(`[Warn  - ${(new Date().toLocaleTimeString())}] ${message}`);\n        if (data) {\n            this.outputChannel.appendLine(this.data2String(data));\n        }\n        if (this._clientOptions.revealOutputChannelOn <= RevealOutputChannelOn.Warn) {\n            this.showNotificationMessage();\n        }\n    }\n    error(message, data) {\n        this.outputChannel.appendLine(`[Error - ${(new Date().toLocaleTimeString())}] ${message}`);\n        if (data) {\n            this.outputChannel.appendLine(this.data2String(data));\n        }\n        if (this._clientOptions.revealOutputChannelOn <= RevealOutputChannelOn.Error) {\n            this.showNotificationMessage();\n        }\n    }\n    showNotificationMessage() {\n        vscode_1.window.showInformationMessage('A request has failed. See the output for more information.', 'Go to output').then(() => {\n            this.outputChannel.show(true);\n        });\n    }\n    logTrace(message, data) {\n        this.traceOutputChannel.appendLine(`[Trace - ${(new Date().toLocaleTimeString())}] ${message}`);\n        if (data) {\n            this.traceOutputChannel.appendLine(this.data2String(data));\n        }\n    }\n    logObjectTrace(data) {\n        if (data.isLSPMessage && data.type) {\n            this.traceOutputChannel.append(`[LSP   - ${(new Date().toLocaleTimeString())}] `);\n        }\n        else {\n            this.traceOutputChannel.append(`[Trace - ${(new Date().toLocaleTimeString())}] `);\n        }\n        if (data) {\n            this.traceOutputChannel.appendLine(`${JSON.stringify(data)}`);\n        }\n    }\n    needsStart() {\n        return this.state === ClientState.Initial || this.state === ClientState.Stopping || this.state === ClientState.Stopped;\n    }\n    needsStop() {\n        return this.state === ClientState.Starting || this.state === ClientState.Running;\n    }\n    onReady() {\n        return this._onReady;\n    }\n    isConnectionActive() {\n        return this.state === ClientState.Running && !!this._resolvedConnection;\n    }\n    start() {\n        if (this._onReadyCallbacks.isUsed) {\n            this._onReady = new Promise((resolve, reject) => {\n                this._onReadyCallbacks = new OnReady(resolve, reject);\n            });\n        }\n        this._listeners = [];\n        this._providers = [];\n        // If we restart then the diagnostics collection is reused.\n        if (!this._diagnostics) {\n            this._diagnostics = this._clientOptions.diagnosticCollectionName\n                ? vscode_1.languages.createDiagnosticCollection(this._clientOptions.diagnosticCollectionName)\n                : vscode_1.languages.createDiagnosticCollection();\n        }\n        this.state = ClientState.Starting;\n        this.resolveConnection().then((connection) => {\n            connection.onLogMessage((message) => {\n                switch (message.type) {\n                    case vscode_languageserver_protocol_1.MessageType.Error:\n                        this.error(message.message);\n                        break;\n                    case vscode_languageserver_protocol_1.MessageType.Warning:\n                        this.warn(message.message);\n                        break;\n                    case vscode_languageserver_protocol_1.MessageType.Info:\n                        this.info(message.message);\n                        break;\n                    default:\n                        this.outputChannel.appendLine(message.message);\n                }\n            });\n            connection.onShowMessage((message) => {\n                switch (message.type) {\n                    case vscode_languageserver_protocol_1.MessageType.Error:\n                        vscode_1.window.showErrorMessage(message.message);\n                        break;\n                    case vscode_languageserver_protocol_1.MessageType.Warning:\n                        vscode_1.window.showWarningMessage(message.message);\n                        break;\n                    case vscode_languageserver_protocol_1.MessageType.Info:\n                        vscode_1.window.showInformationMessage(message.message);\n                        break;\n                    default:\n                        vscode_1.window.showInformationMessage(message.message);\n                }\n            });\n            connection.onRequest(vscode_languageserver_protocol_1.ShowMessageRequest.type, (params) => {\n                let messageFunc;\n                switch (params.type) {\n                    case vscode_languageserver_protocol_1.MessageType.Error:\n                        messageFunc = vscode_1.window.showErrorMessage;\n                        break;\n                    case vscode_languageserver_protocol_1.MessageType.Warning:\n                        messageFunc = vscode_1.window.showWarningMessage;\n                        break;\n                    case vscode_languageserver_protocol_1.MessageType.Info:\n                        messageFunc = vscode_1.window.showInformationMessage;\n                        break;\n                    default:\n                        messageFunc = vscode_1.window.showInformationMessage;\n                }\n                let actions = params.actions || [];\n                return messageFunc(params.message, ...actions);\n            });\n            connection.onTelemetry((data) => {\n                this._telemetryEmitter.fire(data);\n            });\n            connection.listen();\n            // Error is handled in the initialize call.\n            return this.initialize(connection);\n        }).then(undefined, (error) => {\n            this.state = ClientState.StartFailed;\n            this._onReadyCallbacks.reject(error);\n            this.error('Starting client failed', error);\n            vscode_1.window.showErrorMessage(`Couldn't start client ${this._name}`);\n        });\n        return new vscode_1.Disposable(() => {\n            if (this.needsStop()) {\n                this.stop();\n            }\n        });\n    }\n    resolveConnection() {\n        if (!this._connectionPromise) {\n            this._connectionPromise = this.createConnection();\n        }\n        return this._connectionPromise;\n    }\n    initialize(connection) {\n        this.refreshTrace(connection, false);\n        let initOption = this._clientOptions.initializationOptions;\n        let rootPath = this._clientOptions.workspaceFolder\n            ? this._clientOptions.workspaceFolder.uri.fsPath\n            : this._clientGetRootPath();\n        let initParams = {\n            processId: process.pid,\n            rootPath: rootPath ? rootPath : null,\n            rootUri: rootPath ? this._c2p.asUri(vscode_1.Uri.file(rootPath)) : null,\n            capabilities: this.computeClientCapabilities(),\n            initializationOptions: Is.func(initOption) ? initOption() : initOption,\n            trace: vscode_languageserver_protocol_1.Trace.toString(this._trace),\n            workspaceFolders: null\n        };\n        this.fillInitializeParams(initParams);\n        return connection.initialize(initParams).then((result) => {\n            this._resolvedConnection = connection;\n            this._initializeResult = result;\n            this.state = ClientState.Running;\n            let textDocumentSyncOptions = undefined;\n            if (Is.number(result.capabilities.textDocumentSync)) {\n                if (result.capabilities.textDocumentSync === vscode_languageserver_protocol_1.TextDocumentSyncKind.None) {\n                    textDocumentSyncOptions = {\n                        openClose: false,\n                        change: vscode_languageserver_protocol_1.TextDocumentSyncKind.None,\n                        save: undefined\n                    };\n                }\n                else {\n                    textDocumentSyncOptions = {\n                        openClose: true,\n                        change: result.capabilities.textDocumentSync,\n                        save: {\n                            includeText: false\n                        }\n                    };\n                }\n            }\n            else if (result.capabilities.textDocumentSync !== void 0 && result.capabilities.textDocumentSync !== null) {\n                textDocumentSyncOptions = result.capabilities.textDocumentSync;\n            }\n            this._capabilities = Object.assign({}, result.capabilities, { resolvedTextDocumentSync: textDocumentSyncOptions });\n            connection.onDiagnostics(params => this.handleDiagnostics(params));\n            connection.onRequest(vscode_languageserver_protocol_1.RegistrationRequest.type, params => this.handleRegistrationRequest(params));\n            // See https://github.com/Microsoft/vscode-languageserver-node/issues/199\n            connection.onRequest('client/registerFeature', params => this.handleRegistrationRequest(params));\n            connection.onRequest(vscode_languageserver_protocol_1.UnregistrationRequest.type, params => this.handleUnregistrationRequest(params));\n            // See https://github.com/Microsoft/vscode-languageserver-node/issues/199\n            connection.onRequest('client/unregisterFeature', params => this.handleUnregistrationRequest(params));\n            connection.onRequest(vscode_languageserver_protocol_1.ApplyWorkspaceEditRequest.type, params => this.handleApplyWorkspaceEdit(params));\n            connection.sendNotification(vscode_languageserver_protocol_1.InitializedNotification.type, {});\n            this.hookFileEvents(connection);\n            this.hookConfigurationChanged(connection);\n            this.initializeFeatures(connection);\n            this._onReadyCallbacks.resolve();\n            return result;\n        }).then(undefined, (error) => {\n            if (this._clientOptions.initializationFailedHandler) {\n                if (this._clientOptions.initializationFailedHandler(error)) {\n                    this.initialize(connection);\n                }\n                else {\n                    this.stop();\n                    this._onReadyCallbacks.reject(error);\n                }\n            }\n            else if (error instanceof vscode_languageserver_protocol_1.ResponseError && error.data && error.data.retry) {\n                vscode_1.window.showErrorMessage(error.message, { title: 'Retry', id: \"retry\" }).then(item => {\n                    if (item && item.id === 'retry') {\n                        this.initialize(connection);\n                    }\n                    else {\n                        this.stop();\n                        this._onReadyCallbacks.reject(error);\n                    }\n                });\n            }\n            else {\n                if (error && error.message) {\n                    vscode_1.window.showErrorMessage(error.message);\n                }\n                this.error('Server initialization failed.', error);\n                this.stop();\n                this._onReadyCallbacks.reject(error);\n            }\n        });\n    }\n    _clientGetRootPath() {\n        let folders = vscode_1.workspace.workspaceFolders;\n        if (!folders || folders.length === 0) {\n            return undefined;\n        }\n        let folder = folders[0];\n        if (folder.uri.scheme === 'file') {\n            return folder.uri.fsPath;\n        }\n        return undefined;\n    }\n    stop() {\n        this._initializeResult = undefined;\n        if (!this._connectionPromise) {\n            this.state = ClientState.Stopped;\n            return Promise.resolve();\n        }\n        if (this.state === ClientState.Stopping && this._onStop) {\n            return this._onStop;\n        }\n        this.state = ClientState.Stopping;\n        this.cleanUp();\n        // unhook listeners\n        return this._onStop = this.resolveConnection().then(connection => {\n            return connection.shutdown().then(() => {\n                connection.exit();\n                connection.dispose();\n                this.state = ClientState.Stopped;\n                this._onStop = undefined;\n                this._connectionPromise = undefined;\n                this._resolvedConnection = undefined;\n            });\n        });\n    }\n    cleanUp(channel = true, diagnostics = true) {\n        if (this._listeners) {\n            this._listeners.forEach(listener => listener.dispose());\n            this._listeners = undefined;\n        }\n        if (this._providers) {\n            this._providers.forEach(provider => provider.dispose());\n            this._providers = undefined;\n        }\n        if (this._syncedDocuments) {\n            this._syncedDocuments.clear();\n        }\n        for (let handler of this._dynamicFeatures.values()) {\n            handler.dispose();\n        }\n        if (channel && this._outputChannel && this._disposeOutputChannel) {\n            this._outputChannel.dispose();\n            this._outputChannel = undefined;\n        }\n        if (diagnostics && this._diagnostics) {\n            this._diagnostics.dispose();\n            this._diagnostics = undefined;\n        }\n    }\n    notifyFileEvent(event) {\n        this._fileEvents.push(event);\n        this._fileEventDelayer.trigger(() => {\n            this.onReady().then(() => {\n                this.resolveConnection().then(connection => {\n                    if (this.isConnectionActive()) {\n                        this.forceDocumentSync();\n                        connection.didChangeWatchedFiles({ changes: this._fileEvents });\n                    }\n                    this._fileEvents = [];\n                });\n            }, (error) => {\n                this.error(`Notify file events failed.`, error);\n            });\n        });\n    }\n    forceDocumentSync() {\n        this._dynamicFeatures.get(vscode_languageserver_protocol_1.DidChangeTextDocumentNotification.type.method).forceDelivery();\n    }\n    handleDiagnostics(params) {\n        if (!this._diagnostics) {\n            return;\n        }\n        let uri = this._p2c.asUri(params.uri);\n        let diagnostics = this._p2c.asDiagnostics(params.diagnostics);\n        let middleware = this.clientOptions.middleware.handleDiagnostics;\n        if (middleware) {\n            middleware(uri, diagnostics, (uri, diagnostics) => this.setDiagnostics(uri, diagnostics));\n        }\n        else {\n            this.setDiagnostics(uri, diagnostics);\n        }\n    }\n    setDiagnostics(uri, diagnostics) {\n        if (!this._diagnostics) {\n            return;\n        }\n        this._diagnostics.set(uri, diagnostics);\n    }\n    createConnection() {\n        let errorHandler = (error, message, count) => {\n            this.handleConnectionError(error, message, count);\n        };\n        let closeHandler = () => {\n            this.handleConnectionClosed();\n        };\n        return this.createMessageTransports(this._clientOptions.stdioEncoding || 'utf8').then((transports) => {\n            return createConnection(transports.reader, transports.writer, errorHandler, closeHandler);\n        });\n    }\n    handleConnectionClosed() {\n        // Check whether this is a normal shutdown in progress or the client stopped normally.\n        if (this.state === ClientState.Stopping || this.state === ClientState.Stopped) {\n            return;\n        }\n        try {\n            if (this._resolvedConnection) {\n                this._resolvedConnection.dispose();\n            }\n        }\n        catch (error) {\n            // Disposing a connection could fail if error cases.\n        }\n        let action = CloseAction.DoNotRestart;\n        try {\n            action = this._clientOptions.errorHandler.closed();\n        }\n        catch (error) {\n            // Ignore errors coming from the error handler.\n        }\n        this._connectionPromise = undefined;\n        this._resolvedConnection = undefined;\n        if (action === CloseAction.DoNotRestart) {\n            this.error('Connection to server got closed. Server will not be restarted.');\n            this.state = ClientState.Stopped;\n            this.cleanUp(false, true);\n        }\n        else if (action === CloseAction.Restart) {\n            this.info('Connection to server got closed. Server will restart.');\n            this.cleanUp(false, false);\n            this.state = ClientState.Initial;\n            this.start();\n        }\n    }\n    handleConnectionError(error, message, count) {\n        let action = this._clientOptions.errorHandler.error(error, message, count);\n        if (action === ErrorAction.Shutdown) {\n            this.error('Connection to server is erroring. Shutting down server.');\n            this.stop();\n        }\n    }\n    hookConfigurationChanged(connection) {\n        vscode_1.workspace.onDidChangeConfiguration(() => {\n            this.refreshTrace(connection, true);\n        });\n    }\n    refreshTrace(connection, sendNotification = false) {\n        let config = vscode_1.workspace.getConfiguration(this._id);\n        let trace = vscode_languageserver_protocol_1.Trace.Off;\n        let traceFormat = vscode_languageserver_protocol_1.TraceFormat.Text;\n        if (config) {\n            const traceConfig = config.get('trace.server', 'off');\n            if (typeof traceConfig === 'string') {\n                trace = vscode_languageserver_protocol_1.Trace.fromString(traceConfig);\n            }\n            else {\n                trace = vscode_languageserver_protocol_1.Trace.fromString(config.get('trace.server.verbosity', 'off'));\n                traceFormat = vscode_languageserver_protocol_1.TraceFormat.fromString(config.get('trace.server.format', 'text'));\n            }\n        }\n        this._trace = trace;\n        this._traceFormat = traceFormat;\n        connection.trace(this._trace, this._tracer, {\n            sendNotification,\n            traceFormat: this._traceFormat\n        });\n    }\n    hookFileEvents(_connection) {\n        let fileEvents = this._clientOptions.synchronize.fileEvents;\n        if (!fileEvents) {\n            return;\n        }\n        let watchers;\n        if (Is.array(fileEvents)) {\n            watchers = fileEvents;\n        }\n        else {\n            watchers = [fileEvents];\n        }\n        if (!watchers) {\n            return;\n        }\n        this._dynamicFeatures.get(vscode_languageserver_protocol_1.DidChangeWatchedFilesNotification.type.method).registerRaw(UUID.generateUuid(), watchers);\n    }\n    registerFeatures(features) {\n        for (let feature of features) {\n            this.registerFeature(feature);\n        }\n    }\n    registerFeature(feature) {\n        this._features.push(feature);\n        if (DynamicFeature.is(feature)) {\n            let messages = feature.messages;\n            if (Array.isArray(messages)) {\n                for (let message of messages) {\n                    this._method2Message.set(message.method, message);\n                    this._dynamicFeatures.set(message.method, feature);\n                }\n            }\n            else {\n                this._method2Message.set(messages.method, messages);\n                this._dynamicFeatures.set(messages.method, feature);\n            }\n        }\n    }\n    registerBuiltinFeatures() {\n        this.registerFeature(new ConfigurationFeature(this));\n        this.registerFeature(new DidOpenTextDocumentFeature(this, this._syncedDocuments));\n        this.registerFeature(new DidChangeTextDocumentFeature(this));\n        this.registerFeature(new WillSaveFeature(this));\n        this.registerFeature(new WillSaveWaitUntilFeature(this));\n        this.registerFeature(new DidSaveTextDocumentFeature(this));\n        this.registerFeature(new DidCloseTextDocumentFeature(this, this._syncedDocuments));\n        this.registerFeature(new FileSystemWatcherFeature(this, (event) => this.notifyFileEvent(event)));\n        this.registerFeature(new CompletionItemFeature(this));\n        this.registerFeature(new HoverFeature(this));\n        this.registerFeature(new SignatureHelpFeature(this));\n        this.registerFeature(new DefinitionFeature(this));\n        this.registerFeature(new ReferencesFeature(this));\n        this.registerFeature(new DocumentHighlightFeature(this));\n        this.registerFeature(new DocumentSymbolFeature(this));\n        this.registerFeature(new WorkspaceSymbolFeature(this));\n        this.registerFeature(new CodeActionFeature(this));\n        this.registerFeature(new CodeLensFeature(this));\n        this.registerFeature(new DocumentFormattingFeature(this));\n        this.registerFeature(new DocumentRangeFormattingFeature(this));\n        this.registerFeature(new DocumentOnTypeFormattingFeature(this));\n        this.registerFeature(new RenameFeature(this));\n        this.registerFeature(new DocumentLinkFeature(this));\n        this.registerFeature(new ExecuteCommandFeature(this));\n    }\n    fillInitializeParams(params) {\n        for (let feature of this._features) {\n            if (Is.func(feature.fillInitializeParams)) {\n                feature.fillInitializeParams(params);\n            }\n        }\n    }\n    computeClientCapabilities() {\n        let result = {};\n        ensure(result, 'workspace').applyEdit = true;\n        let workspaceEdit = ensure(ensure(result, 'workspace'), 'workspaceEdit');\n        workspaceEdit.documentChanges = true;\n        workspaceEdit.resourceOperations = [vscode_languageserver_protocol_1.ResourceOperationKind.Create, vscode_languageserver_protocol_1.ResourceOperationKind.Rename, vscode_languageserver_protocol_1.ResourceOperationKind.Delete];\n        workspaceEdit.failureHandling = vscode_languageserver_protocol_1.FailureHandlingKind.TextOnlyTransactional;\n        let diagnostics = ensure(ensure(result, 'textDocument'), 'publishDiagnostics');\n        diagnostics.relatedInformation = true;\n        diagnostics.tagSupport = true;\n        for (let feature of this._features) {\n            feature.fillClientCapabilities(result);\n        }\n        return result;\n    }\n    initializeFeatures(_connection) {\n        let documentSelector = this._clientOptions.documentSelector;\n        for (let feature of this._features) {\n            feature.initialize(this._capabilities, documentSelector);\n        }\n    }\n    handleRegistrationRequest(params) {\n        return new Promise((resolve, reject) => {\n            for (let registration of params.registrations) {\n                const feature = this._dynamicFeatures.get(registration.method);\n                if (!feature) {\n                    reject(new Error(`No feature implementation for ${registration.method} found. Registration failed.`));\n                    return;\n                }\n                const options = registration.registerOptions || {};\n                options.documentSelector = options.documentSelector || this._clientOptions.documentSelector;\n                const data = {\n                    id: registration.id,\n                    registerOptions: options\n                };\n                feature.register(this._method2Message.get(registration.method), data);\n            }\n            resolve();\n        });\n    }\n    handleUnregistrationRequest(params) {\n        return new Promise((resolve, reject) => {\n            for (let unregistration of params.unregisterations) {\n                const feature = this._dynamicFeatures.get(unregistration.method);\n                if (!feature) {\n                    reject(new Error(`No feature implementation for ${unregistration.method} found. Unregistration failed.`));\n                    return;\n                }\n                feature.unregister(unregistration.id);\n            }\n            ;\n            resolve();\n        });\n    }\n    handleApplyWorkspaceEdit(params) {\n        // This is some sort of workaround since the version check should be done by VS Code in the Workspace.applyEdit.\n        // However doing it here adds some safety since the server can lag more behind then an extension.\n        let workspaceEdit = params.edit;\n        let openTextDocuments = new Map();\n        vscode_1.workspace.textDocuments.forEach((document) => openTextDocuments.set(document.uri.toString(), document));\n        let versionMismatch = false;\n        if (workspaceEdit.documentChanges) {\n            for (const change of workspaceEdit.documentChanges) {\n                if (vscode_languageserver_protocol_1.TextDocumentEdit.is(change) && change.textDocument.version && change.textDocument.version >= 0) {\n                    let textDocument = openTextDocuments.get(change.textDocument.uri);\n                    if (textDocument && textDocument.version !== change.textDocument.version) {\n                        versionMismatch = true;\n                        break;\n                    }\n                }\n            }\n        }\n        if (versionMismatch) {\n            return Promise.resolve({ applied: false });\n        }\n        return vscode_1.workspace.applyEdit(this._p2c.asWorkspaceEdit(params.edit)).then((value) => { return { applied: value }; });\n    }\n    ;\n    logFailedRequest(type, error) {\n        // If we get a request cancel don't log anything.\n        if (error instanceof vscode_languageserver_protocol_1.ResponseError && error.code === vscode_languageserver_protocol_1.ErrorCodes.RequestCancelled) {\n            return;\n        }\n        this.error(`Request ${type.method} failed.`, error);\n    }\n}\nexports.BaseLanguageClient = BaseLanguageClient;\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Disposable;\r\n(function (Disposable) {\r\n    function create(func) {\r\n        return {\r\n            dispose: func\r\n        };\r\n    }\r\n    Disposable.create = create;\r\n})(Disposable = exports.Disposable || (exports.Disposable = {}));\r\nvar Event;\r\n(function (Event) {\r\n    const _disposable = { dispose() { } };\r\n    Event.None = function () { return _disposable; };\r\n})(Event = exports.Event || (exports.Event = {}));\r\nclass CallbackList {\r\n    add(callback, context = null, bucket) {\r\n        if (!this._callbacks) {\r\n            this._callbacks = [];\r\n            this._contexts = [];\r\n        }\r\n        this._callbacks.push(callback);\r\n        this._contexts.push(context);\r\n        if (Array.isArray(bucket)) {\r\n            bucket.push({ dispose: () => this.remove(callback, context) });\r\n        }\r\n    }\r\n    remove(callback, context = null) {\r\n        if (!this._callbacks) {\r\n            return;\r\n        }\r\n        var foundCallbackWithDifferentContext = false;\r\n        for (var i = 0, len = this._callbacks.length; i < len; i++) {\r\n            if (this._callbacks[i] === callback) {\r\n                if (this._contexts[i] === context) {\r\n                    // callback & context match => remove it\r\n                    this._callbacks.splice(i, 1);\r\n                    this._contexts.splice(i, 1);\r\n                    return;\r\n                }\r\n                else {\r\n                    foundCallbackWithDifferentContext = true;\r\n                }\r\n            }\r\n        }\r\n        if (foundCallbackWithDifferentContext) {\r\n            throw new Error('When adding a listener with a context, you should remove it with the same context');\r\n        }\r\n    }\r\n    invoke(...args) {\r\n        if (!this._callbacks) {\r\n            return [];\r\n        }\r\n        var ret = [], callbacks = this._callbacks.slice(0), contexts = this._contexts.slice(0);\r\n        for (var i = 0, len = callbacks.length; i < len; i++) {\r\n            try {\r\n                ret.push(callbacks[i].apply(contexts[i], args));\r\n            }\r\n            catch (e) {\r\n                console.error(e);\r\n            }\r\n        }\r\n        return ret;\r\n    }\r\n    isEmpty() {\r\n        return !this._callbacks || this._callbacks.length === 0;\r\n    }\r\n    dispose() {\r\n        this._callbacks = undefined;\r\n        this._contexts = undefined;\r\n    }\r\n}\r\nclass Emitter {\r\n    constructor(_options) {\r\n        this._options = _options;\r\n    }\r\n    /**\r\n     * For the public to allow to subscribe\r\n     * to events from this Emitter\r\n     */\r\n    get event() {\r\n        if (!this._event) {\r\n            this._event = (listener, thisArgs, disposables) => {\r\n                if (!this._callbacks) {\r\n                    this._callbacks = new CallbackList();\r\n                }\r\n                if (this._options && this._options.onFirstListenerAdd && this._callbacks.isEmpty()) {\r\n                    this._options.onFirstListenerAdd(this);\r\n                }\r\n                this._callbacks.add(listener, thisArgs);\r\n                let result;\r\n                result = {\r\n                    dispose: () => {\r\n                        this._callbacks.remove(listener, thisArgs);\r\n                        result.dispose = Emitter._noop;\r\n                        if (this._options && this._options.onLastListenerRemove && this._callbacks.isEmpty()) {\r\n                            this._options.onLastListenerRemove(this);\r\n                        }\r\n                    }\r\n                };\r\n                if (Array.isArray(disposables)) {\r\n                    disposables.push(result);\r\n                }\r\n                return result;\r\n            };\r\n        }\r\n        return this._event;\r\n    }\r\n    /**\r\n     * To be kept private to fire an event to\r\n     * subscribers\r\n     */\r\n    fire(event) {\r\n        if (this._callbacks) {\r\n            this._callbacks.invoke.call(this._callbacks, event);\r\n        }\r\n    }\r\n    dispose() {\r\n        if (this._callbacks) {\r\n            this._callbacks.dispose();\r\n            this._callbacks = undefined;\r\n        }\r\n    }\r\n}\r\nEmitter._noop = function () { };\r\nexports.Emitter = Emitter;\r\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\nObject.defineProperty(exports, \"__esModule\", { value: true });\nclass ValueUUID {\n    constructor(_value) {\n        this._value = _value;\n        // empty\n    }\n    asHex() {\n        return this._value;\n    }\n    equals(other) {\n        return this.asHex() === other.asHex();\n    }\n}\nclass V4UUID extends ValueUUID {\n    constructor() {\n        super([\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            '-',\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            '-',\n            '4',\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            '-',\n            V4UUID._oneOf(V4UUID._timeHighBits),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            '-',\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n        ].join(''));\n    }\n    static _oneOf(array) {\n        return array[Math.floor(array.length * Math.random())];\n    }\n    static _randomHex() {\n        return V4UUID._oneOf(V4UUID._chars);\n    }\n}\nV4UUID._chars = ['0', '1', '2', '3', '4', '5', '6', '6', '7', '8', '9', 'a', 'b', 'c', 'd', 'e', 'f'];\nV4UUID._timeHighBits = ['8', '9', 'a', 'b'];\n/**\n * An empty UUID that contains only zeros.\n */\nexports.empty = new ValueUUID('00000000-0000-0000-0000-000000000000');\nfunction v4() {\n    return new V4UUID();\n}\nexports.v4 = v4;\nconst _UUIDPattern = /^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;\nfunction isUUID(value) {\n    return _UUIDPattern.test(value);\n}\nexports.isUUID = isUUID;\n/**\n * Parses a UUID that is of the format xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx.\n * @param value A uuid string.\n */\nfunction parse(value) {\n    if (!isUUID(value)) {\n        throw new Error('invalid uuid');\n    }\n    return new ValueUUID(value);\n}\nexports.parse = parse;\nfunction generateUuid() {\n    return v4().asHex();\n}\nexports.generateUuid = generateUuid;\n","module.exports = require(\"fs\");","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst events_1 = require(\"./events\");\r\nconst Is = require(\"./is\");\r\nlet DefaultSize = 8192;\r\nlet CR = Buffer.from('\\r', 'ascii')[0];\r\nlet LF = Buffer.from('\\n', 'ascii')[0];\r\nlet CRLF = '\\r\\n';\r\nclass MessageBuffer {\r\n    constructor(encoding = 'utf8') {\r\n        this.encoding = encoding;\r\n        this.index = 0;\r\n        this.buffer = Buffer.allocUnsafe(DefaultSize);\r\n    }\r\n    append(chunk) {\r\n        var toAppend = chunk;\r\n        if (typeof (chunk) === 'string') {\r\n            var str = chunk;\r\n            var bufferLen = Buffer.byteLength(str, this.encoding);\r\n            toAppend = Buffer.allocUnsafe(bufferLen);\r\n            toAppend.write(str, 0, bufferLen, this.encoding);\r\n        }\r\n        if (this.buffer.length - this.index >= toAppend.length) {\r\n            toAppend.copy(this.buffer, this.index, 0, toAppend.length);\r\n        }\r\n        else {\r\n            var newSize = (Math.ceil((this.index + toAppend.length) / DefaultSize) + 1) * DefaultSize;\r\n            if (this.index === 0) {\r\n                this.buffer = Buffer.allocUnsafe(newSize);\r\n                toAppend.copy(this.buffer, 0, 0, toAppend.length);\r\n            }\r\n            else {\r\n                this.buffer = Buffer.concat([this.buffer.slice(0, this.index), toAppend], newSize);\r\n            }\r\n        }\r\n        this.index += toAppend.length;\r\n    }\r\n    tryReadHeaders() {\r\n        let result = undefined;\r\n        let current = 0;\r\n        while (current + 3 < this.index && (this.buffer[current] !== CR || this.buffer[current + 1] !== LF || this.buffer[current + 2] !== CR || this.buffer[current + 3] !== LF)) {\r\n            current++;\r\n        }\r\n        // No header / body separator found (e.g CRLFCRLF)\r\n        if (current + 3 >= this.index) {\r\n            return result;\r\n        }\r\n        result = Object.create(null);\r\n        let headers = this.buffer.toString('ascii', 0, current).split(CRLF);\r\n        headers.forEach((header) => {\r\n            let index = header.indexOf(':');\r\n            if (index === -1) {\r\n                throw new Error('Message header must separate key and value using :');\r\n            }\r\n            let key = header.substr(0, index);\r\n            let value = header.substr(index + 1).trim();\r\n            result[key] = value;\r\n        });\r\n        let nextStart = current + 4;\r\n        this.buffer = this.buffer.slice(nextStart);\r\n        this.index = this.index - nextStart;\r\n        return result;\r\n    }\r\n    tryReadContent(length) {\r\n        if (this.index < length) {\r\n            return null;\r\n        }\r\n        let result = this.buffer.toString(this.encoding, 0, length);\r\n        let nextStart = length;\r\n        this.buffer.copy(this.buffer, 0, nextStart);\r\n        this.index = this.index - nextStart;\r\n        return result;\r\n    }\r\n    get numberOfBytes() {\r\n        return this.index;\r\n    }\r\n}\r\nvar MessageReader;\r\n(function (MessageReader) {\r\n    function is(value) {\r\n        let candidate = value;\r\n        return candidate && Is.func(candidate.listen) && Is.func(candidate.dispose) &&\r\n            Is.func(candidate.onError) && Is.func(candidate.onClose) && Is.func(candidate.onPartialMessage);\r\n    }\r\n    MessageReader.is = is;\r\n})(MessageReader = exports.MessageReader || (exports.MessageReader = {}));\r\nclass AbstractMessageReader {\r\n    constructor() {\r\n        this.errorEmitter = new events_1.Emitter();\r\n        this.closeEmitter = new events_1.Emitter();\r\n        this.partialMessageEmitter = new events_1.Emitter();\r\n    }\r\n    dispose() {\r\n        this.errorEmitter.dispose();\r\n        this.closeEmitter.dispose();\r\n    }\r\n    get onError() {\r\n        return this.errorEmitter.event;\r\n    }\r\n    fireError(error) {\r\n        this.errorEmitter.fire(this.asError(error));\r\n    }\r\n    get onClose() {\r\n        return this.closeEmitter.event;\r\n    }\r\n    fireClose() {\r\n        this.closeEmitter.fire(undefined);\r\n    }\r\n    get onPartialMessage() {\r\n        return this.partialMessageEmitter.event;\r\n    }\r\n    firePartialMessage(info) {\r\n        this.partialMessageEmitter.fire(info);\r\n    }\r\n    asError(error) {\r\n        if (error instanceof Error) {\r\n            return error;\r\n        }\r\n        else {\r\n            return new Error(`Reader received error. Reason: ${Is.string(error.message) ? error.message : 'unknown'}`);\r\n        }\r\n    }\r\n}\r\nexports.AbstractMessageReader = AbstractMessageReader;\r\nclass StreamMessageReader extends AbstractMessageReader {\r\n    constructor(readable, encoding = 'utf8') {\r\n        super();\r\n        this.readable = readable;\r\n        this.buffer = new MessageBuffer(encoding);\r\n        this._partialMessageTimeout = 10000;\r\n    }\r\n    set partialMessageTimeout(timeout) {\r\n        this._partialMessageTimeout = timeout;\r\n    }\r\n    get partialMessageTimeout() {\r\n        return this._partialMessageTimeout;\r\n    }\r\n    listen(callback) {\r\n        this.nextMessageLength = -1;\r\n        this.messageToken = 0;\r\n        this.partialMessageTimer = undefined;\r\n        this.callback = callback;\r\n        this.readable.on('data', (data) => {\r\n            this.onData(data);\r\n        });\r\n        this.readable.on('error', (error) => this.fireError(error));\r\n        this.readable.on('close', () => this.fireClose());\r\n    }\r\n    onData(data) {\r\n        this.buffer.append(data);\r\n        while (true) {\r\n            if (this.nextMessageLength === -1) {\r\n                let headers = this.buffer.tryReadHeaders();\r\n                if (!headers) {\r\n                    return;\r\n                }\r\n                let contentLength = headers['Content-Length'];\r\n                if (!contentLength) {\r\n                    throw new Error('Header must provide a Content-Length property.');\r\n                }\r\n                let length = parseInt(contentLength);\r\n                if (isNaN(length)) {\r\n                    throw new Error('Content-Length value must be a number.');\r\n                }\r\n                this.nextMessageLength = length;\r\n                // Take the encoding form the header. For compatibility\r\n                // treat both utf-8 and utf8 as node utf8\r\n            }\r\n            var msg = this.buffer.tryReadContent(this.nextMessageLength);\r\n            if (msg === null) {\r\n                /** We haven't received the full message yet. */\r\n                this.setPartialMessageTimer();\r\n                return;\r\n            }\r\n            this.clearPartialMessageTimer();\r\n            this.nextMessageLength = -1;\r\n            this.messageToken++;\r\n            var json = JSON.parse(msg);\r\n            this.callback(json);\r\n        }\r\n    }\r\n    clearPartialMessageTimer() {\r\n        if (this.partialMessageTimer) {\r\n            clearTimeout(this.partialMessageTimer);\r\n            this.partialMessageTimer = undefined;\r\n        }\r\n    }\r\n    setPartialMessageTimer() {\r\n        this.clearPartialMessageTimer();\r\n        if (this._partialMessageTimeout <= 0) {\r\n            return;\r\n        }\r\n        this.partialMessageTimer = setTimeout((token, timeout) => {\r\n            this.partialMessageTimer = undefined;\r\n            if (token === this.messageToken) {\r\n                this.firePartialMessage({ messageToken: token, waitingTime: timeout });\r\n                this.setPartialMessageTimer();\r\n            }\r\n        }, this._partialMessageTimeout, this.messageToken, this._partialMessageTimeout);\r\n    }\r\n}\r\nexports.StreamMessageReader = StreamMessageReader;\r\nclass IPCMessageReader extends AbstractMessageReader {\r\n    constructor(process) {\r\n        super();\r\n        this.process = process;\r\n        let eventEmitter = this.process;\r\n        eventEmitter.on('error', (error) => this.fireError(error));\r\n        eventEmitter.on('close', () => this.fireClose());\r\n    }\r\n    listen(callback) {\r\n        this.process.on('message', callback);\r\n    }\r\n}\r\nexports.IPCMessageReader = IPCMessageReader;\r\nclass SocketMessageReader extends StreamMessageReader {\r\n    constructor(socket, encoding = 'utf-8') {\r\n        super(socket, encoding);\r\n    }\r\n}\r\nexports.SocketMessageReader = SocketMessageReader;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst events_1 = require(\"./events\");\r\nconst Is = require(\"./is\");\r\nlet ContentLength = 'Content-Length: ';\r\nlet CRLF = '\\r\\n';\r\nvar MessageWriter;\r\n(function (MessageWriter) {\r\n    function is(value) {\r\n        let candidate = value;\r\n        return candidate && Is.func(candidate.dispose) && Is.func(candidate.onClose) &&\r\n            Is.func(candidate.onError) && Is.func(candidate.write);\r\n    }\r\n    MessageWriter.is = is;\r\n})(MessageWriter = exports.MessageWriter || (exports.MessageWriter = {}));\r\nclass AbstractMessageWriter {\r\n    constructor() {\r\n        this.errorEmitter = new events_1.Emitter();\r\n        this.closeEmitter = new events_1.Emitter();\r\n    }\r\n    dispose() {\r\n        this.errorEmitter.dispose();\r\n        this.closeEmitter.dispose();\r\n    }\r\n    get onError() {\r\n        return this.errorEmitter.event;\r\n    }\r\n    fireError(error, message, count) {\r\n        this.errorEmitter.fire([this.asError(error), message, count]);\r\n    }\r\n    get onClose() {\r\n        return this.closeEmitter.event;\r\n    }\r\n    fireClose() {\r\n        this.closeEmitter.fire(undefined);\r\n    }\r\n    asError(error) {\r\n        if (error instanceof Error) {\r\n            return error;\r\n        }\r\n        else {\r\n            return new Error(`Writer received error. Reason: ${Is.string(error.message) ? error.message : 'unknown'}`);\r\n        }\r\n    }\r\n}\r\nexports.AbstractMessageWriter = AbstractMessageWriter;\r\nclass StreamMessageWriter extends AbstractMessageWriter {\r\n    constructor(writable, encoding = 'utf8') {\r\n        super();\r\n        this.writable = writable;\r\n        this.encoding = encoding;\r\n        this.errorCount = 0;\r\n        this.writable.on('error', (error) => this.fireError(error));\r\n        this.writable.on('close', () => this.fireClose());\r\n    }\r\n    write(msg) {\r\n        let json = JSON.stringify(msg);\r\n        let contentLength = Buffer.byteLength(json, this.encoding);\r\n        let headers = [\r\n            ContentLength, contentLength.toString(), CRLF,\r\n            CRLF\r\n        ];\r\n        try {\r\n            // Header must be written in ASCII encoding\r\n            this.writable.write(headers.join(''), 'ascii');\r\n            // Now write the content. This can be written in any encoding\r\n            this.writable.write(json, this.encoding);\r\n            this.errorCount = 0;\r\n        }\r\n        catch (error) {\r\n            this.errorCount++;\r\n            this.fireError(error, msg, this.errorCount);\r\n        }\r\n    }\r\n}\r\nexports.StreamMessageWriter = StreamMessageWriter;\r\nclass IPCMessageWriter extends AbstractMessageWriter {\r\n    constructor(process) {\r\n        super();\r\n        this.process = process;\r\n        this.errorCount = 0;\r\n        this.queue = [];\r\n        this.sending = false;\r\n        let eventEmitter = this.process;\r\n        eventEmitter.on('error', (error) => this.fireError(error));\r\n        eventEmitter.on('close', () => this.fireClose);\r\n    }\r\n    write(msg) {\r\n        if (!this.sending && this.queue.length === 0) {\r\n            // See https://github.com/nodejs/node/issues/7657\r\n            this.doWriteMessage(msg);\r\n        }\r\n        else {\r\n            this.queue.push(msg);\r\n        }\r\n    }\r\n    doWriteMessage(msg) {\r\n        try {\r\n            if (this.process.send) {\r\n                this.sending = true;\r\n                this.process.send(msg, undefined, undefined, (error) => {\r\n                    this.sending = false;\r\n                    if (error) {\r\n                        this.errorCount++;\r\n                        this.fireError(error, msg, this.errorCount);\r\n                    }\r\n                    else {\r\n                        this.errorCount = 0;\r\n                    }\r\n                    if (this.queue.length > 0) {\r\n                        this.doWriteMessage(this.queue.shift());\r\n                    }\r\n                });\r\n            }\r\n        }\r\n        catch (error) {\r\n            this.errorCount++;\r\n            this.fireError(error, msg, this.errorCount);\r\n        }\r\n    }\r\n}\r\nexports.IPCMessageWriter = IPCMessageWriter;\r\nclass SocketMessageWriter extends AbstractMessageWriter {\r\n    constructor(socket, encoding = 'utf8') {\r\n        super();\r\n        this.socket = socket;\r\n        this.queue = [];\r\n        this.sending = false;\r\n        this.encoding = encoding;\r\n        this.errorCount = 0;\r\n        this.socket.on('error', (error) => this.fireError(error));\r\n        this.socket.on('close', () => this.fireClose());\r\n    }\r\n    dispose() {\r\n        super.dispose();\r\n        this.socket.destroy();\r\n    }\r\n    write(msg) {\r\n        if (!this.sending && this.queue.length === 0) {\r\n            // See https://github.com/nodejs/node/issues/7657\r\n            this.doWriteMessage(msg);\r\n        }\r\n        else {\r\n            this.queue.push(msg);\r\n        }\r\n    }\r\n    doWriteMessage(msg) {\r\n        let json = JSON.stringify(msg);\r\n        let contentLength = Buffer.byteLength(json, this.encoding);\r\n        let headers = [\r\n            ContentLength, contentLength.toString(), CRLF,\r\n            CRLF\r\n        ];\r\n        try {\r\n            // Header must be written in ASCII encoding\r\n            this.sending = true;\r\n            this.socket.write(headers.join(''), 'ascii', (error) => {\r\n                if (error) {\r\n                    this.handleError(error, msg);\r\n                }\r\n                try {\r\n                    // Now write the content. This can be written in any encoding\r\n                    this.socket.write(json, this.encoding, (error) => {\r\n                        this.sending = false;\r\n                        if (error) {\r\n                            this.handleError(error, msg);\r\n                        }\r\n                        else {\r\n                            this.errorCount = 0;\r\n                        }\r\n                        if (this.queue.length > 0) {\r\n                            this.doWriteMessage(this.queue.shift());\r\n                        }\r\n                    });\r\n                }\r\n                catch (error) {\r\n                    this.handleError(error, msg);\r\n                }\r\n            });\r\n        }\r\n        catch (error) {\r\n            this.handleError(error, msg);\r\n        }\r\n    }\r\n    handleError(error, msg) {\r\n        this.errorCount++;\r\n        this.fireError(error, msg, this.errorCount);\r\n    }\r\n}\r\nexports.SocketMessageWriter = SocketMessageWriter;\r\n","module.exports = require(\"child_process\");","module.exports = require(\"net\");","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar MetricsModel = /** @class */ (function () {\n    function MetricsModel(start, end, text, line, column, complexity, description, trim, visible, collectorType) {\n        this.children = [];\n        this.start = start;\n        this.end = end;\n        this.text = text;\n        this.line = line;\n        this.column = column;\n        this.complexity = complexity;\n        this.visible = !!visible;\n        this.description = description;\n        this.collectorType = collectorType;\n        this.storeText(text, trim);\n    }\n    MetricsModel.prototype.storeText = function (text, trim) {\n        if (trim) {\n            var lineFeedIndex = this.text.indexOf(\"\\r\");\n            lineFeedIndex = lineFeedIndex < 0 ? this.text.length : lineFeedIndex + 1;\n            var line = this.text.substring(0, lineFeedIndex).trim();\n            if (line.length > 70) {\n                this.text = line.substring(0, 70).trim() + \"...\";\n            }\n            else {\n                this.text = line;\n            }\n        }\n        else {\n            this.text = text;\n        }\n    };\n    MetricsModel.prototype.getCollectedComplexity = function () {\n        if (this.collectorType === \"MAX\") {\n            return (this.children.reduce(function (acc, current) { return Math.max(acc, current.getCollectedComplexity()); }, 0) + this.complexity);\n        }\n        else {\n            return this.children.reduce(function (acc, current) { return acc + current.getCollectedComplexity(); }, this.complexity);\n        }\n    };\n    MetricsModel.prototype.toLogString = function (level) {\n        var complexity = this.pad(this.roundComplexity(this.getCollectedComplexity()) + \"\", 5);\n        var line = this.pad(this.line + \"\");\n        var column = this.pad(this.column + \"\");\n        return complexity + \" - Ln \" + line + \" Col \" + column + \" \" + level + \" \" + this.text;\n    };\n    MetricsModel.prototype.pad = function (str, lenghtToFit) {\n        if (lenghtToFit === void 0) { lenghtToFit = 4; }\n        var pad = new Array(lenghtToFit).join(\" \");\n        return pad.substring(0, Math.max(0, pad.length - str.length)) + str;\n    };\n    MetricsModel.prototype.toString = function (settings) {\n        var complexitySum = this.getCollectedComplexity();\n        var instruction = \"\";\n        if (complexitySum > settings.ComplexityLevelExtreme) {\n            instruction = settings.ComplexityLevelExtremeDescription;\n        }\n        else if (complexitySum > settings.ComplexityLevelHigh) {\n            instruction = settings.ComplexityLevelHighDescription;\n        }\n        else if (complexitySum > settings.ComplexityLevelNormal) {\n            instruction = settings.ComplexityLevelNormalDescription;\n        }\n        else if (complexitySum > settings.ComplexityLevelLow) {\n            instruction = settings.ComplexityLevelLowDescription;\n        }\n        var template = settings.ComplexityTemplate + \"\";\n        if (!settings.ComplexityTemplate || template.trim().length == 0) {\n            template = \"Complexity is {0} {1}\";\n        }\n        return template\n            .replace(\"{0}\", this.roundComplexity(complexitySum) + \"\")\n            .replace(\"{1}\", instruction);\n    };\n    MetricsModel.prototype.getExplanation = function () {\n        var _this = this;\n        var allRelevant = [this];\n        return allRelevant\n            .map(function (item) {\n            return \"+\" +\n                _this.roundComplexity(item.getCollectedComplexity()) +\n                \" for \" +\n                item.description +\n                \" in Ln \" +\n                item.line +\n                \", Col \" +\n                item.column;\n        })\n            .reduce(function (item1, item2) { return item1 + item2; });\n    };\n    MetricsModel.prototype.clone = function (deepClone) {\n        var model = new MetricsModel(this.start, this.end, this.text, this.line, this.column, this.complexity, this.description, false, this.visible, this.collectorType);\n        if (deepClone) {\n            model.children = this.children.map(function (item) {\n                return item.clone();\n            });\n        }\n        return model;\n    };\n    MetricsModel.prototype.roundComplexity = function (complexity) {\n        return Number(complexity.toFixed(2));\n    };\n    return MetricsModel;\n}());\nexports.MetricsModel = MetricsModel;\n//# sourceMappingURL=MetricsModel.js.map","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n/// <reference path=\"./thenable.ts\" />\r\n'use strict';\r\nfunction __export(m) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\r\nexports.Event = vscode_languageserver_protocol_1.Event;\r\nconst configuration_1 = require(\"./configuration\");\r\nconst workspaceFolders_1 = require(\"./workspaceFolders\");\r\nconst Is = require(\"./utils/is\");\r\nconst UUID = require(\"./utils/uuid\");\r\n// ------------- Reexport the API surface of the language worker API ----------------------\r\n__export(require(\"vscode-languageserver-protocol\"));\r\nconst fm = require(\"./files\");\r\nconst vscode_textbuffer_1 = require(\"vscode-textbuffer\");\r\nconst range_1 = require(\"vscode-textbuffer/lib/common/range\");\r\nvar Files;\r\n(function (Files) {\r\n    Files.uriToFilePath = fm.uriToFilePath;\r\n    Files.resolveGlobalNodePath = fm.resolveGlobalNodePath;\r\n    Files.resolveGlobalYarnPath = fm.resolveGlobalYarnPath;\r\n    Files.resolve = fm.resolve;\r\n    Files.resolveModulePath = fm.resolveModulePath;\r\n})(Files = exports.Files || (exports.Files = {}));\r\nlet shutdownReceived = false;\r\nlet exitTimer = undefined;\r\nfunction setupExitTimer() {\r\n    const argName = '--clientProcessId';\r\n    function runTimer(value) {\r\n        try {\r\n            let processId = parseInt(value);\r\n            if (!isNaN(processId)) {\r\n                exitTimer = setInterval(() => {\r\n                    try {\r\n                        process.kill(processId, 0);\r\n                    }\r\n                    catch (ex) {\r\n                        // Parent process doesn't exist anymore. Exit the server.\r\n                        process.exit(shutdownReceived ? 0 : 1);\r\n                    }\r\n                }, 3000);\r\n            }\r\n        }\r\n        catch (e) {\r\n            // Ignore errors;\r\n        }\r\n    }\r\n    for (let i = 2; i < process.argv.length; i++) {\r\n        let arg = process.argv[i];\r\n        if (arg === argName && i + 1 < process.argv.length) {\r\n            runTimer(process.argv[i + 1]);\r\n            return;\r\n        }\r\n        else {\r\n            let args = arg.split('=');\r\n            if (args[0] === argName) {\r\n                runTimer(args[1]);\r\n            }\r\n        }\r\n    }\r\n}\r\nsetupExitTimer();\r\nfunction null2Undefined(value) {\r\n    if (value === null) {\r\n        return void 0;\r\n    }\r\n    return value;\r\n}\r\n/**\r\n * Incrementally-synchronized Text Document implementation that leverages a\r\n * \"Piece Tree\" as text buffer. See the following for details:\r\n *  - https://github.com/microsoft/vscode-textbuffer\r\n *  - https://code.visualstudio.com/blogs/2018/03/23/text-buffer-reimplementation\r\n *\r\n * This text document implementation only supports \"Incremental\" text document\r\n * sync. If you wish to use \"Full\" text document sync, use FullTextDocument, as it\r\n * uses a simple JS string as an underlying text buffer, since the full text gets\r\n * swapped out on every update.\r\n */\r\nclass IncrementalTextDocument {\r\n    constructor(uri, languageId, version, content) {\r\n        this._uri = uri;\r\n        this._languageId = languageId;\r\n        this._version = version;\r\n        // Prepare Piece Tree\r\n        const ptBuilder = new vscode_textbuffer_1.PieceTreeTextBufferBuilder();\r\n        ptBuilder.acceptChunk(content);\r\n        const ptFactory = ptBuilder.finish(true);\r\n        this._tree = ptFactory.create(1 /* LF */);\r\n    }\r\n    get uri() {\r\n        return this._uri;\r\n    }\r\n    get languageId() {\r\n        return this._languageId;\r\n    }\r\n    get version() {\r\n        return this._version;\r\n    }\r\n    getText(range) {\r\n        if (range) {\r\n            const { start, end } = range;\r\n            // Clamp last line and last character appropriately when\r\n            // given range is beyond the document's end\r\n            const [clampedEndLine, clampedEndChar] = end.line + 1 > this.lineCount\r\n                ? [this.lineCount, this._tree.getLineLength(this.lineCount) + 1]\r\n                : [end.line + 1, end.character + 1];\r\n            const ptRange = new range_1.Range(start.line + 1, start.character + 1, clampedEndLine, clampedEndChar);\r\n            return this._tree.getValueInRange(ptRange);\r\n        }\r\n        return this._tree.getLinesRawContent();\r\n    }\r\n    update(event, version) {\r\n        const { text, range } = event;\r\n        if (range == null) {\r\n            throw new Error(`FullPieceTreeTextDocument#update called with invalid event range ${range}`);\r\n        }\r\n        const startOffset = this.offsetAt(range.start);\r\n        const endOffset = this.offsetAt(range.end);\r\n        // Delete previous text at range and insert new text at appropriate offset\r\n        this._tree.delete(startOffset, endOffset - startOffset);\r\n        this._tree.insert(startOffset, text);\r\n        this._version = version;\r\n    }\r\n    positionAt(offset) {\r\n        const clampedOffset = Math.min(offset, this._tree.getLength());\r\n        const ptPosition = this._tree.getPositionAt(clampedOffset);\r\n        return vscode_languageserver_protocol_1.Position.create(ptPosition.lineNumber - 1, ptPosition.column - 1);\r\n    }\r\n    offsetAt(position) {\r\n        if (position.line < 0) {\r\n            return 0;\r\n        }\r\n        const clampedChar = Math.max(1, position.character + 1);\r\n        return Math.min(this._tree.getOffsetAt(position.line + 1, clampedChar), this._tree.getLength());\r\n    }\r\n    get lineCount() {\r\n        return this._tree.getLineCount();\r\n    }\r\n}\r\n/**\r\n * A manager for simple text documents\r\n */\r\nclass TextDocuments {\r\n    /**\r\n     * Create a new text document manager.\r\n     */\r\n    constructor(syncKind = vscode_languageserver_protocol_1.TextDocumentSyncKind.Full) {\r\n        this._documents = Object.create(null);\r\n        this._syncKind = syncKind;\r\n        this._onDidChangeContent = new vscode_languageserver_protocol_1.Emitter();\r\n        this._onDidOpen = new vscode_languageserver_protocol_1.Emitter();\r\n        this._onDidClose = new vscode_languageserver_protocol_1.Emitter();\r\n        this._onDidSave = new vscode_languageserver_protocol_1.Emitter();\r\n        this._onWillSave = new vscode_languageserver_protocol_1.Emitter();\r\n    }\r\n    /**\r\n     * Returns the [TextDocumentSyncKind](#TextDocumentSyncKind) used by\r\n     * this text document manager.\r\n     */\r\n    get syncKind() {\r\n        return this._syncKind;\r\n    }\r\n    /**\r\n     * An event that fires when a text document managed by this manager\r\n     * has been opened or the content changes.\r\n     */\r\n    get onDidChangeContent() {\r\n        return this._onDidChangeContent.event;\r\n    }\r\n    /**\r\n     * An event that fires when a text document managed by this manager\r\n     * has been opened.\r\n     */\r\n    get onDidOpen() {\r\n        return this._onDidOpen.event;\r\n    }\r\n    /**\r\n     * An event that fires when a text document managed by this manager\r\n     * will be saved.\r\n     */\r\n    get onWillSave() {\r\n        return this._onWillSave.event;\r\n    }\r\n    /**\r\n     * Sets a handler that will be called if a participant wants to provide\r\n     * edits during a text document save.\r\n     */\r\n    onWillSaveWaitUntil(handler) {\r\n        this._willSaveWaitUntil = handler;\r\n    }\r\n    /**\r\n     * An event that fires when a text document managed by this manager\r\n     * has been saved.\r\n     */\r\n    get onDidSave() {\r\n        return this._onDidSave.event;\r\n    }\r\n    /**\r\n     * An event that fires when a text document managed by this manager\r\n     * has been closed.\r\n     */\r\n    get onDidClose() {\r\n        return this._onDidClose.event;\r\n    }\r\n    /**\r\n     * Returns the document for the given URI. Returns undefined if\r\n     * the document is not mananged by this instance.\r\n     *\r\n     * @param uri The text document's URI to retrieve.\r\n     * @return the text document or `undefined`.\r\n     */\r\n    get(uri) {\r\n        return this._documents[uri];\r\n    }\r\n    /**\r\n     * Returns all text documents managed by this instance.\r\n     *\r\n     * @return all text documents.\r\n     */\r\n    all() {\r\n        return Object.keys(this._documents).map(key => this._documents[key]);\r\n    }\r\n    /**\r\n     * Returns the URIs of all text documents managed by this instance.\r\n     *\r\n     * @return the URI's of all text documents.\r\n     */\r\n    keys() {\r\n        return Object.keys(this._documents);\r\n    }\r\n    /**\r\n     * Listens for `low level` notification on the given connection to\r\n     * update the text documents managed by this instance.\r\n     *\r\n     * @param connection The connection to listen on.\r\n     */\r\n    listen(connection) {\r\n        function isUpdateableDocument(value) {\r\n            return Is.func(value.update);\r\n        }\r\n        connection.__textDocumentSync = vscode_languageserver_protocol_1.TextDocumentSyncKind.Full;\r\n        connection.onDidOpenTextDocument((event) => {\r\n            let td = event.textDocument;\r\n            let document;\r\n            switch (this.syncKind) {\r\n                case vscode_languageserver_protocol_1.TextDocumentSyncKind.Full:\r\n                    document = vscode_languageserver_protocol_1.TextDocument.create(td.uri, td.languageId, td.version, td.text);\r\n                    break;\r\n                case vscode_languageserver_protocol_1.TextDocumentSyncKind.Incremental:\r\n                    document = new IncrementalTextDocument(td.uri, td.languageId, td.version, td.text);\r\n                    break;\r\n                default:\r\n                    throw new Error(`Invalid TextDocumentSyncKind: ${this.syncKind}`);\r\n            }\r\n            this._documents[td.uri] = document;\r\n            let toFire = Object.freeze({ document });\r\n            this._onDidOpen.fire(toFire);\r\n            this._onDidChangeContent.fire(toFire);\r\n        });\r\n        connection.onDidChangeTextDocument((event) => {\r\n            let td = event.textDocument;\r\n            let changes = event.contentChanges;\r\n            if (changes.length === 0) {\r\n                return;\r\n            }\r\n            let document = this._documents[td.uri];\r\n            if (!document || !isUpdateableDocument(document)) {\r\n                return;\r\n            }\r\n            const { version } = td;\r\n            if (version == null || version === void 0) {\r\n                throw new Error(`Received document change event for ${td.uri} without valid version identifier`);\r\n            }\r\n            switch (this.syncKind) {\r\n                case vscode_languageserver_protocol_1.TextDocumentSyncKind.Full:\r\n                    let last = changes[changes.length - 1];\r\n                    document.update(last, version);\r\n                    this._onDidChangeContent.fire(Object.freeze({ document }));\r\n                    break;\r\n                case vscode_languageserver_protocol_1.TextDocumentSyncKind.Incremental:\r\n                    let updatedDoc = changes.reduce((workingTextDoc, change) => {\r\n                        workingTextDoc.update(change, version);\r\n                        return workingTextDoc;\r\n                    }, document);\r\n                    this._onDidChangeContent.fire(Object.freeze({ document: updatedDoc }));\r\n                    break;\r\n                case vscode_languageserver_protocol_1.TextDocumentSyncKind.None:\r\n                    break;\r\n            }\r\n        });\r\n        connection.onDidCloseTextDocument((event) => {\r\n            let document = this._documents[event.textDocument.uri];\r\n            if (document) {\r\n                delete this._documents[event.textDocument.uri];\r\n                this._onDidClose.fire(Object.freeze({ document }));\r\n            }\r\n        });\r\n        connection.onWillSaveTextDocument((event) => {\r\n            let document = this._documents[event.textDocument.uri];\r\n            if (document) {\r\n                this._onWillSave.fire(Object.freeze({ document, reason: event.reason }));\r\n            }\r\n        });\r\n        connection.onWillSaveTextDocumentWaitUntil((event, token) => {\r\n            let document = this._documents[event.textDocument.uri];\r\n            if (document && this._willSaveWaitUntil) {\r\n                return this._willSaveWaitUntil(Object.freeze({ document, reason: event.reason }), token);\r\n            }\r\n            else {\r\n                return [];\r\n            }\r\n        });\r\n        connection.onDidSaveTextDocument((event) => {\r\n            let document = this._documents[event.textDocument.uri];\r\n            if (document) {\r\n                this._onDidSave.fire(Object.freeze({ document }));\r\n            }\r\n        });\r\n    }\r\n}\r\nexports.TextDocuments = TextDocuments;\r\n/**\r\n * Helps tracking error message. Equal occurences of the same\r\n * message are only stored once. This class is for example\r\n * useful if text documents are validated in a loop and equal\r\n * error message should be folded into one.\r\n */\r\nclass ErrorMessageTracker {\r\n    constructor() {\r\n        this._messages = Object.create(null);\r\n    }\r\n    /**\r\n     * Add a message to the tracker.\r\n     *\r\n     * @param message The message to add.\r\n     */\r\n    add(message) {\r\n        let count = this._messages[message];\r\n        if (!count) {\r\n            count = 0;\r\n        }\r\n        count++;\r\n        this._messages[message] = count;\r\n    }\r\n    /**\r\n     * Send all tracked messages to the connection's window.\r\n     *\r\n     * @param connection The connection established between client and server.\r\n     */\r\n    sendErrors(connection) {\r\n        Object.keys(this._messages).forEach(message => {\r\n            connection.window.showErrorMessage(message);\r\n        });\r\n    }\r\n}\r\nexports.ErrorMessageTracker = ErrorMessageTracker;\r\nvar BulkRegistration;\r\n(function (BulkRegistration) {\r\n    /**\r\n     * Creates a new bulk registration.\r\n     * @return an empty bulk registration.\r\n     */\r\n    function create() {\r\n        return new BulkRegistrationImpl();\r\n    }\r\n    BulkRegistration.create = create;\r\n})(BulkRegistration = exports.BulkRegistration || (exports.BulkRegistration = {}));\r\nclass BulkRegistrationImpl {\r\n    constructor() {\r\n        this._registrations = [];\r\n        this._registered = new Set();\r\n    }\r\n    add(type, registerOptions) {\r\n        const method = Is.string(type) ? type : type.method;\r\n        if (this._registered.has(method)) {\r\n            throw new Error(`${method} is already added to this registration`);\r\n        }\r\n        const id = UUID.generateUuid();\r\n        this._registrations.push({\r\n            id: id,\r\n            method: method,\r\n            registerOptions: registerOptions || {}\r\n        });\r\n        this._registered.add(method);\r\n    }\r\n    asRegistrationParams() {\r\n        return {\r\n            registrations: this._registrations\r\n        };\r\n    }\r\n}\r\nvar BulkUnregistration;\r\n(function (BulkUnregistration) {\r\n    function create() {\r\n        return new BulkUnregistrationImpl(undefined, []);\r\n    }\r\n    BulkUnregistration.create = create;\r\n})(BulkUnregistration = exports.BulkUnregistration || (exports.BulkUnregistration = {}));\r\nclass BulkUnregistrationImpl {\r\n    constructor(_connection, unregistrations) {\r\n        this._connection = _connection;\r\n        this._unregistrations = new Map();\r\n        unregistrations.forEach(unregistration => {\r\n            this._unregistrations.set(unregistration.method, unregistration);\r\n        });\r\n    }\r\n    get isAttached() {\r\n        return !!this._connection;\r\n    }\r\n    attach(connection) {\r\n        this._connection = connection;\r\n    }\r\n    add(unregistration) {\r\n        this._unregistrations.set(unregistration.method, unregistration);\r\n    }\r\n    dispose() {\r\n        let unregistrations = [];\r\n        for (let unregistration of this._unregistrations.values()) {\r\n            unregistrations.push(unregistration);\r\n        }\r\n        let params = {\r\n            unregisterations: unregistrations\r\n        };\r\n        this._connection.sendRequest(vscode_languageserver_protocol_1.UnregistrationRequest.type, params).then(undefined, (_error) => {\r\n            this._connection.console.info(`Bulk unregistration failed.`);\r\n        });\r\n    }\r\n    disposeSingle(arg) {\r\n        const method = Is.string(arg) ? arg : arg.method;\r\n        const unregistration = this._unregistrations.get(method);\r\n        if (!unregistration) {\r\n            return false;\r\n        }\r\n        let params = {\r\n            unregisterations: [unregistration]\r\n        };\r\n        this._connection.sendRequest(vscode_languageserver_protocol_1.UnregistrationRequest.type, params).then(() => {\r\n            this._unregistrations.delete(method);\r\n        }, (_error) => {\r\n            this._connection.console.info(`Unregistering request handler for ${unregistration.id} failed.`);\r\n        });\r\n        return true;\r\n    }\r\n}\r\nclass ConnectionLogger {\r\n    constructor() {\r\n    }\r\n    rawAttach(connection) {\r\n        this._rawConnection = connection;\r\n    }\r\n    attach(connection) {\r\n        this._connection = connection;\r\n    }\r\n    get connection() {\r\n        if (!this._connection) {\r\n            throw new Error('Remote is not attached to a connection yet.');\r\n        }\r\n        return this._connection;\r\n    }\r\n    fillServerCapabilities(_capabilities) {\r\n    }\r\n    initialize(_capabilities) {\r\n    }\r\n    error(message) {\r\n        this.send(vscode_languageserver_protocol_1.MessageType.Error, message);\r\n    }\r\n    warn(message) {\r\n        this.send(vscode_languageserver_protocol_1.MessageType.Warning, message);\r\n    }\r\n    info(message) {\r\n        this.send(vscode_languageserver_protocol_1.MessageType.Info, message);\r\n    }\r\n    log(message) {\r\n        this.send(vscode_languageserver_protocol_1.MessageType.Log, message);\r\n    }\r\n    send(type, message) {\r\n        if (this._rawConnection) {\r\n            this._rawConnection.sendNotification(vscode_languageserver_protocol_1.LogMessageNotification.type, { type, message });\r\n        }\r\n    }\r\n}\r\nclass RemoteWindowImpl {\r\n    constructor() {\r\n    }\r\n    attach(connection) {\r\n        this._connection = connection;\r\n    }\r\n    get connection() {\r\n        if (!this._connection) {\r\n            throw new Error('Remote is not attached to a connection yet.');\r\n        }\r\n        return this._connection;\r\n    }\r\n    initialize(_capabilities) {\r\n    }\r\n    fillServerCapabilities(_capabilities) {\r\n    }\r\n    showErrorMessage(message, ...actions) {\r\n        let params = { type: vscode_languageserver_protocol_1.MessageType.Error, message, actions };\r\n        return this._connection.sendRequest(vscode_languageserver_protocol_1.ShowMessageRequest.type, params).then(null2Undefined);\r\n    }\r\n    showWarningMessage(message, ...actions) {\r\n        let params = { type: vscode_languageserver_protocol_1.MessageType.Warning, message, actions };\r\n        return this._connection.sendRequest(vscode_languageserver_protocol_1.ShowMessageRequest.type, params).then(null2Undefined);\r\n    }\r\n    showInformationMessage(message, ...actions) {\r\n        let params = { type: vscode_languageserver_protocol_1.MessageType.Info, message, actions };\r\n        return this._connection.sendRequest(vscode_languageserver_protocol_1.ShowMessageRequest.type, params).then(null2Undefined);\r\n    }\r\n}\r\nclass RemoteClientImpl {\r\n    attach(connection) {\r\n        this._connection = connection;\r\n    }\r\n    get connection() {\r\n        if (!this._connection) {\r\n            throw new Error('Remote is not attached to a connection yet.');\r\n        }\r\n        return this._connection;\r\n    }\r\n    initialize(_capabilities) {\r\n    }\r\n    fillServerCapabilities(_capabilities) {\r\n    }\r\n    register(typeOrRegistrations, registerOptionsOrType, registerOptions) {\r\n        if (typeOrRegistrations instanceof BulkRegistrationImpl) {\r\n            return this.registerMany(typeOrRegistrations);\r\n        }\r\n        else if (typeOrRegistrations instanceof BulkUnregistrationImpl) {\r\n            return this.registerSingle1(typeOrRegistrations, registerOptionsOrType, registerOptions);\r\n        }\r\n        else {\r\n            return this.registerSingle2(typeOrRegistrations, registerOptionsOrType);\r\n        }\r\n    }\r\n    registerSingle1(unregistration, type, registerOptions) {\r\n        const method = Is.string(type) ? type : type.method;\r\n        const id = UUID.generateUuid();\r\n        let params = {\r\n            registrations: [{ id, method, registerOptions: registerOptions || {} }]\r\n        };\r\n        if (!unregistration.isAttached) {\r\n            unregistration.attach(this._connection);\r\n        }\r\n        return this._connection.sendRequest(vscode_languageserver_protocol_1.RegistrationRequest.type, params).then((_result) => {\r\n            unregistration.add({ id: id, method: method });\r\n            return unregistration;\r\n        }, (_error) => {\r\n            this.connection.console.info(`Registering request handler for ${method} failed.`);\r\n            return Promise.reject(_error);\r\n        });\r\n    }\r\n    registerSingle2(type, registerOptions) {\r\n        const method = Is.string(type) ? type : type.method;\r\n        const id = UUID.generateUuid();\r\n        let params = {\r\n            registrations: [{ id, method, registerOptions: registerOptions || {} }]\r\n        };\r\n        return this._connection.sendRequest(vscode_languageserver_protocol_1.RegistrationRequest.type, params).then((_result) => {\r\n            return vscode_languageserver_protocol_1.Disposable.create(() => {\r\n                this.unregisterSingle(id, method);\r\n            });\r\n        }, (_error) => {\r\n            this.connection.console.info(`Registering request handler for ${method} failed.`);\r\n            return Promise.reject(_error);\r\n        });\r\n    }\r\n    unregisterSingle(id, method) {\r\n        let params = {\r\n            unregisterations: [{ id, method }]\r\n        };\r\n        return this._connection.sendRequest(vscode_languageserver_protocol_1.UnregistrationRequest.type, params).then(undefined, (_error) => {\r\n            this.connection.console.info(`Unregistering request handler for ${id} failed.`);\r\n        });\r\n    }\r\n    registerMany(registrations) {\r\n        let params = registrations.asRegistrationParams();\r\n        return this._connection.sendRequest(vscode_languageserver_protocol_1.RegistrationRequest.type, params).then(() => {\r\n            return new BulkUnregistrationImpl(this._connection, params.registrations.map(registration => { return { id: registration.id, method: registration.method }; }));\r\n        }, (_error) => {\r\n            this.connection.console.info(`Bulk registration failed.`);\r\n            return Promise.reject(_error);\r\n        });\r\n    }\r\n}\r\nclass _RemoteWorkspaceImpl {\r\n    constructor() {\r\n    }\r\n    attach(connection) {\r\n        this._connection = connection;\r\n    }\r\n    get connection() {\r\n        if (!this._connection) {\r\n            throw new Error('Remote is not attached to a connection yet.');\r\n        }\r\n        return this._connection;\r\n    }\r\n    initialize(_capabilities) {\r\n    }\r\n    fillServerCapabilities(_capabilities) {\r\n    }\r\n    applyEdit(paramOrEdit) {\r\n        function isApplyWorkspaceEditParams(value) {\r\n            return value && !!value.edit;\r\n        }\r\n        let params = isApplyWorkspaceEditParams(paramOrEdit) ? paramOrEdit : { edit: paramOrEdit };\r\n        return this._connection.sendRequest(vscode_languageserver_protocol_1.ApplyWorkspaceEditRequest.type, params);\r\n    }\r\n}\r\nconst RemoteWorkspaceImpl = workspaceFolders_1.WorkspaceFoldersFeature(configuration_1.ConfigurationFeature(_RemoteWorkspaceImpl));\r\nclass TracerImpl {\r\n    constructor() {\r\n        this._trace = vscode_languageserver_protocol_1.Trace.Off;\r\n    }\r\n    attach(connection) {\r\n        this._connection = connection;\r\n    }\r\n    get connection() {\r\n        if (!this._connection) {\r\n            throw new Error('Remote is not attached to a connection yet.');\r\n        }\r\n        return this._connection;\r\n    }\r\n    initialize(_capabilities) {\r\n    }\r\n    fillServerCapabilities(_capabilities) {\r\n    }\r\n    set trace(value) {\r\n        this._trace = value;\r\n    }\r\n    log(message, verbose) {\r\n        if (this._trace === vscode_languageserver_protocol_1.Trace.Off) {\r\n            return;\r\n        }\r\n        this._connection.sendNotification(vscode_languageserver_protocol_1.LogTraceNotification.type, {\r\n            message: message,\r\n            verbose: this._trace === vscode_languageserver_protocol_1.Trace.Verbose ? verbose : undefined\r\n        });\r\n    }\r\n}\r\nclass TelemetryImpl {\r\n    constructor() {\r\n    }\r\n    attach(connection) {\r\n        this._connection = connection;\r\n    }\r\n    get connection() {\r\n        if (!this._connection) {\r\n            throw new Error('Remote is not attached to a connection yet.');\r\n        }\r\n        return this._connection;\r\n    }\r\n    initialize(_capabilities) {\r\n    }\r\n    fillServerCapabilities(_capabilities) {\r\n    }\r\n    logEvent(data) {\r\n        this._connection.sendNotification(vscode_languageserver_protocol_1.TelemetryEventNotification.type, data);\r\n    }\r\n}\r\nfunction combineConsoleFeatures(one, two) {\r\n    return function (Base) {\r\n        return two(one(Base));\r\n    };\r\n}\r\nexports.combineConsoleFeatures = combineConsoleFeatures;\r\nfunction combineTelemetryFeatures(one, two) {\r\n    return function (Base) {\r\n        return two(one(Base));\r\n    };\r\n}\r\nexports.combineTelemetryFeatures = combineTelemetryFeatures;\r\nfunction combineTracerFeatures(one, two) {\r\n    return function (Base) {\r\n        return two(one(Base));\r\n    };\r\n}\r\nexports.combineTracerFeatures = combineTracerFeatures;\r\nfunction combineClientFeatures(one, two) {\r\n    return function (Base) {\r\n        return two(one(Base));\r\n    };\r\n}\r\nexports.combineClientFeatures = combineClientFeatures;\r\nfunction combineWindowFeatures(one, two) {\r\n    return function (Base) {\r\n        return two(one(Base));\r\n    };\r\n}\r\nexports.combineWindowFeatures = combineWindowFeatures;\r\nfunction combineWorkspaceFeatures(one, two) {\r\n    return function (Base) {\r\n        return two(one(Base));\r\n    };\r\n}\r\nexports.combineWorkspaceFeatures = combineWorkspaceFeatures;\r\nfunction combineFeatures(one, two) {\r\n    function combine(one, two, func) {\r\n        if (one && two) {\r\n            return func(one, two);\r\n        }\r\n        else if (one) {\r\n            return one;\r\n        }\r\n        else {\r\n            return two;\r\n        }\r\n    }\r\n    let result = {\r\n        __brand: 'features',\r\n        console: combine(one.console, two.console, combineConsoleFeatures),\r\n        tracer: combine(one.tracer, two.tracer, combineTracerFeatures),\r\n        telemetry: combine(one.telemetry, two.telemetry, combineTelemetryFeatures),\r\n        client: combine(one.client, two.client, combineClientFeatures),\r\n        window: combine(one.window, two.window, combineWindowFeatures),\r\n        workspace: combine(one.workspace, two.workspace, combineWorkspaceFeatures)\r\n    };\r\n    return result;\r\n}\r\nexports.combineFeatures = combineFeatures;\r\nfunction createConnection(arg1, arg2, arg3, arg4) {\r\n    let factories;\r\n    let input;\r\n    let output;\r\n    let strategy;\r\n    if (arg1 !== void 0 && arg1.__brand === 'features') {\r\n        factories = arg1;\r\n        arg1 = arg2;\r\n        arg2 = arg3;\r\n        arg3 = arg4;\r\n    }\r\n    if (vscode_languageserver_protocol_1.ConnectionStrategy.is(arg1)) {\r\n        strategy = arg1;\r\n    }\r\n    else {\r\n        input = arg1;\r\n        output = arg2;\r\n        strategy = arg3;\r\n    }\r\n    return _createConnection(input, output, strategy, factories);\r\n}\r\nexports.createConnection = createConnection;\r\nfunction _createConnection(input, output, strategy, factories) {\r\n    if (!input && !output && process.argv.length > 2) {\r\n        let port = void 0;\r\n        let pipeName = void 0;\r\n        let argv = process.argv.slice(2);\r\n        for (let i = 0; i < argv.length; i++) {\r\n            let arg = argv[i];\r\n            if (arg === '--node-ipc') {\r\n                input = new vscode_languageserver_protocol_1.IPCMessageReader(process);\r\n                output = new vscode_languageserver_protocol_1.IPCMessageWriter(process);\r\n                break;\r\n            }\r\n            else if (arg === '--stdio') {\r\n                input = process.stdin;\r\n                output = process.stdout;\r\n                break;\r\n            }\r\n            else if (arg === '--socket') {\r\n                port = parseInt(argv[i + 1]);\r\n                break;\r\n            }\r\n            else if (arg === '--pipe') {\r\n                pipeName = argv[i + 1];\r\n                break;\r\n            }\r\n            else {\r\n                var args = arg.split('=');\r\n                if (args[0] === '--socket') {\r\n                    port = parseInt(args[1]);\r\n                    break;\r\n                }\r\n                else if (args[0] === '--pipe') {\r\n                    pipeName = args[1];\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        if (port) {\r\n            let transport = vscode_languageserver_protocol_1.createServerSocketTransport(port);\r\n            input = transport[0];\r\n            output = transport[1];\r\n        }\r\n        else if (pipeName) {\r\n            let transport = vscode_languageserver_protocol_1.createServerPipeTransport(pipeName);\r\n            input = transport[0];\r\n            output = transport[1];\r\n        }\r\n    }\r\n    var commandLineMessage = \"Use arguments of createConnection or set command line parameters: '--node-ipc', '--stdio' or '--socket={number}'\";\r\n    if (!input) {\r\n        throw new Error(\"Connection input stream is not set. \" + commandLineMessage);\r\n    }\r\n    if (!output) {\r\n        throw new Error(\"Connection output stream is not set. \" + commandLineMessage);\r\n    }\r\n    // Backwards compatibility\r\n    if (Is.func(input.read) && Is.func(input.on)) {\r\n        let inputStream = input;\r\n        inputStream.on('end', () => {\r\n            process.exit(shutdownReceived ? 0 : 1);\r\n        });\r\n        inputStream.on('close', () => {\r\n            process.exit(shutdownReceived ? 0 : 1);\r\n        });\r\n    }\r\n    const logger = (factories && factories.console ? new (factories.console(ConnectionLogger))() : new ConnectionLogger());\r\n    const connection = vscode_languageserver_protocol_1.createProtocolConnection(input, output, logger, strategy);\r\n    logger.rawAttach(connection);\r\n    const tracer = (factories && factories.tracer ? new (factories.tracer(TracerImpl))() : new TracerImpl());\r\n    const telemetry = (factories && factories.telemetry ? new (factories.telemetry(TelemetryImpl))() : new TelemetryImpl());\r\n    const client = (factories && factories.client ? new (factories.client(RemoteClientImpl))() : new RemoteClientImpl());\r\n    const remoteWindow = (factories && factories.window ? new (factories.window(RemoteWindowImpl))() : new RemoteWindowImpl());\r\n    const workspace = (factories && factories.workspace ? new (factories.workspace(RemoteWorkspaceImpl))() : new RemoteWorkspaceImpl());\r\n    const allRemotes = [logger, tracer, telemetry, client, remoteWindow, workspace];\r\n    function asThenable(value) {\r\n        if (Is.thenable(value)) {\r\n            return value;\r\n        }\r\n        else {\r\n            return Promise.resolve(value);\r\n        }\r\n    }\r\n    let shutdownHandler = undefined;\r\n    let initializeHandler = undefined;\r\n    let exitHandler = undefined;\r\n    let protocolConnection = {\r\n        listen: () => connection.listen(),\r\n        sendRequest: (type, ...params) => connection.sendRequest(Is.string(type) ? type : type.method, ...params),\r\n        onRequest: (type, handler) => connection.onRequest(type, handler),\r\n        sendNotification: (type, param) => {\r\n            const method = Is.string(type) ? type : type.method;\r\n            if (arguments.length === 1) {\r\n                connection.sendNotification(method);\r\n            }\r\n            else {\r\n                connection.sendNotification(method, param);\r\n            }\r\n        },\r\n        onNotification: (type, handler) => connection.onNotification(type, handler),\r\n        onInitialize: (handler) => initializeHandler = handler,\r\n        onInitialized: (handler) => connection.onNotification(vscode_languageserver_protocol_1.InitializedNotification.type, handler),\r\n        onShutdown: (handler) => shutdownHandler = handler,\r\n        onExit: (handler) => exitHandler = handler,\r\n        get console() { return logger; },\r\n        get telemetry() { return telemetry; },\r\n        get tracer() { return tracer; },\r\n        get client() { return client; },\r\n        get window() { return remoteWindow; },\r\n        get workspace() { return workspace; },\r\n        onDidChangeConfiguration: (handler) => connection.onNotification(vscode_languageserver_protocol_1.DidChangeConfigurationNotification.type, handler),\r\n        onDidChangeWatchedFiles: (handler) => connection.onNotification(vscode_languageserver_protocol_1.DidChangeWatchedFilesNotification.type, handler),\r\n        __textDocumentSync: undefined,\r\n        onDidOpenTextDocument: (handler) => connection.onNotification(vscode_languageserver_protocol_1.DidOpenTextDocumentNotification.type, handler),\r\n        onDidChangeTextDocument: (handler) => connection.onNotification(vscode_languageserver_protocol_1.DidChangeTextDocumentNotification.type, handler),\r\n        onDidCloseTextDocument: (handler) => connection.onNotification(vscode_languageserver_protocol_1.DidCloseTextDocumentNotification.type, handler),\r\n        onWillSaveTextDocument: (handler) => connection.onNotification(vscode_languageserver_protocol_1.WillSaveTextDocumentNotification.type, handler),\r\n        onWillSaveTextDocumentWaitUntil: (handler) => connection.onRequest(vscode_languageserver_protocol_1.WillSaveTextDocumentWaitUntilRequest.type, handler),\r\n        onDidSaveTextDocument: (handler) => connection.onNotification(vscode_languageserver_protocol_1.DidSaveTextDocumentNotification.type, handler),\r\n        sendDiagnostics: (params) => connection.sendNotification(vscode_languageserver_protocol_1.PublishDiagnosticsNotification.type, params),\r\n        onHover: (handler) => connection.onRequest(vscode_languageserver_protocol_1.HoverRequest.type, handler),\r\n        onCompletion: (handler) => connection.onRequest(vscode_languageserver_protocol_1.CompletionRequest.type, handler),\r\n        onCompletionResolve: (handler) => connection.onRequest(vscode_languageserver_protocol_1.CompletionResolveRequest.type, handler),\r\n        onSignatureHelp: (handler) => connection.onRequest(vscode_languageserver_protocol_1.SignatureHelpRequest.type, handler),\r\n        onDeclaration: (handler) => connection.onRequest(vscode_languageserver_protocol_1.DeclarationRequest.type, handler),\r\n        onDefinition: (handler) => connection.onRequest(vscode_languageserver_protocol_1.DefinitionRequest.type, handler),\r\n        onTypeDefinition: (handler) => connection.onRequest(vscode_languageserver_protocol_1.TypeDefinitionRequest.type, handler),\r\n        onImplementation: (handler) => connection.onRequest(vscode_languageserver_protocol_1.ImplementationRequest.type, handler),\r\n        onReferences: (handler) => connection.onRequest(vscode_languageserver_protocol_1.ReferencesRequest.type, handler),\r\n        onDocumentHighlight: (handler) => connection.onRequest(vscode_languageserver_protocol_1.DocumentHighlightRequest.type, handler),\r\n        onDocumentSymbol: (handler) => connection.onRequest(vscode_languageserver_protocol_1.DocumentSymbolRequest.type, handler),\r\n        onWorkspaceSymbol: (handler) => connection.onRequest(vscode_languageserver_protocol_1.WorkspaceSymbolRequest.type, handler),\r\n        onCodeAction: (handler) => connection.onRequest(vscode_languageserver_protocol_1.CodeActionRequest.type, handler),\r\n        onCodeLens: (handler) => connection.onRequest(vscode_languageserver_protocol_1.CodeLensRequest.type, handler),\r\n        onCodeLensResolve: (handler) => connection.onRequest(vscode_languageserver_protocol_1.CodeLensResolveRequest.type, handler),\r\n        onDocumentFormatting: (handler) => connection.onRequest(vscode_languageserver_protocol_1.DocumentFormattingRequest.type, handler),\r\n        onDocumentRangeFormatting: (handler) => connection.onRequest(vscode_languageserver_protocol_1.DocumentRangeFormattingRequest.type, handler),\r\n        onDocumentOnTypeFormatting: (handler) => connection.onRequest(vscode_languageserver_protocol_1.DocumentOnTypeFormattingRequest.type, handler),\r\n        onRenameRequest: (handler) => connection.onRequest(vscode_languageserver_protocol_1.RenameRequest.type, handler),\r\n        onPrepareRename: (handler) => connection.onRequest(vscode_languageserver_protocol_1.PrepareRenameRequest.type, handler),\r\n        onDocumentLinks: (handler) => connection.onRequest(vscode_languageserver_protocol_1.DocumentLinkRequest.type, handler),\r\n        onDocumentLinkResolve: (handler) => connection.onRequest(vscode_languageserver_protocol_1.DocumentLinkResolveRequest.type, handler),\r\n        onDocumentColor: (handler) => connection.onRequest(vscode_languageserver_protocol_1.DocumentColorRequest.type, handler),\r\n        onColorPresentation: (handler) => connection.onRequest(vscode_languageserver_protocol_1.ColorPresentationRequest.type, handler),\r\n        onFoldingRanges: (handler) => connection.onRequest(vscode_languageserver_protocol_1.FoldingRangeRequest.type, handler),\r\n        onExecuteCommand: (handler) => connection.onRequest(vscode_languageserver_protocol_1.ExecuteCommandRequest.type, handler),\r\n        dispose: () => connection.dispose()\r\n    };\r\n    for (let remote of allRemotes) {\r\n        remote.attach(protocolConnection);\r\n    }\r\n    connection.onRequest(vscode_languageserver_protocol_1.InitializeRequest.type, (params) => {\r\n        const processId = params.processId;\r\n        if (Is.number(processId) && exitTimer === void 0) {\r\n            // We received a parent process id. Set up a timer to periodically check\r\n            // if the parent is still alive.\r\n            setInterval(() => {\r\n                try {\r\n                    process.kill(processId, 0);\r\n                }\r\n                catch (ex) {\r\n                    // Parent process doesn't exist anymore. Exit the server.\r\n                    process.exit(shutdownReceived ? 0 : 1);\r\n                }\r\n            }, 3000);\r\n        }\r\n        if (Is.string(params.trace)) {\r\n            tracer.trace = vscode_languageserver_protocol_1.Trace.fromString(params.trace);\r\n        }\r\n        for (let remote of allRemotes) {\r\n            remote.initialize(params.capabilities);\r\n        }\r\n        if (initializeHandler) {\r\n            let result = initializeHandler(params, new vscode_languageserver_protocol_1.CancellationTokenSource().token);\r\n            return asThenable(result).then((value) => {\r\n                if (value instanceof vscode_languageserver_protocol_1.ResponseError) {\r\n                    return value;\r\n                }\r\n                let result = value;\r\n                if (!result) {\r\n                    result = { capabilities: {} };\r\n                }\r\n                let capabilities = result.capabilities;\r\n                if (!capabilities) {\r\n                    capabilities = {};\r\n                    result.capabilities = capabilities;\r\n                }\r\n                if (capabilities.textDocumentSync === void 0 || capabilities.textDocumentSync === null) {\r\n                    capabilities.textDocumentSync = Is.number(protocolConnection.__textDocumentSync) ? protocolConnection.__textDocumentSync : vscode_languageserver_protocol_1.TextDocumentSyncKind.None;\r\n                }\r\n                else if (!Is.number(capabilities.textDocumentSync) && !Is.number(capabilities.textDocumentSync.change)) {\r\n                    capabilities.textDocumentSync.change = Is.number(protocolConnection.__textDocumentSync) ? protocolConnection.__textDocumentSync : vscode_languageserver_protocol_1.TextDocumentSyncKind.None;\r\n                }\r\n                for (let remote of allRemotes) {\r\n                    remote.fillServerCapabilities(capabilities);\r\n                }\r\n                return result;\r\n            });\r\n        }\r\n        else {\r\n            let result = { capabilities: { textDocumentSync: vscode_languageserver_protocol_1.TextDocumentSyncKind.None } };\r\n            for (let remote of allRemotes) {\r\n                remote.fillServerCapabilities(result.capabilities);\r\n            }\r\n            return result;\r\n        }\r\n    });\r\n    connection.onRequest(vscode_languageserver_protocol_1.ShutdownRequest.type, () => {\r\n        shutdownReceived = true;\r\n        if (shutdownHandler) {\r\n            return shutdownHandler(new vscode_languageserver_protocol_1.CancellationTokenSource().token);\r\n        }\r\n        else {\r\n            return undefined;\r\n        }\r\n    });\r\n    connection.onNotification(vscode_languageserver_protocol_1.ExitNotification.type, () => {\r\n        try {\r\n            if (exitHandler) {\r\n                exitHandler();\r\n            }\r\n        }\r\n        finally {\r\n            if (shutdownReceived) {\r\n                process.exit(0);\r\n            }\r\n            else {\r\n                process.exit(1);\r\n            }\r\n        }\r\n    });\r\n    connection.onNotification(vscode_languageserver_protocol_1.SetTraceNotification.type, (params) => {\r\n        tracer.trace = vscode_languageserver_protocol_1.Trace.fromString(params.value);\r\n    });\r\n    return protocolConnection;\r\n}\r\n// Export the protocol currently in proposed state.\r\nconst proposed_progress_1 = require(\"./proposed.progress\");\r\nvar ProposedFeatures;\r\n(function (ProposedFeatures) {\r\n    ProposedFeatures.all = {\r\n        __brand: 'features',\r\n        window: proposed_progress_1.ProgressFeature\r\n    };\r\n})(ProposedFeatures = exports.ProposedFeatures || (exports.ProposedFeatures = {}));\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\n/**\r\n * The Position namespace provides helper functions to work with\r\n * [Position](#Position) literals.\r\n */\r\nexport var Position;\r\n(function (Position) {\r\n    /**\r\n     * Creates a new Position literal from the given line and character.\r\n     * @param line The position's line.\r\n     * @param character The position's character.\r\n     */\r\n    function create(line, character) {\r\n        return { line: line, character: character };\r\n    }\r\n    Position.create = create;\r\n    /**\r\n     * Checks whether the given liternal conforms to the [Position](#Position) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.objectLiteral(candidate) && Is.number(candidate.line) && Is.number(candidate.character);\r\n    }\r\n    Position.is = is;\r\n})(Position || (Position = {}));\r\n/**\r\n * The Range namespace provides helper functions to work with\r\n * [Range](#Range) literals.\r\n */\r\nexport var Range;\r\n(function (Range) {\r\n    function create(one, two, three, four) {\r\n        if (Is.number(one) && Is.number(two) && Is.number(three) && Is.number(four)) {\r\n            return { start: Position.create(one, two), end: Position.create(three, four) };\r\n        }\r\n        else if (Position.is(one) && Position.is(two)) {\r\n            return { start: one, end: two };\r\n        }\r\n        else {\r\n            throw new Error(\"Range#create called with invalid arguments[\" + one + \", \" + two + \", \" + three + \", \" + four + \"]\");\r\n        }\r\n    }\r\n    Range.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [Range](#Range) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.objectLiteral(candidate) && Position.is(candidate.start) && Position.is(candidate.end);\r\n    }\r\n    Range.is = is;\r\n})(Range || (Range = {}));\r\n/**\r\n * The Location namespace provides helper functions to work with\r\n * [Location](#Location) literals.\r\n */\r\nexport var Location;\r\n(function (Location) {\r\n    /**\r\n     * Creates a Location literal.\r\n     * @param uri The location's uri.\r\n     * @param range The location's range.\r\n     */\r\n    function create(uri, range) {\r\n        return { uri: uri, range: range };\r\n    }\r\n    Location.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [Location](#Location) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Range.is(candidate.range) && (Is.string(candidate.uri) || Is.undefined(candidate.uri));\r\n    }\r\n    Location.is = is;\r\n})(Location || (Location = {}));\r\n/**\r\n * The LocationLink namespace provides helper functions to work with\r\n * [LocationLink](#LocationLink) literals.\r\n */\r\nexport var LocationLink;\r\n(function (LocationLink) {\r\n    /**\r\n     * Creates a LocationLink literal.\r\n     * @param targetUri The definition's uri.\r\n     * @param targetRange The full range of the definition.\r\n     * @param targetSelectionRange The span of the symbol definition at the target.\r\n     * @param originSelectionRange The span of the symbol being defined in the originating source file.\r\n     */\r\n    function create(targetUri, targetRange, targetSelectionRange, originSelectionRange) {\r\n        return { targetUri: targetUri, targetRange: targetRange, targetSelectionRange: targetSelectionRange, originSelectionRange: originSelectionRange };\r\n    }\r\n    LocationLink.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [LocationLink](#LocationLink) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Range.is(candidate.targetRange) && Is.string(candidate.targetUri)\r\n            && (Range.is(candidate.targetSelectionRange) || Is.undefined(candidate.targetSelectionRange))\r\n            && (Range.is(candidate.originSelectionRange) || Is.undefined(candidate.originSelectionRange));\r\n    }\r\n    LocationLink.is = is;\r\n})(LocationLink || (LocationLink = {}));\r\n/**\r\n * The Color namespace provides helper functions to work with\r\n * [Color](#Color) literals.\r\n */\r\nexport var Color;\r\n(function (Color) {\r\n    /**\r\n     * Creates a new Color literal.\r\n     */\r\n    function create(red, green, blue, alpha) {\r\n        return {\r\n            red: red,\r\n            green: green,\r\n            blue: blue,\r\n            alpha: alpha,\r\n        };\r\n    }\r\n    Color.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [Color](#Color) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.number(candidate.red)\r\n            && Is.number(candidate.green)\r\n            && Is.number(candidate.blue)\r\n            && Is.number(candidate.alpha);\r\n    }\r\n    Color.is = is;\r\n})(Color || (Color = {}));\r\n/**\r\n * The ColorInformation namespace provides helper functions to work with\r\n * [ColorInformation](#ColorInformation) literals.\r\n */\r\nexport var ColorInformation;\r\n(function (ColorInformation) {\r\n    /**\r\n     * Creates a new ColorInformation literal.\r\n     */\r\n    function create(range, color) {\r\n        return {\r\n            range: range,\r\n            color: color,\r\n        };\r\n    }\r\n    ColorInformation.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [ColorInformation](#ColorInformation) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Range.is(candidate.range) && Color.is(candidate.color);\r\n    }\r\n    ColorInformation.is = is;\r\n})(ColorInformation || (ColorInformation = {}));\r\n/**\r\n * The Color namespace provides helper functions to work with\r\n * [ColorPresentation](#ColorPresentation) literals.\r\n */\r\nexport var ColorPresentation;\r\n(function (ColorPresentation) {\r\n    /**\r\n     * Creates a new ColorInformation literal.\r\n     */\r\n    function create(label, textEdit, additionalTextEdits) {\r\n        return {\r\n            label: label,\r\n            textEdit: textEdit,\r\n            additionalTextEdits: additionalTextEdits,\r\n        };\r\n    }\r\n    ColorPresentation.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [ColorInformation](#ColorInformation) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.string(candidate.label)\r\n            && (Is.undefined(candidate.textEdit) || TextEdit.is(candidate))\r\n            && (Is.undefined(candidate.additionalTextEdits) || Is.typedArray(candidate.additionalTextEdits, TextEdit.is));\r\n    }\r\n    ColorPresentation.is = is;\r\n})(ColorPresentation || (ColorPresentation = {}));\r\n/**\r\n * Enum of known range kinds\r\n */\r\nexport var FoldingRangeKind;\r\n(function (FoldingRangeKind) {\r\n    /**\r\n     * Folding range for a comment\r\n     */\r\n    FoldingRangeKind[\"Comment\"] = \"comment\";\r\n    /**\r\n     * Folding range for a imports or includes\r\n     */\r\n    FoldingRangeKind[\"Imports\"] = \"imports\";\r\n    /**\r\n     * Folding range for a region (e.g. `#region`)\r\n     */\r\n    FoldingRangeKind[\"Region\"] = \"region\";\r\n})(FoldingRangeKind || (FoldingRangeKind = {}));\r\n/**\r\n * The folding range namespace provides helper functions to work with\r\n * [FoldingRange](#FoldingRange) literals.\r\n */\r\nexport var FoldingRange;\r\n(function (FoldingRange) {\r\n    /**\r\n     * Creates a new FoldingRange literal.\r\n     */\r\n    function create(startLine, endLine, startCharacter, endCharacter, kind) {\r\n        var result = {\r\n            startLine: startLine,\r\n            endLine: endLine\r\n        };\r\n        if (Is.defined(startCharacter)) {\r\n            result.startCharacter = startCharacter;\r\n        }\r\n        if (Is.defined(endCharacter)) {\r\n            result.endCharacter = endCharacter;\r\n        }\r\n        if (Is.defined(kind)) {\r\n            result.kind = kind;\r\n        }\r\n        return result;\r\n    }\r\n    FoldingRange.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [FoldingRange](#FoldingRange) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.number(candidate.startLine) && Is.number(candidate.startLine)\r\n            && (Is.undefined(candidate.startCharacter) || Is.number(candidate.startCharacter))\r\n            && (Is.undefined(candidate.endCharacter) || Is.number(candidate.endCharacter))\r\n            && (Is.undefined(candidate.kind) || Is.string(candidate.kind));\r\n    }\r\n    FoldingRange.is = is;\r\n})(FoldingRange || (FoldingRange = {}));\r\n/**\r\n * The DiagnosticRelatedInformation namespace provides helper functions to work with\r\n * [DiagnosticRelatedInformation](#DiagnosticRelatedInformation) literals.\r\n */\r\nexport var DiagnosticRelatedInformation;\r\n(function (DiagnosticRelatedInformation) {\r\n    /**\r\n     * Creates a new DiagnosticRelatedInformation literal.\r\n     */\r\n    function create(location, message) {\r\n        return {\r\n            location: location,\r\n            message: message\r\n        };\r\n    }\r\n    DiagnosticRelatedInformation.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [DiagnosticRelatedInformation](#DiagnosticRelatedInformation) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Location.is(candidate.location) && Is.string(candidate.message);\r\n    }\r\n    DiagnosticRelatedInformation.is = is;\r\n})(DiagnosticRelatedInformation || (DiagnosticRelatedInformation = {}));\r\n/**\r\n * The diagnostic's severity.\r\n */\r\nexport var DiagnosticSeverity;\r\n(function (DiagnosticSeverity) {\r\n    /**\r\n     * Reports an error.\r\n     */\r\n    DiagnosticSeverity.Error = 1;\r\n    /**\r\n     * Reports a warning.\r\n     */\r\n    DiagnosticSeverity.Warning = 2;\r\n    /**\r\n     * Reports an information.\r\n     */\r\n    DiagnosticSeverity.Information = 3;\r\n    /**\r\n     * Reports a hint.\r\n     */\r\n    DiagnosticSeverity.Hint = 4;\r\n})(DiagnosticSeverity || (DiagnosticSeverity = {}));\r\nexport var DiagnosticTag;\r\n(function (DiagnosticTag) {\r\n    /**\r\n     * Unused or unnecessary code.\r\n     *\r\n     * Clients are allowed to render diagnostics with this tag faded out instead of having\r\n     * an error squiggle.\r\n     */\r\n    DiagnosticTag.Unnecessary = 1;\r\n})(DiagnosticTag || (DiagnosticTag = {}));\r\n/**\r\n * The Diagnostic namespace provides helper functions to work with\r\n * [Diagnostic](#Diagnostic) literals.\r\n */\r\nexport var Diagnostic;\r\n(function (Diagnostic) {\r\n    /**\r\n     * Creates a new Diagnostic literal.\r\n     */\r\n    function create(range, message, severity, code, source, relatedInformation) {\r\n        var result = { range: range, message: message };\r\n        if (Is.defined(severity)) {\r\n            result.severity = severity;\r\n        }\r\n        if (Is.defined(code)) {\r\n            result.code = code;\r\n        }\r\n        if (Is.defined(source)) {\r\n            result.source = source;\r\n        }\r\n        if (Is.defined(relatedInformation)) {\r\n            result.relatedInformation = relatedInformation;\r\n        }\r\n        return result;\r\n    }\r\n    Diagnostic.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [Diagnostic](#Diagnostic) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate)\r\n            && Range.is(candidate.range)\r\n            && Is.string(candidate.message)\r\n            && (Is.number(candidate.severity) || Is.undefined(candidate.severity))\r\n            && (Is.number(candidate.code) || Is.string(candidate.code) || Is.undefined(candidate.code))\r\n            && (Is.string(candidate.source) || Is.undefined(candidate.source))\r\n            && (Is.undefined(candidate.relatedInformation) || Is.typedArray(candidate.relatedInformation, DiagnosticRelatedInformation.is));\r\n    }\r\n    Diagnostic.is = is;\r\n})(Diagnostic || (Diagnostic = {}));\r\n/**\r\n * The Command namespace provides helper functions to work with\r\n * [Command](#Command) literals.\r\n */\r\nexport var Command;\r\n(function (Command) {\r\n    /**\r\n     * Creates a new Command literal.\r\n     */\r\n    function create(title, command) {\r\n        var args = [];\r\n        for (var _i = 2; _i < arguments.length; _i++) {\r\n            args[_i - 2] = arguments[_i];\r\n        }\r\n        var result = { title: title, command: command };\r\n        if (Is.defined(args) && args.length > 0) {\r\n            result.arguments = args;\r\n        }\r\n        return result;\r\n    }\r\n    Command.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [Command](#Command) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Is.string(candidate.title) && Is.string(candidate.command);\r\n    }\r\n    Command.is = is;\r\n})(Command || (Command = {}));\r\n/**\r\n * The TextEdit namespace provides helper function to create replace,\r\n * insert and delete edits more easily.\r\n */\r\nexport var TextEdit;\r\n(function (TextEdit) {\r\n    /**\r\n     * Creates a replace text edit.\r\n     * @param range The range of text to be replaced.\r\n     * @param newText The new text.\r\n     */\r\n    function replace(range, newText) {\r\n        return { range: range, newText: newText };\r\n    }\r\n    TextEdit.replace = replace;\r\n    /**\r\n     * Creates a insert text edit.\r\n     * @param position The position to insert the text at.\r\n     * @param newText The text to be inserted.\r\n     */\r\n    function insert(position, newText) {\r\n        return { range: { start: position, end: position }, newText: newText };\r\n    }\r\n    TextEdit.insert = insert;\r\n    /**\r\n     * Creates a delete text edit.\r\n     * @param range The range of text to be deleted.\r\n     */\r\n    function del(range) {\r\n        return { range: range, newText: '' };\r\n    }\r\n    TextEdit.del = del;\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.objectLiteral(candidate)\r\n            && Is.string(candidate.newText)\r\n            && Range.is(candidate.range);\r\n    }\r\n    TextEdit.is = is;\r\n})(TextEdit || (TextEdit = {}));\r\n/**\r\n * The TextDocumentEdit namespace provides helper function to create\r\n * an edit that manipulates a text document.\r\n */\r\nexport var TextDocumentEdit;\r\n(function (TextDocumentEdit) {\r\n    /**\r\n     * Creates a new `TextDocumentEdit`\r\n     */\r\n    function create(textDocument, edits) {\r\n        return { textDocument: textDocument, edits: edits };\r\n    }\r\n    TextDocumentEdit.create = create;\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate)\r\n            && VersionedTextDocumentIdentifier.is(candidate.textDocument)\r\n            && Array.isArray(candidate.edits);\r\n    }\r\n    TextDocumentEdit.is = is;\r\n})(TextDocumentEdit || (TextDocumentEdit = {}));\r\nexport var CreateFile;\r\n(function (CreateFile) {\r\n    function create(uri, options) {\r\n        var result = {\r\n            kind: 'create',\r\n            uri: uri\r\n        };\r\n        if (options !== void 0 && (options.overwrite !== void 0 || options.ignoreIfExists !== void 0)) {\r\n            result.options = options;\r\n        }\r\n        return result;\r\n    }\r\n    CreateFile.create = create;\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate && candidate.kind === 'create' && Is.string(candidate.uri) &&\r\n            (candidate.options === void 0 ||\r\n                ((candidate.options.overwrite === void 0 || Is.boolean(candidate.options.overwrite)) && (candidate.options.ignoreIfExists === void 0 || Is.boolean(candidate.options.ignoreIfExists))));\r\n    }\r\n    CreateFile.is = is;\r\n})(CreateFile || (CreateFile = {}));\r\nexport var RenameFile;\r\n(function (RenameFile) {\r\n    function create(oldUri, newUri, options) {\r\n        var result = {\r\n            kind: 'rename',\r\n            oldUri: oldUri,\r\n            newUri: newUri\r\n        };\r\n        if (options !== void 0 && (options.overwrite !== void 0 || options.ignoreIfExists !== void 0)) {\r\n            result.options = options;\r\n        }\r\n        return result;\r\n    }\r\n    RenameFile.create = create;\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate && candidate.kind === 'rename' && Is.string(candidate.oldUri) && Is.string(candidate.newUri) &&\r\n            (candidate.options === void 0 ||\r\n                ((candidate.options.overwrite === void 0 || Is.boolean(candidate.options.overwrite)) && (candidate.options.ignoreIfExists === void 0 || Is.boolean(candidate.options.ignoreIfExists))));\r\n    }\r\n    RenameFile.is = is;\r\n})(RenameFile || (RenameFile = {}));\r\nexport var DeleteFile;\r\n(function (DeleteFile) {\r\n    function create(uri, options) {\r\n        var result = {\r\n            kind: 'delete',\r\n            uri: uri\r\n        };\r\n        if (options !== void 0 && (options.recursive !== void 0 || options.ignoreIfNotExists !== void 0)) {\r\n            result.options = options;\r\n        }\r\n        return result;\r\n    }\r\n    DeleteFile.create = create;\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate && candidate.kind === 'delete' && Is.string(candidate.uri) &&\r\n            (candidate.options === void 0 ||\r\n                ((candidate.options.recursive === void 0 || Is.boolean(candidate.options.recursive)) && (candidate.options.ignoreIfNotExists === void 0 || Is.boolean(candidate.options.ignoreIfNotExists))));\r\n    }\r\n    DeleteFile.is = is;\r\n})(DeleteFile || (DeleteFile = {}));\r\nexport var WorkspaceEdit;\r\n(function (WorkspaceEdit) {\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate &&\r\n            (candidate.changes !== void 0 || candidate.documentChanges !== void 0) &&\r\n            (candidate.documentChanges === void 0 || candidate.documentChanges.every(function (change) {\r\n                if (Is.string(change.kind)) {\r\n                    return CreateFile.is(change) || RenameFile.is(change) || DeleteFile.is(change);\r\n                }\r\n                else {\r\n                    return TextDocumentEdit.is(change);\r\n                }\r\n            }));\r\n    }\r\n    WorkspaceEdit.is = is;\r\n})(WorkspaceEdit || (WorkspaceEdit = {}));\r\nvar TextEditChangeImpl = /** @class */ (function () {\r\n    function TextEditChangeImpl(edits) {\r\n        this.edits = edits;\r\n    }\r\n    TextEditChangeImpl.prototype.insert = function (position, newText) {\r\n        this.edits.push(TextEdit.insert(position, newText));\r\n    };\r\n    TextEditChangeImpl.prototype.replace = function (range, newText) {\r\n        this.edits.push(TextEdit.replace(range, newText));\r\n    };\r\n    TextEditChangeImpl.prototype.delete = function (range) {\r\n        this.edits.push(TextEdit.del(range));\r\n    };\r\n    TextEditChangeImpl.prototype.add = function (edit) {\r\n        this.edits.push(edit);\r\n    };\r\n    TextEditChangeImpl.prototype.all = function () {\r\n        return this.edits;\r\n    };\r\n    TextEditChangeImpl.prototype.clear = function () {\r\n        this.edits.splice(0, this.edits.length);\r\n    };\r\n    return TextEditChangeImpl;\r\n}());\r\n/**\r\n * A workspace change helps constructing changes to a workspace.\r\n */\r\nvar WorkspaceChange = /** @class */ (function () {\r\n    function WorkspaceChange(workspaceEdit) {\r\n        var _this = this;\r\n        this._textEditChanges = Object.create(null);\r\n        if (workspaceEdit) {\r\n            this._workspaceEdit = workspaceEdit;\r\n            if (workspaceEdit.documentChanges) {\r\n                workspaceEdit.documentChanges.forEach(function (change) {\r\n                    if (TextDocumentEdit.is(change)) {\r\n                        var textEditChange = new TextEditChangeImpl(change.edits);\r\n                        _this._textEditChanges[change.textDocument.uri] = textEditChange;\r\n                    }\r\n                });\r\n            }\r\n            else if (workspaceEdit.changes) {\r\n                Object.keys(workspaceEdit.changes).forEach(function (key) {\r\n                    var textEditChange = new TextEditChangeImpl(workspaceEdit.changes[key]);\r\n                    _this._textEditChanges[key] = textEditChange;\r\n                });\r\n            }\r\n        }\r\n    }\r\n    Object.defineProperty(WorkspaceChange.prototype, \"edit\", {\r\n        /**\r\n         * Returns the underlying [WorkspaceEdit](#WorkspaceEdit) literal\r\n         * use to be returned from a workspace edit operation like rename.\r\n         */\r\n        get: function () {\r\n            return this._workspaceEdit;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    WorkspaceChange.prototype.getTextEditChange = function (key) {\r\n        if (VersionedTextDocumentIdentifier.is(key)) {\r\n            if (!this._workspaceEdit) {\r\n                this._workspaceEdit = {\r\n                    documentChanges: []\r\n                };\r\n            }\r\n            if (!this._workspaceEdit.documentChanges) {\r\n                throw new Error('Workspace edit is not configured for document changes.');\r\n            }\r\n            var textDocument = key;\r\n            var result = this._textEditChanges[textDocument.uri];\r\n            if (!result) {\r\n                var edits = [];\r\n                var textDocumentEdit = {\r\n                    textDocument: textDocument,\r\n                    edits: edits\r\n                };\r\n                this._workspaceEdit.documentChanges.push(textDocumentEdit);\r\n                result = new TextEditChangeImpl(edits);\r\n                this._textEditChanges[textDocument.uri] = result;\r\n            }\r\n            return result;\r\n        }\r\n        else {\r\n            if (!this._workspaceEdit) {\r\n                this._workspaceEdit = {\r\n                    changes: Object.create(null)\r\n                };\r\n            }\r\n            if (!this._workspaceEdit.changes) {\r\n                throw new Error('Workspace edit is not configured for normal text edit changes.');\r\n            }\r\n            var result = this._textEditChanges[key];\r\n            if (!result) {\r\n                var edits = [];\r\n                this._workspaceEdit.changes[key] = edits;\r\n                result = new TextEditChangeImpl(edits);\r\n                this._textEditChanges[key] = result;\r\n            }\r\n            return result;\r\n        }\r\n    };\r\n    WorkspaceChange.prototype.createFile = function (uri, options) {\r\n        this.checkDocumentChanges();\r\n        this._workspaceEdit.documentChanges.push(CreateFile.create(uri, options));\r\n    };\r\n    WorkspaceChange.prototype.renameFile = function (oldUri, newUri, options) {\r\n        this.checkDocumentChanges();\r\n        this._workspaceEdit.documentChanges.push(RenameFile.create(oldUri, newUri, options));\r\n    };\r\n    WorkspaceChange.prototype.deleteFile = function (uri, options) {\r\n        this.checkDocumentChanges();\r\n        this._workspaceEdit.documentChanges.push(DeleteFile.create(uri, options));\r\n    };\r\n    WorkspaceChange.prototype.checkDocumentChanges = function () {\r\n        if (!this._workspaceEdit || !this._workspaceEdit.documentChanges) {\r\n            throw new Error('Workspace edit is not configured for document changes.');\r\n        }\r\n    };\r\n    return WorkspaceChange;\r\n}());\r\nexport { WorkspaceChange };\r\n/**\r\n * The TextDocumentIdentifier namespace provides helper functions to work with\r\n * [TextDocumentIdentifier](#TextDocumentIdentifier) literals.\r\n */\r\nexport var TextDocumentIdentifier;\r\n(function (TextDocumentIdentifier) {\r\n    /**\r\n     * Creates a new TextDocumentIdentifier literal.\r\n     * @param uri The document's uri.\r\n     */\r\n    function create(uri) {\r\n        return { uri: uri };\r\n    }\r\n    TextDocumentIdentifier.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [TextDocumentIdentifier](#TextDocumentIdentifier) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Is.string(candidate.uri);\r\n    }\r\n    TextDocumentIdentifier.is = is;\r\n})(TextDocumentIdentifier || (TextDocumentIdentifier = {}));\r\n/**\r\n * The VersionedTextDocumentIdentifier namespace provides helper functions to work with\r\n * [VersionedTextDocumentIdentifier](#VersionedTextDocumentIdentifier) literals.\r\n */\r\nexport var VersionedTextDocumentIdentifier;\r\n(function (VersionedTextDocumentIdentifier) {\r\n    /**\r\n     * Creates a new VersionedTextDocumentIdentifier literal.\r\n     * @param uri The document's uri.\r\n     * @param uri The document's text.\r\n     */\r\n    function create(uri, version) {\r\n        return { uri: uri, version: version };\r\n    }\r\n    VersionedTextDocumentIdentifier.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [VersionedTextDocumentIdentifier](#VersionedTextDocumentIdentifier) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Is.string(candidate.uri) && (candidate.version === null || Is.number(candidate.version));\r\n    }\r\n    VersionedTextDocumentIdentifier.is = is;\r\n})(VersionedTextDocumentIdentifier || (VersionedTextDocumentIdentifier = {}));\r\n/**\r\n * The TextDocumentItem namespace provides helper functions to work with\r\n * [TextDocumentItem](#TextDocumentItem) literals.\r\n */\r\nexport var TextDocumentItem;\r\n(function (TextDocumentItem) {\r\n    /**\r\n     * Creates a new TextDocumentItem literal.\r\n     * @param uri The document's uri.\r\n     * @param languageId The document's language identifier.\r\n     * @param version The document's version number.\r\n     * @param text The document's text.\r\n     */\r\n    function create(uri, languageId, version, text) {\r\n        return { uri: uri, languageId: languageId, version: version, text: text };\r\n    }\r\n    TextDocumentItem.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [TextDocumentItem](#TextDocumentItem) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Is.string(candidate.uri) && Is.string(candidate.languageId) && Is.number(candidate.version) && Is.string(candidate.text);\r\n    }\r\n    TextDocumentItem.is = is;\r\n})(TextDocumentItem || (TextDocumentItem = {}));\r\n/**\r\n * Describes the content type that a client supports in various\r\n * result literals like `Hover`, `ParameterInfo` or `CompletionItem`.\r\n *\r\n * Please note that `MarkupKinds` must not start with a `$`. This kinds\r\n * are reserved for internal usage.\r\n */\r\nexport var MarkupKind;\r\n(function (MarkupKind) {\r\n    /**\r\n     * Plain text is supported as a content format\r\n     */\r\n    MarkupKind.PlainText = 'plaintext';\r\n    /**\r\n     * Markdown is supported as a content format\r\n     */\r\n    MarkupKind.Markdown = 'markdown';\r\n})(MarkupKind || (MarkupKind = {}));\r\n(function (MarkupKind) {\r\n    /**\r\n     * Checks whether the given value is a value of the [MarkupKind](#MarkupKind) type.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate === MarkupKind.PlainText || candidate === MarkupKind.Markdown;\r\n    }\r\n    MarkupKind.is = is;\r\n})(MarkupKind || (MarkupKind = {}));\r\nexport var MarkupContent;\r\n(function (MarkupContent) {\r\n    /**\r\n     * Checks whether the given value conforms to the [MarkupContent](#MarkupContent) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.objectLiteral(value) && MarkupKind.is(candidate.kind) && Is.string(candidate.value);\r\n    }\r\n    MarkupContent.is = is;\r\n})(MarkupContent || (MarkupContent = {}));\r\n/**\r\n * The kind of a completion entry.\r\n */\r\nexport var CompletionItemKind;\r\n(function (CompletionItemKind) {\r\n    CompletionItemKind.Text = 1;\r\n    CompletionItemKind.Method = 2;\r\n    CompletionItemKind.Function = 3;\r\n    CompletionItemKind.Constructor = 4;\r\n    CompletionItemKind.Field = 5;\r\n    CompletionItemKind.Variable = 6;\r\n    CompletionItemKind.Class = 7;\r\n    CompletionItemKind.Interface = 8;\r\n    CompletionItemKind.Module = 9;\r\n    CompletionItemKind.Property = 10;\r\n    CompletionItemKind.Unit = 11;\r\n    CompletionItemKind.Value = 12;\r\n    CompletionItemKind.Enum = 13;\r\n    CompletionItemKind.Keyword = 14;\r\n    CompletionItemKind.Snippet = 15;\r\n    CompletionItemKind.Color = 16;\r\n    CompletionItemKind.File = 17;\r\n    CompletionItemKind.Reference = 18;\r\n    CompletionItemKind.Folder = 19;\r\n    CompletionItemKind.EnumMember = 20;\r\n    CompletionItemKind.Constant = 21;\r\n    CompletionItemKind.Struct = 22;\r\n    CompletionItemKind.Event = 23;\r\n    CompletionItemKind.Operator = 24;\r\n    CompletionItemKind.TypeParameter = 25;\r\n})(CompletionItemKind || (CompletionItemKind = {}));\r\n/**\r\n * Defines whether the insert text in a completion item should be interpreted as\r\n * plain text or a snippet.\r\n */\r\nexport var InsertTextFormat;\r\n(function (InsertTextFormat) {\r\n    /**\r\n     * The primary text to be inserted is treated as a plain string.\r\n     */\r\n    InsertTextFormat.PlainText = 1;\r\n    /**\r\n     * The primary text to be inserted is treated as a snippet.\r\n     *\r\n     * A snippet can define tab stops and placeholders with `$1`, `$2`\r\n     * and `${3:foo}`. `$0` defines the final tab stop, it defaults to\r\n     * the end of the snippet. Placeholders with equal identifiers are linked,\r\n     * that is typing in one will update others too.\r\n     *\r\n     * See also: https://github.com/Microsoft/vscode/blob/master/src/vs/editor/contrib/snippet/common/snippet.md\r\n     */\r\n    InsertTextFormat.Snippet = 2;\r\n})(InsertTextFormat || (InsertTextFormat = {}));\r\n/**\r\n * The CompletionItem namespace provides functions to deal with\r\n * completion items.\r\n */\r\nexport var CompletionItem;\r\n(function (CompletionItem) {\r\n    /**\r\n     * Create a completion item and seed it with a label.\r\n     * @param label The completion item's label\r\n     */\r\n    function create(label) {\r\n        return { label: label };\r\n    }\r\n    CompletionItem.create = create;\r\n})(CompletionItem || (CompletionItem = {}));\r\n/**\r\n * The CompletionList namespace provides functions to deal with\r\n * completion lists.\r\n */\r\nexport var CompletionList;\r\n(function (CompletionList) {\r\n    /**\r\n     * Creates a new completion list.\r\n     *\r\n     * @param items The completion items.\r\n     * @param isIncomplete The list is not complete.\r\n     */\r\n    function create(items, isIncomplete) {\r\n        return { items: items ? items : [], isIncomplete: !!isIncomplete };\r\n    }\r\n    CompletionList.create = create;\r\n})(CompletionList || (CompletionList = {}));\r\nexport var MarkedString;\r\n(function (MarkedString) {\r\n    /**\r\n     * Creates a marked string from plain text.\r\n     *\r\n     * @param plainText The plain text.\r\n     */\r\n    function fromPlainText(plainText) {\r\n        return plainText.replace(/[\\\\`*_{}[\\]()#+\\-.!]/g, \"\\\\$&\"); // escape markdown syntax tokens: http://daringfireball.net/projects/markdown/syntax#backslash\r\n    }\r\n    MarkedString.fromPlainText = fromPlainText;\r\n    /**\r\n     * Checks whether the given value conforms to the [MarkedString](#MarkedString) type.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.string(candidate) || (Is.objectLiteral(candidate) && Is.string(candidate.language) && Is.string(candidate.value));\r\n    }\r\n    MarkedString.is = is;\r\n})(MarkedString || (MarkedString = {}));\r\nexport var Hover;\r\n(function (Hover) {\r\n    /**\r\n     * Checks whether the given value conforms to the [Hover](#Hover) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return !!candidate && Is.objectLiteral(candidate) && (MarkupContent.is(candidate.contents) ||\r\n            MarkedString.is(candidate.contents) ||\r\n            Is.typedArray(candidate.contents, MarkedString.is)) && (value.range === void 0 || Range.is(value.range));\r\n    }\r\n    Hover.is = is;\r\n})(Hover || (Hover = {}));\r\n/**\r\n * The ParameterInformation namespace provides helper functions to work with\r\n * [ParameterInformation](#ParameterInformation) literals.\r\n */\r\nexport var ParameterInformation;\r\n(function (ParameterInformation) {\r\n    /**\r\n     * Creates a new parameter information literal.\r\n     *\r\n     * @param label A label string.\r\n     * @param documentation A doc string.\r\n     */\r\n    function create(label, documentation) {\r\n        return documentation ? { label: label, documentation: documentation } : { label: label };\r\n    }\r\n    ParameterInformation.create = create;\r\n    ;\r\n})(ParameterInformation || (ParameterInformation = {}));\r\n/**\r\n * The SignatureInformation namespace provides helper functions to work with\r\n * [SignatureInformation](#SignatureInformation) literals.\r\n */\r\nexport var SignatureInformation;\r\n(function (SignatureInformation) {\r\n    function create(label, documentation) {\r\n        var parameters = [];\r\n        for (var _i = 2; _i < arguments.length; _i++) {\r\n            parameters[_i - 2] = arguments[_i];\r\n        }\r\n        var result = { label: label };\r\n        if (Is.defined(documentation)) {\r\n            result.documentation = documentation;\r\n        }\r\n        if (Is.defined(parameters)) {\r\n            result.parameters = parameters;\r\n        }\r\n        else {\r\n            result.parameters = [];\r\n        }\r\n        return result;\r\n    }\r\n    SignatureInformation.create = create;\r\n})(SignatureInformation || (SignatureInformation = {}));\r\n/**\r\n * A document highlight kind.\r\n */\r\nexport var DocumentHighlightKind;\r\n(function (DocumentHighlightKind) {\r\n    /**\r\n     * A textual occurrence.\r\n     */\r\n    DocumentHighlightKind.Text = 1;\r\n    /**\r\n     * Read-access of a symbol, like reading a variable.\r\n     */\r\n    DocumentHighlightKind.Read = 2;\r\n    /**\r\n     * Write-access of a symbol, like writing to a variable.\r\n     */\r\n    DocumentHighlightKind.Write = 3;\r\n})(DocumentHighlightKind || (DocumentHighlightKind = {}));\r\n/**\r\n * DocumentHighlight namespace to provide helper functions to work with\r\n * [DocumentHighlight](#DocumentHighlight) literals.\r\n */\r\nexport var DocumentHighlight;\r\n(function (DocumentHighlight) {\r\n    /**\r\n     * Create a DocumentHighlight object.\r\n     * @param range The range the highlight applies to.\r\n     */\r\n    function create(range, kind) {\r\n        var result = { range: range };\r\n        if (Is.number(kind)) {\r\n            result.kind = kind;\r\n        }\r\n        return result;\r\n    }\r\n    DocumentHighlight.create = create;\r\n})(DocumentHighlight || (DocumentHighlight = {}));\r\n/**\r\n * A symbol kind.\r\n */\r\nexport var SymbolKind;\r\n(function (SymbolKind) {\r\n    SymbolKind.File = 1;\r\n    SymbolKind.Module = 2;\r\n    SymbolKind.Namespace = 3;\r\n    SymbolKind.Package = 4;\r\n    SymbolKind.Class = 5;\r\n    SymbolKind.Method = 6;\r\n    SymbolKind.Property = 7;\r\n    SymbolKind.Field = 8;\r\n    SymbolKind.Constructor = 9;\r\n    SymbolKind.Enum = 10;\r\n    SymbolKind.Interface = 11;\r\n    SymbolKind.Function = 12;\r\n    SymbolKind.Variable = 13;\r\n    SymbolKind.Constant = 14;\r\n    SymbolKind.String = 15;\r\n    SymbolKind.Number = 16;\r\n    SymbolKind.Boolean = 17;\r\n    SymbolKind.Array = 18;\r\n    SymbolKind.Object = 19;\r\n    SymbolKind.Key = 20;\r\n    SymbolKind.Null = 21;\r\n    SymbolKind.EnumMember = 22;\r\n    SymbolKind.Struct = 23;\r\n    SymbolKind.Event = 24;\r\n    SymbolKind.Operator = 25;\r\n    SymbolKind.TypeParameter = 26;\r\n})(SymbolKind || (SymbolKind = {}));\r\nexport var SymbolInformation;\r\n(function (SymbolInformation) {\r\n    /**\r\n     * Creates a new symbol information literal.\r\n     *\r\n     * @param name The name of the symbol.\r\n     * @param kind The kind of the symbol.\r\n     * @param range The range of the location of the symbol.\r\n     * @param uri The resource of the location of symbol, defaults to the current document.\r\n     * @param containerName The name of the symbol containing the symbol.\r\n     */\r\n    function create(name, kind, range, uri, containerName) {\r\n        var result = {\r\n            name: name,\r\n            kind: kind,\r\n            location: { uri: uri, range: range }\r\n        };\r\n        if (containerName) {\r\n            result.containerName = containerName;\r\n        }\r\n        return result;\r\n    }\r\n    SymbolInformation.create = create;\r\n})(SymbolInformation || (SymbolInformation = {}));\r\n/**\r\n * Represents programming constructs like variables, classes, interfaces etc.\r\n * that appear in a document. Document symbols can be hierarchical and they\r\n * have two ranges: one that encloses its definition and one that points to\r\n * its most interesting range, e.g. the range of an identifier.\r\n */\r\nvar DocumentSymbol = /** @class */ (function () {\r\n    function DocumentSymbol() {\r\n    }\r\n    return DocumentSymbol;\r\n}());\r\nexport { DocumentSymbol };\r\n(function (DocumentSymbol) {\r\n    /**\r\n     * Creates a new symbol information literal.\r\n     *\r\n     * @param name The name of the symbol.\r\n     * @param detail The detail of the symbol.\r\n     * @param kind The kind of the symbol.\r\n     * @param range The range of the symbol.\r\n     * @param selectionRange The selectionRange of the symbol.\r\n     * @param children Children of the symbol.\r\n     */\r\n    function create(name, detail, kind, range, selectionRange, children) {\r\n        var result = {\r\n            name: name,\r\n            detail: detail,\r\n            kind: kind,\r\n            range: range,\r\n            selectionRange: selectionRange\r\n        };\r\n        if (children !== void 0) {\r\n            result.children = children;\r\n        }\r\n        return result;\r\n    }\r\n    DocumentSymbol.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [DocumentSymbol](#DocumentSymbol) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate &&\r\n            Is.string(candidate.name) && Is.number(candidate.kind) &&\r\n            Range.is(candidate.range) && Range.is(candidate.selectionRange) &&\r\n            (candidate.detail === void 0 || Is.string(candidate.detail)) &&\r\n            (candidate.deprecated === void 0 || Is.boolean(candidate.deprecated)) &&\r\n            (candidate.children === void 0 || Array.isArray(candidate.children));\r\n    }\r\n    DocumentSymbol.is = is;\r\n})(DocumentSymbol || (DocumentSymbol = {}));\r\n/**\r\n * A set of predefined code action kinds\r\n */\r\nexport var CodeActionKind;\r\n(function (CodeActionKind) {\r\n    /**\r\n     * Base kind for quickfix actions: 'quickfix'\r\n     */\r\n    CodeActionKind.QuickFix = 'quickfix';\r\n    /**\r\n     * Base kind for refactoring actions: 'refactor'\r\n     */\r\n    CodeActionKind.Refactor = 'refactor';\r\n    /**\r\n     * Base kind for refactoring extraction actions: 'refactor.extract'\r\n     *\r\n     * Example extract actions:\r\n     *\r\n     * - Extract method\r\n     * - Extract function\r\n     * - Extract variable\r\n     * - Extract interface from class\r\n     * - ...\r\n     */\r\n    CodeActionKind.RefactorExtract = 'refactor.extract';\r\n    /**\r\n     * Base kind for refactoring inline actions: 'refactor.inline'\r\n     *\r\n     * Example inline actions:\r\n     *\r\n     * - Inline function\r\n     * - Inline variable\r\n     * - Inline constant\r\n     * - ...\r\n     */\r\n    CodeActionKind.RefactorInline = 'refactor.inline';\r\n    /**\r\n     * Base kind for refactoring rewrite actions: 'refactor.rewrite'\r\n     *\r\n     * Example rewrite actions:\r\n     *\r\n     * - Convert JavaScript function to class\r\n     * - Add or remove parameter\r\n     * - Encapsulate field\r\n     * - Make method static\r\n     * - Move method to base class\r\n     * - ...\r\n     */\r\n    CodeActionKind.RefactorRewrite = 'refactor.rewrite';\r\n    /**\r\n     * Base kind for source actions: `source`\r\n     *\r\n     * Source code actions apply to the entire file.\r\n     */\r\n    CodeActionKind.Source = 'source';\r\n    /**\r\n     * Base kind for an organize imports source action: `source.organizeImports`\r\n     */\r\n    CodeActionKind.SourceOrganizeImports = 'source.organizeImports';\r\n})(CodeActionKind || (CodeActionKind = {}));\r\n/**\r\n * The CodeActionContext namespace provides helper functions to work with\r\n * [CodeActionContext](#CodeActionContext) literals.\r\n */\r\nexport var CodeActionContext;\r\n(function (CodeActionContext) {\r\n    /**\r\n     * Creates a new CodeActionContext literal.\r\n     */\r\n    function create(diagnostics, only) {\r\n        var result = { diagnostics: diagnostics };\r\n        if (only !== void 0 && only !== null) {\r\n            result.only = only;\r\n        }\r\n        return result;\r\n    }\r\n    CodeActionContext.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [CodeActionContext](#CodeActionContext) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Is.typedArray(candidate.diagnostics, Diagnostic.is) && (candidate.only === void 0 || Is.typedArray(candidate.only, Is.string));\r\n    }\r\n    CodeActionContext.is = is;\r\n})(CodeActionContext || (CodeActionContext = {}));\r\nexport var CodeAction;\r\n(function (CodeAction) {\r\n    function create(title, commandOrEdit, kind) {\r\n        var result = { title: title };\r\n        if (Command.is(commandOrEdit)) {\r\n            result.command = commandOrEdit;\r\n        }\r\n        else {\r\n            result.edit = commandOrEdit;\r\n        }\r\n        if (kind !== void null) {\r\n            result.kind = kind;\r\n        }\r\n        return result;\r\n    }\r\n    CodeAction.create = create;\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate && Is.string(candidate.title) &&\r\n            (candidate.diagnostics === void 0 || Is.typedArray(candidate.diagnostics, Diagnostic.is)) &&\r\n            (candidate.kind === void 0 || Is.string(candidate.kind)) &&\r\n            (candidate.edit !== void 0 || candidate.command !== void 0) &&\r\n            (candidate.command === void 0 || Command.is(candidate.command)) &&\r\n            (candidate.edit === void 0 || WorkspaceEdit.is(candidate.edit));\r\n    }\r\n    CodeAction.is = is;\r\n})(CodeAction || (CodeAction = {}));\r\n/**\r\n * The CodeLens namespace provides helper functions to work with\r\n * [CodeLens](#CodeLens) literals.\r\n */\r\nexport var CodeLens;\r\n(function (CodeLens) {\r\n    /**\r\n     * Creates a new CodeLens literal.\r\n     */\r\n    function create(range, data) {\r\n        var result = { range: range };\r\n        if (Is.defined(data))\r\n            result.data = data;\r\n        return result;\r\n    }\r\n    CodeLens.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [CodeLens](#CodeLens) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Range.is(candidate.range) && (Is.undefined(candidate.command) || Command.is(candidate.command));\r\n    }\r\n    CodeLens.is = is;\r\n})(CodeLens || (CodeLens = {}));\r\n/**\r\n * The FormattingOptions namespace provides helper functions to work with\r\n * [FormattingOptions](#FormattingOptions) literals.\r\n */\r\nexport var FormattingOptions;\r\n(function (FormattingOptions) {\r\n    /**\r\n     * Creates a new FormattingOptions literal.\r\n     */\r\n    function create(tabSize, insertSpaces) {\r\n        return { tabSize: tabSize, insertSpaces: insertSpaces };\r\n    }\r\n    FormattingOptions.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [FormattingOptions](#FormattingOptions) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Is.number(candidate.tabSize) && Is.boolean(candidate.insertSpaces);\r\n    }\r\n    FormattingOptions.is = is;\r\n})(FormattingOptions || (FormattingOptions = {}));\r\n/**\r\n * A document link is a range in a text document that links to an internal or external resource, like another\r\n * text document or a web site.\r\n */\r\nvar DocumentLink = /** @class */ (function () {\r\n    function DocumentLink() {\r\n    }\r\n    return DocumentLink;\r\n}());\r\nexport { DocumentLink };\r\n/**\r\n * The DocumentLink namespace provides helper functions to work with\r\n * [DocumentLink](#DocumentLink) literals.\r\n */\r\n(function (DocumentLink) {\r\n    /**\r\n     * Creates a new DocumentLink literal.\r\n     */\r\n    function create(range, target, data) {\r\n        return { range: range, target: target, data: data };\r\n    }\r\n    DocumentLink.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [DocumentLink](#DocumentLink) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Range.is(candidate.range) && (Is.undefined(candidate.target) || Is.string(candidate.target));\r\n    }\r\n    DocumentLink.is = is;\r\n})(DocumentLink || (DocumentLink = {}));\r\nexport var EOL = ['\\n', '\\r\\n', '\\r'];\r\nexport var TextDocument;\r\n(function (TextDocument) {\r\n    /**\r\n     * Creates a new ITextDocument literal from the given uri and content.\r\n     * @param uri The document's uri.\r\n     * @param languageId  The document's language Id.\r\n     * @param content The document's content.\r\n     */\r\n    function create(uri, languageId, version, content) {\r\n        return new FullTextDocument(uri, languageId, version, content);\r\n    }\r\n    TextDocument.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [ITextDocument](#ITextDocument) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Is.string(candidate.uri) && (Is.undefined(candidate.languageId) || Is.string(candidate.languageId)) && Is.number(candidate.lineCount)\r\n            && Is.func(candidate.getText) && Is.func(candidate.positionAt) && Is.func(candidate.offsetAt) ? true : false;\r\n    }\r\n    TextDocument.is = is;\r\n    function applyEdits(document, edits) {\r\n        var text = document.getText();\r\n        var sortedEdits = mergeSort(edits, function (a, b) {\r\n            var diff = a.range.start.line - b.range.start.line;\r\n            if (diff === 0) {\r\n                return a.range.start.character - b.range.start.character;\r\n            }\r\n            return diff;\r\n        });\r\n        var lastModifiedOffset = text.length;\r\n        for (var i = sortedEdits.length - 1; i >= 0; i--) {\r\n            var e = sortedEdits[i];\r\n            var startOffset = document.offsetAt(e.range.start);\r\n            var endOffset = document.offsetAt(e.range.end);\r\n            if (endOffset <= lastModifiedOffset) {\r\n                text = text.substring(0, startOffset) + e.newText + text.substring(endOffset, text.length);\r\n            }\r\n            else {\r\n                throw new Error('Overlapping edit');\r\n            }\r\n            lastModifiedOffset = startOffset;\r\n        }\r\n        return text;\r\n    }\r\n    TextDocument.applyEdits = applyEdits;\r\n    function mergeSort(data, compare) {\r\n        if (data.length <= 1) {\r\n            // sorted\r\n            return data;\r\n        }\r\n        var p = (data.length / 2) | 0;\r\n        var left = data.slice(0, p);\r\n        var right = data.slice(p);\r\n        mergeSort(left, compare);\r\n        mergeSort(right, compare);\r\n        var leftIdx = 0;\r\n        var rightIdx = 0;\r\n        var i = 0;\r\n        while (leftIdx < left.length && rightIdx < right.length) {\r\n            var ret = compare(left[leftIdx], right[rightIdx]);\r\n            if (ret <= 0) {\r\n                // smaller_equal -> take left to preserve order\r\n                data[i++] = left[leftIdx++];\r\n            }\r\n            else {\r\n                // greater -> take right\r\n                data[i++] = right[rightIdx++];\r\n            }\r\n        }\r\n        while (leftIdx < left.length) {\r\n            data[i++] = left[leftIdx++];\r\n        }\r\n        while (rightIdx < right.length) {\r\n            data[i++] = right[rightIdx++];\r\n        }\r\n        return data;\r\n    }\r\n})(TextDocument || (TextDocument = {}));\r\n/**\r\n * Represents reasons why a text document is saved.\r\n */\r\nexport var TextDocumentSaveReason;\r\n(function (TextDocumentSaveReason) {\r\n    /**\r\n     * Manually triggered, e.g. by the user pressing save, by starting debugging,\r\n     * or by an API call.\r\n     */\r\n    TextDocumentSaveReason.Manual = 1;\r\n    /**\r\n     * Automatic after a delay.\r\n     */\r\n    TextDocumentSaveReason.AfterDelay = 2;\r\n    /**\r\n     * When the editor lost focus.\r\n     */\r\n    TextDocumentSaveReason.FocusOut = 3;\r\n})(TextDocumentSaveReason || (TextDocumentSaveReason = {}));\r\nvar FullTextDocument = /** @class */ (function () {\r\n    function FullTextDocument(uri, languageId, version, content) {\r\n        this._uri = uri;\r\n        this._languageId = languageId;\r\n        this._version = version;\r\n        this._content = content;\r\n        this._lineOffsets = null;\r\n    }\r\n    Object.defineProperty(FullTextDocument.prototype, \"uri\", {\r\n        get: function () {\r\n            return this._uri;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(FullTextDocument.prototype, \"languageId\", {\r\n        get: function () {\r\n            return this._languageId;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(FullTextDocument.prototype, \"version\", {\r\n        get: function () {\r\n            return this._version;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    FullTextDocument.prototype.getText = function (range) {\r\n        if (range) {\r\n            var start = this.offsetAt(range.start);\r\n            var end = this.offsetAt(range.end);\r\n            return this._content.substring(start, end);\r\n        }\r\n        return this._content;\r\n    };\r\n    FullTextDocument.prototype.update = function (event, version) {\r\n        this._content = event.text;\r\n        this._version = version;\r\n        this._lineOffsets = null;\r\n    };\r\n    FullTextDocument.prototype.getLineOffsets = function () {\r\n        if (this._lineOffsets === null) {\r\n            var lineOffsets = [];\r\n            var text = this._content;\r\n            var isLineStart = true;\r\n            for (var i = 0; i < text.length; i++) {\r\n                if (isLineStart) {\r\n                    lineOffsets.push(i);\r\n                    isLineStart = false;\r\n                }\r\n                var ch = text.charAt(i);\r\n                isLineStart = (ch === '\\r' || ch === '\\n');\r\n                if (ch === '\\r' && i + 1 < text.length && text.charAt(i + 1) === '\\n') {\r\n                    i++;\r\n                }\r\n            }\r\n            if (isLineStart && text.length > 0) {\r\n                lineOffsets.push(text.length);\r\n            }\r\n            this._lineOffsets = lineOffsets;\r\n        }\r\n        return this._lineOffsets;\r\n    };\r\n    FullTextDocument.prototype.positionAt = function (offset) {\r\n        offset = Math.max(Math.min(offset, this._content.length), 0);\r\n        var lineOffsets = this.getLineOffsets();\r\n        var low = 0, high = lineOffsets.length;\r\n        if (high === 0) {\r\n            return Position.create(0, offset);\r\n        }\r\n        while (low < high) {\r\n            var mid = Math.floor((low + high) / 2);\r\n            if (lineOffsets[mid] > offset) {\r\n                high = mid;\r\n            }\r\n            else {\r\n                low = mid + 1;\r\n            }\r\n        }\r\n        // low is the least x for which the line offset is larger than the current offset\r\n        // or array.length if no line offset is larger than the current offset\r\n        var line = low - 1;\r\n        return Position.create(line, offset - lineOffsets[line]);\r\n    };\r\n    FullTextDocument.prototype.offsetAt = function (position) {\r\n        var lineOffsets = this.getLineOffsets();\r\n        if (position.line >= lineOffsets.length) {\r\n            return this._content.length;\r\n        }\r\n        else if (position.line < 0) {\r\n            return 0;\r\n        }\r\n        var lineOffset = lineOffsets[position.line];\r\n        var nextLineOffset = (position.line + 1 < lineOffsets.length) ? lineOffsets[position.line + 1] : this._content.length;\r\n        return Math.max(Math.min(lineOffset + position.character, nextLineOffset), lineOffset);\r\n    };\r\n    Object.defineProperty(FullTextDocument.prototype, \"lineCount\", {\r\n        get: function () {\r\n            return this.getLineOffsets().length;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return FullTextDocument;\r\n}());\r\nvar Is;\r\n(function (Is) {\r\n    var toString = Object.prototype.toString;\r\n    function defined(value) {\r\n        return typeof value !== 'undefined';\r\n    }\r\n    Is.defined = defined;\r\n    function undefined(value) {\r\n        return typeof value === 'undefined';\r\n    }\r\n    Is.undefined = undefined;\r\n    function boolean(value) {\r\n        return value === true || value === false;\r\n    }\r\n    Is.boolean = boolean;\r\n    function string(value) {\r\n        return toString.call(value) === '[object String]';\r\n    }\r\n    Is.string = string;\r\n    function number(value) {\r\n        return toString.call(value) === '[object Number]';\r\n    }\r\n    Is.number = number;\r\n    function func(value) {\r\n        return toString.call(value) === '[object Function]';\r\n    }\r\n    Is.func = func;\r\n    function objectLiteral(value) {\r\n        // Strictly speaking class instances pass this check as well. Since the LSP\r\n        // doesn't use classes we ignore this for now. If we do we need to add something\r\n        // like this: `Object.getPrototypeOf(Object.getPrototypeOf(x)) === null`\r\n        return value !== null && typeof value === 'object';\r\n    }\r\n    Is.objectLiteral = objectLiteral;\r\n    function typedArray(value, check) {\r\n        return Array.isArray(value) && value.every(check);\r\n    }\r\n    Is.typedArray = typedArray;\r\n})(Is || (Is = {}));\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nfunction boolean(value) {\r\n    return value === true || value === false;\r\n}\r\nexports.boolean = boolean;\r\nfunction string(value) {\r\n    return typeof value === 'string' || value instanceof String;\r\n}\r\nexports.string = string;\r\nfunction number(value) {\r\n    return typeof value === 'number' || value instanceof Number;\r\n}\r\nexports.number = number;\r\nfunction error(value) {\r\n    return value instanceof Error;\r\n}\r\nexports.error = error;\r\nfunction func(value) {\r\n    return typeof value === 'function';\r\n}\r\nexports.func = func;\r\nfunction array(value) {\r\n    return Array.isArray(value);\r\n}\r\nexports.array = array;\r\nfunction stringArray(value) {\r\n    return array(value) && value.every(elem => string(elem));\r\n}\r\nexports.stringArray = stringArray;\r\nfunction typedArray(value, check) {\r\n    return Array.isArray(value) && value.every(check);\r\n}\r\nexports.typedArray = typedArray;\r\nfunction thenable(value) {\r\n    return value && func(value.then);\r\n}\r\nexports.thenable = thenable;\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nclass ValueUUID {\r\n    constructor(_value) {\r\n        this._value = _value;\r\n        // empty\r\n    }\r\n    asHex() {\r\n        return this._value;\r\n    }\r\n    equals(other) {\r\n        return this.asHex() === other.asHex();\r\n    }\r\n}\r\nclass V4UUID extends ValueUUID {\r\n    constructor() {\r\n        super([\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            '-',\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            '-',\r\n            '4',\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            '-',\r\n            V4UUID._oneOf(V4UUID._timeHighBits),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            '-',\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n        ].join(''));\r\n    }\r\n    static _oneOf(array) {\r\n        return array[Math.floor(array.length * Math.random())];\r\n    }\r\n    static _randomHex() {\r\n        return V4UUID._oneOf(V4UUID._chars);\r\n    }\r\n}\r\nV4UUID._chars = ['0', '1', '2', '3', '4', '5', '6', '6', '7', '8', '9', 'a', 'b', 'c', 'd', 'e', 'f'];\r\nV4UUID._timeHighBits = ['8', '9', 'a', 'b'];\r\n/**\r\n * An empty UUID that contains only zeros.\r\n */\r\nexports.empty = new ValueUUID('00000000-0000-0000-0000-000000000000');\r\nfunction v4() {\r\n    return new V4UUID();\r\n}\r\nexports.v4 = v4;\r\nconst _UUIDPattern = /^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;\r\nfunction isUUID(value) {\r\n    return _UUIDPattern.test(value);\r\n}\r\nexports.isUUID = isUUID;\r\n/**\r\n * Parses a UUID that is of the format xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx.\r\n * @param value A uuid string.\r\n */\r\nfunction parse(value) {\r\n    if (!isUUID(value)) {\r\n        throw new Error('invalid uuid');\r\n    }\r\n    return new ValueUUID(value);\r\n}\r\nexports.parse = parse;\r\nfunction generateUuid() {\r\n    return v4().asHex();\r\n}\r\nexports.generateUuid = generateUuid;\r\n","\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst position_1 = require(\"./common/position\");\nconst rbTreeBase_1 = require(\"./rbTreeBase\");\n// const lfRegex = new RegExp(/\\r\\n|\\r|\\n/g);\nexports.AverageBufferSize = 65535;\nfunction createUintArray(arr) {\n    let r;\n    if (arr[arr.length - 1] < 65536) {\n        r = new Uint16Array(arr.length);\n    }\n    else {\n        r = new Uint32Array(arr.length);\n    }\n    r.set(arr, 0);\n    return r;\n}\nexports.createUintArray = createUintArray;\nclass LineStarts {\n    constructor(lineStarts, cr, lf, crlf, isBasicASCII) {\n        this.lineStarts = lineStarts;\n        this.cr = cr;\n        this.lf = lf;\n        this.crlf = crlf;\n        this.isBasicASCII = isBasicASCII;\n    }\n}\nexports.LineStarts = LineStarts;\nfunction createLineStartsFast(str, readonly = true) {\n    let r = [0], rLength = 1;\n    for (let i = 0, len = str.length; i < len; i++) {\n        const chr = str.charCodeAt(i);\n        if (chr === 13 /* CarriageReturn */) {\n            if (i + 1 < len && str.charCodeAt(i + 1) === 10 /* LineFeed */) {\n                // \\r\\n... case\n                r[rLength++] = i + 2;\n                i++; // skip \\n\n            }\n            else {\n                // \\r... case\n                r[rLength++] = i + 1;\n            }\n        }\n        else if (chr === 10 /* LineFeed */) {\n            r[rLength++] = i + 1;\n        }\n    }\n    if (readonly) {\n        return createUintArray(r);\n    }\n    else {\n        return r;\n    }\n}\nexports.createLineStartsFast = createLineStartsFast;\nfunction createLineStarts(r, str) {\n    r.length = 0;\n    r[0] = 0;\n    let rLength = 1;\n    let cr = 0, lf = 0, crlf = 0;\n    let isBasicASCII = true;\n    for (let i = 0, len = str.length; i < len; i++) {\n        const chr = str.charCodeAt(i);\n        if (chr === 13 /* CarriageReturn */) {\n            if (i + 1 < len && str.charCodeAt(i + 1) === 10 /* LineFeed */) {\n                // \\r\\n... case\n                crlf++;\n                r[rLength++] = i + 2;\n                i++; // skip \\n\n            }\n            else {\n                cr++;\n                // \\r... case\n                r[rLength++] = i + 1;\n            }\n        }\n        else if (chr === 10 /* LineFeed */) {\n            lf++;\n            r[rLength++] = i + 1;\n        }\n        else {\n            if (isBasicASCII) {\n                if (chr !== 9 /* Tab */ && (chr < 32 || chr > 126)) {\n                    isBasicASCII = false;\n                }\n            }\n        }\n    }\n    const result = new LineStarts(createUintArray(r), cr, lf, crlf, isBasicASCII);\n    r.length = 0;\n    return result;\n}\nexports.createLineStarts = createLineStarts;\nclass Piece {\n    constructor(bufferIndex, start, end, lineFeedCnt, length) {\n        this.bufferIndex = bufferIndex;\n        this.start = start;\n        this.end = end;\n        this.lineFeedCnt = lineFeedCnt;\n        this.length = length;\n    }\n}\nexports.Piece = Piece;\nclass StringBuffer {\n    constructor(buffer, lineStarts) {\n        this.buffer = buffer;\n        this.lineStarts = lineStarts;\n    }\n}\nexports.StringBuffer = StringBuffer;\n/**\n * Readonly snapshot for piece tree.\n * In a real multiple thread environment, to make snapshot reading always work correctly, we need to\n * 1. Make TreeNode.piece immutable, then reading and writing can run in parallel.\n * 2. TreeNode/Buffers normalization should not happen during snapshot reading.\n */\nclass PieceTreeSnapshot {\n    constructor(tree, BOM) {\n        this._pieces = [];\n        this._tree = tree;\n        this._BOM = BOM;\n        this._index = 0;\n        if (tree.root !== rbTreeBase_1.SENTINEL) {\n            tree.iterate(tree.root, node => {\n                if (node !== rbTreeBase_1.SENTINEL) {\n                    this._pieces.push(node.piece);\n                }\n                return true;\n            });\n        }\n    }\n    read() {\n        if (this._pieces.length === 0) {\n            if (this._index === 0) {\n                this._index++;\n                return this._BOM;\n            }\n            else {\n                return null;\n            }\n        }\n        if (this._index > this._pieces.length - 1) {\n            return null;\n        }\n        if (this._index === 0) {\n            return this._BOM + this._tree.getPieceContent(this._pieces[this._index++]);\n        }\n        return this._tree.getPieceContent(this._pieces[this._index++]);\n    }\n}\nclass PieceTreeSearchCache {\n    constructor(limit) {\n        this._limit = limit;\n        this._cache = [];\n    }\n    get(offset) {\n        for (let i = this._cache.length - 1; i >= 0; i--) {\n            let nodePos = this._cache[i];\n            if (nodePos.nodeStartOffset <= offset && nodePos.nodeStartOffset + nodePos.node.piece.length >= offset) {\n                return nodePos;\n            }\n        }\n        return null;\n    }\n    get2(lineNumber) {\n        for (let i = this._cache.length - 1; i >= 0; i--) {\n            let nodePos = this._cache[i];\n            if (nodePos.nodeStartLineNumber && nodePos.nodeStartLineNumber < lineNumber && nodePos.nodeStartLineNumber + nodePos.node.piece.lineFeedCnt >= lineNumber) {\n                return nodePos;\n            }\n        }\n        return null;\n    }\n    set(nodePosition) {\n        if (this._cache.length >= this._limit) {\n            this._cache.shift();\n        }\n        this._cache.push(nodePosition);\n    }\n    valdiate(offset) {\n        let hasInvalidVal = false;\n        let tmp = this._cache;\n        for (let i = 0; i < tmp.length; i++) {\n            let nodePos = tmp[i];\n            if (nodePos.node.parent === null || nodePos.nodeStartOffset >= offset) {\n                tmp[i] = null;\n                hasInvalidVal = true;\n                continue;\n            }\n        }\n        if (hasInvalidVal) {\n            let newArr = [];\n            for (const entry of tmp) {\n                if (entry !== null) {\n                    newArr.push(entry);\n                }\n            }\n            this._cache = newArr;\n        }\n    }\n}\nclass PieceTreeBase {\n    constructor(chunks, eol, eolNormalized) {\n        this.create(chunks, eol, eolNormalized);\n    }\n    create(chunks, eol, eolNormalized) {\n        this._buffers = [\n            new StringBuffer('', [0])\n        ];\n        this._lastChangeBufferPos = { line: 0, column: 0 };\n        this.root = rbTreeBase_1.SENTINEL;\n        this._lineCnt = 1;\n        this._length = 0;\n        this._EOL = eol;\n        this._EOLLength = eol.length;\n        this._EOLNormalized = eolNormalized;\n        let lastNode = null;\n        for (let i = 0, len = chunks.length; i < len; i++) {\n            if (chunks[i].buffer.length > 0) {\n                if (!chunks[i].lineStarts) {\n                    chunks[i].lineStarts = createLineStartsFast(chunks[i].buffer);\n                }\n                let piece = new Piece(i + 1, { line: 0, column: 0 }, { line: chunks[i].lineStarts.length - 1, column: chunks[i].buffer.length - chunks[i].lineStarts[chunks[i].lineStarts.length - 1] }, chunks[i].lineStarts.length - 1, chunks[i].buffer.length);\n                this._buffers.push(chunks[i]);\n                lastNode = this.rbInsertRight(lastNode, piece);\n            }\n        }\n        this._searchCache = new PieceTreeSearchCache(1);\n        this._lastVisitedLine = { lineNumber: 0, value: '' };\n        this.computeBufferMetadata();\n    }\n    normalizeEOL(eol) {\n        let averageBufferSize = exports.AverageBufferSize;\n        let min = averageBufferSize - Math.floor(averageBufferSize / 3);\n        let max = min * 2;\n        let tempChunk = '';\n        let tempChunkLen = 0;\n        let chunks = [];\n        this.iterate(this.root, node => {\n            let str = this.getNodeContent(node);\n            let len = str.length;\n            if (tempChunkLen <= min || tempChunkLen + len < max) {\n                tempChunk += str;\n                tempChunkLen += len;\n                return true;\n            }\n            // flush anyways\n            let text = tempChunk.replace(/\\r\\n|\\r|\\n/g, eol);\n            chunks.push(new StringBuffer(text, createLineStartsFast(text)));\n            tempChunk = str;\n            tempChunkLen = len;\n            return true;\n        });\n        if (tempChunkLen > 0) {\n            let text = tempChunk.replace(/\\r\\n|\\r|\\n/g, eol);\n            chunks.push(new StringBuffer(text, createLineStartsFast(text)));\n        }\n        this.create(chunks, eol, true);\n    }\n    // #region Buffer API\n    getEOL() {\n        return this._EOL;\n    }\n    setEOL(newEOL) {\n        this._EOL = newEOL;\n        this._EOLLength = this._EOL.length;\n        this.normalizeEOL(newEOL);\n    }\n    createSnapshot(BOM) {\n        return new PieceTreeSnapshot(this, BOM);\n    }\n    equal(other) {\n        if (this.getLength() !== other.getLength()) {\n            return false;\n        }\n        if (this.getLineCount() !== other.getLineCount()) {\n            return false;\n        }\n        let offset = 0;\n        let ret = this.iterate(this.root, node => {\n            if (node === rbTreeBase_1.SENTINEL) {\n                return true;\n            }\n            let str = this.getNodeContent(node);\n            let len = str.length;\n            let startPosition = other.nodeAt(offset);\n            let endPosition = other.nodeAt(offset + len);\n            let val = other.getValueInRange2(startPosition, endPosition);\n            return str === val;\n        });\n        return ret;\n    }\n    getOffsetAt(lineNumber, column) {\n        let leftLen = 0; // inorder\n        let x = this.root;\n        while (x !== rbTreeBase_1.SENTINEL) {\n            if (x.left !== rbTreeBase_1.SENTINEL && x.lf_left + 1 >= lineNumber) {\n                x = x.left;\n            }\n            else if (x.lf_left + x.piece.lineFeedCnt + 1 >= lineNumber) {\n                leftLen += x.size_left;\n                // lineNumber >= 2\n                let accumualtedValInCurrentIndex = this.getAccumulatedValue(x, lineNumber - x.lf_left - 2);\n                return leftLen += accumualtedValInCurrentIndex + column - 1;\n            }\n            else {\n                lineNumber -= x.lf_left + x.piece.lineFeedCnt;\n                leftLen += x.size_left + x.piece.length;\n                x = x.right;\n            }\n        }\n        return leftLen;\n    }\n    getPositionAt(offset) {\n        offset = Math.floor(offset);\n        offset = Math.max(0, offset);\n        let x = this.root;\n        let lfCnt = 0;\n        let originalOffset = offset;\n        while (x !== rbTreeBase_1.SENTINEL) {\n            if (x.size_left !== 0 && x.size_left >= offset) {\n                x = x.left;\n            }\n            else if (x.size_left + x.piece.length >= offset) {\n                let out = this.getIndexOf(x, offset - x.size_left);\n                lfCnt += x.lf_left + out.index;\n                if (out.index === 0) {\n                    let lineStartOffset = this.getOffsetAt(lfCnt + 1, 1);\n                    let column = originalOffset - lineStartOffset;\n                    return new position_1.Position(lfCnt + 1, column + 1);\n                }\n                return new position_1.Position(lfCnt + 1, out.remainder + 1);\n            }\n            else {\n                offset -= x.size_left + x.piece.length;\n                lfCnt += x.lf_left + x.piece.lineFeedCnt;\n                if (x.right === rbTreeBase_1.SENTINEL) {\n                    // last node\n                    let lineStartOffset = this.getOffsetAt(lfCnt + 1, 1);\n                    let column = originalOffset - offset - lineStartOffset;\n                    return new position_1.Position(lfCnt + 1, column + 1);\n                }\n                else {\n                    x = x.right;\n                }\n            }\n        }\n        return new position_1.Position(1, 1);\n    }\n    getValueInRange(range, eol) {\n        if (range.startLineNumber === range.endLineNumber && range.startColumn === range.endColumn) {\n            return '';\n        }\n        let startPosition = this.nodeAt2(range.startLineNumber, range.startColumn);\n        let endPosition = this.nodeAt2(range.endLineNumber, range.endColumn);\n        let value = this.getValueInRange2(startPosition, endPosition);\n        if (eol) {\n            if (eol !== this._EOL || !this._EOLNormalized) {\n                return value.replace(/\\r\\n|\\r|\\n/g, eol);\n            }\n            if (eol === this.getEOL() && this._EOLNormalized) {\n                if (eol === '\\r\\n') {\n                }\n                return value;\n            }\n            return value.replace(/\\r\\n|\\r|\\n/g, eol);\n        }\n        return value;\n    }\n    getValueInRange2(startPosition, endPosition) {\n        if (startPosition.node === endPosition.node) {\n            let node = startPosition.node;\n            let buffer = this._buffers[node.piece.bufferIndex].buffer;\n            let startOffset = this.offsetInBuffer(node.piece.bufferIndex, node.piece.start);\n            return buffer.substring(startOffset + startPosition.remainder, startOffset + endPosition.remainder);\n        }\n        let x = startPosition.node;\n        let buffer = this._buffers[x.piece.bufferIndex].buffer;\n        let startOffset = this.offsetInBuffer(x.piece.bufferIndex, x.piece.start);\n        let ret = buffer.substring(startOffset + startPosition.remainder, startOffset + x.piece.length);\n        x = x.next();\n        while (x !== rbTreeBase_1.SENTINEL) {\n            let buffer = this._buffers[x.piece.bufferIndex].buffer;\n            let startOffset = this.offsetInBuffer(x.piece.bufferIndex, x.piece.start);\n            if (x === endPosition.node) {\n                ret += buffer.substring(startOffset, startOffset + endPosition.remainder);\n                break;\n            }\n            else {\n                ret += buffer.substr(startOffset, x.piece.length);\n            }\n            x = x.next();\n        }\n        return ret;\n    }\n    getLinesContent() {\n        return this.getContentOfSubTree(this.root).split(/\\r\\n|\\r|\\n/);\n    }\n    getLength() {\n        return this._length;\n    }\n    getLineCount() {\n        return this._lineCnt;\n    }\n    /**\n     * @param lineNumber 1 based\n     */\n    getLineContent(lineNumber) {\n        if (this._lastVisitedLine.lineNumber === lineNumber) {\n            return this._lastVisitedLine.value;\n        }\n        this._lastVisitedLine.lineNumber = lineNumber;\n        if (lineNumber === this._lineCnt) {\n            this._lastVisitedLine.value = this.getLineRawContent(lineNumber);\n        }\n        else if (this._EOLNormalized) {\n            this._lastVisitedLine.value = this.getLineRawContent(lineNumber, this._EOLLength);\n        }\n        else {\n            this._lastVisitedLine.value = this.getLineRawContent(lineNumber).replace(/(\\r\\n|\\r|\\n)$/, '');\n        }\n        return this._lastVisitedLine.value;\n    }\n    getLineCharCode(lineNumber, index) {\n        let nodePos = this.nodeAt2(lineNumber, index + 1);\n        if (nodePos.remainder === nodePos.node.piece.length) {\n            // the char we want to fetch is at the head of next node.\n            let matchingNode = nodePos.node.next();\n            if (!matchingNode) {\n                return 0;\n            }\n            let buffer = this._buffers[matchingNode.piece.bufferIndex];\n            let startOffset = this.offsetInBuffer(matchingNode.piece.bufferIndex, matchingNode.piece.start);\n            return buffer.buffer.charCodeAt(startOffset);\n        }\n        else {\n            let buffer = this._buffers[nodePos.node.piece.bufferIndex];\n            let startOffset = this.offsetInBuffer(nodePos.node.piece.bufferIndex, nodePos.node.piece.start);\n            let targetOffset = startOffset + nodePos.remainder;\n            return buffer.buffer.charCodeAt(targetOffset);\n        }\n    }\n    getLineLength(lineNumber) {\n        if (lineNumber === this.getLineCount()) {\n            let startOffset = this.getOffsetAt(lineNumber, 1);\n            return this.getLength() - startOffset;\n        }\n        return this.getOffsetAt(lineNumber + 1, 1) - this.getOffsetAt(lineNumber, 1) - this._EOLLength;\n    }\n    // #endregion\n    // #region Piece Table\n    insert(offset, value, eolNormalized = false) {\n        this._EOLNormalized = this._EOLNormalized && eolNormalized;\n        this._lastVisitedLine.lineNumber = 0;\n        this._lastVisitedLine.value = '';\n        if (this.root !== rbTreeBase_1.SENTINEL) {\n            let { node, remainder, nodeStartOffset } = this.nodeAt(offset);\n            let piece = node.piece;\n            let bufferIndex = piece.bufferIndex;\n            let insertPosInBuffer = this.positionInBuffer(node, remainder);\n            if (node.piece.bufferIndex === 0 &&\n                piece.end.line === this._lastChangeBufferPos.line &&\n                piece.end.column === this._lastChangeBufferPos.column &&\n                (nodeStartOffset + piece.length === offset) &&\n                value.length < exports.AverageBufferSize) {\n                // changed buffer\n                this.appendToNode(node, value);\n                this.computeBufferMetadata();\n                return;\n            }\n            if (nodeStartOffset === offset) {\n                this.insertContentToNodeLeft(value, node);\n                this._searchCache.valdiate(offset);\n            }\n            else if (nodeStartOffset + node.piece.length > offset) {\n                // we are inserting into the middle of a node.\n                let nodesToDel = [];\n                let newRightPiece = new Piece(piece.bufferIndex, insertPosInBuffer, piece.end, this.getLineFeedCnt(piece.bufferIndex, insertPosInBuffer, piece.end), this.offsetInBuffer(bufferIndex, piece.end) - this.offsetInBuffer(bufferIndex, insertPosInBuffer));\n                if (this.shouldCheckCRLF() && this.endWithCR(value)) {\n                    let headOfRight = this.nodeCharCodeAt(node, remainder);\n                    if (headOfRight === 10 /** \\n */) {\n                        let newStart = { line: newRightPiece.start.line + 1, column: 0 };\n                        newRightPiece = new Piece(newRightPiece.bufferIndex, newStart, newRightPiece.end, this.getLineFeedCnt(newRightPiece.bufferIndex, newStart, newRightPiece.end), newRightPiece.length - 1);\n                        value += '\\n';\n                    }\n                }\n                // reuse node for content before insertion point.\n                if (this.shouldCheckCRLF() && this.startWithLF(value)) {\n                    let tailOfLeft = this.nodeCharCodeAt(node, remainder - 1);\n                    if (tailOfLeft === 13 /** \\r */) {\n                        let previousPos = this.positionInBuffer(node, remainder - 1);\n                        this.deleteNodeTail(node, previousPos);\n                        value = '\\r' + value;\n                        if (node.piece.length === 0) {\n                            nodesToDel.push(node);\n                        }\n                    }\n                    else {\n                        this.deleteNodeTail(node, insertPosInBuffer);\n                    }\n                }\n                else {\n                    this.deleteNodeTail(node, insertPosInBuffer);\n                }\n                let newPieces = this.createNewPieces(value);\n                if (newRightPiece.length > 0) {\n                    this.rbInsertRight(node, newRightPiece);\n                }\n                let tmpNode = node;\n                for (let k = 0; k < newPieces.length; k++) {\n                    tmpNode = this.rbInsertRight(tmpNode, newPieces[k]);\n                }\n                this.deleteNodes(nodesToDel);\n            }\n            else {\n                this.insertContentToNodeRight(value, node);\n            }\n        }\n        else {\n            // insert new node\n            let pieces = this.createNewPieces(value);\n            let node = this.rbInsertLeft(null, pieces[0]);\n            for (let k = 1; k < pieces.length; k++) {\n                node = this.rbInsertRight(node, pieces[k]);\n            }\n        }\n        // todo, this is too brutal. Total line feed count should be updated the same way as lf_left.\n        this.computeBufferMetadata();\n    }\n    delete(offset, cnt) {\n        this._lastVisitedLine.lineNumber = 0;\n        this._lastVisitedLine.value = '';\n        if (cnt <= 0 || this.root === rbTreeBase_1.SENTINEL) {\n            return;\n        }\n        let startPosition = this.nodeAt(offset);\n        let endPosition = this.nodeAt(offset + cnt);\n        let startNode = startPosition.node;\n        let endNode = endPosition.node;\n        if (startNode === endNode) {\n            let startSplitPosInBuffer = this.positionInBuffer(startNode, startPosition.remainder);\n            let endSplitPosInBuffer = this.positionInBuffer(startNode, endPosition.remainder);\n            if (startPosition.nodeStartOffset === offset) {\n                if (cnt === startNode.piece.length) { // delete node\n                    let next = startNode.next();\n                    rbTreeBase_1.rbDelete(this, startNode);\n                    this.validateCRLFWithPrevNode(next);\n                    this.computeBufferMetadata();\n                    return;\n                }\n                this.deleteNodeHead(startNode, endSplitPosInBuffer);\n                this._searchCache.valdiate(offset);\n                this.validateCRLFWithPrevNode(startNode);\n                this.computeBufferMetadata();\n                return;\n            }\n            if (startPosition.nodeStartOffset + startNode.piece.length === offset + cnt) {\n                this.deleteNodeTail(startNode, startSplitPosInBuffer);\n                this.validateCRLFWithNextNode(startNode);\n                this.computeBufferMetadata();\n                return;\n            }\n            // delete content in the middle, this node will be splitted to nodes\n            this.shrinkNode(startNode, startSplitPosInBuffer, endSplitPosInBuffer);\n            this.computeBufferMetadata();\n            return;\n        }\n        let nodesToDel = [];\n        let startSplitPosInBuffer = this.positionInBuffer(startNode, startPosition.remainder);\n        this.deleteNodeTail(startNode, startSplitPosInBuffer);\n        this._searchCache.valdiate(offset);\n        if (startNode.piece.length === 0) {\n            nodesToDel.push(startNode);\n        }\n        // update last touched node\n        let endSplitPosInBuffer = this.positionInBuffer(endNode, endPosition.remainder);\n        this.deleteNodeHead(endNode, endSplitPosInBuffer);\n        if (endNode.piece.length === 0) {\n            nodesToDel.push(endNode);\n        }\n        // delete nodes in between\n        let secondNode = startNode.next();\n        for (let node = secondNode; node !== rbTreeBase_1.SENTINEL && node !== endNode; node = node.next()) {\n            nodesToDel.push(node);\n        }\n        let prev = startNode.piece.length === 0 ? startNode.prev() : startNode;\n        this.deleteNodes(nodesToDel);\n        this.validateCRLFWithNextNode(prev);\n        this.computeBufferMetadata();\n    }\n    insertContentToNodeLeft(value, node) {\n        // we are inserting content to the beginning of node\n        let nodesToDel = [];\n        if (this.shouldCheckCRLF() && this.endWithCR(value) && this.startWithLF(node)) {\n            // move `\\n` to new node.\n            let piece = node.piece;\n            let newStart = { line: piece.start.line + 1, column: 0 };\n            let nPiece = new Piece(piece.bufferIndex, newStart, piece.end, this.getLineFeedCnt(piece.bufferIndex, newStart, piece.end), piece.length - 1);\n            node.piece = nPiece;\n            value += '\\n';\n            rbTreeBase_1.updateTreeMetadata(this, node, -1, -1);\n            if (node.piece.length === 0) {\n                nodesToDel.push(node);\n            }\n        }\n        let newPieces = this.createNewPieces(value);\n        let newNode = this.rbInsertLeft(node, newPieces[newPieces.length - 1]);\n        for (let k = newPieces.length - 2; k >= 0; k--) {\n            newNode = this.rbInsertLeft(newNode, newPieces[k]);\n        }\n        this.validateCRLFWithPrevNode(newNode);\n        this.deleteNodes(nodesToDel);\n    }\n    insertContentToNodeRight(value, node) {\n        // we are inserting to the right of this node.\n        if (this.adjustCarriageReturnFromNext(value, node)) {\n            // move \\n to the new node.\n            value += '\\n';\n        }\n        let newPieces = this.createNewPieces(value);\n        let newNode = this.rbInsertRight(node, newPieces[0]);\n        let tmpNode = newNode;\n        for (let k = 1; k < newPieces.length; k++) {\n            tmpNode = this.rbInsertRight(tmpNode, newPieces[k]);\n        }\n        this.validateCRLFWithPrevNode(newNode);\n    }\n    positionInBuffer(node, remainder, ret) {\n        let piece = node.piece;\n        let bufferIndex = node.piece.bufferIndex;\n        let lineStarts = this._buffers[bufferIndex].lineStarts;\n        let startOffset = lineStarts[piece.start.line] + piece.start.column;\n        let offset = startOffset + remainder;\n        // binary search offset between startOffset and endOffset\n        let low = piece.start.line;\n        let high = piece.end.line;\n        let mid = 0;\n        let midStop = 0;\n        let midStart = 0;\n        while (low <= high) {\n            mid = low + ((high - low) / 2) | 0;\n            midStart = lineStarts[mid];\n            if (mid === high) {\n                break;\n            }\n            midStop = lineStarts[mid + 1];\n            if (offset < midStart) {\n                high = mid - 1;\n            }\n            else if (offset >= midStop) {\n                low = mid + 1;\n            }\n            else {\n                break;\n            }\n        }\n        if (ret) {\n            ret.line = mid;\n            ret.column = offset - midStart;\n            return null;\n        }\n        return {\n            line: mid,\n            column: offset - midStart\n        };\n    }\n    getLineFeedCnt(bufferIndex, start, end) {\n        // we don't need to worry about start: abc\\r|\\n, or abc|\\r, or abc|\\n, or abc|\\r\\n doesn't change the fact that, there is one line break after start.\n        // now let's take care of end: abc\\r|\\n, if end is in between \\r and \\n, we need to add line feed count by 1\n        if (end.column === 0) {\n            return end.line - start.line;\n        }\n        let lineStarts = this._buffers[bufferIndex].lineStarts;\n        if (end.line === lineStarts.length - 1) { // it means, there is no \\n after end, otherwise, there will be one more lineStart.\n            return end.line - start.line;\n        }\n        let nextLineStartOffset = lineStarts[end.line + 1];\n        let endOffset = lineStarts[end.line] + end.column;\n        if (nextLineStartOffset > endOffset + 1) { // there are more than 1 character after end, which means it can't be \\n\n            return end.line - start.line;\n        }\n        // endOffset + 1 === nextLineStartOffset\n        // character at endOffset is \\n, so we check the character before first\n        // if character at endOffset is \\r, end.column is 0 and we can't get here.\n        let previousCharOffset = endOffset - 1; // end.column > 0 so it's okay.\n        let buffer = this._buffers[bufferIndex].buffer;\n        if (buffer.charCodeAt(previousCharOffset) === 13) {\n            return end.line - start.line + 1;\n        }\n        else {\n            return end.line - start.line;\n        }\n    }\n    offsetInBuffer(bufferIndex, cursor) {\n        let lineStarts = this._buffers[bufferIndex].lineStarts;\n        return lineStarts[cursor.line] + cursor.column;\n    }\n    deleteNodes(nodes) {\n        for (let i = 0; i < nodes.length; i++) {\n            rbTreeBase_1.rbDelete(this, nodes[i]);\n        }\n    }\n    createNewPieces(text) {\n        if (text.length > exports.AverageBufferSize) {\n            // the content is large, operations like substring, charCode becomes slow\n            // so here we split it into smaller chunks, just like what we did for CR/LF normalization\n            let newPieces = [];\n            while (text.length > exports.AverageBufferSize) {\n                const lastChar = text.charCodeAt(exports.AverageBufferSize - 1);\n                let splitText;\n                if (lastChar === 13 /* CarriageReturn */ || (lastChar >= 0xD800 && lastChar <= 0xDBFF)) {\n                    // last character is \\r or a high surrogate => keep it back\n                    splitText = text.substring(0, exports.AverageBufferSize - 1);\n                    text = text.substring(exports.AverageBufferSize - 1);\n                }\n                else {\n                    splitText = text.substring(0, exports.AverageBufferSize);\n                    text = text.substring(exports.AverageBufferSize);\n                }\n                let lineStarts = createLineStartsFast(splitText);\n                newPieces.push(new Piece(this._buffers.length, /* buffer index */ { line: 0, column: 0 }, { line: lineStarts.length - 1, column: splitText.length - lineStarts[lineStarts.length - 1] }, lineStarts.length - 1, splitText.length));\n                this._buffers.push(new StringBuffer(splitText, lineStarts));\n            }\n            let lineStarts = createLineStartsFast(text);\n            newPieces.push(new Piece(this._buffers.length, /* buffer index */ { line: 0, column: 0 }, { line: lineStarts.length - 1, column: text.length - lineStarts[lineStarts.length - 1] }, lineStarts.length - 1, text.length));\n            this._buffers.push(new StringBuffer(text, lineStarts));\n            return newPieces;\n        }\n        let startOffset = this._buffers[0].buffer.length;\n        const lineStarts = createLineStartsFast(text, false);\n        let start = this._lastChangeBufferPos;\n        if (this._buffers[0].lineStarts[this._buffers[0].lineStarts.length - 1] === startOffset\n            && startOffset !== 0\n            && this.startWithLF(text)\n            && this.endWithCR(this._buffers[0].buffer) // todo, we can check this._lastChangeBufferPos's column as it's the last one\n        ) {\n            this._lastChangeBufferPos = { line: this._lastChangeBufferPos.line, column: this._lastChangeBufferPos.column + 1 };\n            start = this._lastChangeBufferPos;\n            for (let i = 0; i < lineStarts.length; i++) {\n                lineStarts[i] += startOffset + 1;\n            }\n            this._buffers[0].lineStarts = this._buffers[0].lineStarts.concat(lineStarts.slice(1));\n            this._buffers[0].buffer += '_' + text;\n            startOffset += 1;\n        }\n        else {\n            if (startOffset !== 0) {\n                for (let i = 0; i < lineStarts.length; i++) {\n                    lineStarts[i] += startOffset;\n                }\n            }\n            this._buffers[0].lineStarts = this._buffers[0].lineStarts.concat(lineStarts.slice(1));\n            this._buffers[0].buffer += text;\n        }\n        const endOffset = this._buffers[0].buffer.length;\n        let endIndex = this._buffers[0].lineStarts.length - 1;\n        let endColumn = endOffset - this._buffers[0].lineStarts[endIndex];\n        let endPos = { line: endIndex, column: endColumn };\n        let newPiece = new Piece(0, /** todo@peng */ start, endPos, this.getLineFeedCnt(0, start, endPos), endOffset - startOffset);\n        this._lastChangeBufferPos = endPos;\n        return [newPiece];\n    }\n    getLinesRawContent() {\n        return this.getContentOfSubTree(this.root);\n    }\n    getLineRawContent(lineNumber, endOffset = 0) {\n        let x = this.root;\n        let ret = '';\n        let cache = this._searchCache.get2(lineNumber);\n        if (cache) {\n            x = cache.node;\n            let prevAccumualtedValue = this.getAccumulatedValue(x, lineNumber - cache.nodeStartLineNumber - 1);\n            let buffer = this._buffers[x.piece.bufferIndex].buffer;\n            let startOffset = this.offsetInBuffer(x.piece.bufferIndex, x.piece.start);\n            if (cache.nodeStartLineNumber + x.piece.lineFeedCnt === lineNumber) {\n                ret = buffer.substring(startOffset + prevAccumualtedValue, startOffset + x.piece.length);\n            }\n            else {\n                let accumualtedValue = this.getAccumulatedValue(x, lineNumber - cache.nodeStartLineNumber);\n                return buffer.substring(startOffset + prevAccumualtedValue, startOffset + accumualtedValue - endOffset);\n            }\n        }\n        else {\n            let nodeStartOffset = 0;\n            const originalLineNumber = lineNumber;\n            while (x !== rbTreeBase_1.SENTINEL) {\n                if (x.left !== rbTreeBase_1.SENTINEL && x.lf_left >= lineNumber - 1) {\n                    x = x.left;\n                }\n                else if (x.lf_left + x.piece.lineFeedCnt > lineNumber - 1) {\n                    let prevAccumualtedValue = this.getAccumulatedValue(x, lineNumber - x.lf_left - 2);\n                    let accumualtedValue = this.getAccumulatedValue(x, lineNumber - x.lf_left - 1);\n                    let buffer = this._buffers[x.piece.bufferIndex].buffer;\n                    let startOffset = this.offsetInBuffer(x.piece.bufferIndex, x.piece.start);\n                    nodeStartOffset += x.size_left;\n                    this._searchCache.set({\n                        node: x,\n                        nodeStartOffset,\n                        nodeStartLineNumber: originalLineNumber - (lineNumber - 1 - x.lf_left)\n                    });\n                    return buffer.substring(startOffset + prevAccumualtedValue, startOffset + accumualtedValue - endOffset);\n                }\n                else if (x.lf_left + x.piece.lineFeedCnt === lineNumber - 1) {\n                    let prevAccumualtedValue = this.getAccumulatedValue(x, lineNumber - x.lf_left - 2);\n                    let buffer = this._buffers[x.piece.bufferIndex].buffer;\n                    let startOffset = this.offsetInBuffer(x.piece.bufferIndex, x.piece.start);\n                    ret = buffer.substring(startOffset + prevAccumualtedValue, startOffset + x.piece.length);\n                    break;\n                }\n                else {\n                    lineNumber -= x.lf_left + x.piece.lineFeedCnt;\n                    nodeStartOffset += x.size_left + x.piece.length;\n                    x = x.right;\n                }\n            }\n        }\n        // search in order, to find the node contains end column\n        x = x.next();\n        while (x !== rbTreeBase_1.SENTINEL) {\n            let buffer = this._buffers[x.piece.bufferIndex].buffer;\n            if (x.piece.lineFeedCnt > 0) {\n                let accumualtedValue = this.getAccumulatedValue(x, 0);\n                let startOffset = this.offsetInBuffer(x.piece.bufferIndex, x.piece.start);\n                ret += buffer.substring(startOffset, startOffset + accumualtedValue - endOffset);\n                return ret;\n            }\n            else {\n                let startOffset = this.offsetInBuffer(x.piece.bufferIndex, x.piece.start);\n                ret += buffer.substr(startOffset, x.piece.length);\n            }\n            x = x.next();\n        }\n        return ret;\n    }\n    computeBufferMetadata() {\n        let x = this.root;\n        let lfCnt = 1;\n        let len = 0;\n        while (x !== rbTreeBase_1.SENTINEL) {\n            lfCnt += x.lf_left + x.piece.lineFeedCnt;\n            len += x.size_left + x.piece.length;\n            x = x.right;\n        }\n        this._lineCnt = lfCnt;\n        this._length = len;\n        this._searchCache.valdiate(this._length);\n    }\n    // #region node operations\n    getIndexOf(node, accumulatedValue) {\n        let piece = node.piece;\n        let pos = this.positionInBuffer(node, accumulatedValue);\n        let lineCnt = pos.line - piece.start.line;\n        if (this.offsetInBuffer(piece.bufferIndex, piece.end) - this.offsetInBuffer(piece.bufferIndex, piece.start) === accumulatedValue) {\n            // we are checking the end of this node, so a CRLF check is necessary.\n            let realLineCnt = this.getLineFeedCnt(node.piece.bufferIndex, piece.start, pos);\n            if (realLineCnt !== lineCnt) {\n                // aha yes, CRLF\n                return { index: realLineCnt, remainder: 0 };\n            }\n        }\n        return { index: lineCnt, remainder: pos.column };\n    }\n    getAccumulatedValue(node, index) {\n        if (index < 0) {\n            return 0;\n        }\n        let piece = node.piece;\n        let lineStarts = this._buffers[piece.bufferIndex].lineStarts;\n        let expectedLineStartIndex = piece.start.line + index + 1;\n        if (expectedLineStartIndex > piece.end.line) {\n            return lineStarts[piece.end.line] + piece.end.column - lineStarts[piece.start.line] - piece.start.column;\n        }\n        else {\n            return lineStarts[expectedLineStartIndex] - lineStarts[piece.start.line] - piece.start.column;\n        }\n    }\n    deleteNodeTail(node, pos) {\n        const piece = node.piece;\n        const originalLFCnt = piece.lineFeedCnt;\n        const originalEndOffset = this.offsetInBuffer(piece.bufferIndex, piece.end);\n        const newEnd = pos;\n        const newEndOffset = this.offsetInBuffer(piece.bufferIndex, newEnd);\n        const newLineFeedCnt = this.getLineFeedCnt(piece.bufferIndex, piece.start, newEnd);\n        const lf_delta = newLineFeedCnt - originalLFCnt;\n        const size_delta = newEndOffset - originalEndOffset;\n        const newLength = piece.length + size_delta;\n        node.piece = new Piece(piece.bufferIndex, piece.start, newEnd, newLineFeedCnt, newLength);\n        rbTreeBase_1.updateTreeMetadata(this, node, size_delta, lf_delta);\n    }\n    deleteNodeHead(node, pos) {\n        const piece = node.piece;\n        const originalLFCnt = piece.lineFeedCnt;\n        const originalStartOffset = this.offsetInBuffer(piece.bufferIndex, piece.start);\n        const newStart = pos;\n        const newLineFeedCnt = this.getLineFeedCnt(piece.bufferIndex, newStart, piece.end);\n        const newStartOffset = this.offsetInBuffer(piece.bufferIndex, newStart);\n        const lf_delta = newLineFeedCnt - originalLFCnt;\n        const size_delta = originalStartOffset - newStartOffset;\n        const newLength = piece.length + size_delta;\n        node.piece = new Piece(piece.bufferIndex, newStart, piece.end, newLineFeedCnt, newLength);\n        rbTreeBase_1.updateTreeMetadata(this, node, size_delta, lf_delta);\n    }\n    shrinkNode(node, start, end) {\n        const piece = node.piece;\n        const originalStartPos = piece.start;\n        const originalEndPos = piece.end;\n        // old piece, originalStartPos, start\n        const oldLength = piece.length;\n        const oldLFCnt = piece.lineFeedCnt;\n        const newEnd = start;\n        const newLineFeedCnt = this.getLineFeedCnt(piece.bufferIndex, piece.start, newEnd);\n        const newLength = this.offsetInBuffer(piece.bufferIndex, start) - this.offsetInBuffer(piece.bufferIndex, originalStartPos);\n        node.piece = new Piece(piece.bufferIndex, piece.start, newEnd, newLineFeedCnt, newLength);\n        rbTreeBase_1.updateTreeMetadata(this, node, newLength - oldLength, newLineFeedCnt - oldLFCnt);\n        // new right piece, end, originalEndPos\n        let newPiece = new Piece(piece.bufferIndex, end, originalEndPos, this.getLineFeedCnt(piece.bufferIndex, end, originalEndPos), this.offsetInBuffer(piece.bufferIndex, originalEndPos) - this.offsetInBuffer(piece.bufferIndex, end));\n        let newNode = this.rbInsertRight(node, newPiece);\n        this.validateCRLFWithPrevNode(newNode);\n    }\n    appendToNode(node, value) {\n        if (this.adjustCarriageReturnFromNext(value, node)) {\n            value += '\\n';\n        }\n        const hitCRLF = this.shouldCheckCRLF() && this.startWithLF(value) && this.endWithCR(node);\n        const startOffset = this._buffers[0].buffer.length;\n        this._buffers[0].buffer += value;\n        const lineStarts = createLineStartsFast(value, false);\n        for (let i = 0; i < lineStarts.length; i++) {\n            lineStarts[i] += startOffset;\n        }\n        if (hitCRLF) {\n            let prevStartOffset = this._buffers[0].lineStarts[this._buffers[0].lineStarts.length - 2];\n            this._buffers[0].lineStarts.pop();\n            // _lastChangeBufferPos is already wrong\n            this._lastChangeBufferPos = { line: this._lastChangeBufferPos.line - 1, column: startOffset - prevStartOffset };\n        }\n        this._buffers[0].lineStarts = this._buffers[0].lineStarts.concat(lineStarts.slice(1));\n        const endIndex = this._buffers[0].lineStarts.length - 1;\n        const endColumn = this._buffers[0].buffer.length - this._buffers[0].lineStarts[endIndex];\n        const newEnd = { line: endIndex, column: endColumn };\n        const newLength = node.piece.length + value.length;\n        const oldLineFeedCnt = node.piece.lineFeedCnt;\n        const newLineFeedCnt = this.getLineFeedCnt(0, node.piece.start, newEnd);\n        const lf_delta = newLineFeedCnt - oldLineFeedCnt;\n        node.piece = new Piece(node.piece.bufferIndex, node.piece.start, newEnd, newLineFeedCnt, newLength);\n        this._lastChangeBufferPos = newEnd;\n        rbTreeBase_1.updateTreeMetadata(this, node, value.length, lf_delta);\n    }\n    nodeAt(offset) {\n        let x = this.root;\n        let cache = this._searchCache.get(offset);\n        if (cache) {\n            return {\n                node: cache.node,\n                nodeStartOffset: cache.nodeStartOffset,\n                remainder: offset - cache.nodeStartOffset\n            };\n        }\n        let nodeStartOffset = 0;\n        while (x !== rbTreeBase_1.SENTINEL) {\n            if (x.size_left > offset) {\n                x = x.left;\n            }\n            else if (x.size_left + x.piece.length >= offset) {\n                nodeStartOffset += x.size_left;\n                let ret = {\n                    node: x,\n                    remainder: offset - x.size_left,\n                    nodeStartOffset\n                };\n                this._searchCache.set(ret);\n                return ret;\n            }\n            else {\n                offset -= x.size_left + x.piece.length;\n                nodeStartOffset += x.size_left + x.piece.length;\n                x = x.right;\n            }\n        }\n        return null;\n    }\n    nodeAt2(lineNumber, column) {\n        let x = this.root;\n        let nodeStartOffset = 0;\n        while (x !== rbTreeBase_1.SENTINEL) {\n            if (x.left !== rbTreeBase_1.SENTINEL && x.lf_left >= lineNumber - 1) {\n                x = x.left;\n            }\n            else if (x.lf_left + x.piece.lineFeedCnt > lineNumber - 1) {\n                let prevAccumualtedValue = this.getAccumulatedValue(x, lineNumber - x.lf_left - 2);\n                let accumualtedValue = this.getAccumulatedValue(x, lineNumber - x.lf_left - 1);\n                nodeStartOffset += x.size_left;\n                return {\n                    node: x,\n                    remainder: Math.min(prevAccumualtedValue + column - 1, accumualtedValue),\n                    nodeStartOffset\n                };\n            }\n            else if (x.lf_left + x.piece.lineFeedCnt === lineNumber - 1) {\n                let prevAccumualtedValue = this.getAccumulatedValue(x, lineNumber - x.lf_left - 2);\n                if (prevAccumualtedValue + column - 1 <= x.piece.length) {\n                    return {\n                        node: x,\n                        remainder: prevAccumualtedValue + column - 1,\n                        nodeStartOffset\n                    };\n                }\n                else {\n                    column -= x.piece.length - prevAccumualtedValue;\n                    break;\n                }\n            }\n            else {\n                lineNumber -= x.lf_left + x.piece.lineFeedCnt;\n                nodeStartOffset += x.size_left + x.piece.length;\n                x = x.right;\n            }\n        }\n        // search in order, to find the node contains position.column\n        x = x.next();\n        while (x !== rbTreeBase_1.SENTINEL) {\n            if (x.piece.lineFeedCnt > 0) {\n                let accumualtedValue = this.getAccumulatedValue(x, 0);\n                let nodeStartOffset = this.offsetOfNode(x);\n                return {\n                    node: x,\n                    remainder: Math.min(column - 1, accumualtedValue),\n                    nodeStartOffset\n                };\n            }\n            else {\n                if (x.piece.length >= column - 1) {\n                    let nodeStartOffset = this.offsetOfNode(x);\n                    return {\n                        node: x,\n                        remainder: column - 1,\n                        nodeStartOffset\n                    };\n                }\n                else {\n                    column -= x.piece.length;\n                }\n            }\n            x = x.next();\n        }\n        return null;\n    }\n    nodeCharCodeAt(node, offset) {\n        if (node.piece.lineFeedCnt < 1) {\n            return -1;\n        }\n        let buffer = this._buffers[node.piece.bufferIndex];\n        let newOffset = this.offsetInBuffer(node.piece.bufferIndex, node.piece.start) + offset;\n        return buffer.buffer.charCodeAt(newOffset);\n    }\n    offsetOfNode(node) {\n        if (!node) {\n            return 0;\n        }\n        let pos = node.size_left;\n        while (node !== this.root) {\n            if (node.parent.right === node) {\n                pos += node.parent.size_left + node.parent.piece.length;\n            }\n            node = node.parent;\n        }\n        return pos;\n    }\n    // #endregion\n    // #region CRLF\n    shouldCheckCRLF() {\n        return !(this._EOLNormalized && this._EOL === '\\n');\n    }\n    startWithLF(val) {\n        if (typeof val === 'string') {\n            return val.charCodeAt(0) === 10;\n        }\n        if (val === rbTreeBase_1.SENTINEL || val.piece.lineFeedCnt === 0) {\n            return false;\n        }\n        let piece = val.piece;\n        let lineStarts = this._buffers[piece.bufferIndex].lineStarts;\n        let line = piece.start.line;\n        let startOffset = lineStarts[line] + piece.start.column;\n        if (line === lineStarts.length - 1) {\n            // last line, so there is no line feed at the end of this line\n            return false;\n        }\n        let nextLineOffset = lineStarts[line + 1];\n        if (nextLineOffset > startOffset + 1) {\n            return false;\n        }\n        return this._buffers[piece.bufferIndex].buffer.charCodeAt(startOffset) === 10;\n    }\n    endWithCR(val) {\n        if (typeof val === 'string') {\n            return val.charCodeAt(val.length - 1) === 13;\n        }\n        if (val === rbTreeBase_1.SENTINEL || val.piece.lineFeedCnt === 0) {\n            return false;\n        }\n        return this.nodeCharCodeAt(val, val.piece.length - 1) === 13;\n    }\n    validateCRLFWithPrevNode(nextNode) {\n        if (this.shouldCheckCRLF() && this.startWithLF(nextNode)) {\n            let node = nextNode.prev();\n            if (this.endWithCR(node)) {\n                this.fixCRLF(node, nextNode);\n            }\n        }\n    }\n    validateCRLFWithNextNode(node) {\n        if (this.shouldCheckCRLF() && this.endWithCR(node)) {\n            let nextNode = node.next();\n            if (this.startWithLF(nextNode)) {\n                this.fixCRLF(node, nextNode);\n            }\n        }\n    }\n    fixCRLF(prev, next) {\n        let nodesToDel = [];\n        // update node\n        let lineStarts = this._buffers[prev.piece.bufferIndex].lineStarts;\n        let newEnd;\n        if (prev.piece.end.column === 0) {\n            // it means, last line ends with \\r, not \\r\\n\n            newEnd = { line: prev.piece.end.line - 1, column: lineStarts[prev.piece.end.line] - lineStarts[prev.piece.end.line - 1] - 1 };\n        }\n        else {\n            // \\r\\n\n            newEnd = { line: prev.piece.end.line, column: prev.piece.end.column - 1 };\n        }\n        const prevNewLength = prev.piece.length - 1;\n        const prevNewLFCnt = prev.piece.lineFeedCnt - 1;\n        prev.piece = new Piece(prev.piece.bufferIndex, prev.piece.start, newEnd, prevNewLFCnt, prevNewLength);\n        rbTreeBase_1.updateTreeMetadata(this, prev, -1, -1);\n        if (prev.piece.length === 0) {\n            nodesToDel.push(prev);\n        }\n        // update nextNode\n        let newStart = { line: next.piece.start.line + 1, column: 0 };\n        const newLength = next.piece.length - 1;\n        const newLineFeedCnt = this.getLineFeedCnt(next.piece.bufferIndex, newStart, next.piece.end);\n        next.piece = new Piece(next.piece.bufferIndex, newStart, next.piece.end, newLineFeedCnt, newLength);\n        rbTreeBase_1.updateTreeMetadata(this, next, -1, -1);\n        if (next.piece.length === 0) {\n            nodesToDel.push(next);\n        }\n        // create new piece which contains \\r\\n\n        let pieces = this.createNewPieces('\\r\\n');\n        this.rbInsertRight(prev, pieces[0]);\n        // delete empty nodes\n        for (let i = 0; i < nodesToDel.length; i++) {\n            rbTreeBase_1.rbDelete(this, nodesToDel[i]);\n        }\n    }\n    adjustCarriageReturnFromNext(value, node) {\n        if (this.shouldCheckCRLF() && this.endWithCR(value)) {\n            let nextNode = node.next();\n            if (this.startWithLF(nextNode)) {\n                // move `\\n` forward\n                value += '\\n';\n                if (nextNode.piece.length === 1) {\n                    rbTreeBase_1.rbDelete(this, nextNode);\n                }\n                else {\n                    const piece = nextNode.piece;\n                    const newStart = { line: piece.start.line + 1, column: 0 };\n                    const newLength = piece.length - 1;\n                    const newLineFeedCnt = this.getLineFeedCnt(piece.bufferIndex, newStart, piece.end);\n                    nextNode.piece = new Piece(piece.bufferIndex, newStart, piece.end, newLineFeedCnt, newLength);\n                    rbTreeBase_1.updateTreeMetadata(this, nextNode, -1, -1);\n                }\n                return true;\n            }\n        }\n        return false;\n    }\n    // #endregion\n    // #endregion\n    // #region Tree operations\n    iterate(node, callback) {\n        if (node === rbTreeBase_1.SENTINEL) {\n            return callback(rbTreeBase_1.SENTINEL);\n        }\n        let leftRet = this.iterate(node.left, callback);\n        if (!leftRet) {\n            return leftRet;\n        }\n        return callback(node) && this.iterate(node.right, callback);\n    }\n    getNodeContent(node) {\n        if (node === rbTreeBase_1.SENTINEL) {\n            return '';\n        }\n        let buffer = this._buffers[node.piece.bufferIndex];\n        let currentContent;\n        let piece = node.piece;\n        let startOffset = this.offsetInBuffer(piece.bufferIndex, piece.start);\n        let endOffset = this.offsetInBuffer(piece.bufferIndex, piece.end);\n        currentContent = buffer.buffer.substring(startOffset, endOffset);\n        return currentContent;\n    }\n    getPieceContent(piece) {\n        let buffer = this._buffers[piece.bufferIndex];\n        let startOffset = this.offsetInBuffer(piece.bufferIndex, piece.start);\n        let endOffset = this.offsetInBuffer(piece.bufferIndex, piece.end);\n        let currentContent = buffer.buffer.substring(startOffset, endOffset);\n        return currentContent;\n    }\n    /**\n     *      node              node\n     *     /  \\              /  \\\n     *    a   b    <----   a    b\n     *                         /\n     *                        z\n     */\n    rbInsertRight(node, p) {\n        let z = new rbTreeBase_1.TreeNode(p, 1 /* Red */);\n        z.left = rbTreeBase_1.SENTINEL;\n        z.right = rbTreeBase_1.SENTINEL;\n        z.parent = rbTreeBase_1.SENTINEL;\n        z.size_left = 0;\n        z.lf_left = 0;\n        let x = this.root;\n        if (x === rbTreeBase_1.SENTINEL) {\n            this.root = z;\n            z.color = 0 /* Black */;\n        }\n        else if (node.right === rbTreeBase_1.SENTINEL) {\n            node.right = z;\n            z.parent = node;\n        }\n        else {\n            let nextNode = rbTreeBase_1.leftest(node.right);\n            nextNode.left = z;\n            z.parent = nextNode;\n        }\n        rbTreeBase_1.fixInsert(this, z);\n        return z;\n    }\n    /**\n     *      node              node\n     *     /  \\              /  \\\n     *    a   b     ---->   a    b\n     *                       \\\n     *                        z\n     */\n    rbInsertLeft(node, p) {\n        let z = new rbTreeBase_1.TreeNode(p, 1 /* Red */);\n        z.left = rbTreeBase_1.SENTINEL;\n        z.right = rbTreeBase_1.SENTINEL;\n        z.parent = rbTreeBase_1.SENTINEL;\n        z.size_left = 0;\n        z.lf_left = 0;\n        if (this.root === rbTreeBase_1.SENTINEL) {\n            this.root = z;\n            z.color = 0 /* Black */;\n        }\n        else if (node.left === rbTreeBase_1.SENTINEL) {\n            node.left = z;\n            z.parent = node;\n        }\n        else {\n            let prevNode = rbTreeBase_1.righttest(node.left); // a\n            prevNode.right = z;\n            z.parent = prevNode;\n        }\n        rbTreeBase_1.fixInsert(this, z);\n        return z;\n    }\n    getContentOfSubTree(node) {\n        let str = '';\n        this.iterate(node, node => {\n            str += this.getNodeContent(node);\n            return true;\n        });\n        return str;\n    }\n}\nexports.PieceTreeBase = PieceTreeBase;\n","\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * A position in the editor.\n */\nclass Position {\n    constructor(lineNumber, column) {\n        this.lineNumber = lineNumber;\n        this.column = column;\n    }\n    /**\n     * Create a new postion from this position.\n     *\n     * @param newLineNumber new line number\n     * @param newColumn new column\n     */\n    with(newLineNumber = this.lineNumber, newColumn = this.column) {\n        if (newLineNumber === this.lineNumber && newColumn === this.column) {\n            return this;\n        }\n        else {\n            return new Position(newLineNumber, newColumn);\n        }\n    }\n    /**\n     * Derive a new position from this position.\n     *\n     * @param deltaLineNumber line number delta\n     * @param deltaColumn column delta\n     */\n    delta(deltaLineNumber = 0, deltaColumn = 0) {\n        return this.with(this.lineNumber + deltaLineNumber, this.column + deltaColumn);\n    }\n    /**\n     * Test if this position equals other position\n     */\n    equals(other) {\n        return Position.equals(this, other);\n    }\n    /**\n     * Test if position `a` equals position `b`\n     */\n    static equals(a, b) {\n        if (!a && !b) {\n            return true;\n        }\n        return (!!a &&\n            !!b &&\n            a.lineNumber === b.lineNumber &&\n            a.column === b.column);\n    }\n    /**\n     * Test if this position is before other position.\n     * If the two positions are equal, the result will be false.\n     */\n    isBefore(other) {\n        return Position.isBefore(this, other);\n    }\n    /**\n     * Test if position `a` is before position `b`.\n     * If the two positions are equal, the result will be false.\n     */\n    static isBefore(a, b) {\n        if (a.lineNumber < b.lineNumber) {\n            return true;\n        }\n        if (b.lineNumber < a.lineNumber) {\n            return false;\n        }\n        return a.column < b.column;\n    }\n    /**\n     * Test if this position is before other position.\n     * If the two positions are equal, the result will be true.\n     */\n    isBeforeOrEqual(other) {\n        return Position.isBeforeOrEqual(this, other);\n    }\n    /**\n     * Test if position `a` is before position `b`.\n     * If the two positions are equal, the result will be true.\n     */\n    static isBeforeOrEqual(a, b) {\n        if (a.lineNumber < b.lineNumber) {\n            return true;\n        }\n        if (b.lineNumber < a.lineNumber) {\n            return false;\n        }\n        return a.column <= b.column;\n    }\n    /**\n     * A function that compares positions, useful for sorting\n     */\n    static compare(a, b) {\n        let aLineNumber = a.lineNumber | 0;\n        let bLineNumber = b.lineNumber | 0;\n        if (aLineNumber === bLineNumber) {\n            let aColumn = a.column | 0;\n            let bColumn = b.column | 0;\n            return aColumn - bColumn;\n        }\n        return aLineNumber - bLineNumber;\n    }\n    /**\n     * Clone this position.\n     */\n    clone() {\n        return new Position(this.lineNumber, this.column);\n    }\n    /**\n     * Convert to a human-readable representation.\n     */\n    toString() {\n        return '(' + this.lineNumber + ',' + this.column + ')';\n    }\n    // ---\n    /**\n     * Create a `Position` from an `IPosition`.\n     */\n    static lift(pos) {\n        return new Position(pos.lineNumber, pos.column);\n    }\n    /**\n     * Test if `obj` is an `IPosition`.\n     */\n    static isIPosition(obj) {\n        return (obj\n            && (typeof obj.lineNumber === 'number')\n            && (typeof obj.column === 'number'));\n    }\n}\nexports.Position = Position;\n","module.exports = require(\"os\");","module.exports = require(\"crypto\");","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.MetricsConfiguration = {\n    MetricsForClassDeclarationsToggled: true,\n    MetricsForConstructorsToggled: true,\n    MetricsForEnumDeclarationsToggled: true,\n    MetricsForFunctionDeclarationsToggled: true,\n    MetricsForFunctionExpressionsToggled: true,\n    MetricsForMethodDeclarationsToggled: true,\n    MetricsForArrowFunctionsToggled: true,\n    ComplexityLevelExtreme: 25,\n    ComplexityLevelHigh: 10,\n    ComplexityLevelNormal: 5,\n    ComplexityLevelLow: 0,\n    CodeLensHiddenUnder: 3,\n    ComplexityLevelExtremeDescription: \"Bloody hell...\",\n    ComplexityLevelHighDescription: \"You must be kidding\",\n    ComplexityLevelNormalDescription: \"It's time to do something...\",\n    ComplexityLevelLowDescription: \"Everything is cool!\",\n    ComplexityTemplate: \"Complexity is {0} {1}\",\n    AnyKeyword: 1,\n    AnyKeywordDescription: \"Any keyword\",\n    ArrayBindingPattern: 0,\n    ArrayBindingPatternDescription: \"Array binding pattern\",\n    ArrayLiteralExpression: 0,\n    ArrayLiteralExpressionDescription: \"Array literal expression\",\n    ArrowFunction: 1,\n    ArrowFunctionDescription: \"Arrow function\",\n    BinaryExpression: 1,\n    BinaryExpressionDescription: \"Binary expression\",\n    BindingElement: 0,\n    BindingElementDescription: \"Binding element\",\n    Block: 0,\n    BlockDescription: \"Block\",\n    BreakStatement: 1,\n    BreakStatementDescription: \"Break statement\",\n    CallExpression: 0,\n    CallExpressionDescription: \"Call expression\",\n    CallSignature: 0,\n    CallSignatureDescription: \"Call signature\",\n    CaseClause: 1,\n    CaseClauseDescription: \"Case clause\",\n    ClassDeclaration: 0,\n    ClassDeclarationDescription: \"Class declaration\",\n    CatchClause: 1,\n    CatchClauseDescription: \"Catch clause\",\n    ConditionalExpression: 1,\n    ConditionalExpressionDescription: \"Conditional expression\",\n    Constructor: 1,\n    ConstructorDescription: \"Constructor\",\n    ConstructorType: 0,\n    ConstructorTypeDescription: \"Constructor type\",\n    ContinueStatement: 1,\n    ContinueStatementDescription: \"Continue statement\",\n    DebuggerStatement: 0,\n    DebuggerStatementDescription: \"Debugger statement\",\n    DefaultClause: 1,\n    DefaultClauseDescription: \"Default case\",\n    DoStatement: 1,\n    DoStatementDescription: \"Do statement\",\n    ElementAccessExpression: 0,\n    ElementAccessExpressionDescription: \"Element access expression\",\n    EnumDeclaration: 1,\n    EnumDeclarationDescription: \"Enum declaration\",\n    ExportAssignment: 1,\n    ExportAssignmentDescription: \"Export assignment\",\n    ExpressionStatement: 0,\n    ExpressionStatementDescription: \"Expression statement\",\n    ForStatement: 1,\n    ForStatementDescription: \"For statement\",\n    ForInStatement: 1,\n    ForInStatementDescription: \"For in statement\",\n    ForOfStatement: 1,\n    ForOfStatementDescription: \"For of statement\",\n    FunctionDeclaration: 1,\n    FunctionDeclarationDescription: \"Function declaration\",\n    FunctionExpression: 1,\n    FunctionExpressionDescription: \"Function expression\",\n    FunctionType: 1,\n    FunctionTypeDescription: \"Function type\",\n    GetAccessor: 0,\n    GetAccessorDescription: \"Get accessor\",\n    Identifier: 0,\n    IdentifierDescription: \"Identifier\",\n    IfWithElseStatement: 2,\n    IfWithElseStatementDescription: \"If with else statement\",\n    IfStatement: 1,\n    IfStatementDescription: \"If statement\",\n    ImportDeclaration: 0,\n    ImportDeclarationDescription: \"Import declaration\",\n    ImportEqualsDeclaration: 0,\n    ImportEqualsDeclarationDescription: \"Import equals declaration\",\n    IndexSignature: 0,\n    IndexSignatureDescription: \"Index signature\",\n    InterfaceDeclaration: 0,\n    InterfaceDeclarationDescription: \"Interface declaration\",\n    JsxElement: 1,\n    JsxElementDescription: \"Jsx element\",\n    JsxSelfClosingElement: 1,\n    JsxSelfClosingElementDescription: \"Jsx self closingElement\",\n    LabeledStatement: 1,\n    LabeledStatementDescription: \"Labeled statement\",\n    MethodDeclaration: 1,\n    MethodDeclarationDescription: \"Method declaration\",\n    MethodSignature: 0,\n    MethodSignatureDescription: \"Method signature\",\n    ModuleDeclaration: 0,\n    ModuleDeclarationDescription: \"Module declaration\",\n    NamedImports: 0,\n    NamedImportsDescription: \"Named imports\",\n    NamespaceImport: 0,\n    NamespaceImportDescription: \"Namespace import\",\n    NewExpression: 0,\n    NewExpressionDescription: \"New expression\",\n    ObjectBindingPattern: 0,\n    ObjectBindingPatternDescription: \"\",\n    ObjectLiteralExpression: 0,\n    ObjectLiteralExpressionDescription: \"Object literal expression\",\n    Parameter: 0,\n    ParameterDescription: \"Parameter\",\n    PostfixUnaryExpression: 0,\n    PostfixUnaryExpressionDescription: \"Postfix unary expression\",\n    PrefixUnaryExpression: 0,\n    PrefixUnaryExpressionDescription: \"Prefix unary expression\",\n    PropertyAccessExpression: 0,\n    PropertyAccessExpressionDescription: \"Property access expression\",\n    PropertyAssignment: 0,\n    PropertyAssignmentDescription: \"Property assignment\",\n    PropertyDeclaration: 0,\n    PropertyDeclarationDescription: \"Property declaration\",\n    PropertySignature: 0,\n    PropertySignatureDescription: \"Property signature\",\n    RegularExpressionLiteral: 0,\n    RegularExpressionLiteralDescription: \"Regular expression literal\",\n    ReturnStatement: 1,\n    ReturnStatementDescription: \"Return statement\",\n    SetAccessor: 0,\n    SetAccessorDescription: \"Set accessor\",\n    SourceFile: 0,\n    SourceFileDescription: \"Source file\",\n    StringLiteral: 0,\n    StringLiteralDescription: \"String literal\",\n    SwitchStatement: 1,\n    SwitchStatementDescription: \"Switch statement\",\n    TemplateExpression: 0,\n    TemplateExpressionDescription: \"Template expression\",\n    ThrowStatement: 1,\n    ThrowStatementDescription: \"Throw statement\",\n    TryStatement: 1,\n    TryStatementDescription: \"Try statement\",\n    TypeAssertionExpression: 0,\n    TypeAssertionExpressionDescription: \"Type assertion expression\",\n    TypeLiteral: 0,\n    TypeLiteralDescription: \"Type literal\",\n    TypeReference: 0,\n    TypeReferenceDescription: \"Type reference\",\n    VariableDeclaration: 0,\n    VariableDeclarationDescription: \"Variable declaration\",\n    VariableStatement: 0,\n    VariableStatementDescription: \"Variable statement\",\n    WhileStatement: 1,\n    WhileStatementDescription: \"While statement\",\n    WithStatement: 1,\n    WithStatementDescription: \"With statement\"\n};\n//# sourceMappingURL=MetricsConfiguration.js.map","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst is = require(\"./is\");\r\n/**\r\n * Predefined error codes.\r\n */\r\nvar ErrorCodes;\r\n(function (ErrorCodes) {\r\n    // Defined by JSON RPC\r\n    ErrorCodes.ParseError = -32700;\r\n    ErrorCodes.InvalidRequest = -32600;\r\n    ErrorCodes.MethodNotFound = -32601;\r\n    ErrorCodes.InvalidParams = -32602;\r\n    ErrorCodes.InternalError = -32603;\r\n    ErrorCodes.serverErrorStart = -32099;\r\n    ErrorCodes.serverErrorEnd = -32000;\r\n    ErrorCodes.ServerNotInitialized = -32002;\r\n    ErrorCodes.UnknownErrorCode = -32001;\r\n    // Defined by the protocol.\r\n    ErrorCodes.RequestCancelled = -32800;\r\n    ErrorCodes.ContentModified = -32801;\r\n    // Defined by VSCode library.\r\n    ErrorCodes.MessageWriteError = 1;\r\n    ErrorCodes.MessageReadError = 2;\r\n})(ErrorCodes = exports.ErrorCodes || (exports.ErrorCodes = {}));\r\n/**\r\n * An error object return in a response in case a request\r\n * has failed.\r\n */\r\nclass ResponseError extends Error {\r\n    constructor(code, message, data) {\r\n        super(message);\r\n        this.code = is.number(code) ? code : ErrorCodes.UnknownErrorCode;\r\n        this.data = data;\r\n        Object.setPrototypeOf(this, ResponseError.prototype);\r\n    }\r\n    toJson() {\r\n        return {\r\n            code: this.code,\r\n            message: this.message,\r\n            data: this.data,\r\n        };\r\n    }\r\n}\r\nexports.ResponseError = ResponseError;\r\n/**\r\n * An abstract implementation of a MessageType.\r\n */\r\nclass AbstractMessageType {\r\n    constructor(_method, _numberOfParams) {\r\n        this._method = _method;\r\n        this._numberOfParams = _numberOfParams;\r\n    }\r\n    get method() {\r\n        return this._method;\r\n    }\r\n    get numberOfParams() {\r\n        return this._numberOfParams;\r\n    }\r\n}\r\nexports.AbstractMessageType = AbstractMessageType;\r\n/**\r\n * Classes to type request response pairs\r\n */\r\nclass RequestType0 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 0);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.RequestType0 = RequestType0;\r\nclass RequestType extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 1);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.RequestType = RequestType;\r\nclass RequestType1 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 1);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.RequestType1 = RequestType1;\r\nclass RequestType2 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 2);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.RequestType2 = RequestType2;\r\nclass RequestType3 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 3);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.RequestType3 = RequestType3;\r\nclass RequestType4 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 4);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.RequestType4 = RequestType4;\r\nclass RequestType5 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 5);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.RequestType5 = RequestType5;\r\nclass RequestType6 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 6);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.RequestType6 = RequestType6;\r\nclass RequestType7 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 7);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.RequestType7 = RequestType7;\r\nclass RequestType8 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 8);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.RequestType8 = RequestType8;\r\nclass RequestType9 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 9);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.RequestType9 = RequestType9;\r\nclass NotificationType extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 1);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.NotificationType = NotificationType;\r\nclass NotificationType0 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 0);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.NotificationType0 = NotificationType0;\r\nclass NotificationType1 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 1);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.NotificationType1 = NotificationType1;\r\nclass NotificationType2 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 2);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.NotificationType2 = NotificationType2;\r\nclass NotificationType3 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 3);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.NotificationType3 = NotificationType3;\r\nclass NotificationType4 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 4);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.NotificationType4 = NotificationType4;\r\nclass NotificationType5 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 5);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.NotificationType5 = NotificationType5;\r\nclass NotificationType6 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 6);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.NotificationType6 = NotificationType6;\r\nclass NotificationType7 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 7);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.NotificationType7 = NotificationType7;\r\nclass NotificationType8 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 8);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.NotificationType8 = NotificationType8;\r\nclass NotificationType9 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 9);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.NotificationType9 = NotificationType9;\r\n/**\r\n * Tests if the given message is a request message\r\n */\r\nfunction isRequestMessage(message) {\r\n    let candidate = message;\r\n    return candidate && is.string(candidate.method) && (is.string(candidate.id) || is.number(candidate.id));\r\n}\r\nexports.isRequestMessage = isRequestMessage;\r\n/**\r\n * Tests if the given message is a notification message\r\n */\r\nfunction isNotificationMessage(message) {\r\n    let candidate = message;\r\n    return candidate && is.string(candidate.method) && message.id === void 0;\r\n}\r\nexports.isNotificationMessage = isNotificationMessage;\r\n/**\r\n * Tests if the given message is a response message\r\n */\r\nfunction isResponseMessage(message) {\r\n    let candidate = message;\r\n    return candidate && (candidate.result !== void 0 || !!candidate.error) && (is.string(candidate.id) || is.number(candidate.id) || candidate.id === null);\r\n}\r\nexports.isResponseMessage = isResponseMessage;\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst events_1 = require(\"./events\");\r\nconst Is = require(\"./is\");\r\nvar CancellationToken;\r\n(function (CancellationToken) {\r\n    CancellationToken.None = Object.freeze({\r\n        isCancellationRequested: false,\r\n        onCancellationRequested: events_1.Event.None\r\n    });\r\n    CancellationToken.Cancelled = Object.freeze({\r\n        isCancellationRequested: true,\r\n        onCancellationRequested: events_1.Event.None\r\n    });\r\n    function is(value) {\r\n        let candidate = value;\r\n        return candidate && (candidate === CancellationToken.None\r\n            || candidate === CancellationToken.Cancelled\r\n            || (Is.boolean(candidate.isCancellationRequested) && !!candidate.onCancellationRequested));\r\n    }\r\n    CancellationToken.is = is;\r\n})(CancellationToken = exports.CancellationToken || (exports.CancellationToken = {}));\r\nconst shortcutEvent = Object.freeze(function (callback, context) {\r\n    let handle = setTimeout(callback.bind(context), 0);\r\n    return { dispose() { clearTimeout(handle); } };\r\n});\r\nclass MutableToken {\r\n    constructor() {\r\n        this._isCancelled = false;\r\n    }\r\n    cancel() {\r\n        if (!this._isCancelled) {\r\n            this._isCancelled = true;\r\n            if (this._emitter) {\r\n                this._emitter.fire(undefined);\r\n                this.dispose();\r\n            }\r\n        }\r\n    }\r\n    get isCancellationRequested() {\r\n        return this._isCancelled;\r\n    }\r\n    get onCancellationRequested() {\r\n        if (this._isCancelled) {\r\n            return shortcutEvent;\r\n        }\r\n        if (!this._emitter) {\r\n            this._emitter = new events_1.Emitter();\r\n        }\r\n        return this._emitter.event;\r\n    }\r\n    dispose() {\r\n        if (this._emitter) {\r\n            this._emitter.dispose();\r\n            this._emitter = undefined;\r\n        }\r\n    }\r\n}\r\nclass CancellationTokenSource {\r\n    get token() {\r\n        if (!this._token) {\r\n            // be lazy and create the token only when\r\n            // actually needed\r\n            this._token = new MutableToken();\r\n        }\r\n        return this._token;\r\n    }\r\n    cancel() {\r\n        if (!this._token) {\r\n            // save an object by returning the default\r\n            // cancelled token when cancellation happens\r\n            // before someone asks for the token\r\n            this._token = CancellationToken.Cancelled;\r\n        }\r\n        else {\r\n            this._token.cancel();\r\n        }\r\n    }\r\n    dispose() {\r\n        if (!this._token) {\r\n            // ensure to initialize with an empty token if we had none\r\n            this._token = CancellationToken.None;\r\n        }\r\n        else if (this._token instanceof MutableToken) {\r\n            // actually dispose\r\n            this._token.dispose();\r\n        }\r\n    }\r\n}\r\nexports.CancellationTokenSource = CancellationTokenSource;\r\n","\"use strict\";\r\n/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Touch;\r\n(function (Touch) {\r\n    Touch.None = 0;\r\n    Touch.First = 1;\r\n    Touch.Last = 2;\r\n})(Touch = exports.Touch || (exports.Touch = {}));\r\nclass LinkedMap {\r\n    constructor() {\r\n        this._map = new Map();\r\n        this._head = undefined;\r\n        this._tail = undefined;\r\n        this._size = 0;\r\n    }\r\n    clear() {\r\n        this._map.clear();\r\n        this._head = undefined;\r\n        this._tail = undefined;\r\n        this._size = 0;\r\n    }\r\n    isEmpty() {\r\n        return !this._head && !this._tail;\r\n    }\r\n    get size() {\r\n        return this._size;\r\n    }\r\n    has(key) {\r\n        return this._map.has(key);\r\n    }\r\n    get(key) {\r\n        const item = this._map.get(key);\r\n        if (!item) {\r\n            return undefined;\r\n        }\r\n        return item.value;\r\n    }\r\n    set(key, value, touch = Touch.None) {\r\n        let item = this._map.get(key);\r\n        if (item) {\r\n            item.value = value;\r\n            if (touch !== Touch.None) {\r\n                this.touch(item, touch);\r\n            }\r\n        }\r\n        else {\r\n            item = { key, value, next: undefined, previous: undefined };\r\n            switch (touch) {\r\n                case Touch.None:\r\n                    this.addItemLast(item);\r\n                    break;\r\n                case Touch.First:\r\n                    this.addItemFirst(item);\r\n                    break;\r\n                case Touch.Last:\r\n                    this.addItemLast(item);\r\n                    break;\r\n                default:\r\n                    this.addItemLast(item);\r\n                    break;\r\n            }\r\n            this._map.set(key, item);\r\n            this._size++;\r\n        }\r\n    }\r\n    delete(key) {\r\n        const item = this._map.get(key);\r\n        if (!item) {\r\n            return false;\r\n        }\r\n        this._map.delete(key);\r\n        this.removeItem(item);\r\n        this._size--;\r\n        return true;\r\n    }\r\n    shift() {\r\n        if (!this._head && !this._tail) {\r\n            return undefined;\r\n        }\r\n        if (!this._head || !this._tail) {\r\n            throw new Error('Invalid list');\r\n        }\r\n        const item = this._head;\r\n        this._map.delete(item.key);\r\n        this.removeItem(item);\r\n        this._size--;\r\n        return item.value;\r\n    }\r\n    forEach(callbackfn, thisArg) {\r\n        let current = this._head;\r\n        while (current) {\r\n            if (thisArg) {\r\n                callbackfn.bind(thisArg)(current.value, current.key, this);\r\n            }\r\n            else {\r\n                callbackfn(current.value, current.key, this);\r\n            }\r\n            current = current.next;\r\n        }\r\n    }\r\n    forEachReverse(callbackfn, thisArg) {\r\n        let current = this._tail;\r\n        while (current) {\r\n            if (thisArg) {\r\n                callbackfn.bind(thisArg)(current.value, current.key, this);\r\n            }\r\n            else {\r\n                callbackfn(current.value, current.key, this);\r\n            }\r\n            current = current.previous;\r\n        }\r\n    }\r\n    values() {\r\n        let result = [];\r\n        let current = this._head;\r\n        while (current) {\r\n            result.push(current.value);\r\n            current = current.next;\r\n        }\r\n        return result;\r\n    }\r\n    keys() {\r\n        let result = [];\r\n        let current = this._head;\r\n        while (current) {\r\n            result.push(current.key);\r\n            current = current.next;\r\n        }\r\n        return result;\r\n    }\r\n    /* JSON RPC run on es5 which has no Symbol.iterator\r\n    public keys(): IterableIterator<K> {\r\n        let current = this._head;\r\n        let iterator: IterableIterator<K> = {\r\n            [Symbol.iterator]() {\r\n                return iterator;\r\n            },\r\n            next():IteratorResult<K> {\r\n                if (current) {\r\n                    let result = { value: current.key, done: false };\r\n                    current = current.next;\r\n                    return result;\r\n                } else {\r\n                    return { value: undefined, done: true };\r\n                }\r\n            }\r\n        };\r\n        return iterator;\r\n    }\r\n\r\n    public values(): IterableIterator<V> {\r\n        let current = this._head;\r\n        let iterator: IterableIterator<V> = {\r\n            [Symbol.iterator]() {\r\n                return iterator;\r\n            },\r\n            next():IteratorResult<V> {\r\n                if (current) {\r\n                    let result = { value: current.value, done: false };\r\n                    current = current.next;\r\n                    return result;\r\n                } else {\r\n                    return { value: undefined, done: true };\r\n                }\r\n            }\r\n        };\r\n        return iterator;\r\n    }\r\n    */\r\n    addItemFirst(item) {\r\n        // First time Insert\r\n        if (!this._head && !this._tail) {\r\n            this._tail = item;\r\n        }\r\n        else if (!this._head) {\r\n            throw new Error('Invalid list');\r\n        }\r\n        else {\r\n            item.next = this._head;\r\n            this._head.previous = item;\r\n        }\r\n        this._head = item;\r\n    }\r\n    addItemLast(item) {\r\n        // First time Insert\r\n        if (!this._head && !this._tail) {\r\n            this._head = item;\r\n        }\r\n        else if (!this._tail) {\r\n            throw new Error('Invalid list');\r\n        }\r\n        else {\r\n            item.previous = this._tail;\r\n            this._tail.next = item;\r\n        }\r\n        this._tail = item;\r\n    }\r\n    removeItem(item) {\r\n        if (item === this._head && item === this._tail) {\r\n            this._head = undefined;\r\n            this._tail = undefined;\r\n        }\r\n        else if (item === this._head) {\r\n            this._head = item.next;\r\n        }\r\n        else if (item === this._tail) {\r\n            this._tail = item.previous;\r\n        }\r\n        else {\r\n            const next = item.next;\r\n            const previous = item.previous;\r\n            if (!next || !previous) {\r\n                throw new Error('Invalid list');\r\n            }\r\n            next.previous = previous;\r\n            previous.next = next;\r\n        }\r\n    }\r\n    touch(item, touch) {\r\n        if (!this._head || !this._tail) {\r\n            throw new Error('Invalid list');\r\n        }\r\n        if ((touch !== Touch.First && touch !== Touch.Last)) {\r\n            return;\r\n        }\r\n        if (touch === Touch.First) {\r\n            if (item === this._head) {\r\n                return;\r\n            }\r\n            const next = item.next;\r\n            const previous = item.previous;\r\n            // Unlink the item\r\n            if (item === this._tail) {\r\n                // previous must be defined since item was not head but is tail\r\n                // So there are more than on item in the map\r\n                previous.next = undefined;\r\n                this._tail = previous;\r\n            }\r\n            else {\r\n                // Both next and previous are not undefined since item was neither head nor tail.\r\n                next.previous = previous;\r\n                previous.next = next;\r\n            }\r\n            // Insert the node at head\r\n            item.previous = undefined;\r\n            item.next = this._head;\r\n            this._head.previous = item;\r\n            this._head = item;\r\n        }\r\n        else if (touch === Touch.Last) {\r\n            if (item === this._tail) {\r\n                return;\r\n            }\r\n            const next = item.next;\r\n            const previous = item.previous;\r\n            // Unlink the item.\r\n            if (item === this._head) {\r\n                // next must be defined since item was not tail but is head\r\n                // So there are more than on item in the map\r\n                next.previous = undefined;\r\n                this._head = next;\r\n            }\r\n            else {\r\n                // Both next and previous are not undefined since item was neither head nor tail.\r\n                next.previous = previous;\r\n                previous.next = next;\r\n            }\r\n            item.next = undefined;\r\n            item.previous = this._tail;\r\n            this._tail.next = item;\r\n            this._tail = item;\r\n        }\r\n    }\r\n}\r\nexports.LinkedMap = LinkedMap;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst path_1 = require(\"path\");\r\nconst os_1 = require(\"os\");\r\nconst crypto_1 = require(\"crypto\");\r\nconst net_1 = require(\"net\");\r\nconst messageReader_1 = require(\"./messageReader\");\r\nconst messageWriter_1 = require(\"./messageWriter\");\r\nfunction generateRandomPipeName() {\r\n    const randomSuffix = crypto_1.randomBytes(21).toString('hex');\r\n    if (process.platform === 'win32') {\r\n        return `\\\\\\\\.\\\\pipe\\\\vscode-jsonrpc-${randomSuffix}-sock`;\r\n    }\r\n    else {\r\n        // Mac/Unix: use socket file\r\n        return path_1.join(os_1.tmpdir(), `vscode-${randomSuffix}.sock`);\r\n    }\r\n}\r\nexports.generateRandomPipeName = generateRandomPipeName;\r\nfunction createClientPipeTransport(pipeName, encoding = 'utf-8') {\r\n    let connectResolve;\r\n    let connected = new Promise((resolve, _reject) => {\r\n        connectResolve = resolve;\r\n    });\r\n    return new Promise((resolve, reject) => {\r\n        let server = net_1.createServer((socket) => {\r\n            server.close();\r\n            connectResolve([\r\n                new messageReader_1.SocketMessageReader(socket, encoding),\r\n                new messageWriter_1.SocketMessageWriter(socket, encoding)\r\n            ]);\r\n        });\r\n        server.on('error', reject);\r\n        server.listen(pipeName, () => {\r\n            server.removeListener('error', reject);\r\n            resolve({\r\n                onConnected: () => { return connected; }\r\n            });\r\n        });\r\n    });\r\n}\r\nexports.createClientPipeTransport = createClientPipeTransport;\r\nfunction createServerPipeTransport(pipeName, encoding = 'utf-8') {\r\n    const socket = net_1.createConnection(pipeName);\r\n    return [\r\n        new messageReader_1.SocketMessageReader(socket, encoding),\r\n        new messageWriter_1.SocketMessageWriter(socket, encoding)\r\n    ];\r\n}\r\nexports.createServerPipeTransport = createServerPipeTransport;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst net_1 = require(\"net\");\r\nconst messageReader_1 = require(\"./messageReader\");\r\nconst messageWriter_1 = require(\"./messageWriter\");\r\nfunction createClientSocketTransport(port, encoding = 'utf-8') {\r\n    let connectResolve;\r\n    let connected = new Promise((resolve, _reject) => {\r\n        connectResolve = resolve;\r\n    });\r\n    return new Promise((resolve, reject) => {\r\n        let server = net_1.createServer((socket) => {\r\n            server.close();\r\n            connectResolve([\r\n                new messageReader_1.SocketMessageReader(socket, encoding),\r\n                new messageWriter_1.SocketMessageWriter(socket, encoding)\r\n            ]);\r\n        });\r\n        server.on('error', reject);\r\n        server.listen(port, '127.0.0.1', () => {\r\n            server.removeListener('error', reject);\r\n            resolve({\r\n                onConnected: () => { return connected; }\r\n            });\r\n        });\r\n    });\r\n}\r\nexports.createClientSocketTransport = createClientSocketTransport;\r\nfunction createServerSocketTransport(port, encoding = 'utf-8') {\r\n    const socket = net_1.createConnection(port, '127.0.0.1');\r\n    return [\r\n        new messageReader_1.SocketMessageReader(socket, encoding),\r\n        new messageWriter_1.SocketMessageWriter(socket, encoding)\r\n    ];\r\n}\r\nexports.createServerSocketTransport = createServerSocketTransport;\r\n","import { RequestType } from \"vscode-languageserver\";\r\nimport { IMetricsModel } from \"tsmetrics-core/lib/MetricsModel\";\r\nimport { IVSCodeMetricsConfiguration } from \"./VSCodeMetricsConfiguration\";\r\n\r\nexport class RequestData {\r\n    configuration: IVSCodeMetricsConfiguration;\r\n    uri: string;\r\n}\r\n\r\nexport const MetricsRequestType: RequestType<RequestData, IMetricsModel[], any, any> = new RequestType(\r\n    \"codemetrics/metrics\"\r\n);\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst Is = require(\"./utils/is\");\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\nconst protocol_implementation_1 = require(\"./protocol.implementation\");\r\nexports.ImplementationRequest = protocol_implementation_1.ImplementationRequest;\r\nconst protocol_typeDefinition_1 = require(\"./protocol.typeDefinition\");\r\nexports.TypeDefinitionRequest = protocol_typeDefinition_1.TypeDefinitionRequest;\r\nconst protocol_workspaceFolders_1 = require(\"./protocol.workspaceFolders\");\r\nexports.WorkspaceFoldersRequest = protocol_workspaceFolders_1.WorkspaceFoldersRequest;\r\nexports.DidChangeWorkspaceFoldersNotification = protocol_workspaceFolders_1.DidChangeWorkspaceFoldersNotification;\r\nconst protocol_configuration_1 = require(\"./protocol.configuration\");\r\nexports.ConfigurationRequest = protocol_configuration_1.ConfigurationRequest;\r\nconst protocol_colorProvider_1 = require(\"./protocol.colorProvider\");\r\nexports.DocumentColorRequest = protocol_colorProvider_1.DocumentColorRequest;\r\nexports.ColorPresentationRequest = protocol_colorProvider_1.ColorPresentationRequest;\r\nconst protocol_foldingRange_1 = require(\"./protocol.foldingRange\");\r\nexports.FoldingRangeRequest = protocol_foldingRange_1.FoldingRangeRequest;\r\nconst protocol_declaration_1 = require(\"./protocol.declaration\");\r\nexports.DeclarationRequest = protocol_declaration_1.DeclarationRequest;\r\n// @ts-ignore: to avoid inlining LocatioLink as dynamic import\r\nlet __noDynamicImport;\r\nvar DocumentFilter;\r\n(function (DocumentFilter) {\r\n    function is(value) {\r\n        let candidate = value;\r\n        return Is.string(candidate.language) || Is.string(candidate.scheme) || Is.string(candidate.pattern);\r\n    }\r\n    DocumentFilter.is = is;\r\n})(DocumentFilter = exports.DocumentFilter || (exports.DocumentFilter = {}));\r\n/**\r\n * The `client/registerCapability` request is sent from the server to the client to register a new capability\r\n * handler on the client side.\r\n */\r\nvar RegistrationRequest;\r\n(function (RegistrationRequest) {\r\n    RegistrationRequest.type = new vscode_jsonrpc_1.RequestType('client/registerCapability');\r\n})(RegistrationRequest = exports.RegistrationRequest || (exports.RegistrationRequest = {}));\r\n/**\r\n * The `client/unregisterCapability` request is sent from the server to the client to unregister a previously registered capability\r\n * handler on the client side.\r\n */\r\nvar UnregistrationRequest;\r\n(function (UnregistrationRequest) {\r\n    UnregistrationRequest.type = new vscode_jsonrpc_1.RequestType('client/unregisterCapability');\r\n})(UnregistrationRequest = exports.UnregistrationRequest || (exports.UnregistrationRequest = {}));\r\nvar ResourceOperationKind;\r\n(function (ResourceOperationKind) {\r\n    /**\r\n     * Supports creating new files and folders.\r\n     */\r\n    ResourceOperationKind.Create = 'create';\r\n    /**\r\n     * Supports renaming existing files and folders.\r\n     */\r\n    ResourceOperationKind.Rename = 'rename';\r\n    /**\r\n     * Supports deleting existing files and folders.\r\n     */\r\n    ResourceOperationKind.Delete = 'delete';\r\n})(ResourceOperationKind = exports.ResourceOperationKind || (exports.ResourceOperationKind = {}));\r\nvar FailureHandlingKind;\r\n(function (FailureHandlingKind) {\r\n    /**\r\n     * Applying the workspace change is simply aborted if one of the changes provided\r\n     * fails. All operations executed before the failing operation stay executed.\r\n     */\r\n    FailureHandlingKind.Abort = 'abort';\r\n    /**\r\n     * All operations are executed transactional. That means they either all\r\n     * succeed or no changes at all are applied to the workspace.\r\n     */\r\n    FailureHandlingKind.Transactional = 'transactional';\r\n    /**\r\n     * If the workspace edit contains only textual file changes they are executed transactional.\r\n     * If resource changes (create, rename or delete file) are part of the change the failure\r\n     * handling startegy is abort.\r\n     */\r\n    FailureHandlingKind.TextOnlyTransactional = 'textOnlyTransactional';\r\n    /**\r\n     * The client tries to undo the operations already executed. But there is no\r\n     * guaruntee that this is succeeding.\r\n     */\r\n    FailureHandlingKind.Undo = 'undo';\r\n})(FailureHandlingKind = exports.FailureHandlingKind || (exports.FailureHandlingKind = {}));\r\n/**\r\n * Defines how the host (editor) should sync\r\n * document changes to the language server.\r\n */\r\nvar TextDocumentSyncKind;\r\n(function (TextDocumentSyncKind) {\r\n    /**\r\n     * Documents should not be synced at all.\r\n     */\r\n    TextDocumentSyncKind.None = 0;\r\n    /**\r\n     * Documents are synced by always sending the full content\r\n     * of the document.\r\n     */\r\n    TextDocumentSyncKind.Full = 1;\r\n    /**\r\n     * Documents are synced by sending the full content on open.\r\n     * After that only incremental updates to the document are\r\n     * send.\r\n     */\r\n    TextDocumentSyncKind.Incremental = 2;\r\n})(TextDocumentSyncKind = exports.TextDocumentSyncKind || (exports.TextDocumentSyncKind = {}));\r\n/**\r\n * The initialize request is sent from the client to the server.\r\n * It is sent once as the request after starting up the server.\r\n * The requests parameter is of type [InitializeParams](#InitializeParams)\r\n * the response if of type [InitializeResult](#InitializeResult) of a Thenable that\r\n * resolves to such.\r\n */\r\nvar InitializeRequest;\r\n(function (InitializeRequest) {\r\n    InitializeRequest.type = new vscode_jsonrpc_1.RequestType('initialize');\r\n})(InitializeRequest = exports.InitializeRequest || (exports.InitializeRequest = {}));\r\n/**\r\n * Known error codes for an `InitializeError`;\r\n */\r\nvar InitializeError;\r\n(function (InitializeError) {\r\n    /**\r\n     * If the protocol version provided by the client can't be handled by the server.\r\n     * @deprecated This initialize error got replaced by client capabilities. There is\r\n     * no version handshake in version 3.0x\r\n     */\r\n    InitializeError.unknownProtocolVersion = 1;\r\n})(InitializeError = exports.InitializeError || (exports.InitializeError = {}));\r\n/**\r\n * The intialized notification is sent from the client to the\r\n * server after the client is fully initialized and the server\r\n * is allowed to send requests from the server to the client.\r\n */\r\nvar InitializedNotification;\r\n(function (InitializedNotification) {\r\n    InitializedNotification.type = new vscode_jsonrpc_1.NotificationType('initialized');\r\n})(InitializedNotification = exports.InitializedNotification || (exports.InitializedNotification = {}));\r\n//---- Shutdown Method ----\r\n/**\r\n * A shutdown request is sent from the client to the server.\r\n * It is sent once when the client decides to shutdown the\r\n * server. The only notification that is sent after a shutdown request\r\n * is the exit event.\r\n */\r\nvar ShutdownRequest;\r\n(function (ShutdownRequest) {\r\n    ShutdownRequest.type = new vscode_jsonrpc_1.RequestType0('shutdown');\r\n})(ShutdownRequest = exports.ShutdownRequest || (exports.ShutdownRequest = {}));\r\n//---- Exit Notification ----\r\n/**\r\n * The exit event is sent from the client to the server to\r\n * ask the server to exit its process.\r\n */\r\nvar ExitNotification;\r\n(function (ExitNotification) {\r\n    ExitNotification.type = new vscode_jsonrpc_1.NotificationType0('exit');\r\n})(ExitNotification = exports.ExitNotification || (exports.ExitNotification = {}));\r\n//---- Configuration notification ----\r\n/**\r\n * The configuration change notification is sent from the client to the server\r\n * when the client's configuration has changed. The notification contains\r\n * the changed configuration as defined by the language client.\r\n */\r\nvar DidChangeConfigurationNotification;\r\n(function (DidChangeConfigurationNotification) {\r\n    DidChangeConfigurationNotification.type = new vscode_jsonrpc_1.NotificationType('workspace/didChangeConfiguration');\r\n})(DidChangeConfigurationNotification = exports.DidChangeConfigurationNotification || (exports.DidChangeConfigurationNotification = {}));\r\n//---- Message show and log notifications ----\r\n/**\r\n * The message type\r\n */\r\nvar MessageType;\r\n(function (MessageType) {\r\n    /**\r\n     * An error message.\r\n     */\r\n    MessageType.Error = 1;\r\n    /**\r\n     * A warning message.\r\n     */\r\n    MessageType.Warning = 2;\r\n    /**\r\n     * An information message.\r\n     */\r\n    MessageType.Info = 3;\r\n    /**\r\n     * A log message.\r\n     */\r\n    MessageType.Log = 4;\r\n})(MessageType = exports.MessageType || (exports.MessageType = {}));\r\n/**\r\n * The show message notification is sent from a server to a client to ask\r\n * the client to display a particular message in the user interface.\r\n */\r\nvar ShowMessageNotification;\r\n(function (ShowMessageNotification) {\r\n    ShowMessageNotification.type = new vscode_jsonrpc_1.NotificationType('window/showMessage');\r\n})(ShowMessageNotification = exports.ShowMessageNotification || (exports.ShowMessageNotification = {}));\r\n/**\r\n * The show message request is sent from the server to the client to show a message\r\n * and a set of options actions to the user.\r\n */\r\nvar ShowMessageRequest;\r\n(function (ShowMessageRequest) {\r\n    ShowMessageRequest.type = new vscode_jsonrpc_1.RequestType('window/showMessageRequest');\r\n})(ShowMessageRequest = exports.ShowMessageRequest || (exports.ShowMessageRequest = {}));\r\n/**\r\n * The log message notification is sent from the server to the client to ask\r\n * the client to log a particular message.\r\n */\r\nvar LogMessageNotification;\r\n(function (LogMessageNotification) {\r\n    LogMessageNotification.type = new vscode_jsonrpc_1.NotificationType('window/logMessage');\r\n})(LogMessageNotification = exports.LogMessageNotification || (exports.LogMessageNotification = {}));\r\n//---- Telemetry notification\r\n/**\r\n * The telemetry event notification is sent from the server to the client to ask\r\n * the client to log telemetry data.\r\n */\r\nvar TelemetryEventNotification;\r\n(function (TelemetryEventNotification) {\r\n    TelemetryEventNotification.type = new vscode_jsonrpc_1.NotificationType('telemetry/event');\r\n})(TelemetryEventNotification = exports.TelemetryEventNotification || (exports.TelemetryEventNotification = {}));\r\n/**\r\n * The document open notification is sent from the client to the server to signal\r\n * newly opened text documents. The document's truth is now managed by the client\r\n * and the server must not try to read the document's truth using the document's\r\n * uri. Open in this sense means it is managed by the client. It doesn't necessarily\r\n * mean that its content is presented in an editor. An open notification must not\r\n * be sent more than once without a corresponding close notification send before.\r\n * This means open and close notification must be balanced and the max open count\r\n * is one.\r\n */\r\nvar DidOpenTextDocumentNotification;\r\n(function (DidOpenTextDocumentNotification) {\r\n    DidOpenTextDocumentNotification.type = new vscode_jsonrpc_1.NotificationType('textDocument/didOpen');\r\n})(DidOpenTextDocumentNotification = exports.DidOpenTextDocumentNotification || (exports.DidOpenTextDocumentNotification = {}));\r\n/**\r\n * The document change notification is sent from the client to the server to signal\r\n * changes to a text document.\r\n */\r\nvar DidChangeTextDocumentNotification;\r\n(function (DidChangeTextDocumentNotification) {\r\n    DidChangeTextDocumentNotification.type = new vscode_jsonrpc_1.NotificationType('textDocument/didChange');\r\n})(DidChangeTextDocumentNotification = exports.DidChangeTextDocumentNotification || (exports.DidChangeTextDocumentNotification = {}));\r\n/**\r\n * The document close notification is sent from the client to the server when\r\n * the document got closed in the client. The document's truth now exists where\r\n * the document's uri points to (e.g. if the document's uri is a file uri the\r\n * truth now exists on disk). As with the open notification the close notification\r\n * is about managing the document's content. Receiving a close notification\r\n * doesn't mean that the document was open in an editor before. A close\r\n * notification requires a previous open notification to be sent.\r\n */\r\nvar DidCloseTextDocumentNotification;\r\n(function (DidCloseTextDocumentNotification) {\r\n    DidCloseTextDocumentNotification.type = new vscode_jsonrpc_1.NotificationType('textDocument/didClose');\r\n})(DidCloseTextDocumentNotification = exports.DidCloseTextDocumentNotification || (exports.DidCloseTextDocumentNotification = {}));\r\n/**\r\n * The document save notification is sent from the client to the server when\r\n * the document got saved in the client.\r\n */\r\nvar DidSaveTextDocumentNotification;\r\n(function (DidSaveTextDocumentNotification) {\r\n    DidSaveTextDocumentNotification.type = new vscode_jsonrpc_1.NotificationType('textDocument/didSave');\r\n})(DidSaveTextDocumentNotification = exports.DidSaveTextDocumentNotification || (exports.DidSaveTextDocumentNotification = {}));\r\n/**\r\n * A document will save notification is sent from the client to the server before\r\n * the document is actually saved.\r\n */\r\nvar WillSaveTextDocumentNotification;\r\n(function (WillSaveTextDocumentNotification) {\r\n    WillSaveTextDocumentNotification.type = new vscode_jsonrpc_1.NotificationType('textDocument/willSave');\r\n})(WillSaveTextDocumentNotification = exports.WillSaveTextDocumentNotification || (exports.WillSaveTextDocumentNotification = {}));\r\n/**\r\n * A document will save request is sent from the client to the server before\r\n * the document is actually saved. The request can return an array of TextEdits\r\n * which will be applied to the text document before it is saved. Please note that\r\n * clients might drop results if computing the text edits took too long or if a\r\n * server constantly fails on this request. This is done to keep the save fast and\r\n * reliable.\r\n */\r\nvar WillSaveTextDocumentWaitUntilRequest;\r\n(function (WillSaveTextDocumentWaitUntilRequest) {\r\n    WillSaveTextDocumentWaitUntilRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/willSaveWaitUntil');\r\n})(WillSaveTextDocumentWaitUntilRequest = exports.WillSaveTextDocumentWaitUntilRequest || (exports.WillSaveTextDocumentWaitUntilRequest = {}));\r\n//---- File eventing ----\r\n/**\r\n * The watched files notification is sent from the client to the server when\r\n * the client detects changes to file watched by the language client.\r\n */\r\nvar DidChangeWatchedFilesNotification;\r\n(function (DidChangeWatchedFilesNotification) {\r\n    DidChangeWatchedFilesNotification.type = new vscode_jsonrpc_1.NotificationType('workspace/didChangeWatchedFiles');\r\n})(DidChangeWatchedFilesNotification = exports.DidChangeWatchedFilesNotification || (exports.DidChangeWatchedFilesNotification = {}));\r\n/**\r\n * The file event type\r\n */\r\nvar FileChangeType;\r\n(function (FileChangeType) {\r\n    /**\r\n     * The file got created.\r\n     */\r\n    FileChangeType.Created = 1;\r\n    /**\r\n     * The file got changed.\r\n     */\r\n    FileChangeType.Changed = 2;\r\n    /**\r\n     * The file got deleted.\r\n     */\r\n    FileChangeType.Deleted = 3;\r\n})(FileChangeType = exports.FileChangeType || (exports.FileChangeType = {}));\r\nvar WatchKind;\r\n(function (WatchKind) {\r\n    /**\r\n     * Interested in create events.\r\n     */\r\n    WatchKind.Create = 1;\r\n    /**\r\n     * Interested in change events\r\n     */\r\n    WatchKind.Change = 2;\r\n    /**\r\n     * Interested in delete events\r\n     */\r\n    WatchKind.Delete = 4;\r\n})(WatchKind = exports.WatchKind || (exports.WatchKind = {}));\r\n//---- Diagnostic notification ----\r\n/**\r\n * Diagnostics notification are sent from the server to the client to signal\r\n * results of validation runs.\r\n */\r\nvar PublishDiagnosticsNotification;\r\n(function (PublishDiagnosticsNotification) {\r\n    PublishDiagnosticsNotification.type = new vscode_jsonrpc_1.NotificationType('textDocument/publishDiagnostics');\r\n})(PublishDiagnosticsNotification = exports.PublishDiagnosticsNotification || (exports.PublishDiagnosticsNotification = {}));\r\n/**\r\n * How a completion was triggered\r\n */\r\nvar CompletionTriggerKind;\r\n(function (CompletionTriggerKind) {\r\n    /**\r\n     * Completion was triggered by typing an identifier (24x7 code\r\n     * complete), manual invocation (e.g Ctrl+Space) or via API.\r\n     */\r\n    CompletionTriggerKind.Invoked = 1;\r\n    /**\r\n     * Completion was triggered by a trigger character specified by\r\n     * the `triggerCharacters` properties of the `CompletionRegistrationOptions`.\r\n     */\r\n    CompletionTriggerKind.TriggerCharacter = 2;\r\n    /**\r\n     * Completion was re-triggered as current completion list is incomplete\r\n     */\r\n    CompletionTriggerKind.TriggerForIncompleteCompletions = 3;\r\n})(CompletionTriggerKind = exports.CompletionTriggerKind || (exports.CompletionTriggerKind = {}));\r\n/**\r\n * Request to request completion at a given text document position. The request's\r\n * parameter is of type [TextDocumentPosition](#TextDocumentPosition) the response\r\n * is of type [CompletionItem[]](#CompletionItem) or [CompletionList](#CompletionList)\r\n * or a Thenable that resolves to such.\r\n *\r\n * The request can delay the computation of the [`detail`](#CompletionItem.detail)\r\n * and [`documentation`](#CompletionItem.documentation) properties to the `completionItem/resolve`\r\n * request. However, properties that are needed for the initial sorting and filtering, like `sortText`,\r\n * `filterText`, `insertText`, and `textEdit`, must not be changed during resolve.\r\n */\r\nvar CompletionRequest;\r\n(function (CompletionRequest) {\r\n    CompletionRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/completion');\r\n})(CompletionRequest = exports.CompletionRequest || (exports.CompletionRequest = {}));\r\n/**\r\n * Request to resolve additional information for a given completion item.The request's\r\n * parameter is of type [CompletionItem](#CompletionItem) the response\r\n * is of type [CompletionItem](#CompletionItem) or a Thenable that resolves to such.\r\n */\r\nvar CompletionResolveRequest;\r\n(function (CompletionResolveRequest) {\r\n    CompletionResolveRequest.type = new vscode_jsonrpc_1.RequestType('completionItem/resolve');\r\n})(CompletionResolveRequest = exports.CompletionResolveRequest || (exports.CompletionResolveRequest = {}));\r\n//---- Hover Support -------------------------------\r\n/**\r\n * Request to request hover information at a given text document position. The request's\r\n * parameter is of type [TextDocumentPosition](#TextDocumentPosition) the response is of\r\n * type [Hover](#Hover) or a Thenable that resolves to such.\r\n */\r\nvar HoverRequest;\r\n(function (HoverRequest) {\r\n    HoverRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/hover');\r\n})(HoverRequest = exports.HoverRequest || (exports.HoverRequest = {}));\r\nvar SignatureHelpRequest;\r\n(function (SignatureHelpRequest) {\r\n    SignatureHelpRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/signatureHelp');\r\n})(SignatureHelpRequest = exports.SignatureHelpRequest || (exports.SignatureHelpRequest = {}));\r\n//---- Goto Definition -------------------------------------\r\n/**\r\n * A request to resolve the definition location of a symbol at a given text\r\n * document position. The request's parameter is of type [TextDocumentPosition]\r\n * (#TextDocumentPosition) the response is of either type [Definition](#Definition)\r\n * or a typed array of [DefinitionLink](#DefinitionLink) or a Thenable that resolves\r\n * to such.\r\n */\r\nvar DefinitionRequest;\r\n(function (DefinitionRequest) {\r\n    DefinitionRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/definition');\r\n})(DefinitionRequest = exports.DefinitionRequest || (exports.DefinitionRequest = {}));\r\n/**\r\n * A request to resolve project-wide references for the symbol denoted\r\n * by the given text document position. The request's parameter is of\r\n * type [ReferenceParams](#ReferenceParams) the response is of type\r\n * [Location[]](#Location) or a Thenable that resolves to such.\r\n */\r\nvar ReferencesRequest;\r\n(function (ReferencesRequest) {\r\n    ReferencesRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/references');\r\n})(ReferencesRequest = exports.ReferencesRequest || (exports.ReferencesRequest = {}));\r\n//---- Document Highlight ----------------------------------\r\n/**\r\n * Request to resolve a [DocumentHighlight](#DocumentHighlight) for a given\r\n * text document position. The request's parameter is of type [TextDocumentPosition]\r\n * (#TextDocumentPosition) the request response is of type [DocumentHighlight[]]\r\n * (#DocumentHighlight) or a Thenable that resolves to such.\r\n */\r\nvar DocumentHighlightRequest;\r\n(function (DocumentHighlightRequest) {\r\n    DocumentHighlightRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/documentHighlight');\r\n})(DocumentHighlightRequest = exports.DocumentHighlightRequest || (exports.DocumentHighlightRequest = {}));\r\n//---- Document Symbol Provider ---------------------------\r\n/**\r\n * A request to list all symbols found in a given text document. The request's\r\n * parameter is of type [TextDocumentIdentifier](#TextDocumentIdentifier) the\r\n * response is of type [SymbolInformation[]](#SymbolInformation) or a Thenable\r\n * that resolves to such.\r\n */\r\nvar DocumentSymbolRequest;\r\n(function (DocumentSymbolRequest) {\r\n    DocumentSymbolRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/documentSymbol');\r\n})(DocumentSymbolRequest = exports.DocumentSymbolRequest || (exports.DocumentSymbolRequest = {}));\r\n//---- Workspace Symbol Provider ---------------------------\r\n/**\r\n * A request to list project-wide symbols matching the query string given\r\n * by the [WorkspaceSymbolParams](#WorkspaceSymbolParams). The response is\r\n * of type [SymbolInformation[]](#SymbolInformation) or a Thenable that\r\n * resolves to such.\r\n */\r\nvar WorkspaceSymbolRequest;\r\n(function (WorkspaceSymbolRequest) {\r\n    WorkspaceSymbolRequest.type = new vscode_jsonrpc_1.RequestType('workspace/symbol');\r\n})(WorkspaceSymbolRequest = exports.WorkspaceSymbolRequest || (exports.WorkspaceSymbolRequest = {}));\r\n/**\r\n * A request to provide commands for the given text document and range.\r\n */\r\nvar CodeActionRequest;\r\n(function (CodeActionRequest) {\r\n    CodeActionRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/codeAction');\r\n})(CodeActionRequest = exports.CodeActionRequest || (exports.CodeActionRequest = {}));\r\n/**\r\n * A request to provide code lens for the given text document.\r\n */\r\nvar CodeLensRequest;\r\n(function (CodeLensRequest) {\r\n    CodeLensRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/codeLens');\r\n})(CodeLensRequest = exports.CodeLensRequest || (exports.CodeLensRequest = {}));\r\n/**\r\n * A request to resolve a command for a given code lens.\r\n */\r\nvar CodeLensResolveRequest;\r\n(function (CodeLensResolveRequest) {\r\n    CodeLensResolveRequest.type = new vscode_jsonrpc_1.RequestType('codeLens/resolve');\r\n})(CodeLensResolveRequest = exports.CodeLensResolveRequest || (exports.CodeLensResolveRequest = {}));\r\n/**\r\n * A request to to format a whole document.\r\n */\r\nvar DocumentFormattingRequest;\r\n(function (DocumentFormattingRequest) {\r\n    DocumentFormattingRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/formatting');\r\n})(DocumentFormattingRequest = exports.DocumentFormattingRequest || (exports.DocumentFormattingRequest = {}));\r\n/**\r\n * A request to to format a range in a document.\r\n */\r\nvar DocumentRangeFormattingRequest;\r\n(function (DocumentRangeFormattingRequest) {\r\n    DocumentRangeFormattingRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/rangeFormatting');\r\n})(DocumentRangeFormattingRequest = exports.DocumentRangeFormattingRequest || (exports.DocumentRangeFormattingRequest = {}));\r\n/**\r\n * A request to format a document on type.\r\n */\r\nvar DocumentOnTypeFormattingRequest;\r\n(function (DocumentOnTypeFormattingRequest) {\r\n    DocumentOnTypeFormattingRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/onTypeFormatting');\r\n})(DocumentOnTypeFormattingRequest = exports.DocumentOnTypeFormattingRequest || (exports.DocumentOnTypeFormattingRequest = {}));\r\n/**\r\n * A request to rename a symbol.\r\n */\r\nvar RenameRequest;\r\n(function (RenameRequest) {\r\n    RenameRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/rename');\r\n})(RenameRequest = exports.RenameRequest || (exports.RenameRequest = {}));\r\n/**\r\n * A request to test and perform the setup necessary for a rename.\r\n */\r\nvar PrepareRenameRequest;\r\n(function (PrepareRenameRequest) {\r\n    PrepareRenameRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/prepareRename');\r\n})(PrepareRenameRequest = exports.PrepareRenameRequest || (exports.PrepareRenameRequest = {}));\r\n/**\r\n * A request to provide document links\r\n */\r\nvar DocumentLinkRequest;\r\n(function (DocumentLinkRequest) {\r\n    DocumentLinkRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/documentLink');\r\n})(DocumentLinkRequest = exports.DocumentLinkRequest || (exports.DocumentLinkRequest = {}));\r\n/**\r\n * Request to resolve additional information for a given document link. The request's\r\n * parameter is of type [DocumentLink](#DocumentLink) the response\r\n * is of type [DocumentLink](#DocumentLink) or a Thenable that resolves to such.\r\n */\r\nvar DocumentLinkResolveRequest;\r\n(function (DocumentLinkResolveRequest) {\r\n    DocumentLinkResolveRequest.type = new vscode_jsonrpc_1.RequestType('documentLink/resolve');\r\n})(DocumentLinkResolveRequest = exports.DocumentLinkResolveRequest || (exports.DocumentLinkResolveRequest = {}));\r\n/**\r\n * A request send from the client to the server to execute a command. The request might return\r\n * a workspace edit which the client will apply to the workspace.\r\n */\r\nvar ExecuteCommandRequest;\r\n(function (ExecuteCommandRequest) {\r\n    ExecuteCommandRequest.type = new vscode_jsonrpc_1.RequestType('workspace/executeCommand');\r\n})(ExecuteCommandRequest = exports.ExecuteCommandRequest || (exports.ExecuteCommandRequest = {}));\r\n/**\r\n * A request sent from the server to the client to modified certain resources.\r\n */\r\nvar ApplyWorkspaceEditRequest;\r\n(function (ApplyWorkspaceEditRequest) {\r\n    ApplyWorkspaceEditRequest.type = new vscode_jsonrpc_1.RequestType('workspace/applyEdit');\r\n})(ApplyWorkspaceEditRequest = exports.ApplyWorkspaceEditRequest || (exports.ApplyWorkspaceEditRequest = {}));\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nfunction boolean(value) {\r\n    return value === true || value === false;\r\n}\r\nexports.boolean = boolean;\r\nfunction string(value) {\r\n    return typeof value === 'string' || value instanceof String;\r\n}\r\nexports.string = string;\r\nfunction number(value) {\r\n    return typeof value === 'number' || value instanceof Number;\r\n}\r\nexports.number = number;\r\nfunction error(value) {\r\n    return value instanceof Error;\r\n}\r\nexports.error = error;\r\nfunction func(value) {\r\n    return typeof value === 'function';\r\n}\r\nexports.func = func;\r\nfunction array(value) {\r\n    return Array.isArray(value);\r\n}\r\nexports.array = array;\r\nfunction stringArray(value) {\r\n    return array(value) && value.every(elem => string(elem));\r\n}\r\nexports.stringArray = stringArray;\r\nfunction typedArray(value, check) {\r\n    return Array.isArray(value) && value.every(check);\r\n}\r\nexports.typedArray = typedArray;\r\nfunction thenable(value) {\r\n    return value && func(value.then);\r\n}\r\nexports.thenable = thenable;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\n// @ts-ignore: to avoid inlining LocatioLink as dynamic import\r\nlet __noDynamicImport;\r\n/**\r\n * A request to resolve the implementation locations of a symbol at a given text\r\n * document position. The request's parameter is of type [TextDocumentPositioParams]\r\n * (#TextDocumentPositionParams) the response is of type [Definition](#Definition) or a\r\n * Thenable that resolves to such.\r\n */\r\nvar ImplementationRequest;\r\n(function (ImplementationRequest) {\r\n    ImplementationRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/implementation');\r\n})(ImplementationRequest = exports.ImplementationRequest || (exports.ImplementationRequest = {}));\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\n// @ts-ignore: to avoid inlining LocatioLink as dynamic import\r\nlet __noDynamicImport;\r\n/**\r\n * A request to resolve the type definition locations of a symbol at a given text\r\n * document position. The request's parameter is of type [TextDocumentPositioParams]\r\n * (#TextDocumentPositionParams) the response is of type [Definition](#Definition) or a\r\n * Thenable that resolves to such.\r\n */\r\nvar TypeDefinitionRequest;\r\n(function (TypeDefinitionRequest) {\r\n    TypeDefinitionRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/typeDefinition');\r\n})(TypeDefinitionRequest = exports.TypeDefinitionRequest || (exports.TypeDefinitionRequest = {}));\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\n/**\r\n * The `workspace/workspaceFolders` is sent from the server to the client to fetch the open workspace folders.\r\n */\r\nvar WorkspaceFoldersRequest;\r\n(function (WorkspaceFoldersRequest) {\r\n    WorkspaceFoldersRequest.type = new vscode_jsonrpc_1.RequestType0('workspace/workspaceFolders');\r\n})(WorkspaceFoldersRequest = exports.WorkspaceFoldersRequest || (exports.WorkspaceFoldersRequest = {}));\r\n/**\r\n * The `workspace/didChangeWorkspaceFolders` notification is sent from the client to the server when the workspace\r\n * folder configuration changes.\r\n */\r\nvar DidChangeWorkspaceFoldersNotification;\r\n(function (DidChangeWorkspaceFoldersNotification) {\r\n    DidChangeWorkspaceFoldersNotification.type = new vscode_jsonrpc_1.NotificationType('workspace/didChangeWorkspaceFolders');\r\n})(DidChangeWorkspaceFoldersNotification = exports.DidChangeWorkspaceFoldersNotification || (exports.DidChangeWorkspaceFoldersNotification = {}));\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\n/**\r\n * The 'workspace/configuration' request is sent from the server to the client to fetch a certain\r\n * configuration setting.\r\n *\r\n * This pull model replaces the old push model were the client signaled configuration change via an\r\n * event. If the server still needs to react to configuration changes (since the server caches the\r\n * result of `workspace/configuration` requests) the server should register for an empty configuration\r\n * change event and empty the cache if such an event is received.\r\n */\r\nvar ConfigurationRequest;\r\n(function (ConfigurationRequest) {\r\n    ConfigurationRequest.type = new vscode_jsonrpc_1.RequestType('workspace/configuration');\r\n})(ConfigurationRequest = exports.ConfigurationRequest || (exports.ConfigurationRequest = {}));\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\n/**\r\n * A request to list all color symbols found in a given text document. The request's\r\n * parameter is of type [DocumentColorParams](#DocumentColorParams) the\r\n * response is of type [ColorInformation[]](#ColorInformation) or a Thenable\r\n * that resolves to such.\r\n */\r\nvar DocumentColorRequest;\r\n(function (DocumentColorRequest) {\r\n    DocumentColorRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/documentColor');\r\n})(DocumentColorRequest = exports.DocumentColorRequest || (exports.DocumentColorRequest = {}));\r\n/**\r\n * A request to list all presentation for a color. The request's\r\n * parameter is of type [ColorPresentationParams](#ColorPresentationParams) the\r\n * response is of type [ColorInformation[]](#ColorInformation) or a Thenable\r\n * that resolves to such.\r\n */\r\nvar ColorPresentationRequest;\r\n(function (ColorPresentationRequest) {\r\n    ColorPresentationRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/colorPresentation');\r\n})(ColorPresentationRequest = exports.ColorPresentationRequest || (exports.ColorPresentationRequest = {}));\r\n","\"use strict\";\r\n/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\n/**\r\n * Enum of known range kinds\r\n */\r\nvar FoldingRangeKind;\r\n(function (FoldingRangeKind) {\r\n    /**\r\n     * Folding range for a comment\r\n     */\r\n    FoldingRangeKind[\"Comment\"] = \"comment\";\r\n    /**\r\n     * Folding range for a imports or includes\r\n     */\r\n    FoldingRangeKind[\"Imports\"] = \"imports\";\r\n    /**\r\n     * Folding range for a region (e.g. `#region`)\r\n     */\r\n    FoldingRangeKind[\"Region\"] = \"region\";\r\n})(FoldingRangeKind = exports.FoldingRangeKind || (exports.FoldingRangeKind = {}));\r\n/**\r\n * A request to provide folding ranges in a document. The request's\r\n * parameter is of type [FoldingRangeParams](#FoldingRangeParams), the\r\n * response is of type [FoldingRangeList](#FoldingRangeList) or a Thenable\r\n * that resolves to such.\r\n */\r\nvar FoldingRangeRequest;\r\n(function (FoldingRangeRequest) {\r\n    FoldingRangeRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/foldingRange');\r\n})(FoldingRangeRequest = exports.FoldingRangeRequest || (exports.FoldingRangeRequest = {}));\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\n// @ts-ignore: to avoid inlining LocatioLink as dynamic import\r\nlet __noDynamicImport;\r\n/**\r\n * A request to resolve the type definition locations of a symbol at a given text\r\n * document position. The request's parameter is of type [TextDocumentPositioParams]\r\n * (#TextDocumentPositionParams) the response is of type [Declaration](#Declaration)\r\n * or a typed array of [DeclarationLink](#DeclarationLink) or a Thenable that resolves\r\n * to such.\r\n */\r\nvar DeclarationRequest;\r\n(function (DeclarationRequest) {\r\n    DeclarationRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/declaration');\r\n})(DeclarationRequest = exports.DeclarationRequest || (exports.DeclarationRequest = {}));\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) TypeFox and others. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\n/**\r\n * The direction of a call hierarchy request.\r\n */\r\nvar CallHierarchyDirection;\r\n(function (CallHierarchyDirection) {\r\n    /**\r\n     * The callers\r\n     */\r\n    CallHierarchyDirection.CallsFrom = 1;\r\n    /**\r\n     * The callees\r\n     */\r\n    CallHierarchyDirection.CallsTo = 2;\r\n})(CallHierarchyDirection = exports.CallHierarchyDirection || (exports.CallHierarchyDirection = {}));\r\n/**\r\n * Request to provide the call hierarchy at a given text document position.\r\n *\r\n * The request's parameter is of type [CallHierarchyParams](#CallHierarchyParams). The response\r\n * is of type [CallHierarchyCall[]](#CallHierarchyCall) or a Thenable that resolves to such.\r\n *\r\n * Evaluates the symbol defined (or referenced) at the given position, and returns all incoming or outgoing calls to the symbol(s).\r\n */\r\nvar CallHierarchyRequest;\r\n(function (CallHierarchyRequest) {\r\n    CallHierarchyRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/callHierarchy');\r\n})(CallHierarchyRequest = exports.CallHierarchyRequest || (exports.CallHierarchyRequest = {}));\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\n/**\r\n * The `window/progress/start` notification is sent from the server to the client\r\n * to initiate a progress.\r\n */\r\nvar ProgressStartNotification;\r\n(function (ProgressStartNotification) {\r\n    ProgressStartNotification.type = new vscode_jsonrpc_1.NotificationType('window/progress/start');\r\n})(ProgressStartNotification = exports.ProgressStartNotification || (exports.ProgressStartNotification = {}));\r\n/**\r\n * The `window/progress/report` notification is sent from the server to the client\r\n * to initiate a progress.\r\n */\r\nvar ProgressReportNotification;\r\n(function (ProgressReportNotification) {\r\n    ProgressReportNotification.type = new vscode_jsonrpc_1.NotificationType('window/progress/report');\r\n})(ProgressReportNotification = exports.ProgressReportNotification || (exports.ProgressReportNotification = {}));\r\n/**\r\n * The `window/progress/done` notification is sent from the server to the client\r\n * to initiate a progress.\r\n */\r\nvar ProgressDoneNotification;\r\n(function (ProgressDoneNotification) {\r\n    ProgressDoneNotification.type = new vscode_jsonrpc_1.NotificationType('window/progress/done');\r\n})(ProgressDoneNotification = exports.ProgressDoneNotification || (exports.ProgressDoneNotification = {}));\r\n/**\r\n * The `window/progress/cancel` notification is sent client to the server to cancel a progress\r\n * initiated on the server side.\r\n */\r\nvar ProgressCancelNotification;\r\n(function (ProgressCancelNotification) {\r\n    ProgressCancelNotification.type = new vscode_jsonrpc_1.NotificationType('window/progress/cancel');\r\n})(ProgressCancelNotification = exports.ProgressCancelNotification || (exports.ProgressCancelNotification = {}));\r\n","\"use strict\";\r\n/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\nconst vscode_languageserver_types_1 = require(\"vscode-languageserver-types\");\r\n/**\r\n * The SelectionRange namespace provides helper function to work with\r\n * SelectionRange literals.\r\n */\r\nvar SelectionRange;\r\n(function (SelectionRange) {\r\n    /**\r\n     * Creates a new SelectionRange\r\n     * @param range the range.\r\n     * @param parent an optional parent.\r\n     */\r\n    function create(range, parent) {\r\n        return { range, parent };\r\n    }\r\n    SelectionRange.create = create;\r\n    function is(value) {\r\n        let candidate = value;\r\n        return candidate !== undefined && vscode_languageserver_types_1.Range.is(candidate.range) && (candidate.parent === undefined || SelectionRange.is(candidate.parent));\r\n    }\r\n    SelectionRange.is = is;\r\n})(SelectionRange = exports.SelectionRange || (exports.SelectionRange = {}));\r\n/**\r\n * A request to provide selection ranges in a document. The request's\r\n * parameter is of type [SelectionRangeParams](#SelectionRangeParams), the\r\n * response is of type [SelectionRange[]](#SelectionRange[]) or a Thenable\r\n * that resolves to such.\r\n */\r\nvar SelectionRangeRequest;\r\n(function (SelectionRangeRequest) {\r\n    SelectionRangeRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/selectionRange');\r\n})(SelectionRangeRequest = exports.SelectionRangeRequest || (exports.SelectionRangeRequest = {}));\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\r\nconst Is = require(\"./utils/is\");\r\nexports.ConfigurationFeature = (Base) => {\r\n    return class extends Base {\r\n        getConfiguration(arg) {\r\n            if (!arg) {\r\n                return this._getConfiguration({});\r\n            }\r\n            else if (Is.string(arg)) {\r\n                return this._getConfiguration({ section: arg });\r\n            }\r\n            else {\r\n                return this._getConfiguration(arg);\r\n            }\r\n        }\r\n        _getConfiguration(arg) {\r\n            let params = {\r\n                items: Array.isArray(arg) ? arg : [arg]\r\n            };\r\n            return this.connection.sendRequest(vscode_languageserver_protocol_1.ConfigurationRequest.type, params).then((result) => {\r\n                return Array.isArray(arg) ? result : result[0];\r\n            });\r\n        }\r\n    };\r\n};\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\r\nexports.WorkspaceFoldersFeature = (Base) => {\r\n    return class extends Base {\r\n        initialize(capabilities) {\r\n            let workspaceCapabilities = capabilities.workspace;\r\n            if (workspaceCapabilities && workspaceCapabilities.workspaceFolders) {\r\n                this._onDidChangeWorkspaceFolders = new vscode_languageserver_protocol_1.Emitter();\r\n                this.connection.onNotification(vscode_languageserver_protocol_1.DidChangeWorkspaceFoldersNotification.type, (params) => {\r\n                    this._onDidChangeWorkspaceFolders.fire(params.event);\r\n                });\r\n            }\r\n        }\r\n        getWorkspaceFolders() {\r\n            return this.connection.sendRequest(vscode_languageserver_protocol_1.WorkspaceFoldersRequest.type);\r\n        }\r\n        get onDidChangeWorkspaceFolders() {\r\n            if (!this._onDidChangeWorkspaceFolders) {\r\n                throw new Error('Client doesn\\'t support sending workspace folder change events.');\r\n            }\r\n            if (!this._unregistration) {\r\n                this._unregistration = this.connection.client.register(vscode_languageserver_protocol_1.DidChangeWorkspaceFoldersNotification.type);\r\n            }\r\n            return this._onDidChangeWorkspaceFolders.event;\r\n        }\r\n    };\r\n};\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst url = require(\"url\");\r\nconst path = require(\"path\");\r\nconst fs = require(\"fs\");\r\nconst child_process_1 = require(\"child_process\");\r\n/**\r\n * @deprecated Use the `vscode-uri` npm module which provides a more\r\n * complete implementation of handling VS Code URIs.\r\n */\r\nfunction uriToFilePath(uri) {\r\n    let parsed = url.parse(uri);\r\n    if (parsed.protocol !== 'file:' || !parsed.path) {\r\n        return undefined;\r\n    }\r\n    let segments = parsed.path.split('/');\r\n    for (var i = 0, len = segments.length; i < len; i++) {\r\n        segments[i] = decodeURIComponent(segments[i]);\r\n    }\r\n    if (process.platform === 'win32' && segments.length > 1) {\r\n        let first = segments[0];\r\n        let second = segments[1];\r\n        // Do we have a drive letter and we started with a / which is the\r\n        // case if the first segement is empty (see split above)\r\n        if (first.length === 0 && second.length > 1 && second[1] === ':') {\r\n            // Remove first slash\r\n            segments.shift();\r\n        }\r\n    }\r\n    return path.normalize(segments.join('/'));\r\n}\r\nexports.uriToFilePath = uriToFilePath;\r\nfunction isWindows() {\r\n    return process.platform === 'win32';\r\n}\r\nfunction resolve(moduleName, nodePath, cwd, tracer) {\r\n    const nodePathKey = 'NODE_PATH';\r\n    const app = [\r\n        \"var p = process;\",\r\n        \"p.on('message',function(m){\",\r\n        \"if(m.c==='e'){\",\r\n        \"p.exit(0);\",\r\n        \"}\",\r\n        \"else if(m.c==='rs'){\",\r\n        \"try{\",\r\n        \"var r=require.resolve(m.a);\",\r\n        \"p.send({c:'r',s:true,r:r});\",\r\n        \"}\",\r\n        \"catch(err){\",\r\n        \"p.send({c:'r',s:false});\",\r\n        \"}\",\r\n        \"}\",\r\n        \"});\"\r\n    ].join('');\r\n    return new Promise((resolve, reject) => {\r\n        let env = process.env;\r\n        let newEnv = Object.create(null);\r\n        Object.keys(env).forEach(key => newEnv[key] = env[key]);\r\n        if (nodePath) {\r\n            if (newEnv[nodePathKey]) {\r\n                newEnv[nodePathKey] = nodePath + path.delimiter + newEnv[nodePathKey];\r\n            }\r\n            else {\r\n                newEnv[nodePathKey] = nodePath;\r\n            }\r\n            if (tracer) {\r\n                tracer(`NODE_PATH value is: ${newEnv[nodePathKey]}`);\r\n            }\r\n        }\r\n        newEnv['ELECTRON_RUN_AS_NODE'] = '1';\r\n        try {\r\n            let cp = child_process_1.fork('', [], {\r\n                cwd: cwd,\r\n                env: newEnv,\r\n                execArgv: ['-e', app]\r\n            });\r\n            if (cp.pid === void 0) {\r\n                reject(new Error(`Starting process to resolve node module  ${moduleName} failed`));\r\n                return;\r\n            }\r\n            cp.on('error', (error) => {\r\n                reject(error);\r\n            });\r\n            cp.on('message', (message) => {\r\n                if (message.c === 'r') {\r\n                    cp.send({ c: 'e' });\r\n                    if (message.s) {\r\n                        resolve(message.r);\r\n                    }\r\n                    else {\r\n                        reject(new Error(`Failed to resolve module: ${moduleName}`));\r\n                    }\r\n                }\r\n            });\r\n            let message = {\r\n                c: 'rs',\r\n                a: moduleName\r\n            };\r\n            cp.send(message);\r\n        }\r\n        catch (error) {\r\n            reject(error);\r\n        }\r\n    });\r\n}\r\nexports.resolve = resolve;\r\nfunction resolveGlobalNodePath(tracer) {\r\n    let npmCommand = 'npm';\r\n    let options = {\r\n        encoding: 'utf8'\r\n    };\r\n    if (isWindows()) {\r\n        npmCommand = 'npm.cmd';\r\n        options.shell = true;\r\n    }\r\n    let handler = () => { };\r\n    try {\r\n        process.on('SIGPIPE', handler);\r\n        let stdout = child_process_1.spawnSync(npmCommand, ['config', 'get', 'prefix'], options).stdout;\r\n        if (!stdout) {\r\n            if (tracer) {\r\n                tracer(`'npm config get prefix' didn't return a value.`);\r\n            }\r\n            return undefined;\r\n        }\r\n        let prefix = stdout.trim();\r\n        if (tracer) {\r\n            tracer(`'npm config get prefix' value is: ${prefix}`);\r\n        }\r\n        if (prefix.length > 0) {\r\n            if (isWindows()) {\r\n                return path.join(prefix, 'node_modules');\r\n            }\r\n            else {\r\n                return path.join(prefix, 'lib', 'node_modules');\r\n            }\r\n        }\r\n        return undefined;\r\n    }\r\n    catch (err) {\r\n        return undefined;\r\n    }\r\n    finally {\r\n        process.removeListener('SIGPIPE', handler);\r\n    }\r\n}\r\nexports.resolveGlobalNodePath = resolveGlobalNodePath;\r\nfunction resolveGlobalYarnPath(tracer) {\r\n    let yarnCommand = 'yarn';\r\n    let options = {\r\n        encoding: 'utf8'\r\n    };\r\n    if (isWindows()) {\r\n        yarnCommand = 'yarn.cmd';\r\n        options.shell = true;\r\n    }\r\n    let handler = () => { };\r\n    try {\r\n        process.on('SIGPIPE', handler);\r\n        let results = child_process_1.spawnSync(yarnCommand, ['global', 'dir', '--json'], options);\r\n        let stdout = results.stdout;\r\n        if (!stdout) {\r\n            if (tracer) {\r\n                tracer(`'yarn global dir' didn't return a value.`);\r\n                if (results.stderr) {\r\n                    tracer(results.stderr);\r\n                }\r\n            }\r\n            return undefined;\r\n        }\r\n        let lines = stdout.trim().split(/\\r?\\n/);\r\n        for (let line of lines) {\r\n            try {\r\n                let yarn = JSON.parse(line);\r\n                if (yarn.type === 'log') {\r\n                    return path.join(yarn.data, 'node_modules');\r\n                }\r\n            }\r\n            catch (e) {\r\n                // Do nothing. Ignore the line\r\n            }\r\n        }\r\n        return undefined;\r\n    }\r\n    catch (err) {\r\n        return undefined;\r\n    }\r\n    finally {\r\n        process.removeListener('SIGPIPE', handler);\r\n    }\r\n}\r\nexports.resolveGlobalYarnPath = resolveGlobalYarnPath;\r\nvar FileSystem;\r\n(function (FileSystem) {\r\n    let _isCaseSensitive = undefined;\r\n    function isCaseSensitive() {\r\n        if (_isCaseSensitive !== void 0) {\r\n            return _isCaseSensitive;\r\n        }\r\n        if (process.platform === 'win32') {\r\n            _isCaseSensitive = false;\r\n        }\r\n        else {\r\n            // convert current file name to upper case / lower case and check if file exists\r\n            // (guards against cases when name is already all uppercase or lowercase)\r\n            _isCaseSensitive = !fs.existsSync(__filename.toUpperCase()) || !fs.existsSync(__filename.toLowerCase());\r\n        }\r\n        return _isCaseSensitive;\r\n    }\r\n    FileSystem.isCaseSensitive = isCaseSensitive;\r\n    function isParent(parent, child) {\r\n        if (isCaseSensitive()) {\r\n            return path.normalize(child).indexOf(path.normalize(parent)) === 0;\r\n        }\r\n        else {\r\n            return path.normalize(child).toLowerCase().indexOf(path.normalize(parent).toLowerCase()) == 0;\r\n        }\r\n    }\r\n    FileSystem.isParent = isParent;\r\n})(FileSystem = exports.FileSystem || (exports.FileSystem = {}));\r\nfunction resolveModulePath(workspaceRoot, moduleName, nodePath, tracer) {\r\n    if (nodePath) {\r\n        if (!path.isAbsolute(nodePath)) {\r\n            nodePath = path.join(workspaceRoot, nodePath);\r\n        }\r\n        return resolve(moduleName, nodePath, nodePath, tracer).then((value) => {\r\n            if (FileSystem.isParent(nodePath, value)) {\r\n                return value;\r\n            }\r\n            else {\r\n                return Promise.reject(new Error(`Failed to load ${moduleName} from node path location.`));\r\n            }\r\n        }).then(undefined, (_error) => {\r\n            return resolve(moduleName, resolveGlobalNodePath(tracer), workspaceRoot, tracer);\r\n        });\r\n    }\r\n    else {\r\n        return resolve(moduleName, resolveGlobalNodePath(tracer), workspaceRoot, tracer);\r\n    }\r\n}\r\nexports.resolveModulePath = resolveModulePath;\r\n","module.exports = require(\"url\");","\"use strict\";\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__export(require(\"./pieceTreeBase\"));\n__export(require(\"./pieceTreeBuilder\"));\n","\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nclass TreeNode {\n    constructor(piece, color) {\n        this.piece = piece;\n        this.color = color;\n        this.size_left = 0;\n        this.lf_left = 0;\n        this.parent = this;\n        this.left = this;\n        this.right = this;\n    }\n    next() {\n        if (this.right !== exports.SENTINEL) {\n            return leftest(this.right);\n        }\n        let node = this;\n        while (node.parent !== exports.SENTINEL) {\n            if (node.parent.left === node) {\n                break;\n            }\n            node = node.parent;\n        }\n        if (node.parent === exports.SENTINEL) {\n            return exports.SENTINEL;\n        }\n        else {\n            return node.parent;\n        }\n    }\n    prev() {\n        if (this.left !== exports.SENTINEL) {\n            return righttest(this.left);\n        }\n        let node = this;\n        while (node.parent !== exports.SENTINEL) {\n            if (node.parent.right === node) {\n                break;\n            }\n            node = node.parent;\n        }\n        if (node.parent === exports.SENTINEL) {\n            return exports.SENTINEL;\n        }\n        else {\n            return node.parent;\n        }\n    }\n    detach() {\n        this.parent = null;\n        this.left = null;\n        this.right = null;\n    }\n}\nexports.TreeNode = TreeNode;\nexports.SENTINEL = new TreeNode(null, 0 /* Black */);\nexports.SENTINEL.parent = exports.SENTINEL;\nexports.SENTINEL.left = exports.SENTINEL;\nexports.SENTINEL.right = exports.SENTINEL;\nexports.SENTINEL.color = 0 /* Black */;\nfunction leftest(node) {\n    while (node.left !== exports.SENTINEL) {\n        node = node.left;\n    }\n    return node;\n}\nexports.leftest = leftest;\nfunction righttest(node) {\n    while (node.right !== exports.SENTINEL) {\n        node = node.right;\n    }\n    return node;\n}\nexports.righttest = righttest;\nfunction calculateSize(node) {\n    if (node === exports.SENTINEL) {\n        return 0;\n    }\n    return node.size_left + node.piece.length + calculateSize(node.right);\n}\nexports.calculateSize = calculateSize;\nfunction calculateLF(node) {\n    if (node === exports.SENTINEL) {\n        return 0;\n    }\n    return node.lf_left + node.piece.lineFeedCnt + calculateLF(node.right);\n}\nexports.calculateLF = calculateLF;\nfunction resetSentinel() {\n    exports.SENTINEL.parent = exports.SENTINEL;\n}\nexports.resetSentinel = resetSentinel;\nfunction leftRotate(tree, x) {\n    let y = x.right;\n    // fix size_left\n    y.size_left += x.size_left + (x.piece ? x.piece.length : 0);\n    y.lf_left += x.lf_left + (x.piece ? x.piece.lineFeedCnt : 0);\n    x.right = y.left;\n    if (y.left !== exports.SENTINEL) {\n        y.left.parent = x;\n    }\n    y.parent = x.parent;\n    if (x.parent === exports.SENTINEL) {\n        tree.root = y;\n    }\n    else if (x.parent.left === x) {\n        x.parent.left = y;\n    }\n    else {\n        x.parent.right = y;\n    }\n    y.left = x;\n    x.parent = y;\n}\nexports.leftRotate = leftRotate;\nfunction rightRotate(tree, y) {\n    let x = y.left;\n    y.left = x.right;\n    if (x.right !== exports.SENTINEL) {\n        x.right.parent = y;\n    }\n    x.parent = y.parent;\n    // fix size_left\n    y.size_left -= x.size_left + (x.piece ? x.piece.length : 0);\n    y.lf_left -= x.lf_left + (x.piece ? x.piece.lineFeedCnt : 0);\n    if (y.parent === exports.SENTINEL) {\n        tree.root = x;\n    }\n    else if (y === y.parent.right) {\n        y.parent.right = x;\n    }\n    else {\n        y.parent.left = x;\n    }\n    x.right = y;\n    y.parent = x;\n}\nexports.rightRotate = rightRotate;\nfunction rbDelete(tree, z) {\n    let x;\n    let y;\n    if (z.left === exports.SENTINEL) {\n        y = z;\n        x = y.right;\n    }\n    else if (z.right === exports.SENTINEL) {\n        y = z;\n        x = y.left;\n    }\n    else {\n        y = leftest(z.right);\n        x = y.right;\n    }\n    if (y === tree.root) {\n        tree.root = x;\n        // if x is null, we are removing the only node\n        x.color = 0 /* Black */;\n        z.detach();\n        resetSentinel();\n        tree.root.parent = exports.SENTINEL;\n        return;\n    }\n    let yWasRed = (y.color === 1 /* Red */);\n    if (y === y.parent.left) {\n        y.parent.left = x;\n    }\n    else {\n        y.parent.right = x;\n    }\n    if (y === z) {\n        x.parent = y.parent;\n        recomputeTreeMetadata(tree, x);\n    }\n    else {\n        if (y.parent === z) {\n            x.parent = y;\n        }\n        else {\n            x.parent = y.parent;\n        }\n        // as we make changes to x's hierarchy, update size_left of subtree first\n        recomputeTreeMetadata(tree, x);\n        y.left = z.left;\n        y.right = z.right;\n        y.parent = z.parent;\n        y.color = z.color;\n        if (z === tree.root) {\n            tree.root = y;\n        }\n        else {\n            if (z === z.parent.left) {\n                z.parent.left = y;\n            }\n            else {\n                z.parent.right = y;\n            }\n        }\n        if (y.left !== exports.SENTINEL) {\n            y.left.parent = y;\n        }\n        if (y.right !== exports.SENTINEL) {\n            y.right.parent = y;\n        }\n        // update metadata\n        // we replace z with y, so in this sub tree, the length change is z.item.length\n        y.size_left = z.size_left;\n        y.lf_left = z.lf_left;\n        recomputeTreeMetadata(tree, y);\n    }\n    z.detach();\n    if (x.parent.left === x) {\n        let newSizeLeft = calculateSize(x);\n        let newLFLeft = calculateLF(x);\n        if (newSizeLeft !== x.parent.size_left || newLFLeft !== x.parent.lf_left) {\n            let delta = newSizeLeft - x.parent.size_left;\n            let lf_delta = newLFLeft - x.parent.lf_left;\n            x.parent.size_left = newSizeLeft;\n            x.parent.lf_left = newLFLeft;\n            updateTreeMetadata(tree, x.parent, delta, lf_delta);\n        }\n    }\n    recomputeTreeMetadata(tree, x.parent);\n    if (yWasRed) {\n        resetSentinel();\n        return;\n    }\n    // RB-DELETE-FIXUP\n    let w;\n    while (x !== tree.root && x.color === 0 /* Black */) {\n        if (x === x.parent.left) {\n            w = x.parent.right;\n            if (w.color === 1 /* Red */) {\n                w.color = 0 /* Black */;\n                x.parent.color = 1 /* Red */;\n                leftRotate(tree, x.parent);\n                w = x.parent.right;\n            }\n            if (w.left.color === 0 /* Black */ && w.right.color === 0 /* Black */) {\n                w.color = 1 /* Red */;\n                x = x.parent;\n            }\n            else {\n                if (w.right.color === 0 /* Black */) {\n                    w.left.color = 0 /* Black */;\n                    w.color = 1 /* Red */;\n                    rightRotate(tree, w);\n                    w = x.parent.right;\n                }\n                w.color = x.parent.color;\n                x.parent.color = 0 /* Black */;\n                w.right.color = 0 /* Black */;\n                leftRotate(tree, x.parent);\n                x = tree.root;\n            }\n        }\n        else {\n            w = x.parent.left;\n            if (w.color === 1 /* Red */) {\n                w.color = 0 /* Black */;\n                x.parent.color = 1 /* Red */;\n                rightRotate(tree, x.parent);\n                w = x.parent.left;\n            }\n            if (w.left.color === 0 /* Black */ && w.right.color === 0 /* Black */) {\n                w.color = 1 /* Red */;\n                x = x.parent;\n            }\n            else {\n                if (w.left.color === 0 /* Black */) {\n                    w.right.color = 0 /* Black */;\n                    w.color = 1 /* Red */;\n                    leftRotate(tree, w);\n                    w = x.parent.left;\n                }\n                w.color = x.parent.color;\n                x.parent.color = 0 /* Black */;\n                w.left.color = 0 /* Black */;\n                rightRotate(tree, x.parent);\n                x = tree.root;\n            }\n        }\n    }\n    x.color = 0 /* Black */;\n    resetSentinel();\n}\nexports.rbDelete = rbDelete;\nfunction fixInsert(tree, x) {\n    recomputeTreeMetadata(tree, x);\n    while (x !== tree.root && x.parent.color === 1 /* Red */) {\n        if (x.parent === x.parent.parent.left) {\n            const y = x.parent.parent.right;\n            if (y.color === 1 /* Red */) {\n                x.parent.color = 0 /* Black */;\n                y.color = 0 /* Black */;\n                x.parent.parent.color = 1 /* Red */;\n                x = x.parent.parent;\n            }\n            else {\n                if (x === x.parent.right) {\n                    x = x.parent;\n                    leftRotate(tree, x);\n                }\n                x.parent.color = 0 /* Black */;\n                x.parent.parent.color = 1 /* Red */;\n                rightRotate(tree, x.parent.parent);\n            }\n        }\n        else {\n            const y = x.parent.parent.left;\n            if (y.color === 1 /* Red */) {\n                x.parent.color = 0 /* Black */;\n                y.color = 0 /* Black */;\n                x.parent.parent.color = 1 /* Red */;\n                x = x.parent.parent;\n            }\n            else {\n                if (x === x.parent.left) {\n                    x = x.parent;\n                    rightRotate(tree, x);\n                }\n                x.parent.color = 0 /* Black */;\n                x.parent.parent.color = 1 /* Red */;\n                leftRotate(tree, x.parent.parent);\n            }\n        }\n    }\n    tree.root.color = 0 /* Black */;\n}\nexports.fixInsert = fixInsert;\nfunction updateTreeMetadata(tree, x, delta, lineFeedCntDelta) {\n    // node length change or line feed count change\n    while (x !== tree.root && x !== exports.SENTINEL) {\n        if (x.parent.left === x) {\n            x.parent.size_left += delta;\n            x.parent.lf_left += lineFeedCntDelta;\n        }\n        x = x.parent;\n    }\n}\nexports.updateTreeMetadata = updateTreeMetadata;\nfunction recomputeTreeMetadata(tree, x) {\n    let delta = 0;\n    let lf_delta = 0;\n    if (x === tree.root) {\n        return;\n    }\n    if (delta === 0) {\n        // go upwards till the node whose left subtree is changed.\n        while (x !== tree.root && x === x.parent.right) {\n            x = x.parent;\n        }\n        if (x === tree.root) {\n            // well, it means we add a node to the end (inorder)\n            return;\n        }\n        // x is the node whose right subtree is changed.\n        x = x.parent;\n        delta = calculateSize(x.left) - x.size_left;\n        lf_delta = calculateLF(x.left) - x.lf_left;\n        x.size_left += delta;\n        x.lf_left += lf_delta;\n    }\n    // go upwards till root. O(logN)\n    while (x !== tree.root && (delta !== 0 || lf_delta !== 0)) {\n        if (x.parent.left === x) {\n            x.parent.size_left += delta;\n            x.parent.lf_left += lf_delta;\n        }\n        x = x.parent;\n    }\n}\nexports.recomputeTreeMetadata = recomputeTreeMetadata;\n","\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst pieceTreeBase_1 = require(\"./pieceTreeBase\");\nexports.UTF8_BOM_CHARACTER = String.fromCharCode(65279 /* UTF8_BOM */);\nfunction startsWithUTF8BOM(str) {\n    return !!(str && str.length > 0 && str.charCodeAt(0) === 65279 /* UTF8_BOM */);\n}\nexports.startsWithUTF8BOM = startsWithUTF8BOM;\nclass PieceTreeTextBufferFactory {\n    constructor(_chunks, _bom, _cr, _lf, _crlf, _normalizeEOL) {\n        this._chunks = _chunks;\n        this._bom = _bom;\n        this._cr = _cr;\n        this._lf = _lf;\n        this._crlf = _crlf;\n        this._normalizeEOL = _normalizeEOL;\n    }\n    _getEOL(defaultEOL) {\n        const totalEOLCount = this._cr + this._lf + this._crlf;\n        const totalCRCount = this._cr + this._crlf;\n        if (totalEOLCount === 0) {\n            // This is an empty file or a file with precisely one line\n            return (defaultEOL === 1 /* LF */ ? '\\n' : '\\r\\n');\n        }\n        if (totalCRCount > totalEOLCount / 2) {\n            // More than half of the file contains \\r\\n ending lines\n            return '\\r\\n';\n        }\n        // At least one line more ends in \\n\n        return '\\n';\n    }\n    create(defaultEOL) {\n        const eol = this._getEOL(defaultEOL);\n        let chunks = this._chunks;\n        if (this._normalizeEOL &&\n            ((eol === '\\r\\n' && (this._cr > 0 || this._lf > 0))\n                || (eol === '\\n' && (this._cr > 0 || this._crlf > 0)))) {\n            // Normalize pieces\n            for (let i = 0, len = chunks.length; i < len; i++) {\n                let str = chunks[i].buffer.replace(/\\r\\n|\\r|\\n/g, eol);\n                let newLineStart = pieceTreeBase_1.createLineStartsFast(str);\n                chunks[i] = new pieceTreeBase_1.StringBuffer(str, newLineStart);\n            }\n        }\n        return new pieceTreeBase_1.PieceTreeBase(chunks, eol, this._normalizeEOL);\n    }\n    getFirstLineText(lengthLimit) {\n        return this._chunks[0].buffer.substr(0, 100).split(/\\r\\n|\\r|\\n/)[0];\n    }\n}\nexports.PieceTreeTextBufferFactory = PieceTreeTextBufferFactory;\nclass PieceTreeTextBufferBuilder {\n    constructor() {\n        this.chunks = [];\n        this.BOM = '';\n        this._hasPreviousChar = false;\n        this._previousChar = 0;\n        this._tmpLineStarts = [];\n        this.cr = 0;\n        this.lf = 0;\n        this.crlf = 0;\n    }\n    acceptChunk(chunk) {\n        if (chunk.length === 0) {\n            return;\n        }\n        if (this.chunks.length === 0) {\n            if (startsWithUTF8BOM(chunk)) {\n                this.BOM = exports.UTF8_BOM_CHARACTER;\n                chunk = chunk.substr(1);\n            }\n        }\n        const lastChar = chunk.charCodeAt(chunk.length - 1);\n        if (lastChar === 13 /* CarriageReturn */ || (lastChar >= 0xD800 && lastChar <= 0xDBFF)) {\n            // last character is \\r or a high surrogate => keep it back\n            this._acceptChunk1(chunk.substr(0, chunk.length - 1), false);\n            this._hasPreviousChar = true;\n            this._previousChar = lastChar;\n        }\n        else {\n            this._acceptChunk1(chunk, false);\n            this._hasPreviousChar = false;\n            this._previousChar = lastChar;\n        }\n    }\n    _acceptChunk1(chunk, allowEmptyStrings) {\n        if (!allowEmptyStrings && chunk.length === 0) {\n            // Nothing to do\n            return;\n        }\n        if (this._hasPreviousChar) {\n            this._acceptChunk2(String.fromCharCode(this._previousChar) + chunk);\n        }\n        else {\n            this._acceptChunk2(chunk);\n        }\n    }\n    _acceptChunk2(chunk) {\n        const lineStarts = pieceTreeBase_1.createLineStarts(this._tmpLineStarts, chunk);\n        this.chunks.push(new pieceTreeBase_1.StringBuffer(chunk, lineStarts.lineStarts));\n        this.cr += lineStarts.cr;\n        this.lf += lineStarts.lf;\n        this.crlf += lineStarts.crlf;\n    }\n    finish(normalizeEOL = true) {\n        this._finish();\n        return new PieceTreeTextBufferFactory(this.chunks, this.BOM, this.cr, this.lf, this.crlf, normalizeEOL);\n    }\n    _finish() {\n        if (this.chunks.length === 0) {\n            this._acceptChunk1('', true);\n        }\n        if (this._hasPreviousChar) {\n            this._hasPreviousChar = false;\n            // recreate last chunk\n            let lastChunk = this.chunks[this.chunks.length - 1];\n            lastChunk.buffer += String.fromCharCode(this._previousChar);\n            let newLineStarts = pieceTreeBase_1.createLineStartsFast(lastChunk.buffer);\n            lastChunk.lineStarts = newLineStarts;\n            if (this._previousChar === 13 /* CarriageReturn */) {\n                this.cr++;\n            }\n        }\n    }\n}\nexports.PieceTreeTextBufferBuilder = PieceTreeTextBufferBuilder;\n","\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst position_1 = require(\"./position\");\n/**\n * A range in the editor. (startLineNumber,startColumn) is <= (endLineNumber,endColumn)\n */\nclass Range {\n    constructor(startLineNumber, startColumn, endLineNumber, endColumn) {\n        if ((startLineNumber > endLineNumber) || (startLineNumber === endLineNumber && startColumn > endColumn)) {\n            this.startLineNumber = endLineNumber;\n            this.startColumn = endColumn;\n            this.endLineNumber = startLineNumber;\n            this.endColumn = startColumn;\n        }\n        else {\n            this.startLineNumber = startLineNumber;\n            this.startColumn = startColumn;\n            this.endLineNumber = endLineNumber;\n            this.endColumn = endColumn;\n        }\n    }\n    /**\n     * Test if this range is empty.\n     */\n    isEmpty() {\n        return Range.isEmpty(this);\n    }\n    /**\n     * Test if `range` is empty.\n     */\n    static isEmpty(range) {\n        return (range.startLineNumber === range.endLineNumber && range.startColumn === range.endColumn);\n    }\n    /**\n     * Test if position is in this range. If the position is at the edges, will return true.\n     */\n    containsPosition(position) {\n        return Range.containsPosition(this, position);\n    }\n    /**\n     * Test if `position` is in `range`. If the position is at the edges, will return true.\n     */\n    static containsPosition(range, position) {\n        if (position.lineNumber < range.startLineNumber || position.lineNumber > range.endLineNumber) {\n            return false;\n        }\n        if (position.lineNumber === range.startLineNumber && position.column < range.startColumn) {\n            return false;\n        }\n        if (position.lineNumber === range.endLineNumber && position.column > range.endColumn) {\n            return false;\n        }\n        return true;\n    }\n    /**\n     * Test if range is in this range. If the range is equal to this range, will return true.\n     */\n    containsRange(range) {\n        return Range.containsRange(this, range);\n    }\n    /**\n     * Test if `otherRange` is in `range`. If the ranges are equal, will return true.\n     */\n    static containsRange(range, otherRange) {\n        if (otherRange.startLineNumber < range.startLineNumber || otherRange.endLineNumber < range.startLineNumber) {\n            return false;\n        }\n        if (otherRange.startLineNumber > range.endLineNumber || otherRange.endLineNumber > range.endLineNumber) {\n            return false;\n        }\n        if (otherRange.startLineNumber === range.startLineNumber && otherRange.startColumn < range.startColumn) {\n            return false;\n        }\n        if (otherRange.endLineNumber === range.endLineNumber && otherRange.endColumn > range.endColumn) {\n            return false;\n        }\n        return true;\n    }\n    /**\n     * A reunion of the two ranges.\n     * The smallest position will be used as the start point, and the largest one as the end point.\n     */\n    plusRange(range) {\n        return Range.plusRange(this, range);\n    }\n    /**\n     * A reunion of the two ranges.\n     * The smallest position will be used as the start point, and the largest one as the end point.\n     */\n    static plusRange(a, b) {\n        let startLineNumber;\n        let startColumn;\n        let endLineNumber;\n        let endColumn;\n        if (b.startLineNumber < a.startLineNumber) {\n            startLineNumber = b.startLineNumber;\n            startColumn = b.startColumn;\n        }\n        else if (b.startLineNumber === a.startLineNumber) {\n            startLineNumber = b.startLineNumber;\n            startColumn = Math.min(b.startColumn, a.startColumn);\n        }\n        else {\n            startLineNumber = a.startLineNumber;\n            startColumn = a.startColumn;\n        }\n        if (b.endLineNumber > a.endLineNumber) {\n            endLineNumber = b.endLineNumber;\n            endColumn = b.endColumn;\n        }\n        else if (b.endLineNumber === a.endLineNumber) {\n            endLineNumber = b.endLineNumber;\n            endColumn = Math.max(b.endColumn, a.endColumn);\n        }\n        else {\n            endLineNumber = a.endLineNumber;\n            endColumn = a.endColumn;\n        }\n        return new Range(startLineNumber, startColumn, endLineNumber, endColumn);\n    }\n    /**\n     * A intersection of the two ranges.\n     */\n    intersectRanges(range) {\n        return Range.intersectRanges(this, range);\n    }\n    /**\n     * A intersection of the two ranges.\n     */\n    static intersectRanges(a, b) {\n        let resultStartLineNumber = a.startLineNumber;\n        let resultStartColumn = a.startColumn;\n        let resultEndLineNumber = a.endLineNumber;\n        let resultEndColumn = a.endColumn;\n        let otherStartLineNumber = b.startLineNumber;\n        let otherStartColumn = b.startColumn;\n        let otherEndLineNumber = b.endLineNumber;\n        let otherEndColumn = b.endColumn;\n        if (resultStartLineNumber < otherStartLineNumber) {\n            resultStartLineNumber = otherStartLineNumber;\n            resultStartColumn = otherStartColumn;\n        }\n        else if (resultStartLineNumber === otherStartLineNumber) {\n            resultStartColumn = Math.max(resultStartColumn, otherStartColumn);\n        }\n        if (resultEndLineNumber > otherEndLineNumber) {\n            resultEndLineNumber = otherEndLineNumber;\n            resultEndColumn = otherEndColumn;\n        }\n        else if (resultEndLineNumber === otherEndLineNumber) {\n            resultEndColumn = Math.min(resultEndColumn, otherEndColumn);\n        }\n        // Check if selection is now empty\n        if (resultStartLineNumber > resultEndLineNumber) {\n            return null;\n        }\n        if (resultStartLineNumber === resultEndLineNumber && resultStartColumn > resultEndColumn) {\n            return null;\n        }\n        return new Range(resultStartLineNumber, resultStartColumn, resultEndLineNumber, resultEndColumn);\n    }\n    /**\n     * Test if this range equals other.\n     */\n    equalsRange(other) {\n        return Range.equalsRange(this, other);\n    }\n    /**\n     * Test if range `a` equals `b`.\n     */\n    static equalsRange(a, b) {\n        return (!!a &&\n            !!b &&\n            a.startLineNumber === b.startLineNumber &&\n            a.startColumn === b.startColumn &&\n            a.endLineNumber === b.endLineNumber &&\n            a.endColumn === b.endColumn);\n    }\n    /**\n     * Return the end position (which will be after or equal to the start position)\n     */\n    getEndPosition() {\n        return new position_1.Position(this.endLineNumber, this.endColumn);\n    }\n    /**\n     * Return the start position (which will be before or equal to the end position)\n     */\n    getStartPosition() {\n        return new position_1.Position(this.startLineNumber, this.startColumn);\n    }\n    /**\n     * Transform to a user presentable string representation.\n     */\n    toString() {\n        return '[' + this.startLineNumber + ',' + this.startColumn + ' -> ' + this.endLineNumber + ',' + this.endColumn + ']';\n    }\n    /**\n     * Create a new range using this range's start position, and using endLineNumber and endColumn as the end position.\n     */\n    setEndPosition(endLineNumber, endColumn) {\n        return new Range(this.startLineNumber, this.startColumn, endLineNumber, endColumn);\n    }\n    /**\n     * Create a new range using this range's end position, and using startLineNumber and startColumn as the start position.\n     */\n    setStartPosition(startLineNumber, startColumn) {\n        return new Range(startLineNumber, startColumn, this.endLineNumber, this.endColumn);\n    }\n    /**\n     * Create a new empty range using this range's start position.\n     */\n    collapseToStart() {\n        return Range.collapseToStart(this);\n    }\n    /**\n     * Create a new empty range using this range's start position.\n     */\n    static collapseToStart(range) {\n        return new Range(range.startLineNumber, range.startColumn, range.startLineNumber, range.startColumn);\n    }\n    // ---\n    static fromPositions(start, end = start) {\n        return new Range(start.lineNumber, start.column, end.lineNumber, end.column);\n    }\n    static lift(range) {\n        if (!range) {\n            return null;\n        }\n        return new Range(range.startLineNumber, range.startColumn, range.endLineNumber, range.endColumn);\n    }\n    /**\n     * Test if `obj` is an `IRange`.\n     */\n    static isIRange(obj) {\n        return (obj\n            && (typeof obj.startLineNumber === 'number')\n            && (typeof obj.startColumn === 'number')\n            && (typeof obj.endLineNumber === 'number')\n            && (typeof obj.endColumn === 'number'));\n    }\n    /**\n     * Test if the two ranges are touching in any way.\n     */\n    static areIntersectingOrTouching(a, b) {\n        // Check if `a` is before `b`\n        if (a.endLineNumber < b.startLineNumber || (a.endLineNumber === b.startLineNumber && a.endColumn < b.startColumn)) {\n            return false;\n        }\n        // Check if `b` is before `a`\n        if (b.endLineNumber < a.startLineNumber || (b.endLineNumber === a.startLineNumber && b.endColumn < a.startColumn)) {\n            return false;\n        }\n        // These ranges must intersect\n        return true;\n    }\n    /**\n     * Test if the two ranges are intersecting. If the ranges are touching it returns true.\n     */\n    static areIntersecting(a, b) {\n        // Check if `a` is before `b`\n        if (a.endLineNumber < b.startLineNumber || (a.endLineNumber === b.startLineNumber && a.endColumn <= b.startColumn)) {\n            return false;\n        }\n        // Check if `b` is before `a`\n        if (b.endLineNumber < a.startLineNumber || (b.endLineNumber === a.startLineNumber && b.endColumn <= a.startColumn)) {\n            return false;\n        }\n        // These ranges must intersect\n        return true;\n    }\n    /**\n     * A function that compares ranges, useful for sorting ranges\n     * It will first compare ranges on the startPosition and then on the endPosition\n     */\n    static compareRangesUsingStarts(a, b) {\n        if (a && b) {\n            const aStartLineNumber = a.startLineNumber | 0;\n            const bStartLineNumber = b.startLineNumber | 0;\n            if (aStartLineNumber === bStartLineNumber) {\n                const aStartColumn = a.startColumn | 0;\n                const bStartColumn = b.startColumn | 0;\n                if (aStartColumn === bStartColumn) {\n                    const aEndLineNumber = a.endLineNumber | 0;\n                    const bEndLineNumber = b.endLineNumber | 0;\n                    if (aEndLineNumber === bEndLineNumber) {\n                        const aEndColumn = a.endColumn | 0;\n                        const bEndColumn = b.endColumn | 0;\n                        return aEndColumn - bEndColumn;\n                    }\n                    return aEndLineNumber - bEndLineNumber;\n                }\n                return aStartColumn - bStartColumn;\n            }\n            return aStartLineNumber - bStartLineNumber;\n        }\n        const aExists = (a ? 1 : 0);\n        const bExists = (b ? 1 : 0);\n        return aExists - bExists;\n    }\n    /**\n     * A function that compares ranges, useful for sorting ranges\n     * It will first compare ranges on the endPosition and then on the startPosition\n     */\n    static compareRangesUsingEnds(a, b) {\n        if (a.endLineNumber === b.endLineNumber) {\n            if (a.endColumn === b.endColumn) {\n                if (a.startLineNumber === b.startLineNumber) {\n                    return a.startColumn - b.startColumn;\n                }\n                return a.startLineNumber - b.startLineNumber;\n            }\n            return a.endColumn - b.endColumn;\n        }\n        return a.endLineNumber - b.endLineNumber;\n    }\n    /**\n     * Test if the range spans multiple lines.\n     */\n    static spansMultipleLines(range) {\n        return range.endLineNumber > range.startLineNumber;\n    }\n}\nexports.Range = Range;\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\r\nconst uuid_1 = require(\"./utils/uuid\");\r\nclass ProgressImpl {\r\n    constructor(_connection, title, percentage, message, cancellable) {\r\n        this._connection = _connection;\r\n        this._id = uuid_1.generateUuid();\r\n        let params = {\r\n            id: this._id,\r\n            title,\r\n            cancellable\r\n        };\r\n        if (percentage !== undefined) {\r\n            params.percentage = percentage;\r\n        }\r\n        if (message !== undefined) {\r\n            params.message = message;\r\n        }\r\n        if (cancellable !== undefined) {\r\n            params.cancellable = cancellable;\r\n        }\r\n        ProgressImpl.Instances.set(this._id, this);\r\n        this._source = new vscode_languageserver_protocol_1.CancellationTokenSource();\r\n        this._connection.sendNotification(vscode_languageserver_protocol_1.Proposed.ProgressStartNotification.type, params);\r\n    }\r\n    get token() {\r\n        return this._source.token;\r\n    }\r\n    report(arg0, arg1) {\r\n        let percentage;\r\n        let message;\r\n        if (typeof arg0 === 'number') {\r\n            percentage = arg0;\r\n            if (arg1 !== undefined) {\r\n                message = arg1;\r\n            }\r\n        }\r\n        else {\r\n            message = arg0;\r\n        }\r\n        this._connection.sendNotification(vscode_languageserver_protocol_1.Proposed.ProgressReportNotification.type, { id: this._id, percentage, message });\r\n    }\r\n    done() {\r\n        ProgressImpl.Instances.delete(this._id);\r\n        this._source.dispose();\r\n        this._connection.sendNotification(vscode_languageserver_protocol_1.Proposed.ProgressDoneNotification.type, { id: this._id });\r\n    }\r\n    cancel() {\r\n        this._source.cancel();\r\n    }\r\n}\r\nProgressImpl.Instances = new Map();\r\nclass NullProgress {\r\n    constructor() {\r\n        this._source = new vscode_languageserver_protocol_1.CancellationTokenSource();\r\n    }\r\n    get token() {\r\n        return this._source.token;\r\n    }\r\n    report() {\r\n    }\r\n    done() {\r\n    }\r\n}\r\nexports.ProgressFeature = (Base) => {\r\n    return class extends Base {\r\n        initialize(cap) {\r\n            let capabilities = cap;\r\n            if (capabilities.window && capabilities.window.progress) {\r\n                this._progressSupported = true;\r\n                this.connection.onNotification(vscode_languageserver_protocol_1.Proposed.ProgressCancelNotification.type, (params) => {\r\n                    let progress = ProgressImpl.Instances.get(params.id);\r\n                    if (progress !== undefined) {\r\n                        progress.cancel();\r\n                    }\r\n                });\r\n            }\r\n        }\r\n        createProgress(title, percentage, message, cancellable) {\r\n            if (this._progressSupported) {\r\n                return new ProgressImpl(this.connection, title, percentage, message, cancellable);\r\n            }\r\n            else {\r\n                return new NullProgress();\r\n            }\r\n        }\r\n    };\r\n};\r\n","/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\n'use strict';\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst code = require(\"vscode\");\nclass ProtocolCompletionItem extends code.CompletionItem {\n    constructor(label) {\n        super(label);\n    }\n}\nexports.default = ProtocolCompletionItem;\n","/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\n'use strict';\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst code = require(\"vscode\");\nclass ProtocolCodeLens extends code.CodeLens {\n    constructor(range) {\n        super(range);\n    }\n}\nexports.default = ProtocolCodeLens;\n","/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\n'use strict';\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst code = require(\"vscode\");\nclass ProtocolDocumentLink extends code.DocumentLink {\n    constructor(range, target) {\n        super(range, target);\n    }\n}\nexports.default = ProtocolDocumentLink;\n","import {\r\n    ExtensionContext,\r\n    QuickPickItem,\r\n    window,\r\n    Selection, Range, languages, commands\r\n} from \"vscode\";\r\nimport { CodeMetricsCodeLensProvider } from \"./codelensprovider/CodeMetricsCodeLensProvider\";\r\nimport { AppConfiguration } from \"./models/AppConfiguration\";\r\nimport { CodeMetricsCodeLens } from \"./models/CodeMetricsCodeLens\";\r\nimport { MetricsUtil } from \"./metrics/MetricsUtil\";\r\nimport { EditorDecoration } from \"./editordecoration/EditorDecoration\";\r\n\r\nexport function activate(context: ExtensionContext) {\r\n    const config: AppConfiguration = new AppConfiguration();\r\n    const metricsUtil: MetricsUtil = new MetricsUtil(config, context);\r\n    const disposables = [];\r\n\r\n    disposables.push(\r\n        languages.registerCodeLensProvider(metricsUtil.selector, new CodeMetricsCodeLensProvider(metricsUtil))\r\n    );\r\n    disposables.push(new EditorDecoration(context, metricsUtil));\r\n\r\n    const triggerCodeLensComputation = () => {\r\n        if (!window.activeTextEditor) {\r\n            return;\r\n        }\r\n        var end = window.activeTextEditor.selection.end;\r\n        window.activeTextEditor\r\n            .edit(editbuilder => {\r\n                editbuilder.insert(end, \" \");\r\n            })\r\n            .then(() => {\r\n                commands.executeCommand(\"undo\");\r\n            });\r\n    };\r\n\r\n    disposables.push(\r\n        commands.registerCommand(\"codemetrics.toggleCodeMetricsForArrowFunctions\", () => {\r\n            config.codeMetricsForArrowFunctionsToggled = !config.codeMetricsForArrowFunctionsToggled;\r\n            config.toggleCodeMetricsForArrowFunctionsExecuted = true;\r\n            triggerCodeLensComputation();\r\n        })\r\n    );\r\n\r\n    disposables.push(\r\n        commands.registerCommand(\"codemetrics.toggleCodeMetricsDisplayed\", () => {\r\n            config.codeMetricsDisplayed = !config.codeMetricsDisplayed;\r\n            triggerCodeLensComputation();\r\n        })\r\n    );\r\n    const pad = function (input, lenghtToFit = 4) {\r\n        var pad = new Array(lenghtToFit).join(\" \");\r\n        return pad.substring(0, Math.max(0, pad.length - input.length)) + input;\r\n    }\r\n    const roundComplexity = function (complexity) {\r\n        return Number(complexity.toFixed(2));\r\n    };\r\n    disposables.push(\r\n        commands.registerCommand(\"codemetrics.showCodeMetricsCodeLensInfo\", (codelens: CodeMetricsCodeLens) => {\r\n            var items = [codelens.model, ...codelens.getChildren().filter(item => item.getCollectedComplexity() > 0)];\r\n            var explanations: QuickPickItem[] = items\r\n                .map(item => {\r\n                    const complexityForItem = codelens.model == item ? item.complexity : item.getCollectedComplexity();\r\n                    var complexity = pad(roundComplexity(complexityForItem) + \"\", 5);\r\n                    var line = pad(item.line + \"\");\r\n                    var column = pad(item.column + \"\");\r\n                    const result: QuickPickItem = ({\r\n                        label: (complexity + \" - Ln \" + line + \" Col \" + column + \" \" + item.description).replace(/[\\r\\n]+/g, \" \"),\r\n                        description: item.text\r\n                    });\r\n                    return result;\r\n                })\r\n\r\n            const jumpTo = (selected) => {\r\n                if (selected) {\r\n                    var selectedCodeLens = items[explanations.indexOf(selected)];\r\n                    if (selectedCodeLens) {\r\n                        var start = window.activeTextEditor.document.positionAt(\r\n                            selectedCodeLens.start\r\n                        );\r\n                        var end = window.activeTextEditor.document.positionAt(\r\n                            selectedCodeLens.start\r\n                        );\r\n                        const range = new Range(start, start);\r\n                        window.activeTextEditor.revealRange(range);\r\n                        window.activeTextEditor.selection = new Selection(start, start);\r\n                    }\r\n                }\r\n            }\r\n            window.showQuickPick(explanations, { onDidSelectItem: jumpTo }).then(jumpTo);\r\n        })\r\n    );\r\n\r\n    context.subscriptions.push(...disposables);\r\n}\r\n","import { CodeLensProvider, TextDocument, CodeLens, CancellationToken } from \"vscode\";\r\nimport { CodeMetricsCodeLens } from \"../models/CodeMetricsCodeLens\";\r\nimport { MetricsUtil } from \"../metrics/MetricsUtil\";\r\n\r\nexport class CodeMetricsCodeLensProvider implements CodeLensProvider {\r\n    private metricsUtil: MetricsUtil;\r\n\r\n    constructor(metricsUtil: MetricsUtil) {\r\n        this.metricsUtil = metricsUtil;\r\n    }\r\n\r\n    provideCodeLenses(document: TextDocument, token: CancellationToken): Thenable<CodeLens[]> {\r\n        if (!this.metricsUtil.appConfig.codeMetricsDisplayed) return;\r\n        if (!this.metricsUtil.appConfig.getCodeMetricsSettings(document.uri).CodeLensEnabled) return;\r\n        return this.metricsUtil.getMetrics(document).then(metrics => {\r\n            const result: CodeLens[] = metrics.map(\r\n                model => new CodeMetricsCodeLens(model, document.uri, this.metricsUtil.toRange(model, document))\r\n            );\r\n            return result;\r\n        });\r\n    }\r\n\r\n    resolveCodeLens(codeLens: CodeLens, token: CancellationToken): CodeLens {\r\n        if (codeLens instanceof CodeMetricsCodeLens) {\r\n            codeLens.command = {\r\n                title: this.metricsUtil.format(codeLens),\r\n                command: \"codemetrics.showCodeMetricsCodeLensInfo\",\r\n                arguments: [codeLens]\r\n            };\r\n            return codeLens;\r\n        }\r\n        return null;\r\n    }\r\n}\r\n","import { CodeLens, Range, Uri } from \"vscode\";\r\nimport { IMetricsModel } from \"tsmetrics-core/lib/MetricsModel\";\r\nimport { AppConfiguration } from \"../models/AppConfiguration\";\r\n\r\nexport class CodeMetricsCodeLens extends CodeLens {\r\n    constructor(public model: IMetricsModel, private uri: Uri, range: Range) {\r\n        super(range);\r\n    }\r\n\r\n    public getCollectedComplexity(): number {\r\n        return this.model.getCollectedComplexity();\r\n    }\r\n\r\n    public toString(appConfig: AppConfiguration): string {\r\n        return this.model.toString(appConfig.getCodeMetricsSettings(this.uri));\r\n    }\r\n\r\n    public getExplanation(appConfig: AppConfiguration): string {\r\n        return this.model.getExplanation();\r\n    }\r\n\r\n    public getChildren() {\r\n        return this.model.children;\r\n    }\r\n}\r\n","import { workspace, Uri } from \"vscode\";\r\nimport {\r\n    getInitialVSCodeMetricsConfiguration,\r\n    IVSCodeMetricsConfiguration\r\n} from \"../metrics/common/VSCodeMetricsConfiguration\";\r\n\r\nexport class AppConfiguration {\r\n    constructor() {}\r\n    get extensionName() {\r\n        return \"codemetrics\";\r\n    }\r\n    public toggleCodeMetricsForArrowFunctionsExecuted: boolean = false;\r\n    public codeMetricsForArrowFunctionsToggled: boolean = true;\r\n    public codeMetricsDisplayed: boolean = true;\r\n\r\n    getCodeMetricsSettings(resource: Uri): IVSCodeMetricsConfiguration {\r\n        var settings = workspace.getConfiguration(this.extensionName, resource);\r\n        const resultingSettings = getInitialVSCodeMetricsConfiguration();\r\n        for (var propertyName in resultingSettings) {\r\n            var property = \"nodeconfiguration.\" + propertyName;\r\n            if (settings.has(property)) {\r\n                resultingSettings[propertyName] = settings.get(property);\r\n                continue;\r\n            }\r\n            property = \"basics.\" + propertyName;\r\n            if (settings.has(property)) {\r\n                resultingSettings[propertyName] = settings.get(property);\r\n                continue;\r\n            }\r\n        }\r\n        for (var propertyName in resultingSettings.LuaStatementMetricsConfiguration) {\r\n            property = \"luaconfiguration.\" + propertyName;\r\n            if (settings.has(property)) {\r\n                resultingSettings.LuaStatementMetricsConfiguration[propertyName] = settings.get(property);\r\n                continue;\r\n            }\r\n        }\r\n        if (this.toggleCodeMetricsForArrowFunctionsExecuted) {\r\n            resultingSettings.MetricsForArrowFunctionsToggled = this.codeMetricsForArrowFunctionsToggled;\r\n        }\r\n        return resultingSettings;\r\n    }\r\n}\r\n","import { IMetricsConfiguration, MetricsConfiguration } from \"tsmetrics-core/lib/MetricsConfiguration\";\r\nimport { getInitialLuaStatementMetricsConfiguration } from \"./LuaStatementMetricsConfiguration\";\r\n\r\nconst VSCodeMetricsConfigurationDefaults = {\r\n    Exclude: [],\r\n    EnabledForLua: true,\r\n    EnabledForJS: true,\r\n    EnabledForJSX: true,\r\n    EnabledForTS: true,\r\n    EnabledForTSX: true,\r\n    EnabledForVue: true,\r\n    EnabledForHTML: true,\r\n    DecorationModeEnabled: true,\r\n    DecorationTemplate: \"<svg xmlns='http://www.w3.org/2000/svg' width='{{size}}px' height='{{size}}px' viewbox='0 0 {{size}} {{size}}'><rect width='{{size}}' height='{{size}}' style='fill:{{color}};stroke-width:1;stroke:#fff'/></svg>\",\r\n    OverviewRulerModeEnabled: true,\r\n    CodeLensEnabled: true,\r\n    DiagnosticsEnabled: false,\r\n\r\n    ComplexityColorLow: \"#4bb14f\",\r\n    ComplexityColorNormal: \"#ffc208\",\r\n    ComplexityColorHigh: \"#f44034\",\r\n    ComplexityColorExtreme: \"#ff0000\",\r\n\r\n    FileSizeLimitMB: 0.5,\r\n    LuaStatementMetricsConfiguration: getInitialLuaStatementMetricsConfiguration()\r\n};\r\n\r\nexport type IVSCodeMetricsConfiguration = Partial<typeof VSCodeMetricsConfigurationDefaults> & IMetricsConfiguration;\r\n\r\nexport const getInitialVSCodeMetricsConfiguration: () => IVSCodeMetricsConfiguration = () => {\r\n    return {\r\n        ...MetricsConfiguration,\r\n        ...VSCodeMetricsConfigurationDefaults\r\n    };\r\n};\r\n","const LuaStatementMetricsConfiguration = {\r\n    LabelStatement: 1,\r\n    BreakStatement: 1,\r\n    GotoStatement: 1,\r\n    ReturnStatement: 1,\r\n    IfStatement: 1,\r\n    IfClause: 1,\r\n    ElseifClause: 1,\r\n    ElseClause: 1,\r\n    WhileStatement: 1,\r\n    DoStatement: 1,\r\n    RepeatStatement: 1,\r\n    LocalStatement: 0,\r\n    AssignmentStatement: 0,\r\n    CallStatement: 0,\r\n    FunctionDeclaration: 1,\r\n    ForNumericStatement: 1,\r\n    ForGenericStatement: 1,\r\n    Chunk: 0,\r\n    Identifier: 0,\r\n    StringLiteral: 0,\r\n    NumericLiteral: 0,\r\n    BooleanLiteral: 0,\r\n    NilLiteral: 0,\r\n    VarargLiteral: 0,\r\n    TableKey: 0,\r\n    TableKeyString: 0,\r\n    TableValue: 0,\r\n    TableConstructorExpression: 0,\r\n    LogicalExpression: 1,\r\n    BinaryExpression: 1,\r\n    UnaryExpression: 0,\r\n    MemberExpression: 1,\r\n    IndexExpression: 0,\r\n    CallExpression: 0,\r\n    TableCallExpression: 0,\r\n    StringCallExpression: 0,\r\n    Comment: 0\r\n};\r\n\r\nexport type ILuaStatementMetricsConfiguration = Partial<typeof LuaStatementMetricsConfiguration>;\r\nexport const getInitialLuaStatementMetricsConfiguration = () => {\r\n    return { ...LuaStatementMetricsConfiguration };\r\n};\r\n","import * as path from \"path\";\r\nimport { Range, TextDocument, ExtensionContext, window, DocumentFilter } from \"vscode\";\r\nimport {\r\n    LanguageClient,\r\n    LanguageClientOptions,\r\n    ErrorAction,\r\n    ServerOptions,\r\n    TransportKind\r\n} from \"vscode-languageclient\";\r\nimport { Message } from \"vscode-jsonrpc\";\r\n\r\nimport { MetricsModel, IMetricsModel } from \"tsmetrics-core/lib/MetricsModel\";\r\n\r\nimport { MetricsRequestType, RequestData } from \"./common/protocol\";\r\nimport { CodeMetricsCodeLens } from \"../models/CodeMetricsCodeLens\";\r\nimport { AppConfiguration } from \"../models/AppConfiguration\";\r\n\r\nexport class MetricsUtil {\r\n    public appConfig: AppConfiguration;\r\n    private client: LanguageClient;\r\n    constructor(appConfig: AppConfiguration, context: ExtensionContext) {\r\n        this.appConfig = appConfig;\r\n        let serverModule = context.asAbsolutePath(path.join(\"dist\", \"server.js\"));\r\n\r\n        let debugOptions = { execArgv: [\"--nolazy\", \"--inspect=6004\"] };\r\n\r\n        let serverOptions: ServerOptions = {\r\n            run: { module: serverModule, transport: TransportKind.ipc },\r\n            debug: { module: serverModule, transport: TransportKind.ipc, options: debugOptions }\r\n        };\r\n        var output = window.createOutputChannel(\"CodeMetrics\");\r\n\r\n        let error: (error, message, count) => ErrorAction = (message: Message) => {\r\n            output.appendLine(message.jsonrpc);\r\n            return undefined;\r\n        };\r\n\r\n        let clientOptions: LanguageClientOptions = {\r\n            documentSelector: this.selector.map(p => p.language),\r\n            diagnosticCollectionName: \"codemetrics\",\r\n            errorHandler: {\r\n                error: error,\r\n\r\n                closed: () => {\r\n                    return undefined;\r\n                }\r\n            },\r\n            synchronize: {\r\n                configurationSection: \"codemetrics\"\r\n            }\r\n        };\r\n\r\n        this.client = new LanguageClient(\"CodeMetrics client\", serverOptions, clientOptions);\r\n        let disposable = this.client.start();\r\n\r\n        context.subscriptions.push(disposable);\r\n    }\r\n\r\n    get selector(): DocumentFilter[] {\r\n        const tsDocSelector = \"typescript\";\r\n        const jsDocSelector = \"javascript\";\r\n        const jsxDocSelector = \"javascriptreact\";\r\n        const tsxDocSelector = \"typescriptreact\";\r\n        const luaDocSelector = \"lua\";\r\n        const vueDocSelector = \"vue\";\r\n        const htmlDocSelector = \"html\";\r\n\r\n        const supportedSchemes = [\"file\", \"untitled\"];\r\n        const supportedLanguages = [\r\n            tsDocSelector,\r\n            jsDocSelector,\r\n            jsxDocSelector,\r\n            tsxDocSelector,\r\n            luaDocSelector,\r\n            vueDocSelector,\r\n            htmlDocSelector\r\n        ];\r\n\r\n        const resultingSelector = supportedLanguages\r\n            .map(language =>\r\n                supportedSchemes.map(scheme => {\r\n                    return {\r\n                        scheme: scheme,\r\n                        language: language\r\n                    };\r\n                })\r\n            )\r\n            .reduce((acc, cur) => acc.concat(cur), []);\r\n        return resultingSelector;\r\n    }\r\n\r\n    public getMetrics(document: TextDocument): Thenable<IMetricsModel[]> {\r\n        const requestData: RequestData = {\r\n            uri: document.uri.toString(),\r\n            configuration: this.appConfig.getCodeMetricsSettings(document.uri)\r\n        };\r\n        return this.client.onReady().then(() =>\r\n            this.client.sendRequest(MetricsRequestType, requestData).then(metrics =>\r\n                metrics.map(m => {\r\n                    return this.convert(m);\r\n                })\r\n            )\r\n        );\r\n    }\r\n    private convert(m: IMetricsModel): IMetricsModel {\r\n        let model = new MetricsModel(\r\n            m.start,\r\n            m.end,\r\n            m.text,\r\n            m.line,\r\n            m.column,\r\n            m.complexity,\r\n            m.description,\r\n            false,\r\n            m.visible,\r\n            m.collectorType\r\n        );\r\n        model.children = m.children.map(c => this.convert(c));\r\n        return model;\r\n    }\r\n\r\n    public format(model: CodeMetricsCodeLens): string {\r\n        return model.toString(this.appConfig);\r\n    }\r\n\r\n    public toRange(model: IMetricsModel, document: TextDocument): Range {\r\n        return new Range(document.positionAt(model.start), document.positionAt(model.end));\r\n    }\r\n    public toRangeFromOffset(start: number, document: TextDocument): Range {\r\n        return new Range(document.positionAt(start), document.positionAt(start));\r\n    }\r\n    public toDecorationRange(start: number, document: TextDocument): Range {\r\n        const pos = document.positionAt(start);\r\n        const line = pos.line;\r\n        const documentLine = document.lineAt(line);\r\n        const lineRange = documentLine.range;\r\n        return new Range(lineRange.end.line, lineRange.end.character, lineRange.end.line, lineRange.end.character);\r\n    }\r\n}\r\n","/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\n'use strict';\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst cp = require(\"child_process\");\nconst fs = require(\"fs\");\nconst SemVer = require(\"semver\");\nconst client_1 = require(\"./client\");\nconst vscode_1 = require(\"vscode\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst colorProvider_1 = require(\"./colorProvider\");\nconst configuration_1 = require(\"./configuration\");\nconst implementation_1 = require(\"./implementation\");\nconst typeDefinition_1 = require(\"./typeDefinition\");\nconst workspaceFolders_1 = require(\"./workspaceFolders\");\nconst foldingRange_1 = require(\"./foldingRange\");\nconst declaration_1 = require(\"./declaration\");\nconst selectionRange_1 = require(\"./selectionRange\");\nconst progress_proposed_1 = require(\"./progress.proposed\");\nconst callHierarchy_proposed_1 = require(\"./callHierarchy.proposed\");\nconst Is = require(\"./utils/is\");\nconst processes_1 = require(\"./utils/processes\");\n__export(require(\"./client\"));\nconst REQUIRED_VSCODE_VERSION = '^1.33.0'; // do not change format, updated by `updateVSCode` script\nvar Executable;\n(function (Executable) {\n    function is(value) {\n        return Is.string(value.command);\n    }\n    Executable.is = is;\n})(Executable || (Executable = {}));\nvar TransportKind;\n(function (TransportKind) {\n    TransportKind[TransportKind[\"stdio\"] = 0] = \"stdio\";\n    TransportKind[TransportKind[\"ipc\"] = 1] = \"ipc\";\n    TransportKind[TransportKind[\"pipe\"] = 2] = \"pipe\";\n    TransportKind[TransportKind[\"socket\"] = 3] = \"socket\";\n})(TransportKind = exports.TransportKind || (exports.TransportKind = {}));\nvar Transport;\n(function (Transport) {\n    function isSocket(value) {\n        let candidate = value;\n        return candidate && candidate.kind === TransportKind.socket && Is.number(candidate.port);\n    }\n    Transport.isSocket = isSocket;\n})(Transport || (Transport = {}));\nvar NodeModule;\n(function (NodeModule) {\n    function is(value) {\n        return Is.string(value.module);\n    }\n    NodeModule.is = is;\n})(NodeModule || (NodeModule = {}));\nvar StreamInfo;\n(function (StreamInfo) {\n    function is(value) {\n        let candidate = value;\n        return candidate && candidate.writer !== void 0 && candidate.reader !== void 0;\n    }\n    StreamInfo.is = is;\n})(StreamInfo || (StreamInfo = {}));\nvar ChildProcessInfo;\n(function (ChildProcessInfo) {\n    function is(value) {\n        let candidate = value;\n        return candidate && candidate.process !== void 0 && typeof candidate.detached === 'boolean';\n    }\n    ChildProcessInfo.is = is;\n})(ChildProcessInfo || (ChildProcessInfo = {}));\nclass LanguageClient extends client_1.BaseLanguageClient {\n    constructor(arg1, arg2, arg3, arg4, arg5) {\n        let id;\n        let name;\n        let serverOptions;\n        let clientOptions;\n        let forceDebug;\n        if (Is.string(arg2)) {\n            id = arg1;\n            name = arg2;\n            serverOptions = arg3;\n            clientOptions = arg4;\n            forceDebug = !!arg5;\n        }\n        else {\n            id = arg1.toLowerCase();\n            name = arg1;\n            serverOptions = arg2;\n            clientOptions = arg3;\n            forceDebug = arg4;\n        }\n        if (forceDebug === void 0) {\n            forceDebug = false;\n        }\n        super(id, name, clientOptions);\n        this._serverOptions = serverOptions;\n        this._forceDebug = forceDebug;\n        try {\n            this.checkVersion();\n        }\n        catch (error) {\n            if (Is.string(error.message)) {\n                this.outputChannel.appendLine(error.message);\n            }\n            throw error;\n        }\n    }\n    checkVersion() {\n        let codeVersion = SemVer.parse(vscode_1.version);\n        if (!codeVersion) {\n            throw new Error(`No valid VS Code version detected. Version string is: ${vscode_1.version}`);\n        }\n        // Remove the insider pre-release since we stay API compatible.\n        if (codeVersion.prerelease && codeVersion.prerelease.length > 0) {\n            codeVersion.prerelease = [];\n        }\n        if (!SemVer.satisfies(codeVersion, REQUIRED_VSCODE_VERSION)) {\n            throw new Error(`The language client requires VS Code version ${REQUIRED_VSCODE_VERSION} but received version ${vscode_1.version}`);\n        }\n    }\n    stop() {\n        return super.stop().then(() => {\n            if (this._serverProcess) {\n                let toCheck = this._serverProcess;\n                this._serverProcess = undefined;\n                if (this._isDetached === void 0 || !this._isDetached) {\n                    this.checkProcessDied(toCheck);\n                }\n                this._isDetached = undefined;\n            }\n        });\n    }\n    checkProcessDied(childProcess) {\n        if (!childProcess) {\n            return;\n        }\n        setTimeout(() => {\n            // Test if the process is still alive. Throws an exception if not\n            try {\n                process.kill(childProcess.pid, 0);\n                processes_1.terminate(childProcess);\n            }\n            catch (error) {\n                // All is fine.\n            }\n        }, 2000);\n    }\n    handleConnectionClosed() {\n        this._serverProcess = undefined;\n        super.handleConnectionClosed();\n    }\n    createMessageTransports(encoding) {\n        function getEnvironment(env) {\n            if (!env) {\n                return process.env;\n            }\n            let result = Object.create(null);\n            Object.keys(process.env).forEach(key => result[key] = process.env[key]);\n            Object.keys(env).forEach(key => result[key] = env[key]);\n            return result;\n        }\n        function startedInDebugMode() {\n            let args = process.execArgv;\n            if (args) {\n                return args.some((arg) => /^--debug=?/.test(arg) || /^--debug-brk=?/.test(arg) || /^--inspect=?/.test(arg) || /^--inspect-brk=?/.test(arg));\n            }\n            ;\n            return false;\n        }\n        let server = this._serverOptions;\n        // We got a function.\n        if (Is.func(server)) {\n            return server().then((result) => {\n                if (client_1.MessageTransports.is(result)) {\n                    this._isDetached = !!result.detached;\n                    return result;\n                }\n                else if (StreamInfo.is(result)) {\n                    this._isDetached = !!result.detached;\n                    return { reader: new vscode_languageserver_protocol_1.StreamMessageReader(result.reader), writer: new vscode_languageserver_protocol_1.StreamMessageWriter(result.writer) };\n                }\n                else {\n                    let cp;\n                    if (ChildProcessInfo.is(result)) {\n                        cp = result.process;\n                        this._isDetached = result.detached;\n                    }\n                    else {\n                        cp = result;\n                        this._isDetached = false;\n                    }\n                    cp.stderr.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\n                    return { reader: new vscode_languageserver_protocol_1.StreamMessageReader(cp.stdout), writer: new vscode_languageserver_protocol_1.StreamMessageWriter(cp.stdin) };\n                }\n            });\n        }\n        let json;\n        let runDebug = server;\n        if (runDebug.run || runDebug.debug) {\n            // We are under debugging. So use debug as well.\n            if (typeof v8debug === 'object' || this._forceDebug || startedInDebugMode()) {\n                json = runDebug.debug;\n            }\n            else {\n                json = runDebug.run;\n            }\n        }\n        else {\n            json = server;\n        }\n        return this._getServerWorkingDir(json.options).then(serverWorkingDir => {\n            if (NodeModule.is(json) && json.module) {\n                let node = json;\n                let transport = node.transport || TransportKind.stdio;\n                if (node.runtime) {\n                    let args = [];\n                    let options = node.options || Object.create(null);\n                    if (options.execArgv) {\n                        options.execArgv.forEach(element => args.push(element));\n                    }\n                    args.push(node.module);\n                    if (node.args) {\n                        node.args.forEach(element => args.push(element));\n                    }\n                    let execOptions = Object.create(null);\n                    execOptions.cwd = serverWorkingDir;\n                    execOptions.env = getEnvironment(options.env);\n                    let pipeName = undefined;\n                    if (transport === TransportKind.ipc) {\n                        // exec options not correctly typed in lib\n                        execOptions.stdio = [null, null, null, 'ipc'];\n                        args.push('--node-ipc');\n                    }\n                    else if (transport === TransportKind.stdio) {\n                        args.push('--stdio');\n                    }\n                    else if (transport === TransportKind.pipe) {\n                        pipeName = vscode_languageserver_protocol_1.generateRandomPipeName();\n                        args.push(`--pipe=${pipeName}`);\n                    }\n                    else if (Transport.isSocket(transport)) {\n                        args.push(`--socket=${transport.port}`);\n                    }\n                    args.push(`--clientProcessId=${process.pid.toString()}`);\n                    if (transport === TransportKind.ipc || transport === TransportKind.stdio) {\n                        let serverProcess = cp.spawn(node.runtime, args, execOptions);\n                        if (!serverProcess || !serverProcess.pid) {\n                            return Promise.reject(`Launching server using runtime ${node.runtime} failed.`);\n                        }\n                        this._serverProcess = serverProcess;\n                        serverProcess.stderr.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\n                        if (transport === TransportKind.ipc) {\n                            serverProcess.stdout.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\n                            return Promise.resolve({ reader: new vscode_languageserver_protocol_1.IPCMessageReader(serverProcess), writer: new vscode_languageserver_protocol_1.IPCMessageWriter(serverProcess) });\n                        }\n                        else {\n                            return Promise.resolve({ reader: new vscode_languageserver_protocol_1.StreamMessageReader(serverProcess.stdout), writer: new vscode_languageserver_protocol_1.StreamMessageWriter(serverProcess.stdin) });\n                        }\n                    }\n                    else if (transport == TransportKind.pipe) {\n                        return vscode_languageserver_protocol_1.createClientPipeTransport(pipeName).then((transport) => {\n                            let process = cp.spawn(node.runtime, args, execOptions);\n                            if (!process || !process.pid) {\n                                return Promise.reject(`Launching server using runtime ${node.runtime} failed.`);\n                            }\n                            this._serverProcess = process;\n                            process.stderr.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\n                            process.stdout.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\n                            return transport.onConnected().then((protocol) => {\n                                return { reader: protocol[0], writer: protocol[1] };\n                            });\n                        });\n                    }\n                    else if (Transport.isSocket(transport)) {\n                        return vscode_languageserver_protocol_1.createClientSocketTransport(transport.port).then((transport) => {\n                            let process = cp.spawn(node.runtime, args, execOptions);\n                            if (!process || !process.pid) {\n                                return Promise.reject(`Launching server using runtime ${node.runtime} failed.`);\n                            }\n                            this._serverProcess = process;\n                            process.stderr.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\n                            process.stdout.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\n                            return transport.onConnected().then((protocol) => {\n                                return { reader: protocol[0], writer: protocol[1] };\n                            });\n                        });\n                    }\n                }\n                else {\n                    let pipeName = undefined;\n                    return new Promise((resolve, _reject) => {\n                        let args = node.args && node.args.slice() || [];\n                        if (transport === TransportKind.ipc) {\n                            args.push('--node-ipc');\n                        }\n                        else if (transport === TransportKind.stdio) {\n                            args.push('--stdio');\n                        }\n                        else if (transport === TransportKind.pipe) {\n                            pipeName = vscode_languageserver_protocol_1.generateRandomPipeName();\n                            args.push(`--pipe=${pipeName}`);\n                        }\n                        else if (Transport.isSocket(transport)) {\n                            args.push(`--socket=${transport.port}`);\n                        }\n                        args.push(`--clientProcessId=${process.pid.toString()}`);\n                        let options = node.options || Object.create(null);\n                        options.execArgv = options.execArgv || [];\n                        options.cwd = serverWorkingDir;\n                        options.silent = true;\n                        if (transport === TransportKind.ipc || transport === TransportKind.stdio) {\n                            let sp = cp.fork(node.module, args || [], options);\n                            this._serverProcess = sp;\n                            sp.stderr.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\n                            if (transport === TransportKind.ipc) {\n                                sp.stdout.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\n                                resolve({ reader: new vscode_languageserver_protocol_1.IPCMessageReader(this._serverProcess), writer: new vscode_languageserver_protocol_1.IPCMessageWriter(this._serverProcess) });\n                            }\n                            else {\n                                resolve({ reader: new vscode_languageserver_protocol_1.StreamMessageReader(sp.stdout), writer: new vscode_languageserver_protocol_1.StreamMessageWriter(sp.stdin) });\n                            }\n                        }\n                        else if (transport === TransportKind.pipe) {\n                            vscode_languageserver_protocol_1.createClientPipeTransport(pipeName).then((transport) => {\n                                let sp = cp.fork(node.module, args || [], options);\n                                this._serverProcess = sp;\n                                sp.stderr.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\n                                sp.stdout.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\n                                transport.onConnected().then((protocol) => {\n                                    resolve({ reader: protocol[0], writer: protocol[1] });\n                                });\n                            });\n                        }\n                        else if (Transport.isSocket(transport)) {\n                            vscode_languageserver_protocol_1.createClientSocketTransport(transport.port).then((transport) => {\n                                let sp = cp.fork(node.module, args || [], options);\n                                this._serverProcess = sp;\n                                sp.stderr.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\n                                sp.stdout.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\n                                transport.onConnected().then((protocol) => {\n                                    resolve({ reader: protocol[0], writer: protocol[1] });\n                                });\n                            });\n                        }\n                    });\n                }\n            }\n            else if (Executable.is(json) && json.command) {\n                let command = json;\n                let args = command.args || [];\n                let options = Object.assign({}, command.options);\n                options.cwd = options.cwd || serverWorkingDir;\n                let serverProcess = cp.spawn(command.command, args, options);\n                if (!serverProcess || !serverProcess.pid) {\n                    return Promise.reject(`Launching server using command ${command.command} failed.`);\n                }\n                serverProcess.stderr.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\n                this._serverProcess = serverProcess;\n                this._isDetached = !!options.detached;\n                return Promise.resolve({ reader: new vscode_languageserver_protocol_1.StreamMessageReader(serverProcess.stdout), writer: new vscode_languageserver_protocol_1.StreamMessageWriter(serverProcess.stdin) });\n            }\n            return Promise.reject(new Error(`Unsupported server configuration ` + JSON.stringify(server, null, 4)));\n        });\n    }\n    registerProposedFeatures() {\n        this.registerFeatures(ProposedFeatures.createAll(this));\n    }\n    registerBuiltinFeatures() {\n        super.registerBuiltinFeatures();\n        this.registerFeature(new configuration_1.ConfigurationFeature(this));\n        this.registerFeature(new typeDefinition_1.TypeDefinitionFeature(this));\n        this.registerFeature(new implementation_1.ImplementationFeature(this));\n        this.registerFeature(new colorProvider_1.ColorProviderFeature(this));\n        this.registerFeature(new workspaceFolders_1.WorkspaceFoldersFeature(this));\n        this.registerFeature(new foldingRange_1.FoldingRangeFeature(this));\n        this.registerFeature(new declaration_1.DeclarationFeature(this));\n    }\n    _mainGetRootPath() {\n        let folders = vscode_1.workspace.workspaceFolders;\n        if (!folders || folders.length === 0) {\n            return undefined;\n        }\n        let folder = folders[0];\n        if (folder.uri.scheme === 'file') {\n            return folder.uri.fsPath;\n        }\n        return undefined;\n    }\n    _getServerWorkingDir(options) {\n        let cwd = options && options.cwd;\n        if (!cwd) {\n            cwd = this.clientOptions.workspaceFolder\n                ? this.clientOptions.workspaceFolder.uri.fsPath\n                : this._mainGetRootPath();\n        }\n        if (cwd) {\n            // make sure the folder exists otherwise creating the process will fail\n            return new Promise(s => {\n                fs.lstat(cwd, (err, stats) => {\n                    s(!err && stats.isDirectory() ? cwd : undefined);\n                });\n            });\n        }\n        return Promise.resolve(undefined);\n    }\n}\nexports.LanguageClient = LanguageClient;\nclass SettingMonitor {\n    constructor(_client, _setting) {\n        this._client = _client;\n        this._setting = _setting;\n        this._listeners = [];\n    }\n    start() {\n        vscode_1.workspace.onDidChangeConfiguration(this.onDidChangeConfiguration, this, this._listeners);\n        this.onDidChangeConfiguration();\n        return new vscode_1.Disposable(() => {\n            if (this._client.needsStop()) {\n                this._client.stop();\n            }\n        });\n    }\n    onDidChangeConfiguration() {\n        let index = this._setting.indexOf('.');\n        let primary = index >= 0 ? this._setting.substr(0, index) : this._setting;\n        let rest = index >= 0 ? this._setting.substr(index + 1) : undefined;\n        let enabled = rest ? vscode_1.workspace.getConfiguration(primary).get(rest, false) : vscode_1.workspace.getConfiguration(primary);\n        if (enabled && this._client.needsStart()) {\n            this._client.start();\n        }\n        else if (!enabled && this._client.needsStop()) {\n            this._client.stop();\n        }\n    }\n}\nexports.SettingMonitor = SettingMonitor;\n// Exporting proposed protocol.\nvar ProposedFeatures;\n(function (ProposedFeatures) {\n    function createAll(client) {\n        let result = [\n            new selectionRange_1.SelectionRangeFeature(client),\n            new progress_proposed_1.ProgressFeature(client),\n            new callHierarchy_proposed_1.CallHierarchyFeature(client)\n        ];\n        return result;\n    }\n    ProposedFeatures.createAll = createAll;\n})(ProposedFeatures = exports.ProposedFeatures || (exports.ProposedFeatures = {}));\n","exports = module.exports = SemVer\n\nvar debug\n/* istanbul ignore next */\nif (typeof process === 'object' &&\n    process.env &&\n    process.env.NODE_DEBUG &&\n    /\\bsemver\\b/i.test(process.env.NODE_DEBUG)) {\n  debug = function () {\n    var args = Array.prototype.slice.call(arguments, 0)\n    args.unshift('SEMVER')\n    console.log.apply(console, args)\n  }\n} else {\n  debug = function () {}\n}\n\n// Note: this is the semver.org version of the spec that it implements\n// Not necessarily the package version of this code.\nexports.SEMVER_SPEC_VERSION = '2.0.0'\n\nvar MAX_LENGTH = 256\nvar MAX_SAFE_INTEGER = Number.MAX_SAFE_INTEGER ||\n  /* istanbul ignore next */ 9007199254740991\n\n// Max safe segment length for coercion.\nvar MAX_SAFE_COMPONENT_LENGTH = 16\n\n// The actual regexps go on exports.re\nvar re = exports.re = []\nvar src = exports.src = []\nvar R = 0\n\n// The following Regular Expressions can be used for tokenizing,\n// validating, and parsing SemVer version strings.\n\n// ## Numeric Identifier\n// A single `0`, or a non-zero digit followed by zero or more digits.\n\nvar NUMERICIDENTIFIER = R++\nsrc[NUMERICIDENTIFIER] = '0|[1-9]\\\\d*'\nvar NUMERICIDENTIFIERLOOSE = R++\nsrc[NUMERICIDENTIFIERLOOSE] = '[0-9]+'\n\n// ## Non-numeric Identifier\n// Zero or more digits, followed by a letter or hyphen, and then zero or\n// more letters, digits, or hyphens.\n\nvar NONNUMERICIDENTIFIER = R++\nsrc[NONNUMERICIDENTIFIER] = '\\\\d*[a-zA-Z-][a-zA-Z0-9-]*'\n\n// ## Main Version\n// Three dot-separated numeric identifiers.\n\nvar MAINVERSION = R++\nsrc[MAINVERSION] = '(' + src[NUMERICIDENTIFIER] + ')\\\\.' +\n                   '(' + src[NUMERICIDENTIFIER] + ')\\\\.' +\n                   '(' + src[NUMERICIDENTIFIER] + ')'\n\nvar MAINVERSIONLOOSE = R++\nsrc[MAINVERSIONLOOSE] = '(' + src[NUMERICIDENTIFIERLOOSE] + ')\\\\.' +\n                        '(' + src[NUMERICIDENTIFIERLOOSE] + ')\\\\.' +\n                        '(' + src[NUMERICIDENTIFIERLOOSE] + ')'\n\n// ## Pre-release Version Identifier\n// A numeric identifier, or a non-numeric identifier.\n\nvar PRERELEASEIDENTIFIER = R++\nsrc[PRERELEASEIDENTIFIER] = '(?:' + src[NUMERICIDENTIFIER] +\n                            '|' + src[NONNUMERICIDENTIFIER] + ')'\n\nvar PRERELEASEIDENTIFIERLOOSE = R++\nsrc[PRERELEASEIDENTIFIERLOOSE] = '(?:' + src[NUMERICIDENTIFIERLOOSE] +\n                                 '|' + src[NONNUMERICIDENTIFIER] + ')'\n\n// ## Pre-release Version\n// Hyphen, followed by one or more dot-separated pre-release version\n// identifiers.\n\nvar PRERELEASE = R++\nsrc[PRERELEASE] = '(?:-(' + src[PRERELEASEIDENTIFIER] +\n                  '(?:\\\\.' + src[PRERELEASEIDENTIFIER] + ')*))'\n\nvar PRERELEASELOOSE = R++\nsrc[PRERELEASELOOSE] = '(?:-?(' + src[PRERELEASEIDENTIFIERLOOSE] +\n                       '(?:\\\\.' + src[PRERELEASEIDENTIFIERLOOSE] + ')*))'\n\n// ## Build Metadata Identifier\n// Any combination of digits, letters, or hyphens.\n\nvar BUILDIDENTIFIER = R++\nsrc[BUILDIDENTIFIER] = '[0-9A-Za-z-]+'\n\n// ## Build Metadata\n// Plus sign, followed by one or more period-separated build metadata\n// identifiers.\n\nvar BUILD = R++\nsrc[BUILD] = '(?:\\\\+(' + src[BUILDIDENTIFIER] +\n             '(?:\\\\.' + src[BUILDIDENTIFIER] + ')*))'\n\n// ## Full Version String\n// A main version, followed optionally by a pre-release version and\n// build metadata.\n\n// Note that the only major, minor, patch, and pre-release sections of\n// the version string are capturing groups.  The build metadata is not a\n// capturing group, because it should not ever be used in version\n// comparison.\n\nvar FULL = R++\nvar FULLPLAIN = 'v?' + src[MAINVERSION] +\n                src[PRERELEASE] + '?' +\n                src[BUILD] + '?'\n\nsrc[FULL] = '^' + FULLPLAIN + '$'\n\n// like full, but allows v1.2.3 and =1.2.3, which people do sometimes.\n// also, 1.0.0alpha1 (prerelease without the hyphen) which is pretty\n// common in the npm registry.\nvar LOOSEPLAIN = '[v=\\\\s]*' + src[MAINVERSIONLOOSE] +\n                 src[PRERELEASELOOSE] + '?' +\n                 src[BUILD] + '?'\n\nvar LOOSE = R++\nsrc[LOOSE] = '^' + LOOSEPLAIN + '$'\n\nvar GTLT = R++\nsrc[GTLT] = '((?:<|>)?=?)'\n\n// Something like \"2.*\" or \"1.2.x\".\n// Note that \"x.x\" is a valid xRange identifer, meaning \"any version\"\n// Only the first item is strictly required.\nvar XRANGEIDENTIFIERLOOSE = R++\nsrc[XRANGEIDENTIFIERLOOSE] = src[NUMERICIDENTIFIERLOOSE] + '|x|X|\\\\*'\nvar XRANGEIDENTIFIER = R++\nsrc[XRANGEIDENTIFIER] = src[NUMERICIDENTIFIER] + '|x|X|\\\\*'\n\nvar XRANGEPLAIN = R++\nsrc[XRANGEPLAIN] = '[v=\\\\s]*(' + src[XRANGEIDENTIFIER] + ')' +\n                   '(?:\\\\.(' + src[XRANGEIDENTIFIER] + ')' +\n                   '(?:\\\\.(' + src[XRANGEIDENTIFIER] + ')' +\n                   '(?:' + src[PRERELEASE] + ')?' +\n                   src[BUILD] + '?' +\n                   ')?)?'\n\nvar XRANGEPLAINLOOSE = R++\nsrc[XRANGEPLAINLOOSE] = '[v=\\\\s]*(' + src[XRANGEIDENTIFIERLOOSE] + ')' +\n                        '(?:\\\\.(' + src[XRANGEIDENTIFIERLOOSE] + ')' +\n                        '(?:\\\\.(' + src[XRANGEIDENTIFIERLOOSE] + ')' +\n                        '(?:' + src[PRERELEASELOOSE] + ')?' +\n                        src[BUILD] + '?' +\n                        ')?)?'\n\nvar XRANGE = R++\nsrc[XRANGE] = '^' + src[GTLT] + '\\\\s*' + src[XRANGEPLAIN] + '$'\nvar XRANGELOOSE = R++\nsrc[XRANGELOOSE] = '^' + src[GTLT] + '\\\\s*' + src[XRANGEPLAINLOOSE] + '$'\n\n// Coercion.\n// Extract anything that could conceivably be a part of a valid semver\nvar COERCE = R++\nsrc[COERCE] = '(?:^|[^\\\\d])' +\n              '(\\\\d{1,' + MAX_SAFE_COMPONENT_LENGTH + '})' +\n              '(?:\\\\.(\\\\d{1,' + MAX_SAFE_COMPONENT_LENGTH + '}))?' +\n              '(?:\\\\.(\\\\d{1,' + MAX_SAFE_COMPONENT_LENGTH + '}))?' +\n              '(?:$|[^\\\\d])'\n\n// Tilde ranges.\n// Meaning is \"reasonably at or greater than\"\nvar LONETILDE = R++\nsrc[LONETILDE] = '(?:~>?)'\n\nvar TILDETRIM = R++\nsrc[TILDETRIM] = '(\\\\s*)' + src[LONETILDE] + '\\\\s+'\nre[TILDETRIM] = new RegExp(src[TILDETRIM], 'g')\nvar tildeTrimReplace = '$1~'\n\nvar TILDE = R++\nsrc[TILDE] = '^' + src[LONETILDE] + src[XRANGEPLAIN] + '$'\nvar TILDELOOSE = R++\nsrc[TILDELOOSE] = '^' + src[LONETILDE] + src[XRANGEPLAINLOOSE] + '$'\n\n// Caret ranges.\n// Meaning is \"at least and backwards compatible with\"\nvar LONECARET = R++\nsrc[LONECARET] = '(?:\\\\^)'\n\nvar CARETTRIM = R++\nsrc[CARETTRIM] = '(\\\\s*)' + src[LONECARET] + '\\\\s+'\nre[CARETTRIM] = new RegExp(src[CARETTRIM], 'g')\nvar caretTrimReplace = '$1^'\n\nvar CARET = R++\nsrc[CARET] = '^' + src[LONECARET] + src[XRANGEPLAIN] + '$'\nvar CARETLOOSE = R++\nsrc[CARETLOOSE] = '^' + src[LONECARET] + src[XRANGEPLAINLOOSE] + '$'\n\n// A simple gt/lt/eq thing, or just \"\" to indicate \"any version\"\nvar COMPARATORLOOSE = R++\nsrc[COMPARATORLOOSE] = '^' + src[GTLT] + '\\\\s*(' + LOOSEPLAIN + ')$|^$'\nvar COMPARATOR = R++\nsrc[COMPARATOR] = '^' + src[GTLT] + '\\\\s*(' + FULLPLAIN + ')$|^$'\n\n// An expression to strip any whitespace between the gtlt and the thing\n// it modifies, so that `> 1.2.3` ==> `>1.2.3`\nvar COMPARATORTRIM = R++\nsrc[COMPARATORTRIM] = '(\\\\s*)' + src[GTLT] +\n                      '\\\\s*(' + LOOSEPLAIN + '|' + src[XRANGEPLAIN] + ')'\n\n// this one has to use the /g flag\nre[COMPARATORTRIM] = new RegExp(src[COMPARATORTRIM], 'g')\nvar comparatorTrimReplace = '$1$2$3'\n\n// Something like `1.2.3 - 1.2.4`\n// Note that these all use the loose form, because they'll be\n// checked against either the strict or loose comparator form\n// later.\nvar HYPHENRANGE = R++\nsrc[HYPHENRANGE] = '^\\\\s*(' + src[XRANGEPLAIN] + ')' +\n                   '\\\\s+-\\\\s+' +\n                   '(' + src[XRANGEPLAIN] + ')' +\n                   '\\\\s*$'\n\nvar HYPHENRANGELOOSE = R++\nsrc[HYPHENRANGELOOSE] = '^\\\\s*(' + src[XRANGEPLAINLOOSE] + ')' +\n                        '\\\\s+-\\\\s+' +\n                        '(' + src[XRANGEPLAINLOOSE] + ')' +\n                        '\\\\s*$'\n\n// Star ranges basically just allow anything at all.\nvar STAR = R++\nsrc[STAR] = '(<|>)?=?\\\\s*\\\\*'\n\n// Compile to actual regexp objects.\n// All are flag-free, unless they were created above with a flag.\nfor (var i = 0; i < R; i++) {\n  debug(i, src[i])\n  if (!re[i]) {\n    re[i] = new RegExp(src[i])\n  }\n}\n\nexports.parse = parse\nfunction parse (version, options) {\n  if (!options || typeof options !== 'object') {\n    options = {\n      loose: !!options,\n      includePrerelease: false\n    }\n  }\n\n  if (version instanceof SemVer) {\n    return version\n  }\n\n  if (typeof version !== 'string') {\n    return null\n  }\n\n  if (version.length > MAX_LENGTH) {\n    return null\n  }\n\n  var r = options.loose ? re[LOOSE] : re[FULL]\n  if (!r.test(version)) {\n    return null\n  }\n\n  try {\n    return new SemVer(version, options)\n  } catch (er) {\n    return null\n  }\n}\n\nexports.valid = valid\nfunction valid (version, options) {\n  var v = parse(version, options)\n  return v ? v.version : null\n}\n\nexports.clean = clean\nfunction clean (version, options) {\n  var s = parse(version.trim().replace(/^[=v]+/, ''), options)\n  return s ? s.version : null\n}\n\nexports.SemVer = SemVer\n\nfunction SemVer (version, options) {\n  if (!options || typeof options !== 'object') {\n    options = {\n      loose: !!options,\n      includePrerelease: false\n    }\n  }\n  if (version instanceof SemVer) {\n    if (version.loose === options.loose) {\n      return version\n    } else {\n      version = version.version\n    }\n  } else if (typeof version !== 'string') {\n    throw new TypeError('Invalid Version: ' + version)\n  }\n\n  if (version.length > MAX_LENGTH) {\n    throw new TypeError('version is longer than ' + MAX_LENGTH + ' characters')\n  }\n\n  if (!(this instanceof SemVer)) {\n    return new SemVer(version, options)\n  }\n\n  debug('SemVer', version, options)\n  this.options = options\n  this.loose = !!options.loose\n\n  var m = version.trim().match(options.loose ? re[LOOSE] : re[FULL])\n\n  if (!m) {\n    throw new TypeError('Invalid Version: ' + version)\n  }\n\n  this.raw = version\n\n  // these are actually numbers\n  this.major = +m[1]\n  this.minor = +m[2]\n  this.patch = +m[3]\n\n  if (this.major > MAX_SAFE_INTEGER || this.major < 0) {\n    throw new TypeError('Invalid major version')\n  }\n\n  if (this.minor > MAX_SAFE_INTEGER || this.minor < 0) {\n    throw new TypeError('Invalid minor version')\n  }\n\n  if (this.patch > MAX_SAFE_INTEGER || this.patch < 0) {\n    throw new TypeError('Invalid patch version')\n  }\n\n  // numberify any prerelease numeric ids\n  if (!m[4]) {\n    this.prerelease = []\n  } else {\n    this.prerelease = m[4].split('.').map(function (id) {\n      if (/^[0-9]+$/.test(id)) {\n        var num = +id\n        if (num >= 0 && num < MAX_SAFE_INTEGER) {\n          return num\n        }\n      }\n      return id\n    })\n  }\n\n  this.build = m[5] ? m[5].split('.') : []\n  this.format()\n}\n\nSemVer.prototype.format = function () {\n  this.version = this.major + '.' + this.minor + '.' + this.patch\n  if (this.prerelease.length) {\n    this.version += '-' + this.prerelease.join('.')\n  }\n  return this.version\n}\n\nSemVer.prototype.toString = function () {\n  return this.version\n}\n\nSemVer.prototype.compare = function (other) {\n  debug('SemVer.compare', this.version, this.options, other)\n  if (!(other instanceof SemVer)) {\n    other = new SemVer(other, this.options)\n  }\n\n  return this.compareMain(other) || this.comparePre(other)\n}\n\nSemVer.prototype.compareMain = function (other) {\n  if (!(other instanceof SemVer)) {\n    other = new SemVer(other, this.options)\n  }\n\n  return compareIdentifiers(this.major, other.major) ||\n         compareIdentifiers(this.minor, other.minor) ||\n         compareIdentifiers(this.patch, other.patch)\n}\n\nSemVer.prototype.comparePre = function (other) {\n  if (!(other instanceof SemVer)) {\n    other = new SemVer(other, this.options)\n  }\n\n  // NOT having a prerelease is > having one\n  if (this.prerelease.length && !other.prerelease.length) {\n    return -1\n  } else if (!this.prerelease.length && other.prerelease.length) {\n    return 1\n  } else if (!this.prerelease.length && !other.prerelease.length) {\n    return 0\n  }\n\n  var i = 0\n  do {\n    var a = this.prerelease[i]\n    var b = other.prerelease[i]\n    debug('prerelease compare', i, a, b)\n    if (a === undefined && b === undefined) {\n      return 0\n    } else if (b === undefined) {\n      return 1\n    } else if (a === undefined) {\n      return -1\n    } else if (a === b) {\n      continue\n    } else {\n      return compareIdentifiers(a, b)\n    }\n  } while (++i)\n}\n\n// preminor will bump the version up to the next minor release, and immediately\n// down to pre-release. premajor and prepatch work the same way.\nSemVer.prototype.inc = function (release, identifier) {\n  switch (release) {\n    case 'premajor':\n      this.prerelease.length = 0\n      this.patch = 0\n      this.minor = 0\n      this.major++\n      this.inc('pre', identifier)\n      break\n    case 'preminor':\n      this.prerelease.length = 0\n      this.patch = 0\n      this.minor++\n      this.inc('pre', identifier)\n      break\n    case 'prepatch':\n      // If this is already a prerelease, it will bump to the next version\n      // drop any prereleases that might already exist, since they are not\n      // relevant at this point.\n      this.prerelease.length = 0\n      this.inc('patch', identifier)\n      this.inc('pre', identifier)\n      break\n    // If the input is a non-prerelease version, this acts the same as\n    // prepatch.\n    case 'prerelease':\n      if (this.prerelease.length === 0) {\n        this.inc('patch', identifier)\n      }\n      this.inc('pre', identifier)\n      break\n\n    case 'major':\n      // If this is a pre-major version, bump up to the same major version.\n      // Otherwise increment major.\n      // 1.0.0-5 bumps to 1.0.0\n      // 1.1.0 bumps to 2.0.0\n      if (this.minor !== 0 ||\n          this.patch !== 0 ||\n          this.prerelease.length === 0) {\n        this.major++\n      }\n      this.minor = 0\n      this.patch = 0\n      this.prerelease = []\n      break\n    case 'minor':\n      // If this is a pre-minor version, bump up to the same minor version.\n      // Otherwise increment minor.\n      // 1.2.0-5 bumps to 1.2.0\n      // 1.2.1 bumps to 1.3.0\n      if (this.patch !== 0 || this.prerelease.length === 0) {\n        this.minor++\n      }\n      this.patch = 0\n      this.prerelease = []\n      break\n    case 'patch':\n      // If this is not a pre-release version, it will increment the patch.\n      // If it is a pre-release it will bump up to the same patch version.\n      // 1.2.0-5 patches to 1.2.0\n      // 1.2.0 patches to 1.2.1\n      if (this.prerelease.length === 0) {\n        this.patch++\n      }\n      this.prerelease = []\n      break\n    // This probably shouldn't be used publicly.\n    // 1.0.0 \"pre\" would become 1.0.0-0 which is the wrong direction.\n    case 'pre':\n      if (this.prerelease.length === 0) {\n        this.prerelease = [0]\n      } else {\n        var i = this.prerelease.length\n        while (--i >= 0) {\n          if (typeof this.prerelease[i] === 'number') {\n            this.prerelease[i]++\n            i = -2\n          }\n        }\n        if (i === -1) {\n          // didn't increment anything\n          this.prerelease.push(0)\n        }\n      }\n      if (identifier) {\n        // 1.2.0-beta.1 bumps to 1.2.0-beta.2,\n        // 1.2.0-beta.fooblz or 1.2.0-beta bumps to 1.2.0-beta.0\n        if (this.prerelease[0] === identifier) {\n          if (isNaN(this.prerelease[1])) {\n            this.prerelease = [identifier, 0]\n          }\n        } else {\n          this.prerelease = [identifier, 0]\n        }\n      }\n      break\n\n    default:\n      throw new Error('invalid increment argument: ' + release)\n  }\n  this.format()\n  this.raw = this.version\n  return this\n}\n\nexports.inc = inc\nfunction inc (version, release, loose, identifier) {\n  if (typeof (loose) === 'string') {\n    identifier = loose\n    loose = undefined\n  }\n\n  try {\n    return new SemVer(version, loose).inc(release, identifier).version\n  } catch (er) {\n    return null\n  }\n}\n\nexports.diff = diff\nfunction diff (version1, version2) {\n  if (eq(version1, version2)) {\n    return null\n  } else {\n    var v1 = parse(version1)\n    var v2 = parse(version2)\n    var prefix = ''\n    if (v1.prerelease.length || v2.prerelease.length) {\n      prefix = 'pre'\n      var defaultResult = 'prerelease'\n    }\n    for (var key in v1) {\n      if (key === 'major' || key === 'minor' || key === 'patch') {\n        if (v1[key] !== v2[key]) {\n          return prefix + key\n        }\n      }\n    }\n    return defaultResult // may be undefined\n  }\n}\n\nexports.compareIdentifiers = compareIdentifiers\n\nvar numeric = /^[0-9]+$/\nfunction compareIdentifiers (a, b) {\n  var anum = numeric.test(a)\n  var bnum = numeric.test(b)\n\n  if (anum && bnum) {\n    a = +a\n    b = +b\n  }\n\n  return a === b ? 0\n    : (anum && !bnum) ? -1\n    : (bnum && !anum) ? 1\n    : a < b ? -1\n    : 1\n}\n\nexports.rcompareIdentifiers = rcompareIdentifiers\nfunction rcompareIdentifiers (a, b) {\n  return compareIdentifiers(b, a)\n}\n\nexports.major = major\nfunction major (a, loose) {\n  return new SemVer(a, loose).major\n}\n\nexports.minor = minor\nfunction minor (a, loose) {\n  return new SemVer(a, loose).minor\n}\n\nexports.patch = patch\nfunction patch (a, loose) {\n  return new SemVer(a, loose).patch\n}\n\nexports.compare = compare\nfunction compare (a, b, loose) {\n  return new SemVer(a, loose).compare(new SemVer(b, loose))\n}\n\nexports.compareLoose = compareLoose\nfunction compareLoose (a, b) {\n  return compare(a, b, true)\n}\n\nexports.rcompare = rcompare\nfunction rcompare (a, b, loose) {\n  return compare(b, a, loose)\n}\n\nexports.sort = sort\nfunction sort (list, loose) {\n  return list.sort(function (a, b) {\n    return exports.compare(a, b, loose)\n  })\n}\n\nexports.rsort = rsort\nfunction rsort (list, loose) {\n  return list.sort(function (a, b) {\n    return exports.rcompare(a, b, loose)\n  })\n}\n\nexports.gt = gt\nfunction gt (a, b, loose) {\n  return compare(a, b, loose) > 0\n}\n\nexports.lt = lt\nfunction lt (a, b, loose) {\n  return compare(a, b, loose) < 0\n}\n\nexports.eq = eq\nfunction eq (a, b, loose) {\n  return compare(a, b, loose) === 0\n}\n\nexports.neq = neq\nfunction neq (a, b, loose) {\n  return compare(a, b, loose) !== 0\n}\n\nexports.gte = gte\nfunction gte (a, b, loose) {\n  return compare(a, b, loose) >= 0\n}\n\nexports.lte = lte\nfunction lte (a, b, loose) {\n  return compare(a, b, loose) <= 0\n}\n\nexports.cmp = cmp\nfunction cmp (a, op, b, loose) {\n  switch (op) {\n    case '===':\n      if (typeof a === 'object')\n        a = a.version\n      if (typeof b === 'object')\n        b = b.version\n      return a === b\n\n    case '!==':\n      if (typeof a === 'object')\n        a = a.version\n      if (typeof b === 'object')\n        b = b.version\n      return a !== b\n\n    case '':\n    case '=':\n    case '==':\n      return eq(a, b, loose)\n\n    case '!=':\n      return neq(a, b, loose)\n\n    case '>':\n      return gt(a, b, loose)\n\n    case '>=':\n      return gte(a, b, loose)\n\n    case '<':\n      return lt(a, b, loose)\n\n    case '<=':\n      return lte(a, b, loose)\n\n    default:\n      throw new TypeError('Invalid operator: ' + op)\n  }\n}\n\nexports.Comparator = Comparator\nfunction Comparator (comp, options) {\n  if (!options || typeof options !== 'object') {\n    options = {\n      loose: !!options,\n      includePrerelease: false\n    }\n  }\n\n  if (comp instanceof Comparator) {\n    if (comp.loose === !!options.loose) {\n      return comp\n    } else {\n      comp = comp.value\n    }\n  }\n\n  if (!(this instanceof Comparator)) {\n    return new Comparator(comp, options)\n  }\n\n  debug('comparator', comp, options)\n  this.options = options\n  this.loose = !!options.loose\n  this.parse(comp)\n\n  if (this.semver === ANY) {\n    this.value = ''\n  } else {\n    this.value = this.operator + this.semver.version\n  }\n\n  debug('comp', this)\n}\n\nvar ANY = {}\nComparator.prototype.parse = function (comp) {\n  var r = this.options.loose ? re[COMPARATORLOOSE] : re[COMPARATOR]\n  var m = comp.match(r)\n\n  if (!m) {\n    throw new TypeError('Invalid comparator: ' + comp)\n  }\n\n  this.operator = m[1]\n  if (this.operator === '=') {\n    this.operator = ''\n  }\n\n  // if it literally is just '>' or '' then allow anything.\n  if (!m[2]) {\n    this.semver = ANY\n  } else {\n    this.semver = new SemVer(m[2], this.options.loose)\n  }\n}\n\nComparator.prototype.toString = function () {\n  return this.value\n}\n\nComparator.prototype.test = function (version) {\n  debug('Comparator.test', version, this.options.loose)\n\n  if (this.semver === ANY) {\n    return true\n  }\n\n  if (typeof version === 'string') {\n    version = new SemVer(version, this.options)\n  }\n\n  return cmp(version, this.operator, this.semver, this.options)\n}\n\nComparator.prototype.intersects = function (comp, options) {\n  if (!(comp instanceof Comparator)) {\n    throw new TypeError('a Comparator is required')\n  }\n\n  if (!options || typeof options !== 'object') {\n    options = {\n      loose: !!options,\n      includePrerelease: false\n    }\n  }\n\n  var rangeTmp\n\n  if (this.operator === '') {\n    rangeTmp = new Range(comp.value, options)\n    return satisfies(this.value, rangeTmp, options)\n  } else if (comp.operator === '') {\n    rangeTmp = new Range(this.value, options)\n    return satisfies(comp.semver, rangeTmp, options)\n  }\n\n  var sameDirectionIncreasing =\n    (this.operator === '>=' || this.operator === '>') &&\n    (comp.operator === '>=' || comp.operator === '>')\n  var sameDirectionDecreasing =\n    (this.operator === '<=' || this.operator === '<') &&\n    (comp.operator === '<=' || comp.operator === '<')\n  var sameSemVer = this.semver.version === comp.semver.version\n  var differentDirectionsInclusive =\n    (this.operator === '>=' || this.operator === '<=') &&\n    (comp.operator === '>=' || comp.operator === '<=')\n  var oppositeDirectionsLessThan =\n    cmp(this.semver, '<', comp.semver, options) &&\n    ((this.operator === '>=' || this.operator === '>') &&\n    (comp.operator === '<=' || comp.operator === '<'))\n  var oppositeDirectionsGreaterThan =\n    cmp(this.semver, '>', comp.semver, options) &&\n    ((this.operator === '<=' || this.operator === '<') &&\n    (comp.operator === '>=' || comp.operator === '>'))\n\n  return sameDirectionIncreasing || sameDirectionDecreasing ||\n    (sameSemVer && differentDirectionsInclusive) ||\n    oppositeDirectionsLessThan || oppositeDirectionsGreaterThan\n}\n\nexports.Range = Range\nfunction Range (range, options) {\n  if (!options || typeof options !== 'object') {\n    options = {\n      loose: !!options,\n      includePrerelease: false\n    }\n  }\n\n  if (range instanceof Range) {\n    if (range.loose === !!options.loose &&\n        range.includePrerelease === !!options.includePrerelease) {\n      return range\n    } else {\n      return new Range(range.raw, options)\n    }\n  }\n\n  if (range instanceof Comparator) {\n    return new Range(range.value, options)\n  }\n\n  if (!(this instanceof Range)) {\n    return new Range(range, options)\n  }\n\n  this.options = options\n  this.loose = !!options.loose\n  this.includePrerelease = !!options.includePrerelease\n\n  // First, split based on boolean or ||\n  this.raw = range\n  this.set = range.split(/\\s*\\|\\|\\s*/).map(function (range) {\n    return this.parseRange(range.trim())\n  }, this).filter(function (c) {\n    // throw out any that are not relevant for whatever reason\n    return c.length\n  })\n\n  if (!this.set.length) {\n    throw new TypeError('Invalid SemVer Range: ' + range)\n  }\n\n  this.format()\n}\n\nRange.prototype.format = function () {\n  this.range = this.set.map(function (comps) {\n    return comps.join(' ').trim()\n  }).join('||').trim()\n  return this.range\n}\n\nRange.prototype.toString = function () {\n  return this.range\n}\n\nRange.prototype.parseRange = function (range) {\n  var loose = this.options.loose\n  range = range.trim()\n  // `1.2.3 - 1.2.4` => `>=1.2.3 <=1.2.4`\n  var hr = loose ? re[HYPHENRANGELOOSE] : re[HYPHENRANGE]\n  range = range.replace(hr, hyphenReplace)\n  debug('hyphen replace', range)\n  // `> 1.2.3 < 1.2.5` => `>1.2.3 <1.2.5`\n  range = range.replace(re[COMPARATORTRIM], comparatorTrimReplace)\n  debug('comparator trim', range, re[COMPARATORTRIM])\n\n  // `~ 1.2.3` => `~1.2.3`\n  range = range.replace(re[TILDETRIM], tildeTrimReplace)\n\n  // `^ 1.2.3` => `^1.2.3`\n  range = range.replace(re[CARETTRIM], caretTrimReplace)\n\n  // normalize spaces\n  range = range.split(/\\s+/).join(' ')\n\n  // At this point, the range is completely trimmed and\n  // ready to be split into comparators.\n\n  var compRe = loose ? re[COMPARATORLOOSE] : re[COMPARATOR]\n  var set = range.split(' ').map(function (comp) {\n    return parseComparator(comp, this.options)\n  }, this).join(' ').split(/\\s+/)\n  if (this.options.loose) {\n    // in loose mode, throw out any that are not valid comparators\n    set = set.filter(function (comp) {\n      return !!comp.match(compRe)\n    })\n  }\n  set = set.map(function (comp) {\n    return new Comparator(comp, this.options)\n  }, this)\n\n  return set\n}\n\nRange.prototype.intersects = function (range, options) {\n  if (!(range instanceof Range)) {\n    throw new TypeError('a Range is required')\n  }\n\n  return this.set.some(function (thisComparators) {\n    return thisComparators.every(function (thisComparator) {\n      return range.set.some(function (rangeComparators) {\n        return rangeComparators.every(function (rangeComparator) {\n          return thisComparator.intersects(rangeComparator, options)\n        })\n      })\n    })\n  })\n}\n\n// Mostly just for testing and legacy API reasons\nexports.toComparators = toComparators\nfunction toComparators (range, options) {\n  return new Range(range, options).set.map(function (comp) {\n    return comp.map(function (c) {\n      return c.value\n    }).join(' ').trim().split(' ')\n  })\n}\n\n// comprised of xranges, tildes, stars, and gtlt's at this point.\n// already replaced the hyphen ranges\n// turn into a set of JUST comparators.\nfunction parseComparator (comp, options) {\n  debug('comp', comp, options)\n  comp = replaceCarets(comp, options)\n  debug('caret', comp)\n  comp = replaceTildes(comp, options)\n  debug('tildes', comp)\n  comp = replaceXRanges(comp, options)\n  debug('xrange', comp)\n  comp = replaceStars(comp, options)\n  debug('stars', comp)\n  return comp\n}\n\nfunction isX (id) {\n  return !id || id.toLowerCase() === 'x' || id === '*'\n}\n\n// ~, ~> --> * (any, kinda silly)\n// ~2, ~2.x, ~2.x.x, ~>2, ~>2.x ~>2.x.x --> >=2.0.0 <3.0.0\n// ~2.0, ~2.0.x, ~>2.0, ~>2.0.x --> >=2.0.0 <2.1.0\n// ~1.2, ~1.2.x, ~>1.2, ~>1.2.x --> >=1.2.0 <1.3.0\n// ~1.2.3, ~>1.2.3 --> >=1.2.3 <1.3.0\n// ~1.2.0, ~>1.2.0 --> >=1.2.0 <1.3.0\nfunction replaceTildes (comp, options) {\n  return comp.trim().split(/\\s+/).map(function (comp) {\n    return replaceTilde(comp, options)\n  }).join(' ')\n}\n\nfunction replaceTilde (comp, options) {\n  var r = options.loose ? re[TILDELOOSE] : re[TILDE]\n  return comp.replace(r, function (_, M, m, p, pr) {\n    debug('tilde', comp, _, M, m, p, pr)\n    var ret\n\n    if (isX(M)) {\n      ret = ''\n    } else if (isX(m)) {\n      ret = '>=' + M + '.0.0 <' + (+M + 1) + '.0.0'\n    } else if (isX(p)) {\n      // ~1.2 == >=1.2.0 <1.3.0\n      ret = '>=' + M + '.' + m + '.0 <' + M + '.' + (+m + 1) + '.0'\n    } else if (pr) {\n      debug('replaceTilde pr', pr)\n      ret = '>=' + M + '.' + m + '.' + p + '-' + pr +\n            ' <' + M + '.' + (+m + 1) + '.0'\n    } else {\n      // ~1.2.3 == >=1.2.3 <1.3.0\n      ret = '>=' + M + '.' + m + '.' + p +\n            ' <' + M + '.' + (+m + 1) + '.0'\n    }\n\n    debug('tilde return', ret)\n    return ret\n  })\n}\n\n// ^ --> * (any, kinda silly)\n// ^2, ^2.x, ^2.x.x --> >=2.0.0 <3.0.0\n// ^2.0, ^2.0.x --> >=2.0.0 <3.0.0\n// ^1.2, ^1.2.x --> >=1.2.0 <2.0.0\n// ^1.2.3 --> >=1.2.3 <2.0.0\n// ^1.2.0 --> >=1.2.0 <2.0.0\nfunction replaceCarets (comp, options) {\n  return comp.trim().split(/\\s+/).map(function (comp) {\n    return replaceCaret(comp, options)\n  }).join(' ')\n}\n\nfunction replaceCaret (comp, options) {\n  debug('caret', comp, options)\n  var r = options.loose ? re[CARETLOOSE] : re[CARET]\n  return comp.replace(r, function (_, M, m, p, pr) {\n    debug('caret', comp, _, M, m, p, pr)\n    var ret\n\n    if (isX(M)) {\n      ret = ''\n    } else if (isX(m)) {\n      ret = '>=' + M + '.0.0 <' + (+M + 1) + '.0.0'\n    } else if (isX(p)) {\n      if (M === '0') {\n        ret = '>=' + M + '.' + m + '.0 <' + M + '.' + (+m + 1) + '.0'\n      } else {\n        ret = '>=' + M + '.' + m + '.0 <' + (+M + 1) + '.0.0'\n      }\n    } else if (pr) {\n      debug('replaceCaret pr', pr)\n      if (M === '0') {\n        if (m === '0') {\n          ret = '>=' + M + '.' + m + '.' + p + '-' + pr +\n                ' <' + M + '.' + m + '.' + (+p + 1)\n        } else {\n          ret = '>=' + M + '.' + m + '.' + p + '-' + pr +\n                ' <' + M + '.' + (+m + 1) + '.0'\n        }\n      } else {\n        ret = '>=' + M + '.' + m + '.' + p + '-' + pr +\n              ' <' + (+M + 1) + '.0.0'\n      }\n    } else {\n      debug('no pr')\n      if (M === '0') {\n        if (m === '0') {\n          ret = '>=' + M + '.' + m + '.' + p +\n                ' <' + M + '.' + m + '.' + (+p + 1)\n        } else {\n          ret = '>=' + M + '.' + m + '.' + p +\n                ' <' + M + '.' + (+m + 1) + '.0'\n        }\n      } else {\n        ret = '>=' + M + '.' + m + '.' + p +\n              ' <' + (+M + 1) + '.0.0'\n      }\n    }\n\n    debug('caret return', ret)\n    return ret\n  })\n}\n\nfunction replaceXRanges (comp, options) {\n  debug('replaceXRanges', comp, options)\n  return comp.split(/\\s+/).map(function (comp) {\n    return replaceXRange(comp, options)\n  }).join(' ')\n}\n\nfunction replaceXRange (comp, options) {\n  comp = comp.trim()\n  var r = options.loose ? re[XRANGELOOSE] : re[XRANGE]\n  return comp.replace(r, function (ret, gtlt, M, m, p, pr) {\n    debug('xRange', comp, ret, gtlt, M, m, p, pr)\n    var xM = isX(M)\n    var xm = xM || isX(m)\n    var xp = xm || isX(p)\n    var anyX = xp\n\n    if (gtlt === '=' && anyX) {\n      gtlt = ''\n    }\n\n    if (xM) {\n      if (gtlt === '>' || gtlt === '<') {\n        // nothing is allowed\n        ret = '<0.0.0'\n      } else {\n        // nothing is forbidden\n        ret = '*'\n      }\n    } else if (gtlt && anyX) {\n      // we know patch is an x, because we have any x at all.\n      // replace X with 0\n      if (xm) {\n        m = 0\n      }\n      p = 0\n\n      if (gtlt === '>') {\n        // >1 => >=2.0.0\n        // >1.2 => >=1.3.0\n        // >1.2.3 => >= 1.2.4\n        gtlt = '>='\n        if (xm) {\n          M = +M + 1\n          m = 0\n          p = 0\n        } else {\n          m = +m + 1\n          p = 0\n        }\n      } else if (gtlt === '<=') {\n        // <=0.7.x is actually <0.8.0, since any 0.7.x should\n        // pass.  Similarly, <=7.x is actually <8.0.0, etc.\n        gtlt = '<'\n        if (xm) {\n          M = +M + 1\n        } else {\n          m = +m + 1\n        }\n      }\n\n      ret = gtlt + M + '.' + m + '.' + p\n    } else if (xm) {\n      ret = '>=' + M + '.0.0 <' + (+M + 1) + '.0.0'\n    } else if (xp) {\n      ret = '>=' + M + '.' + m + '.0 <' + M + '.' + (+m + 1) + '.0'\n    }\n\n    debug('xRange return', ret)\n\n    return ret\n  })\n}\n\n// Because * is AND-ed with everything else in the comparator,\n// and '' means \"any version\", just remove the *s entirely.\nfunction replaceStars (comp, options) {\n  debug('replaceStars', comp, options)\n  // Looseness is ignored here.  star is always as loose as it gets!\n  return comp.trim().replace(re[STAR], '')\n}\n\n// This function is passed to string.replace(re[HYPHENRANGE])\n// M, m, patch, prerelease, build\n// 1.2 - 3.4.5 => >=1.2.0 <=3.4.5\n// 1.2.3 - 3.4 => >=1.2.0 <3.5.0 Any 3.4.x will do\n// 1.2 - 3.4 => >=1.2.0 <3.5.0\nfunction hyphenReplace ($0,\n  from, fM, fm, fp, fpr, fb,\n  to, tM, tm, tp, tpr, tb) {\n  if (isX(fM)) {\n    from = ''\n  } else if (isX(fm)) {\n    from = '>=' + fM + '.0.0'\n  } else if (isX(fp)) {\n    from = '>=' + fM + '.' + fm + '.0'\n  } else {\n    from = '>=' + from\n  }\n\n  if (isX(tM)) {\n    to = ''\n  } else if (isX(tm)) {\n    to = '<' + (+tM + 1) + '.0.0'\n  } else if (isX(tp)) {\n    to = '<' + tM + '.' + (+tm + 1) + '.0'\n  } else if (tpr) {\n    to = '<=' + tM + '.' + tm + '.' + tp + '-' + tpr\n  } else {\n    to = '<=' + to\n  }\n\n  return (from + ' ' + to).trim()\n}\n\n// if ANY of the sets match ALL of its comparators, then pass\nRange.prototype.test = function (version) {\n  if (!version) {\n    return false\n  }\n\n  if (typeof version === 'string') {\n    version = new SemVer(version, this.options)\n  }\n\n  for (var i = 0; i < this.set.length; i++) {\n    if (testSet(this.set[i], version, this.options)) {\n      return true\n    }\n  }\n  return false\n}\n\nfunction testSet (set, version, options) {\n  for (var i = 0; i < set.length; i++) {\n    if (!set[i].test(version)) {\n      return false\n    }\n  }\n\n  if (version.prerelease.length && !options.includePrerelease) {\n    // Find the set of versions that are allowed to have prereleases\n    // For example, ^1.2.3-pr.1 desugars to >=1.2.3-pr.1 <2.0.0\n    // That should allow `1.2.3-pr.2` to pass.\n    // However, `1.2.4-alpha.notready` should NOT be allowed,\n    // even though it's within the range set by the comparators.\n    for (i = 0; i < set.length; i++) {\n      debug(set[i].semver)\n      if (set[i].semver === ANY) {\n        continue\n      }\n\n      if (set[i].semver.prerelease.length > 0) {\n        var allowed = set[i].semver\n        if (allowed.major === version.major &&\n            allowed.minor === version.minor &&\n            allowed.patch === version.patch) {\n          return true\n        }\n      }\n    }\n\n    // Version has a -pre, but it's not one of the ones we like.\n    return false\n  }\n\n  return true\n}\n\nexports.satisfies = satisfies\nfunction satisfies (version, range, options) {\n  try {\n    range = new Range(range, options)\n  } catch (er) {\n    return false\n  }\n  return range.test(version)\n}\n\nexports.maxSatisfying = maxSatisfying\nfunction maxSatisfying (versions, range, options) {\n  var max = null\n  var maxSV = null\n  try {\n    var rangeObj = new Range(range, options)\n  } catch (er) {\n    return null\n  }\n  versions.forEach(function (v) {\n    if (rangeObj.test(v)) {\n      // satisfies(v, range, options)\n      if (!max || maxSV.compare(v) === -1) {\n        // compare(max, v, true)\n        max = v\n        maxSV = new SemVer(max, options)\n      }\n    }\n  })\n  return max\n}\n\nexports.minSatisfying = minSatisfying\nfunction minSatisfying (versions, range, options) {\n  var min = null\n  var minSV = null\n  try {\n    var rangeObj = new Range(range, options)\n  } catch (er) {\n    return null\n  }\n  versions.forEach(function (v) {\n    if (rangeObj.test(v)) {\n      // satisfies(v, range, options)\n      if (!min || minSV.compare(v) === 1) {\n        // compare(min, v, true)\n        min = v\n        minSV = new SemVer(min, options)\n      }\n    }\n  })\n  return min\n}\n\nexports.minVersion = minVersion\nfunction minVersion (range, loose) {\n  range = new Range(range, loose)\n\n  var minver = new SemVer('0.0.0')\n  if (range.test(minver)) {\n    return minver\n  }\n\n  minver = new SemVer('0.0.0-0')\n  if (range.test(minver)) {\n    return minver\n  }\n\n  minver = null\n  for (var i = 0; i < range.set.length; ++i) {\n    var comparators = range.set[i]\n\n    comparators.forEach(function (comparator) {\n      // Clone to avoid manipulating the comparator's semver object.\n      var compver = new SemVer(comparator.semver.version)\n      switch (comparator.operator) {\n        case '>':\n          if (compver.prerelease.length === 0) {\n            compver.patch++\n          } else {\n            compver.prerelease.push(0)\n          }\n          compver.raw = compver.format()\n          /* fallthrough */\n        case '':\n        case '>=':\n          if (!minver || gt(minver, compver)) {\n            minver = compver\n          }\n          break\n        case '<':\n        case '<=':\n          /* Ignore maximum versions */\n          break\n        /* istanbul ignore next */\n        default:\n          throw new Error('Unexpected operation: ' + comparator.operator)\n      }\n    })\n  }\n\n  if (minver && range.test(minver)) {\n    return minver\n  }\n\n  return null\n}\n\nexports.validRange = validRange\nfunction validRange (range, options) {\n  try {\n    // Return '*' instead of '' so that truthiness works.\n    // This will throw if it's invalid anyway\n    return new Range(range, options).range || '*'\n  } catch (er) {\n    return null\n  }\n}\n\n// Determine if version is less than all the versions possible in the range\nexports.ltr = ltr\nfunction ltr (version, range, options) {\n  return outside(version, range, '<', options)\n}\n\n// Determine if version is greater than all the versions possible in the range.\nexports.gtr = gtr\nfunction gtr (version, range, options) {\n  return outside(version, range, '>', options)\n}\n\nexports.outside = outside\nfunction outside (version, range, hilo, options) {\n  version = new SemVer(version, options)\n  range = new Range(range, options)\n\n  var gtfn, ltefn, ltfn, comp, ecomp\n  switch (hilo) {\n    case '>':\n      gtfn = gt\n      ltefn = lte\n      ltfn = lt\n      comp = '>'\n      ecomp = '>='\n      break\n    case '<':\n      gtfn = lt\n      ltefn = gte\n      ltfn = gt\n      comp = '<'\n      ecomp = '<='\n      break\n    default:\n      throw new TypeError('Must provide a hilo val of \"<\" or \">\"')\n  }\n\n  // If it satisifes the range it is not outside\n  if (satisfies(version, range, options)) {\n    return false\n  }\n\n  // From now on, variable terms are as if we're in \"gtr\" mode.\n  // but note that everything is flipped for the \"ltr\" function.\n\n  for (var i = 0; i < range.set.length; ++i) {\n    var comparators = range.set[i]\n\n    var high = null\n    var low = null\n\n    comparators.forEach(function (comparator) {\n      if (comparator.semver === ANY) {\n        comparator = new Comparator('>=0.0.0')\n      }\n      high = high || comparator\n      low = low || comparator\n      if (gtfn(comparator.semver, high.semver, options)) {\n        high = comparator\n      } else if (ltfn(comparator.semver, low.semver, options)) {\n        low = comparator\n      }\n    })\n\n    // If the edge version comparator has a operator then our version\n    // isn't outside it\n    if (high.operator === comp || high.operator === ecomp) {\n      return false\n    }\n\n    // If the lowest version comparator has an operator and our version\n    // is less than it then it isn't higher than the range\n    if ((!low.operator || low.operator === comp) &&\n        ltefn(version, low.semver)) {\n      return false\n    } else if (low.operator === ecomp && ltfn(version, low.semver)) {\n      return false\n    }\n  }\n  return true\n}\n\nexports.prerelease = prerelease\nfunction prerelease (version, options) {\n  var parsed = parse(version, options)\n  return (parsed && parsed.prerelease.length) ? parsed.prerelease : null\n}\n\nexports.intersects = intersects\nfunction intersects (r1, r2, options) {\n  r1 = new Range(r1, options)\n  r2 = new Range(r2, options)\n  return r1.intersects(r2)\n}\n\nexports.coerce = coerce\nfunction coerce (version) {\n  if (version instanceof SemVer) {\n    return version\n  }\n\n  if (typeof version !== 'string') {\n    return null\n  }\n\n  var match = version.match(re[COERCE])\n\n  if (match == null) {\n    return null\n  }\n\n  return parse(match[1] +\n    '.' + (match[2] || '0') +\n    '.' + (match[3] || '0'))\n}\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\n/**\r\n * The Position namespace provides helper functions to work with\r\n * [Position](#Position) literals.\r\n */\r\nexport var Position;\r\n(function (Position) {\r\n    /**\r\n     * Creates a new Position literal from the given line and character.\r\n     * @param line The position's line.\r\n     * @param character The position's character.\r\n     */\r\n    function create(line, character) {\r\n        return { line: line, character: character };\r\n    }\r\n    Position.create = create;\r\n    /**\r\n     * Checks whether the given liternal conforms to the [Position](#Position) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.objectLiteral(candidate) && Is.number(candidate.line) && Is.number(candidate.character);\r\n    }\r\n    Position.is = is;\r\n})(Position || (Position = {}));\r\n/**\r\n * The Range namespace provides helper functions to work with\r\n * [Range](#Range) literals.\r\n */\r\nexport var Range;\r\n(function (Range) {\r\n    function create(one, two, three, four) {\r\n        if (Is.number(one) && Is.number(two) && Is.number(three) && Is.number(four)) {\r\n            return { start: Position.create(one, two), end: Position.create(three, four) };\r\n        }\r\n        else if (Position.is(one) && Position.is(two)) {\r\n            return { start: one, end: two };\r\n        }\r\n        else {\r\n            throw new Error(\"Range#create called with invalid arguments[\" + one + \", \" + two + \", \" + three + \", \" + four + \"]\");\r\n        }\r\n    }\r\n    Range.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [Range](#Range) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.objectLiteral(candidate) && Position.is(candidate.start) && Position.is(candidate.end);\r\n    }\r\n    Range.is = is;\r\n})(Range || (Range = {}));\r\n/**\r\n * The Location namespace provides helper functions to work with\r\n * [Location](#Location) literals.\r\n */\r\nexport var Location;\r\n(function (Location) {\r\n    /**\r\n     * Creates a Location literal.\r\n     * @param uri The location's uri.\r\n     * @param range The location's range.\r\n     */\r\n    function create(uri, range) {\r\n        return { uri: uri, range: range };\r\n    }\r\n    Location.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [Location](#Location) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Range.is(candidate.range) && (Is.string(candidate.uri) || Is.undefined(candidate.uri));\r\n    }\r\n    Location.is = is;\r\n})(Location || (Location = {}));\r\n/**\r\n * The LocationLink namespace provides helper functions to work with\r\n * [LocationLink](#LocationLink) literals.\r\n */\r\nexport var LocationLink;\r\n(function (LocationLink) {\r\n    /**\r\n     * Creates a LocationLink literal.\r\n     * @param targetUri The definition's uri.\r\n     * @param targetRange The full range of the definition.\r\n     * @param targetSelectionRange The span of the symbol definition at the target.\r\n     * @param originSelectionRange The span of the symbol being defined in the originating source file.\r\n     */\r\n    function create(targetUri, targetRange, targetSelectionRange, originSelectionRange) {\r\n        return { targetUri: targetUri, targetRange: targetRange, targetSelectionRange: targetSelectionRange, originSelectionRange: originSelectionRange };\r\n    }\r\n    LocationLink.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [LocationLink](#LocationLink) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Range.is(candidate.targetRange) && Is.string(candidate.targetUri)\r\n            && (Range.is(candidate.targetSelectionRange) || Is.undefined(candidate.targetSelectionRange))\r\n            && (Range.is(candidate.originSelectionRange) || Is.undefined(candidate.originSelectionRange));\r\n    }\r\n    LocationLink.is = is;\r\n})(LocationLink || (LocationLink = {}));\r\n/**\r\n * The Color namespace provides helper functions to work with\r\n * [Color](#Color) literals.\r\n */\r\nexport var Color;\r\n(function (Color) {\r\n    /**\r\n     * Creates a new Color literal.\r\n     */\r\n    function create(red, green, blue, alpha) {\r\n        return {\r\n            red: red,\r\n            green: green,\r\n            blue: blue,\r\n            alpha: alpha,\r\n        };\r\n    }\r\n    Color.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [Color](#Color) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.number(candidate.red)\r\n            && Is.number(candidate.green)\r\n            && Is.number(candidate.blue)\r\n            && Is.number(candidate.alpha);\r\n    }\r\n    Color.is = is;\r\n})(Color || (Color = {}));\r\n/**\r\n * The ColorInformation namespace provides helper functions to work with\r\n * [ColorInformation](#ColorInformation) literals.\r\n */\r\nexport var ColorInformation;\r\n(function (ColorInformation) {\r\n    /**\r\n     * Creates a new ColorInformation literal.\r\n     */\r\n    function create(range, color) {\r\n        return {\r\n            range: range,\r\n            color: color,\r\n        };\r\n    }\r\n    ColorInformation.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [ColorInformation](#ColorInformation) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Range.is(candidate.range) && Color.is(candidate.color);\r\n    }\r\n    ColorInformation.is = is;\r\n})(ColorInformation || (ColorInformation = {}));\r\n/**\r\n * The Color namespace provides helper functions to work with\r\n * [ColorPresentation](#ColorPresentation) literals.\r\n */\r\nexport var ColorPresentation;\r\n(function (ColorPresentation) {\r\n    /**\r\n     * Creates a new ColorInformation literal.\r\n     */\r\n    function create(label, textEdit, additionalTextEdits) {\r\n        return {\r\n            label: label,\r\n            textEdit: textEdit,\r\n            additionalTextEdits: additionalTextEdits,\r\n        };\r\n    }\r\n    ColorPresentation.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [ColorInformation](#ColorInformation) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.string(candidate.label)\r\n            && (Is.undefined(candidate.textEdit) || TextEdit.is(candidate))\r\n            && (Is.undefined(candidate.additionalTextEdits) || Is.typedArray(candidate.additionalTextEdits, TextEdit.is));\r\n    }\r\n    ColorPresentation.is = is;\r\n})(ColorPresentation || (ColorPresentation = {}));\r\n/**\r\n * Enum of known range kinds\r\n */\r\nexport var FoldingRangeKind;\r\n(function (FoldingRangeKind) {\r\n    /**\r\n     * Folding range for a comment\r\n     */\r\n    FoldingRangeKind[\"Comment\"] = \"comment\";\r\n    /**\r\n     * Folding range for a imports or includes\r\n     */\r\n    FoldingRangeKind[\"Imports\"] = \"imports\";\r\n    /**\r\n     * Folding range for a region (e.g. `#region`)\r\n     */\r\n    FoldingRangeKind[\"Region\"] = \"region\";\r\n})(FoldingRangeKind || (FoldingRangeKind = {}));\r\n/**\r\n * The folding range namespace provides helper functions to work with\r\n * [FoldingRange](#FoldingRange) literals.\r\n */\r\nexport var FoldingRange;\r\n(function (FoldingRange) {\r\n    /**\r\n     * Creates a new FoldingRange literal.\r\n     */\r\n    function create(startLine, endLine, startCharacter, endCharacter, kind) {\r\n        var result = {\r\n            startLine: startLine,\r\n            endLine: endLine\r\n        };\r\n        if (Is.defined(startCharacter)) {\r\n            result.startCharacter = startCharacter;\r\n        }\r\n        if (Is.defined(endCharacter)) {\r\n            result.endCharacter = endCharacter;\r\n        }\r\n        if (Is.defined(kind)) {\r\n            result.kind = kind;\r\n        }\r\n        return result;\r\n    }\r\n    FoldingRange.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [FoldingRange](#FoldingRange) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.number(candidate.startLine) && Is.number(candidate.startLine)\r\n            && (Is.undefined(candidate.startCharacter) || Is.number(candidate.startCharacter))\r\n            && (Is.undefined(candidate.endCharacter) || Is.number(candidate.endCharacter))\r\n            && (Is.undefined(candidate.kind) || Is.string(candidate.kind));\r\n    }\r\n    FoldingRange.is = is;\r\n})(FoldingRange || (FoldingRange = {}));\r\n/**\r\n * The DiagnosticRelatedInformation namespace provides helper functions to work with\r\n * [DiagnosticRelatedInformation](#DiagnosticRelatedInformation) literals.\r\n */\r\nexport var DiagnosticRelatedInformation;\r\n(function (DiagnosticRelatedInformation) {\r\n    /**\r\n     * Creates a new DiagnosticRelatedInformation literal.\r\n     */\r\n    function create(location, message) {\r\n        return {\r\n            location: location,\r\n            message: message\r\n        };\r\n    }\r\n    DiagnosticRelatedInformation.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [DiagnosticRelatedInformation](#DiagnosticRelatedInformation) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Location.is(candidate.location) && Is.string(candidate.message);\r\n    }\r\n    DiagnosticRelatedInformation.is = is;\r\n})(DiagnosticRelatedInformation || (DiagnosticRelatedInformation = {}));\r\n/**\r\n * The diagnostic's severity.\r\n */\r\nexport var DiagnosticSeverity;\r\n(function (DiagnosticSeverity) {\r\n    /**\r\n     * Reports an error.\r\n     */\r\n    DiagnosticSeverity.Error = 1;\r\n    /**\r\n     * Reports a warning.\r\n     */\r\n    DiagnosticSeverity.Warning = 2;\r\n    /**\r\n     * Reports an information.\r\n     */\r\n    DiagnosticSeverity.Information = 3;\r\n    /**\r\n     * Reports a hint.\r\n     */\r\n    DiagnosticSeverity.Hint = 4;\r\n})(DiagnosticSeverity || (DiagnosticSeverity = {}));\r\nexport var DiagnosticTag;\r\n(function (DiagnosticTag) {\r\n    /**\r\n     * Unused or unnecessary code.\r\n     *\r\n     * Clients are allowed to render diagnostics with this tag faded out instead of having\r\n     * an error squiggle.\r\n     */\r\n    DiagnosticTag.Unnecessary = 1;\r\n})(DiagnosticTag || (DiagnosticTag = {}));\r\n/**\r\n * The Diagnostic namespace provides helper functions to work with\r\n * [Diagnostic](#Diagnostic) literals.\r\n */\r\nexport var Diagnostic;\r\n(function (Diagnostic) {\r\n    /**\r\n     * Creates a new Diagnostic literal.\r\n     */\r\n    function create(range, message, severity, code, source, relatedInformation) {\r\n        var result = { range: range, message: message };\r\n        if (Is.defined(severity)) {\r\n            result.severity = severity;\r\n        }\r\n        if (Is.defined(code)) {\r\n            result.code = code;\r\n        }\r\n        if (Is.defined(source)) {\r\n            result.source = source;\r\n        }\r\n        if (Is.defined(relatedInformation)) {\r\n            result.relatedInformation = relatedInformation;\r\n        }\r\n        return result;\r\n    }\r\n    Diagnostic.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [Diagnostic](#Diagnostic) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate)\r\n            && Range.is(candidate.range)\r\n            && Is.string(candidate.message)\r\n            && (Is.number(candidate.severity) || Is.undefined(candidate.severity))\r\n            && (Is.number(candidate.code) || Is.string(candidate.code) || Is.undefined(candidate.code))\r\n            && (Is.string(candidate.source) || Is.undefined(candidate.source))\r\n            && (Is.undefined(candidate.relatedInformation) || Is.typedArray(candidate.relatedInformation, DiagnosticRelatedInformation.is));\r\n    }\r\n    Diagnostic.is = is;\r\n})(Diagnostic || (Diagnostic = {}));\r\n/**\r\n * The Command namespace provides helper functions to work with\r\n * [Command](#Command) literals.\r\n */\r\nexport var Command;\r\n(function (Command) {\r\n    /**\r\n     * Creates a new Command literal.\r\n     */\r\n    function create(title, command) {\r\n        var args = [];\r\n        for (var _i = 2; _i < arguments.length; _i++) {\r\n            args[_i - 2] = arguments[_i];\r\n        }\r\n        var result = { title: title, command: command };\r\n        if (Is.defined(args) && args.length > 0) {\r\n            result.arguments = args;\r\n        }\r\n        return result;\r\n    }\r\n    Command.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [Command](#Command) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Is.string(candidate.title) && Is.string(candidate.command);\r\n    }\r\n    Command.is = is;\r\n})(Command || (Command = {}));\r\n/**\r\n * The TextEdit namespace provides helper function to create replace,\r\n * insert and delete edits more easily.\r\n */\r\nexport var TextEdit;\r\n(function (TextEdit) {\r\n    /**\r\n     * Creates a replace text edit.\r\n     * @param range The range of text to be replaced.\r\n     * @param newText The new text.\r\n     */\r\n    function replace(range, newText) {\r\n        return { range: range, newText: newText };\r\n    }\r\n    TextEdit.replace = replace;\r\n    /**\r\n     * Creates a insert text edit.\r\n     * @param position The position to insert the text at.\r\n     * @param newText The text to be inserted.\r\n     */\r\n    function insert(position, newText) {\r\n        return { range: { start: position, end: position }, newText: newText };\r\n    }\r\n    TextEdit.insert = insert;\r\n    /**\r\n     * Creates a delete text edit.\r\n     * @param range The range of text to be deleted.\r\n     */\r\n    function del(range) {\r\n        return { range: range, newText: '' };\r\n    }\r\n    TextEdit.del = del;\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.objectLiteral(candidate)\r\n            && Is.string(candidate.newText)\r\n            && Range.is(candidate.range);\r\n    }\r\n    TextEdit.is = is;\r\n})(TextEdit || (TextEdit = {}));\r\n/**\r\n * The TextDocumentEdit namespace provides helper function to create\r\n * an edit that manipulates a text document.\r\n */\r\nexport var TextDocumentEdit;\r\n(function (TextDocumentEdit) {\r\n    /**\r\n     * Creates a new `TextDocumentEdit`\r\n     */\r\n    function create(textDocument, edits) {\r\n        return { textDocument: textDocument, edits: edits };\r\n    }\r\n    TextDocumentEdit.create = create;\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate)\r\n            && VersionedTextDocumentIdentifier.is(candidate.textDocument)\r\n            && Array.isArray(candidate.edits);\r\n    }\r\n    TextDocumentEdit.is = is;\r\n})(TextDocumentEdit || (TextDocumentEdit = {}));\r\nexport var CreateFile;\r\n(function (CreateFile) {\r\n    function create(uri, options) {\r\n        var result = {\r\n            kind: 'create',\r\n            uri: uri\r\n        };\r\n        if (options !== void 0 && (options.overwrite !== void 0 || options.ignoreIfExists !== void 0)) {\r\n            result.options = options;\r\n        }\r\n        return result;\r\n    }\r\n    CreateFile.create = create;\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate && candidate.kind === 'create' && Is.string(candidate.uri) &&\r\n            (candidate.options === void 0 ||\r\n                ((candidate.options.overwrite === void 0 || Is.boolean(candidate.options.overwrite)) && (candidate.options.ignoreIfExists === void 0 || Is.boolean(candidate.options.ignoreIfExists))));\r\n    }\r\n    CreateFile.is = is;\r\n})(CreateFile || (CreateFile = {}));\r\nexport var RenameFile;\r\n(function (RenameFile) {\r\n    function create(oldUri, newUri, options) {\r\n        var result = {\r\n            kind: 'rename',\r\n            oldUri: oldUri,\r\n            newUri: newUri\r\n        };\r\n        if (options !== void 0 && (options.overwrite !== void 0 || options.ignoreIfExists !== void 0)) {\r\n            result.options = options;\r\n        }\r\n        return result;\r\n    }\r\n    RenameFile.create = create;\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate && candidate.kind === 'rename' && Is.string(candidate.oldUri) && Is.string(candidate.newUri) &&\r\n            (candidate.options === void 0 ||\r\n                ((candidate.options.overwrite === void 0 || Is.boolean(candidate.options.overwrite)) && (candidate.options.ignoreIfExists === void 0 || Is.boolean(candidate.options.ignoreIfExists))));\r\n    }\r\n    RenameFile.is = is;\r\n})(RenameFile || (RenameFile = {}));\r\nexport var DeleteFile;\r\n(function (DeleteFile) {\r\n    function create(uri, options) {\r\n        var result = {\r\n            kind: 'delete',\r\n            uri: uri\r\n        };\r\n        if (options !== void 0 && (options.recursive !== void 0 || options.ignoreIfNotExists !== void 0)) {\r\n            result.options = options;\r\n        }\r\n        return result;\r\n    }\r\n    DeleteFile.create = create;\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate && candidate.kind === 'delete' && Is.string(candidate.uri) &&\r\n            (candidate.options === void 0 ||\r\n                ((candidate.options.recursive === void 0 || Is.boolean(candidate.options.recursive)) && (candidate.options.ignoreIfNotExists === void 0 || Is.boolean(candidate.options.ignoreIfNotExists))));\r\n    }\r\n    DeleteFile.is = is;\r\n})(DeleteFile || (DeleteFile = {}));\r\nexport var WorkspaceEdit;\r\n(function (WorkspaceEdit) {\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate &&\r\n            (candidate.changes !== void 0 || candidate.documentChanges !== void 0) &&\r\n            (candidate.documentChanges === void 0 || candidate.documentChanges.every(function (change) {\r\n                if (Is.string(change.kind)) {\r\n                    return CreateFile.is(change) || RenameFile.is(change) || DeleteFile.is(change);\r\n                }\r\n                else {\r\n                    return TextDocumentEdit.is(change);\r\n                }\r\n            }));\r\n    }\r\n    WorkspaceEdit.is = is;\r\n})(WorkspaceEdit || (WorkspaceEdit = {}));\r\nvar TextEditChangeImpl = /** @class */ (function () {\r\n    function TextEditChangeImpl(edits) {\r\n        this.edits = edits;\r\n    }\r\n    TextEditChangeImpl.prototype.insert = function (position, newText) {\r\n        this.edits.push(TextEdit.insert(position, newText));\r\n    };\r\n    TextEditChangeImpl.prototype.replace = function (range, newText) {\r\n        this.edits.push(TextEdit.replace(range, newText));\r\n    };\r\n    TextEditChangeImpl.prototype.delete = function (range) {\r\n        this.edits.push(TextEdit.del(range));\r\n    };\r\n    TextEditChangeImpl.prototype.add = function (edit) {\r\n        this.edits.push(edit);\r\n    };\r\n    TextEditChangeImpl.prototype.all = function () {\r\n        return this.edits;\r\n    };\r\n    TextEditChangeImpl.prototype.clear = function () {\r\n        this.edits.splice(0, this.edits.length);\r\n    };\r\n    return TextEditChangeImpl;\r\n}());\r\n/**\r\n * A workspace change helps constructing changes to a workspace.\r\n */\r\nvar WorkspaceChange = /** @class */ (function () {\r\n    function WorkspaceChange(workspaceEdit) {\r\n        var _this = this;\r\n        this._textEditChanges = Object.create(null);\r\n        if (workspaceEdit) {\r\n            this._workspaceEdit = workspaceEdit;\r\n            if (workspaceEdit.documentChanges) {\r\n                workspaceEdit.documentChanges.forEach(function (change) {\r\n                    if (TextDocumentEdit.is(change)) {\r\n                        var textEditChange = new TextEditChangeImpl(change.edits);\r\n                        _this._textEditChanges[change.textDocument.uri] = textEditChange;\r\n                    }\r\n                });\r\n            }\r\n            else if (workspaceEdit.changes) {\r\n                Object.keys(workspaceEdit.changes).forEach(function (key) {\r\n                    var textEditChange = new TextEditChangeImpl(workspaceEdit.changes[key]);\r\n                    _this._textEditChanges[key] = textEditChange;\r\n                });\r\n            }\r\n        }\r\n    }\r\n    Object.defineProperty(WorkspaceChange.prototype, \"edit\", {\r\n        /**\r\n         * Returns the underlying [WorkspaceEdit](#WorkspaceEdit) literal\r\n         * use to be returned from a workspace edit operation like rename.\r\n         */\r\n        get: function () {\r\n            return this._workspaceEdit;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    WorkspaceChange.prototype.getTextEditChange = function (key) {\r\n        if (VersionedTextDocumentIdentifier.is(key)) {\r\n            if (!this._workspaceEdit) {\r\n                this._workspaceEdit = {\r\n                    documentChanges: []\r\n                };\r\n            }\r\n            if (!this._workspaceEdit.documentChanges) {\r\n                throw new Error('Workspace edit is not configured for document changes.');\r\n            }\r\n            var textDocument = key;\r\n            var result = this._textEditChanges[textDocument.uri];\r\n            if (!result) {\r\n                var edits = [];\r\n                var textDocumentEdit = {\r\n                    textDocument: textDocument,\r\n                    edits: edits\r\n                };\r\n                this._workspaceEdit.documentChanges.push(textDocumentEdit);\r\n                result = new TextEditChangeImpl(edits);\r\n                this._textEditChanges[textDocument.uri] = result;\r\n            }\r\n            return result;\r\n        }\r\n        else {\r\n            if (!this._workspaceEdit) {\r\n                this._workspaceEdit = {\r\n                    changes: Object.create(null)\r\n                };\r\n            }\r\n            if (!this._workspaceEdit.changes) {\r\n                throw new Error('Workspace edit is not configured for normal text edit changes.');\r\n            }\r\n            var result = this._textEditChanges[key];\r\n            if (!result) {\r\n                var edits = [];\r\n                this._workspaceEdit.changes[key] = edits;\r\n                result = new TextEditChangeImpl(edits);\r\n                this._textEditChanges[key] = result;\r\n            }\r\n            return result;\r\n        }\r\n    };\r\n    WorkspaceChange.prototype.createFile = function (uri, options) {\r\n        this.checkDocumentChanges();\r\n        this._workspaceEdit.documentChanges.push(CreateFile.create(uri, options));\r\n    };\r\n    WorkspaceChange.prototype.renameFile = function (oldUri, newUri, options) {\r\n        this.checkDocumentChanges();\r\n        this._workspaceEdit.documentChanges.push(RenameFile.create(oldUri, newUri, options));\r\n    };\r\n    WorkspaceChange.prototype.deleteFile = function (uri, options) {\r\n        this.checkDocumentChanges();\r\n        this._workspaceEdit.documentChanges.push(DeleteFile.create(uri, options));\r\n    };\r\n    WorkspaceChange.prototype.checkDocumentChanges = function () {\r\n        if (!this._workspaceEdit || !this._workspaceEdit.documentChanges) {\r\n            throw new Error('Workspace edit is not configured for document changes.');\r\n        }\r\n    };\r\n    return WorkspaceChange;\r\n}());\r\nexport { WorkspaceChange };\r\n/**\r\n * The TextDocumentIdentifier namespace provides helper functions to work with\r\n * [TextDocumentIdentifier](#TextDocumentIdentifier) literals.\r\n */\r\nexport var TextDocumentIdentifier;\r\n(function (TextDocumentIdentifier) {\r\n    /**\r\n     * Creates a new TextDocumentIdentifier literal.\r\n     * @param uri The document's uri.\r\n     */\r\n    function create(uri) {\r\n        return { uri: uri };\r\n    }\r\n    TextDocumentIdentifier.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [TextDocumentIdentifier](#TextDocumentIdentifier) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Is.string(candidate.uri);\r\n    }\r\n    TextDocumentIdentifier.is = is;\r\n})(TextDocumentIdentifier || (TextDocumentIdentifier = {}));\r\n/**\r\n * The VersionedTextDocumentIdentifier namespace provides helper functions to work with\r\n * [VersionedTextDocumentIdentifier](#VersionedTextDocumentIdentifier) literals.\r\n */\r\nexport var VersionedTextDocumentIdentifier;\r\n(function (VersionedTextDocumentIdentifier) {\r\n    /**\r\n     * Creates a new VersionedTextDocumentIdentifier literal.\r\n     * @param uri The document's uri.\r\n     * @param uri The document's text.\r\n     */\r\n    function create(uri, version) {\r\n        return { uri: uri, version: version };\r\n    }\r\n    VersionedTextDocumentIdentifier.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [VersionedTextDocumentIdentifier](#VersionedTextDocumentIdentifier) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Is.string(candidate.uri) && (candidate.version === null || Is.number(candidate.version));\r\n    }\r\n    VersionedTextDocumentIdentifier.is = is;\r\n})(VersionedTextDocumentIdentifier || (VersionedTextDocumentIdentifier = {}));\r\n/**\r\n * The TextDocumentItem namespace provides helper functions to work with\r\n * [TextDocumentItem](#TextDocumentItem) literals.\r\n */\r\nexport var TextDocumentItem;\r\n(function (TextDocumentItem) {\r\n    /**\r\n     * Creates a new TextDocumentItem literal.\r\n     * @param uri The document's uri.\r\n     * @param languageId The document's language identifier.\r\n     * @param version The document's version number.\r\n     * @param text The document's text.\r\n     */\r\n    function create(uri, languageId, version, text) {\r\n        return { uri: uri, languageId: languageId, version: version, text: text };\r\n    }\r\n    TextDocumentItem.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [TextDocumentItem](#TextDocumentItem) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Is.string(candidate.uri) && Is.string(candidate.languageId) && Is.number(candidate.version) && Is.string(candidate.text);\r\n    }\r\n    TextDocumentItem.is = is;\r\n})(TextDocumentItem || (TextDocumentItem = {}));\r\n/**\r\n * Describes the content type that a client supports in various\r\n * result literals like `Hover`, `ParameterInfo` or `CompletionItem`.\r\n *\r\n * Please note that `MarkupKinds` must not start with a `$`. This kinds\r\n * are reserved for internal usage.\r\n */\r\nexport var MarkupKind;\r\n(function (MarkupKind) {\r\n    /**\r\n     * Plain text is supported as a content format\r\n     */\r\n    MarkupKind.PlainText = 'plaintext';\r\n    /**\r\n     * Markdown is supported as a content format\r\n     */\r\n    MarkupKind.Markdown = 'markdown';\r\n})(MarkupKind || (MarkupKind = {}));\r\n(function (MarkupKind) {\r\n    /**\r\n     * Checks whether the given value is a value of the [MarkupKind](#MarkupKind) type.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate === MarkupKind.PlainText || candidate === MarkupKind.Markdown;\r\n    }\r\n    MarkupKind.is = is;\r\n})(MarkupKind || (MarkupKind = {}));\r\nexport var MarkupContent;\r\n(function (MarkupContent) {\r\n    /**\r\n     * Checks whether the given value conforms to the [MarkupContent](#MarkupContent) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.objectLiteral(value) && MarkupKind.is(candidate.kind) && Is.string(candidate.value);\r\n    }\r\n    MarkupContent.is = is;\r\n})(MarkupContent || (MarkupContent = {}));\r\n/**\r\n * The kind of a completion entry.\r\n */\r\nexport var CompletionItemKind;\r\n(function (CompletionItemKind) {\r\n    CompletionItemKind.Text = 1;\r\n    CompletionItemKind.Method = 2;\r\n    CompletionItemKind.Function = 3;\r\n    CompletionItemKind.Constructor = 4;\r\n    CompletionItemKind.Field = 5;\r\n    CompletionItemKind.Variable = 6;\r\n    CompletionItemKind.Class = 7;\r\n    CompletionItemKind.Interface = 8;\r\n    CompletionItemKind.Module = 9;\r\n    CompletionItemKind.Property = 10;\r\n    CompletionItemKind.Unit = 11;\r\n    CompletionItemKind.Value = 12;\r\n    CompletionItemKind.Enum = 13;\r\n    CompletionItemKind.Keyword = 14;\r\n    CompletionItemKind.Snippet = 15;\r\n    CompletionItemKind.Color = 16;\r\n    CompletionItemKind.File = 17;\r\n    CompletionItemKind.Reference = 18;\r\n    CompletionItemKind.Folder = 19;\r\n    CompletionItemKind.EnumMember = 20;\r\n    CompletionItemKind.Constant = 21;\r\n    CompletionItemKind.Struct = 22;\r\n    CompletionItemKind.Event = 23;\r\n    CompletionItemKind.Operator = 24;\r\n    CompletionItemKind.TypeParameter = 25;\r\n})(CompletionItemKind || (CompletionItemKind = {}));\r\n/**\r\n * Defines whether the insert text in a completion item should be interpreted as\r\n * plain text or a snippet.\r\n */\r\nexport var InsertTextFormat;\r\n(function (InsertTextFormat) {\r\n    /**\r\n     * The primary text to be inserted is treated as a plain string.\r\n     */\r\n    InsertTextFormat.PlainText = 1;\r\n    /**\r\n     * The primary text to be inserted is treated as a snippet.\r\n     *\r\n     * A snippet can define tab stops and placeholders with `$1`, `$2`\r\n     * and `${3:foo}`. `$0` defines the final tab stop, it defaults to\r\n     * the end of the snippet. Placeholders with equal identifiers are linked,\r\n     * that is typing in one will update others too.\r\n     *\r\n     * See also: https://github.com/Microsoft/vscode/blob/master/src/vs/editor/contrib/snippet/common/snippet.md\r\n     */\r\n    InsertTextFormat.Snippet = 2;\r\n})(InsertTextFormat || (InsertTextFormat = {}));\r\n/**\r\n * The CompletionItem namespace provides functions to deal with\r\n * completion items.\r\n */\r\nexport var CompletionItem;\r\n(function (CompletionItem) {\r\n    /**\r\n     * Create a completion item and seed it with a label.\r\n     * @param label The completion item's label\r\n     */\r\n    function create(label) {\r\n        return { label: label };\r\n    }\r\n    CompletionItem.create = create;\r\n})(CompletionItem || (CompletionItem = {}));\r\n/**\r\n * The CompletionList namespace provides functions to deal with\r\n * completion lists.\r\n */\r\nexport var CompletionList;\r\n(function (CompletionList) {\r\n    /**\r\n     * Creates a new completion list.\r\n     *\r\n     * @param items The completion items.\r\n     * @param isIncomplete The list is not complete.\r\n     */\r\n    function create(items, isIncomplete) {\r\n        return { items: items ? items : [], isIncomplete: !!isIncomplete };\r\n    }\r\n    CompletionList.create = create;\r\n})(CompletionList || (CompletionList = {}));\r\nexport var MarkedString;\r\n(function (MarkedString) {\r\n    /**\r\n     * Creates a marked string from plain text.\r\n     *\r\n     * @param plainText The plain text.\r\n     */\r\n    function fromPlainText(plainText) {\r\n        return plainText.replace(/[\\\\`*_{}[\\]()#+\\-.!]/g, \"\\\\$&\"); // escape markdown syntax tokens: http://daringfireball.net/projects/markdown/syntax#backslash\r\n    }\r\n    MarkedString.fromPlainText = fromPlainText;\r\n    /**\r\n     * Checks whether the given value conforms to the [MarkedString](#MarkedString) type.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.string(candidate) || (Is.objectLiteral(candidate) && Is.string(candidate.language) && Is.string(candidate.value));\r\n    }\r\n    MarkedString.is = is;\r\n})(MarkedString || (MarkedString = {}));\r\nexport var Hover;\r\n(function (Hover) {\r\n    /**\r\n     * Checks whether the given value conforms to the [Hover](#Hover) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return !!candidate && Is.objectLiteral(candidate) && (MarkupContent.is(candidate.contents) ||\r\n            MarkedString.is(candidate.contents) ||\r\n            Is.typedArray(candidate.contents, MarkedString.is)) && (value.range === void 0 || Range.is(value.range));\r\n    }\r\n    Hover.is = is;\r\n})(Hover || (Hover = {}));\r\n/**\r\n * The ParameterInformation namespace provides helper functions to work with\r\n * [ParameterInformation](#ParameterInformation) literals.\r\n */\r\nexport var ParameterInformation;\r\n(function (ParameterInformation) {\r\n    /**\r\n     * Creates a new parameter information literal.\r\n     *\r\n     * @param label A label string.\r\n     * @param documentation A doc string.\r\n     */\r\n    function create(label, documentation) {\r\n        return documentation ? { label: label, documentation: documentation } : { label: label };\r\n    }\r\n    ParameterInformation.create = create;\r\n    ;\r\n})(ParameterInformation || (ParameterInformation = {}));\r\n/**\r\n * The SignatureInformation namespace provides helper functions to work with\r\n * [SignatureInformation](#SignatureInformation) literals.\r\n */\r\nexport var SignatureInformation;\r\n(function (SignatureInformation) {\r\n    function create(label, documentation) {\r\n        var parameters = [];\r\n        for (var _i = 2; _i < arguments.length; _i++) {\r\n            parameters[_i - 2] = arguments[_i];\r\n        }\r\n        var result = { label: label };\r\n        if (Is.defined(documentation)) {\r\n            result.documentation = documentation;\r\n        }\r\n        if (Is.defined(parameters)) {\r\n            result.parameters = parameters;\r\n        }\r\n        else {\r\n            result.parameters = [];\r\n        }\r\n        return result;\r\n    }\r\n    SignatureInformation.create = create;\r\n})(SignatureInformation || (SignatureInformation = {}));\r\n/**\r\n * A document highlight kind.\r\n */\r\nexport var DocumentHighlightKind;\r\n(function (DocumentHighlightKind) {\r\n    /**\r\n     * A textual occurrence.\r\n     */\r\n    DocumentHighlightKind.Text = 1;\r\n    /**\r\n     * Read-access of a symbol, like reading a variable.\r\n     */\r\n    DocumentHighlightKind.Read = 2;\r\n    /**\r\n     * Write-access of a symbol, like writing to a variable.\r\n     */\r\n    DocumentHighlightKind.Write = 3;\r\n})(DocumentHighlightKind || (DocumentHighlightKind = {}));\r\n/**\r\n * DocumentHighlight namespace to provide helper functions to work with\r\n * [DocumentHighlight](#DocumentHighlight) literals.\r\n */\r\nexport var DocumentHighlight;\r\n(function (DocumentHighlight) {\r\n    /**\r\n     * Create a DocumentHighlight object.\r\n     * @param range The range the highlight applies to.\r\n     */\r\n    function create(range, kind) {\r\n        var result = { range: range };\r\n        if (Is.number(kind)) {\r\n            result.kind = kind;\r\n        }\r\n        return result;\r\n    }\r\n    DocumentHighlight.create = create;\r\n})(DocumentHighlight || (DocumentHighlight = {}));\r\n/**\r\n * A symbol kind.\r\n */\r\nexport var SymbolKind;\r\n(function (SymbolKind) {\r\n    SymbolKind.File = 1;\r\n    SymbolKind.Module = 2;\r\n    SymbolKind.Namespace = 3;\r\n    SymbolKind.Package = 4;\r\n    SymbolKind.Class = 5;\r\n    SymbolKind.Method = 6;\r\n    SymbolKind.Property = 7;\r\n    SymbolKind.Field = 8;\r\n    SymbolKind.Constructor = 9;\r\n    SymbolKind.Enum = 10;\r\n    SymbolKind.Interface = 11;\r\n    SymbolKind.Function = 12;\r\n    SymbolKind.Variable = 13;\r\n    SymbolKind.Constant = 14;\r\n    SymbolKind.String = 15;\r\n    SymbolKind.Number = 16;\r\n    SymbolKind.Boolean = 17;\r\n    SymbolKind.Array = 18;\r\n    SymbolKind.Object = 19;\r\n    SymbolKind.Key = 20;\r\n    SymbolKind.Null = 21;\r\n    SymbolKind.EnumMember = 22;\r\n    SymbolKind.Struct = 23;\r\n    SymbolKind.Event = 24;\r\n    SymbolKind.Operator = 25;\r\n    SymbolKind.TypeParameter = 26;\r\n})(SymbolKind || (SymbolKind = {}));\r\nexport var SymbolInformation;\r\n(function (SymbolInformation) {\r\n    /**\r\n     * Creates a new symbol information literal.\r\n     *\r\n     * @param name The name of the symbol.\r\n     * @param kind The kind of the symbol.\r\n     * @param range The range of the location of the symbol.\r\n     * @param uri The resource of the location of symbol, defaults to the current document.\r\n     * @param containerName The name of the symbol containing the symbol.\r\n     */\r\n    function create(name, kind, range, uri, containerName) {\r\n        var result = {\r\n            name: name,\r\n            kind: kind,\r\n            location: { uri: uri, range: range }\r\n        };\r\n        if (containerName) {\r\n            result.containerName = containerName;\r\n        }\r\n        return result;\r\n    }\r\n    SymbolInformation.create = create;\r\n})(SymbolInformation || (SymbolInformation = {}));\r\n/**\r\n * Represents programming constructs like variables, classes, interfaces etc.\r\n * that appear in a document. Document symbols can be hierarchical and they\r\n * have two ranges: one that encloses its definition and one that points to\r\n * its most interesting range, e.g. the range of an identifier.\r\n */\r\nvar DocumentSymbol = /** @class */ (function () {\r\n    function DocumentSymbol() {\r\n    }\r\n    return DocumentSymbol;\r\n}());\r\nexport { DocumentSymbol };\r\n(function (DocumentSymbol) {\r\n    /**\r\n     * Creates a new symbol information literal.\r\n     *\r\n     * @param name The name of the symbol.\r\n     * @param detail The detail of the symbol.\r\n     * @param kind The kind of the symbol.\r\n     * @param range The range of the symbol.\r\n     * @param selectionRange The selectionRange of the symbol.\r\n     * @param children Children of the symbol.\r\n     */\r\n    function create(name, detail, kind, range, selectionRange, children) {\r\n        var result = {\r\n            name: name,\r\n            detail: detail,\r\n            kind: kind,\r\n            range: range,\r\n            selectionRange: selectionRange\r\n        };\r\n        if (children !== void 0) {\r\n            result.children = children;\r\n        }\r\n        return result;\r\n    }\r\n    DocumentSymbol.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [DocumentSymbol](#DocumentSymbol) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate &&\r\n            Is.string(candidate.name) && Is.number(candidate.kind) &&\r\n            Range.is(candidate.range) && Range.is(candidate.selectionRange) &&\r\n            (candidate.detail === void 0 || Is.string(candidate.detail)) &&\r\n            (candidate.deprecated === void 0 || Is.boolean(candidate.deprecated)) &&\r\n            (candidate.children === void 0 || Array.isArray(candidate.children));\r\n    }\r\n    DocumentSymbol.is = is;\r\n})(DocumentSymbol || (DocumentSymbol = {}));\r\n/**\r\n * A set of predefined code action kinds\r\n */\r\nexport var CodeActionKind;\r\n(function (CodeActionKind) {\r\n    /**\r\n     * Empty kind.\r\n     */\r\n    CodeActionKind.Empty = '';\r\n    /**\r\n     * Base kind for quickfix actions: 'quickfix'\r\n     */\r\n    CodeActionKind.QuickFix = 'quickfix';\r\n    /**\r\n     * Base kind for refactoring actions: 'refactor'\r\n     */\r\n    CodeActionKind.Refactor = 'refactor';\r\n    /**\r\n     * Base kind for refactoring extraction actions: 'refactor.extract'\r\n     *\r\n     * Example extract actions:\r\n     *\r\n     * - Extract method\r\n     * - Extract function\r\n     * - Extract variable\r\n     * - Extract interface from class\r\n     * - ...\r\n     */\r\n    CodeActionKind.RefactorExtract = 'refactor.extract';\r\n    /**\r\n     * Base kind for refactoring inline actions: 'refactor.inline'\r\n     *\r\n     * Example inline actions:\r\n     *\r\n     * - Inline function\r\n     * - Inline variable\r\n     * - Inline constant\r\n     * - ...\r\n     */\r\n    CodeActionKind.RefactorInline = 'refactor.inline';\r\n    /**\r\n     * Base kind for refactoring rewrite actions: 'refactor.rewrite'\r\n     *\r\n     * Example rewrite actions:\r\n     *\r\n     * - Convert JavaScript function to class\r\n     * - Add or remove parameter\r\n     * - Encapsulate field\r\n     * - Make method static\r\n     * - Move method to base class\r\n     * - ...\r\n     */\r\n    CodeActionKind.RefactorRewrite = 'refactor.rewrite';\r\n    /**\r\n     * Base kind for source actions: `source`\r\n     *\r\n     * Source code actions apply to the entire file.\r\n     */\r\n    CodeActionKind.Source = 'source';\r\n    /**\r\n     * Base kind for an organize imports source action: `source.organizeImports`\r\n     */\r\n    CodeActionKind.SourceOrganizeImports = 'source.organizeImports';\r\n})(CodeActionKind || (CodeActionKind = {}));\r\n/**\r\n * The CodeActionContext namespace provides helper functions to work with\r\n * [CodeActionContext](#CodeActionContext) literals.\r\n */\r\nexport var CodeActionContext;\r\n(function (CodeActionContext) {\r\n    /**\r\n     * Creates a new CodeActionContext literal.\r\n     */\r\n    function create(diagnostics, only) {\r\n        var result = { diagnostics: diagnostics };\r\n        if (only !== void 0 && only !== null) {\r\n            result.only = only;\r\n        }\r\n        return result;\r\n    }\r\n    CodeActionContext.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [CodeActionContext](#CodeActionContext) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Is.typedArray(candidate.diagnostics, Diagnostic.is) && (candidate.only === void 0 || Is.typedArray(candidate.only, Is.string));\r\n    }\r\n    CodeActionContext.is = is;\r\n})(CodeActionContext || (CodeActionContext = {}));\r\nexport var CodeAction;\r\n(function (CodeAction) {\r\n    function create(title, commandOrEdit, kind) {\r\n        var result = { title: title };\r\n        if (Command.is(commandOrEdit)) {\r\n            result.command = commandOrEdit;\r\n        }\r\n        else {\r\n            result.edit = commandOrEdit;\r\n        }\r\n        if (kind !== void null) {\r\n            result.kind = kind;\r\n        }\r\n        return result;\r\n    }\r\n    CodeAction.create = create;\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate && Is.string(candidate.title) &&\r\n            (candidate.diagnostics === void 0 || Is.typedArray(candidate.diagnostics, Diagnostic.is)) &&\r\n            (candidate.kind === void 0 || Is.string(candidate.kind)) &&\r\n            (candidate.edit !== void 0 || candidate.command !== void 0) &&\r\n            (candidate.command === void 0 || Command.is(candidate.command)) &&\r\n            (candidate.edit === void 0 || WorkspaceEdit.is(candidate.edit));\r\n    }\r\n    CodeAction.is = is;\r\n})(CodeAction || (CodeAction = {}));\r\n/**\r\n * The CodeLens namespace provides helper functions to work with\r\n * [CodeLens](#CodeLens) literals.\r\n */\r\nexport var CodeLens;\r\n(function (CodeLens) {\r\n    /**\r\n     * Creates a new CodeLens literal.\r\n     */\r\n    function create(range, data) {\r\n        var result = { range: range };\r\n        if (Is.defined(data))\r\n            result.data = data;\r\n        return result;\r\n    }\r\n    CodeLens.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [CodeLens](#CodeLens) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Range.is(candidate.range) && (Is.undefined(candidate.command) || Command.is(candidate.command));\r\n    }\r\n    CodeLens.is = is;\r\n})(CodeLens || (CodeLens = {}));\r\n/**\r\n * The FormattingOptions namespace provides helper functions to work with\r\n * [FormattingOptions](#FormattingOptions) literals.\r\n */\r\nexport var FormattingOptions;\r\n(function (FormattingOptions) {\r\n    /**\r\n     * Creates a new FormattingOptions literal.\r\n     */\r\n    function create(tabSize, insertSpaces) {\r\n        return { tabSize: tabSize, insertSpaces: insertSpaces };\r\n    }\r\n    FormattingOptions.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [FormattingOptions](#FormattingOptions) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Is.number(candidate.tabSize) && Is.boolean(candidate.insertSpaces);\r\n    }\r\n    FormattingOptions.is = is;\r\n})(FormattingOptions || (FormattingOptions = {}));\r\n/**\r\n * A document link is a range in a text document that links to an internal or external resource, like another\r\n * text document or a web site.\r\n */\r\nvar DocumentLink = /** @class */ (function () {\r\n    function DocumentLink() {\r\n    }\r\n    return DocumentLink;\r\n}());\r\nexport { DocumentLink };\r\n/**\r\n * The DocumentLink namespace provides helper functions to work with\r\n * [DocumentLink](#DocumentLink) literals.\r\n */\r\n(function (DocumentLink) {\r\n    /**\r\n     * Creates a new DocumentLink literal.\r\n     */\r\n    function create(range, target, data) {\r\n        return { range: range, target: target, data: data };\r\n    }\r\n    DocumentLink.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [DocumentLink](#DocumentLink) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Range.is(candidate.range) && (Is.undefined(candidate.target) || Is.string(candidate.target));\r\n    }\r\n    DocumentLink.is = is;\r\n})(DocumentLink || (DocumentLink = {}));\r\n/**\r\n * The SelectionRange namespace provides helper function to work with\r\n * SelectionRange literals.\r\n */\r\nexport var SelectionRange;\r\n(function (SelectionRange) {\r\n    /**\r\n     * Creates a new SelectionRange\r\n     * @param range the range.\r\n     * @param parent an optional parent.\r\n     */\r\n    function create(range, parent) {\r\n        return { range: range, parent: parent };\r\n    }\r\n    SelectionRange.create = create;\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate !== undefined && Range.is(candidate.range) && (candidate.parent === undefined || SelectionRange.is(candidate.parent));\r\n    }\r\n    SelectionRange.is = is;\r\n})(SelectionRange || (SelectionRange = {}));\r\nexport var EOL = ['\\n', '\\r\\n', '\\r'];\r\nexport var TextDocument;\r\n(function (TextDocument) {\r\n    /**\r\n     * Creates a new ITextDocument literal from the given uri and content.\r\n     * @param uri The document's uri.\r\n     * @param languageId  The document's language Id.\r\n     * @param content The document's content.\r\n     */\r\n    function create(uri, languageId, version, content) {\r\n        return new FullTextDocument(uri, languageId, version, content);\r\n    }\r\n    TextDocument.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [ITextDocument](#ITextDocument) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Is.string(candidate.uri) && (Is.undefined(candidate.languageId) || Is.string(candidate.languageId)) && Is.number(candidate.lineCount)\r\n            && Is.func(candidate.getText) && Is.func(candidate.positionAt) && Is.func(candidate.offsetAt) ? true : false;\r\n    }\r\n    TextDocument.is = is;\r\n    function applyEdits(document, edits) {\r\n        var text = document.getText();\r\n        var sortedEdits = mergeSort(edits, function (a, b) {\r\n            var diff = a.range.start.line - b.range.start.line;\r\n            if (diff === 0) {\r\n                return a.range.start.character - b.range.start.character;\r\n            }\r\n            return diff;\r\n        });\r\n        var lastModifiedOffset = text.length;\r\n        for (var i = sortedEdits.length - 1; i >= 0; i--) {\r\n            var e = sortedEdits[i];\r\n            var startOffset = document.offsetAt(e.range.start);\r\n            var endOffset = document.offsetAt(e.range.end);\r\n            if (endOffset <= lastModifiedOffset) {\r\n                text = text.substring(0, startOffset) + e.newText + text.substring(endOffset, text.length);\r\n            }\r\n            else {\r\n                throw new Error('Overlapping edit');\r\n            }\r\n            lastModifiedOffset = startOffset;\r\n        }\r\n        return text;\r\n    }\r\n    TextDocument.applyEdits = applyEdits;\r\n    function mergeSort(data, compare) {\r\n        if (data.length <= 1) {\r\n            // sorted\r\n            return data;\r\n        }\r\n        var p = (data.length / 2) | 0;\r\n        var left = data.slice(0, p);\r\n        var right = data.slice(p);\r\n        mergeSort(left, compare);\r\n        mergeSort(right, compare);\r\n        var leftIdx = 0;\r\n        var rightIdx = 0;\r\n        var i = 0;\r\n        while (leftIdx < left.length && rightIdx < right.length) {\r\n            var ret = compare(left[leftIdx], right[rightIdx]);\r\n            if (ret <= 0) {\r\n                // smaller_equal -> take left to preserve order\r\n                data[i++] = left[leftIdx++];\r\n            }\r\n            else {\r\n                // greater -> take right\r\n                data[i++] = right[rightIdx++];\r\n            }\r\n        }\r\n        while (leftIdx < left.length) {\r\n            data[i++] = left[leftIdx++];\r\n        }\r\n        while (rightIdx < right.length) {\r\n            data[i++] = right[rightIdx++];\r\n        }\r\n        return data;\r\n    }\r\n})(TextDocument || (TextDocument = {}));\r\n/**\r\n * Represents reasons why a text document is saved.\r\n */\r\nexport var TextDocumentSaveReason;\r\n(function (TextDocumentSaveReason) {\r\n    /**\r\n     * Manually triggered, e.g. by the user pressing save, by starting debugging,\r\n     * or by an API call.\r\n     */\r\n    TextDocumentSaveReason.Manual = 1;\r\n    /**\r\n     * Automatic after a delay.\r\n     */\r\n    TextDocumentSaveReason.AfterDelay = 2;\r\n    /**\r\n     * When the editor lost focus.\r\n     */\r\n    TextDocumentSaveReason.FocusOut = 3;\r\n})(TextDocumentSaveReason || (TextDocumentSaveReason = {}));\r\nvar FullTextDocument = /** @class */ (function () {\r\n    function FullTextDocument(uri, languageId, version, content) {\r\n        this._uri = uri;\r\n        this._languageId = languageId;\r\n        this._version = version;\r\n        this._content = content;\r\n        this._lineOffsets = null;\r\n    }\r\n    Object.defineProperty(FullTextDocument.prototype, \"uri\", {\r\n        get: function () {\r\n            return this._uri;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(FullTextDocument.prototype, \"languageId\", {\r\n        get: function () {\r\n            return this._languageId;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(FullTextDocument.prototype, \"version\", {\r\n        get: function () {\r\n            return this._version;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    FullTextDocument.prototype.getText = function (range) {\r\n        if (range) {\r\n            var start = this.offsetAt(range.start);\r\n            var end = this.offsetAt(range.end);\r\n            return this._content.substring(start, end);\r\n        }\r\n        return this._content;\r\n    };\r\n    FullTextDocument.prototype.update = function (event, version) {\r\n        this._content = event.text;\r\n        this._version = version;\r\n        this._lineOffsets = null;\r\n    };\r\n    FullTextDocument.prototype.getLineOffsets = function () {\r\n        if (this._lineOffsets === null) {\r\n            var lineOffsets = [];\r\n            var text = this._content;\r\n            var isLineStart = true;\r\n            for (var i = 0; i < text.length; i++) {\r\n                if (isLineStart) {\r\n                    lineOffsets.push(i);\r\n                    isLineStart = false;\r\n                }\r\n                var ch = text.charAt(i);\r\n                isLineStart = (ch === '\\r' || ch === '\\n');\r\n                if (ch === '\\r' && i + 1 < text.length && text.charAt(i + 1) === '\\n') {\r\n                    i++;\r\n                }\r\n            }\r\n            if (isLineStart && text.length > 0) {\r\n                lineOffsets.push(text.length);\r\n            }\r\n            this._lineOffsets = lineOffsets;\r\n        }\r\n        return this._lineOffsets;\r\n    };\r\n    FullTextDocument.prototype.positionAt = function (offset) {\r\n        offset = Math.max(Math.min(offset, this._content.length), 0);\r\n        var lineOffsets = this.getLineOffsets();\r\n        var low = 0, high = lineOffsets.length;\r\n        if (high === 0) {\r\n            return Position.create(0, offset);\r\n        }\r\n        while (low < high) {\r\n            var mid = Math.floor((low + high) / 2);\r\n            if (lineOffsets[mid] > offset) {\r\n                high = mid;\r\n            }\r\n            else {\r\n                low = mid + 1;\r\n            }\r\n        }\r\n        // low is the least x for which the line offset is larger than the current offset\r\n        // or array.length if no line offset is larger than the current offset\r\n        var line = low - 1;\r\n        return Position.create(line, offset - lineOffsets[line]);\r\n    };\r\n    FullTextDocument.prototype.offsetAt = function (position) {\r\n        var lineOffsets = this.getLineOffsets();\r\n        if (position.line >= lineOffsets.length) {\r\n            return this._content.length;\r\n        }\r\n        else if (position.line < 0) {\r\n            return 0;\r\n        }\r\n        var lineOffset = lineOffsets[position.line];\r\n        var nextLineOffset = (position.line + 1 < lineOffsets.length) ? lineOffsets[position.line + 1] : this._content.length;\r\n        return Math.max(Math.min(lineOffset + position.character, nextLineOffset), lineOffset);\r\n    };\r\n    Object.defineProperty(FullTextDocument.prototype, \"lineCount\", {\r\n        get: function () {\r\n            return this.getLineOffsets().length;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return FullTextDocument;\r\n}());\r\nvar Is;\r\n(function (Is) {\r\n    var toString = Object.prototype.toString;\r\n    function defined(value) {\r\n        return typeof value !== 'undefined';\r\n    }\r\n    Is.defined = defined;\r\n    function undefined(value) {\r\n        return typeof value === 'undefined';\r\n    }\r\n    Is.undefined = undefined;\r\n    function boolean(value) {\r\n        return value === true || value === false;\r\n    }\r\n    Is.boolean = boolean;\r\n    function string(value) {\r\n        return toString.call(value) === '[object String]';\r\n    }\r\n    Is.string = string;\r\n    function number(value) {\r\n        return toString.call(value) === '[object Number]';\r\n    }\r\n    Is.number = number;\r\n    function func(value) {\r\n        return toString.call(value) === '[object Function]';\r\n    }\r\n    Is.func = func;\r\n    function objectLiteral(value) {\r\n        // Strictly speaking class instances pass this check as well. Since the LSP\r\n        // doesn't use classes we ignore this for now. If we do we need to add something\r\n        // like this: `Object.getPrototypeOf(Object.getPrototypeOf(x)) === null`\r\n        return value !== null && typeof value === 'object';\r\n    }\r\n    Is.objectLiteral = objectLiteral;\r\n    function typedArray(value, check) {\r\n        return Array.isArray(value) && value.every(check);\r\n    }\r\n    Is.typedArray = typedArray;\r\n})(Is || (Is = {}));\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst Is = require(\"./utils/is\");\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\nconst protocol_implementation_1 = require(\"./protocol.implementation\");\r\nexports.ImplementationRequest = protocol_implementation_1.ImplementationRequest;\r\nconst protocol_typeDefinition_1 = require(\"./protocol.typeDefinition\");\r\nexports.TypeDefinitionRequest = protocol_typeDefinition_1.TypeDefinitionRequest;\r\nconst protocol_workspaceFolders_1 = require(\"./protocol.workspaceFolders\");\r\nexports.WorkspaceFoldersRequest = protocol_workspaceFolders_1.WorkspaceFoldersRequest;\r\nexports.DidChangeWorkspaceFoldersNotification = protocol_workspaceFolders_1.DidChangeWorkspaceFoldersNotification;\r\nconst protocol_configuration_1 = require(\"./protocol.configuration\");\r\nexports.ConfigurationRequest = protocol_configuration_1.ConfigurationRequest;\r\nconst protocol_colorProvider_1 = require(\"./protocol.colorProvider\");\r\nexports.DocumentColorRequest = protocol_colorProvider_1.DocumentColorRequest;\r\nexports.ColorPresentationRequest = protocol_colorProvider_1.ColorPresentationRequest;\r\nconst protocol_foldingRange_1 = require(\"./protocol.foldingRange\");\r\nexports.FoldingRangeRequest = protocol_foldingRange_1.FoldingRangeRequest;\r\nconst protocol_declaration_1 = require(\"./protocol.declaration\");\r\nexports.DeclarationRequest = protocol_declaration_1.DeclarationRequest;\r\nconst protocol_selectionRange_1 = require(\"./protocol.selectionRange\");\r\nexports.SelectionRangeRequest = protocol_selectionRange_1.SelectionRangeRequest;\r\n// @ts-ignore: to avoid inlining LocatioLink as dynamic import\r\nlet __noDynamicImport;\r\n/**\r\n * The DocumentFilter namespace provides helper functions to work with\r\n * [DocumentFilter](#DocumentFilter) literals.\r\n */\r\nvar DocumentFilter;\r\n(function (DocumentFilter) {\r\n    function is(value) {\r\n        const candidate = value;\r\n        return Is.string(candidate.language) || Is.string(candidate.scheme) || Is.string(candidate.pattern);\r\n    }\r\n    DocumentFilter.is = is;\r\n})(DocumentFilter = exports.DocumentFilter || (exports.DocumentFilter = {}));\r\n/**\r\n * The DocumentSelector namespace provides helper functions to work with\r\n * [DocumentSelector](#DocumentSelector)s.\r\n */\r\nvar DocumentSelector;\r\n(function (DocumentSelector) {\r\n    function is(value) {\r\n        if (!Array.isArray(value)) {\r\n            return false;\r\n        }\r\n        for (let elem of value) {\r\n            if (!Is.string(elem) && !DocumentFilter.is(elem)) {\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n    DocumentSelector.is = is;\r\n})(DocumentSelector = exports.DocumentSelector || (exports.DocumentSelector = {}));\r\n/**\r\n * The `client/registerCapability` request is sent from the server to the client to register a new capability\r\n * handler on the client side.\r\n */\r\nvar RegistrationRequest;\r\n(function (RegistrationRequest) {\r\n    RegistrationRequest.type = new vscode_jsonrpc_1.RequestType('client/registerCapability');\r\n})(RegistrationRequest = exports.RegistrationRequest || (exports.RegistrationRequest = {}));\r\n/**\r\n * The `client/unregisterCapability` request is sent from the server to the client to unregister a previously registered capability\r\n * handler on the client side.\r\n */\r\nvar UnregistrationRequest;\r\n(function (UnregistrationRequest) {\r\n    UnregistrationRequest.type = new vscode_jsonrpc_1.RequestType('client/unregisterCapability');\r\n})(UnregistrationRequest = exports.UnregistrationRequest || (exports.UnregistrationRequest = {}));\r\nvar ResourceOperationKind;\r\n(function (ResourceOperationKind) {\r\n    /**\r\n     * Supports creating new files and folders.\r\n     */\r\n    ResourceOperationKind.Create = 'create';\r\n    /**\r\n     * Supports renaming existing files and folders.\r\n     */\r\n    ResourceOperationKind.Rename = 'rename';\r\n    /**\r\n     * Supports deleting existing files and folders.\r\n     */\r\n    ResourceOperationKind.Delete = 'delete';\r\n})(ResourceOperationKind = exports.ResourceOperationKind || (exports.ResourceOperationKind = {}));\r\nvar FailureHandlingKind;\r\n(function (FailureHandlingKind) {\r\n    /**\r\n     * Applying the workspace change is simply aborted if one of the changes provided\r\n     * fails. All operations executed before the failing operation stay executed.\r\n     */\r\n    FailureHandlingKind.Abort = 'abort';\r\n    /**\r\n     * All operations are executed transactional. That means they either all\r\n     * succeed or no changes at all are applied to the workspace.\r\n     */\r\n    FailureHandlingKind.Transactional = 'transactional';\r\n    /**\r\n     * If the workspace edit contains only textual file changes they are executed transactional.\r\n     * If resource changes (create, rename or delete file) are part of the change the failure\r\n     * handling startegy is abort.\r\n     */\r\n    FailureHandlingKind.TextOnlyTransactional = 'textOnlyTransactional';\r\n    /**\r\n     * The client tries to undo the operations already executed. But there is no\r\n     * guaruntee that this is succeeding.\r\n     */\r\n    FailureHandlingKind.Undo = 'undo';\r\n})(FailureHandlingKind = exports.FailureHandlingKind || (exports.FailureHandlingKind = {}));\r\n/**\r\n * Defines how the host (editor) should sync\r\n * document changes to the language server.\r\n */\r\nvar TextDocumentSyncKind;\r\n(function (TextDocumentSyncKind) {\r\n    /**\r\n     * Documents should not be synced at all.\r\n     */\r\n    TextDocumentSyncKind.None = 0;\r\n    /**\r\n     * Documents are synced by always sending the full content\r\n     * of the document.\r\n     */\r\n    TextDocumentSyncKind.Full = 1;\r\n    /**\r\n     * Documents are synced by sending the full content on open.\r\n     * After that only incremental updates to the document are\r\n     * send.\r\n     */\r\n    TextDocumentSyncKind.Incremental = 2;\r\n})(TextDocumentSyncKind = exports.TextDocumentSyncKind || (exports.TextDocumentSyncKind = {}));\r\n/**\r\n * The StaticRegistrationOptions namespace provides helper functions to work with\r\n * [StaticRegistrationOptions](#StaticRegistrationOptions) literals.\r\n */\r\nvar StaticRegistrationOptions;\r\n(function (StaticRegistrationOptions) {\r\n    function hasId(value) {\r\n        const candidate = value;\r\n        return candidate && Is.string(candidate.id) && candidate.id.length > 0;\r\n    }\r\n    StaticRegistrationOptions.hasId = hasId;\r\n})(StaticRegistrationOptions = exports.StaticRegistrationOptions || (exports.StaticRegistrationOptions = {}));\r\n/**\r\n * The TextDocumentRegistrationOptions namespace provides helper functions to work with\r\n * [TextDocumentRegistrationOptions](#TextDocumentRegistrationOptions) literals.\r\n */\r\nvar TextDocumentRegistrationOptions;\r\n(function (TextDocumentRegistrationOptions) {\r\n    function is(value) {\r\n        const candidate = value;\r\n        return candidate && (candidate.documentSelector === null || DocumentSelector.is(candidate.documentSelector));\r\n    }\r\n    TextDocumentRegistrationOptions.is = is;\r\n})(TextDocumentRegistrationOptions = exports.TextDocumentRegistrationOptions || (exports.TextDocumentRegistrationOptions = {}));\r\n/**\r\n * The WorkDoneProgressOptions namespace provides helper functions to work with\r\n * [WorkDoneProgressOptions](#WorkDoneProgressOptions) literals.\r\n */\r\nvar WorkDoneProgressOptions;\r\n(function (WorkDoneProgressOptions) {\r\n    function is(value) {\r\n        const candidate = value;\r\n        return Is.objectLiteral(candidate) && (candidate.workDoneProgress === undefined || Is.boolean(candidate.workDoneProgress));\r\n    }\r\n    WorkDoneProgressOptions.is = is;\r\n    function hasWorkDoneProgress(value) {\r\n        const candidate = value;\r\n        return candidate && Is.boolean(candidate.workDoneProgress);\r\n    }\r\n    WorkDoneProgressOptions.hasWorkDoneProgress = hasWorkDoneProgress;\r\n})(WorkDoneProgressOptions = exports.WorkDoneProgressOptions || (exports.WorkDoneProgressOptions = {}));\r\n/**\r\n * The initialize request is sent from the client to the server.\r\n * It is sent once as the request after starting up the server.\r\n * The requests parameter is of type [InitializeParams](#InitializeParams)\r\n * the response if of type [InitializeResult](#InitializeResult) of a Thenable that\r\n * resolves to such.\r\n */\r\nvar InitializeRequest;\r\n(function (InitializeRequest) {\r\n    InitializeRequest.type = new vscode_jsonrpc_1.RequestType('initialize');\r\n})(InitializeRequest = exports.InitializeRequest || (exports.InitializeRequest = {}));\r\n/**\r\n * Known error codes for an `InitializeError`;\r\n */\r\nvar InitializeError;\r\n(function (InitializeError) {\r\n    /**\r\n     * If the protocol version provided by the client can't be handled by the server.\r\n     * @deprecated This initialize error got replaced by client capabilities. There is\r\n     * no version handshake in version 3.0x\r\n     */\r\n    InitializeError.unknownProtocolVersion = 1;\r\n})(InitializeError = exports.InitializeError || (exports.InitializeError = {}));\r\n/**\r\n * The intialized notification is sent from the client to the\r\n * server after the client is fully initialized and the server\r\n * is allowed to send requests from the server to the client.\r\n */\r\nvar InitializedNotification;\r\n(function (InitializedNotification) {\r\n    InitializedNotification.type = new vscode_jsonrpc_1.NotificationType('initialized');\r\n})(InitializedNotification = exports.InitializedNotification || (exports.InitializedNotification = {}));\r\n//---- Shutdown Method ----\r\n/**\r\n * A shutdown request is sent from the client to the server.\r\n * It is sent once when the client decides to shutdown the\r\n * server. The only notification that is sent after a shutdown request\r\n * is the exit event.\r\n */\r\nvar ShutdownRequest;\r\n(function (ShutdownRequest) {\r\n    ShutdownRequest.type = new vscode_jsonrpc_1.RequestType0('shutdown');\r\n})(ShutdownRequest = exports.ShutdownRequest || (exports.ShutdownRequest = {}));\r\n//---- Exit Notification ----\r\n/**\r\n * The exit event is sent from the client to the server to\r\n * ask the server to exit its process.\r\n */\r\nvar ExitNotification;\r\n(function (ExitNotification) {\r\n    ExitNotification.type = new vscode_jsonrpc_1.NotificationType0('exit');\r\n})(ExitNotification = exports.ExitNotification || (exports.ExitNotification = {}));\r\n//---- Configuration notification ----\r\n/**\r\n * The configuration change notification is sent from the client to the server\r\n * when the client's configuration has changed. The notification contains\r\n * the changed configuration as defined by the language client.\r\n */\r\nvar DidChangeConfigurationNotification;\r\n(function (DidChangeConfigurationNotification) {\r\n    DidChangeConfigurationNotification.type = new vscode_jsonrpc_1.NotificationType('workspace/didChangeConfiguration');\r\n})(DidChangeConfigurationNotification = exports.DidChangeConfigurationNotification || (exports.DidChangeConfigurationNotification = {}));\r\n//---- Message show and log notifications ----\r\n/**\r\n * The message type\r\n */\r\nvar MessageType;\r\n(function (MessageType) {\r\n    /**\r\n     * An error message.\r\n     */\r\n    MessageType.Error = 1;\r\n    /**\r\n     * A warning message.\r\n     */\r\n    MessageType.Warning = 2;\r\n    /**\r\n     * An information message.\r\n     */\r\n    MessageType.Info = 3;\r\n    /**\r\n     * A log message.\r\n     */\r\n    MessageType.Log = 4;\r\n})(MessageType = exports.MessageType || (exports.MessageType = {}));\r\n/**\r\n * The show message notification is sent from a server to a client to ask\r\n * the client to display a particular message in the user interface.\r\n */\r\nvar ShowMessageNotification;\r\n(function (ShowMessageNotification) {\r\n    ShowMessageNotification.type = new vscode_jsonrpc_1.NotificationType('window/showMessage');\r\n})(ShowMessageNotification = exports.ShowMessageNotification || (exports.ShowMessageNotification = {}));\r\n/**\r\n * The show message request is sent from the server to the client to show a message\r\n * and a set of options actions to the user.\r\n */\r\nvar ShowMessageRequest;\r\n(function (ShowMessageRequest) {\r\n    ShowMessageRequest.type = new vscode_jsonrpc_1.RequestType('window/showMessageRequest');\r\n})(ShowMessageRequest = exports.ShowMessageRequest || (exports.ShowMessageRequest = {}));\r\n/**\r\n * The log message notification is sent from the server to the client to ask\r\n * the client to log a particular message.\r\n */\r\nvar LogMessageNotification;\r\n(function (LogMessageNotification) {\r\n    LogMessageNotification.type = new vscode_jsonrpc_1.NotificationType('window/logMessage');\r\n})(LogMessageNotification = exports.LogMessageNotification || (exports.LogMessageNotification = {}));\r\n//---- Telemetry notification\r\n/**\r\n * The telemetry event notification is sent from the server to the client to ask\r\n * the client to log telemetry data.\r\n */\r\nvar TelemetryEventNotification;\r\n(function (TelemetryEventNotification) {\r\n    TelemetryEventNotification.type = new vscode_jsonrpc_1.NotificationType('telemetry/event');\r\n})(TelemetryEventNotification = exports.TelemetryEventNotification || (exports.TelemetryEventNotification = {}));\r\n/**\r\n * The document open notification is sent from the client to the server to signal\r\n * newly opened text documents. The document's truth is now managed by the client\r\n * and the server must not try to read the document's truth using the document's\r\n * uri. Open in this sense means it is managed by the client. It doesn't necessarily\r\n * mean that its content is presented in an editor. An open notification must not\r\n * be sent more than once without a corresponding close notification send before.\r\n * This means open and close notification must be balanced and the max open count\r\n * is one.\r\n */\r\nvar DidOpenTextDocumentNotification;\r\n(function (DidOpenTextDocumentNotification) {\r\n    DidOpenTextDocumentNotification.type = new vscode_jsonrpc_1.NotificationType('textDocument/didOpen');\r\n})(DidOpenTextDocumentNotification = exports.DidOpenTextDocumentNotification || (exports.DidOpenTextDocumentNotification = {}));\r\n/**\r\n * The document change notification is sent from the client to the server to signal\r\n * changes to a text document.\r\n */\r\nvar DidChangeTextDocumentNotification;\r\n(function (DidChangeTextDocumentNotification) {\r\n    DidChangeTextDocumentNotification.type = new vscode_jsonrpc_1.NotificationType('textDocument/didChange');\r\n})(DidChangeTextDocumentNotification = exports.DidChangeTextDocumentNotification || (exports.DidChangeTextDocumentNotification = {}));\r\n/**\r\n * The document close notification is sent from the client to the server when\r\n * the document got closed in the client. The document's truth now exists where\r\n * the document's uri points to (e.g. if the document's uri is a file uri the\r\n * truth now exists on disk). As with the open notification the close notification\r\n * is about managing the document's content. Receiving a close notification\r\n * doesn't mean that the document was open in an editor before. A close\r\n * notification requires a previous open notification to be sent.\r\n */\r\nvar DidCloseTextDocumentNotification;\r\n(function (DidCloseTextDocumentNotification) {\r\n    DidCloseTextDocumentNotification.type = new vscode_jsonrpc_1.NotificationType('textDocument/didClose');\r\n})(DidCloseTextDocumentNotification = exports.DidCloseTextDocumentNotification || (exports.DidCloseTextDocumentNotification = {}));\r\n/**\r\n * The document save notification is sent from the client to the server when\r\n * the document got saved in the client.\r\n */\r\nvar DidSaveTextDocumentNotification;\r\n(function (DidSaveTextDocumentNotification) {\r\n    DidSaveTextDocumentNotification.type = new vscode_jsonrpc_1.NotificationType('textDocument/didSave');\r\n})(DidSaveTextDocumentNotification = exports.DidSaveTextDocumentNotification || (exports.DidSaveTextDocumentNotification = {}));\r\n/**\r\n * A document will save notification is sent from the client to the server before\r\n * the document is actually saved.\r\n */\r\nvar WillSaveTextDocumentNotification;\r\n(function (WillSaveTextDocumentNotification) {\r\n    WillSaveTextDocumentNotification.type = new vscode_jsonrpc_1.NotificationType('textDocument/willSave');\r\n})(WillSaveTextDocumentNotification = exports.WillSaveTextDocumentNotification || (exports.WillSaveTextDocumentNotification = {}));\r\n/**\r\n * A document will save request is sent from the client to the server before\r\n * the document is actually saved. The request can return an array of TextEdits\r\n * which will be applied to the text document before it is saved. Please note that\r\n * clients might drop results if computing the text edits took too long or if a\r\n * server constantly fails on this request. This is done to keep the save fast and\r\n * reliable.\r\n */\r\nvar WillSaveTextDocumentWaitUntilRequest;\r\n(function (WillSaveTextDocumentWaitUntilRequest) {\r\n    WillSaveTextDocumentWaitUntilRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/willSaveWaitUntil');\r\n})(WillSaveTextDocumentWaitUntilRequest = exports.WillSaveTextDocumentWaitUntilRequest || (exports.WillSaveTextDocumentWaitUntilRequest = {}));\r\n//---- File eventing ----\r\n/**\r\n * The watched files notification is sent from the client to the server when\r\n * the client detects changes to file watched by the language client.\r\n */\r\nvar DidChangeWatchedFilesNotification;\r\n(function (DidChangeWatchedFilesNotification) {\r\n    DidChangeWatchedFilesNotification.type = new vscode_jsonrpc_1.NotificationType('workspace/didChangeWatchedFiles');\r\n})(DidChangeWatchedFilesNotification = exports.DidChangeWatchedFilesNotification || (exports.DidChangeWatchedFilesNotification = {}));\r\n/**\r\n * The file event type\r\n */\r\nvar FileChangeType;\r\n(function (FileChangeType) {\r\n    /**\r\n     * The file got created.\r\n     */\r\n    FileChangeType.Created = 1;\r\n    /**\r\n     * The file got changed.\r\n     */\r\n    FileChangeType.Changed = 2;\r\n    /**\r\n     * The file got deleted.\r\n     */\r\n    FileChangeType.Deleted = 3;\r\n})(FileChangeType = exports.FileChangeType || (exports.FileChangeType = {}));\r\nvar WatchKind;\r\n(function (WatchKind) {\r\n    /**\r\n     * Interested in create events.\r\n     */\r\n    WatchKind.Create = 1;\r\n    /**\r\n     * Interested in change events\r\n     */\r\n    WatchKind.Change = 2;\r\n    /**\r\n     * Interested in delete events\r\n     */\r\n    WatchKind.Delete = 4;\r\n})(WatchKind = exports.WatchKind || (exports.WatchKind = {}));\r\n//---- Diagnostic notification ----\r\n/**\r\n * Diagnostics notification are sent from the server to the client to signal\r\n * results of validation runs.\r\n */\r\nvar PublishDiagnosticsNotification;\r\n(function (PublishDiagnosticsNotification) {\r\n    PublishDiagnosticsNotification.type = new vscode_jsonrpc_1.NotificationType('textDocument/publishDiagnostics');\r\n})(PublishDiagnosticsNotification = exports.PublishDiagnosticsNotification || (exports.PublishDiagnosticsNotification = {}));\r\n//---- Completion Support --------------------------\r\n/**\r\n * How a completion was triggered\r\n */\r\nvar CompletionTriggerKind;\r\n(function (CompletionTriggerKind) {\r\n    /**\r\n     * Completion was triggered by typing an identifier (24x7 code\r\n     * complete), manual invocation (e.g Ctrl+Space) or via API.\r\n     */\r\n    CompletionTriggerKind.Invoked = 1;\r\n    /**\r\n     * Completion was triggered by a trigger character specified by\r\n     * the `triggerCharacters` properties of the `CompletionRegistrationOptions`.\r\n     */\r\n    CompletionTriggerKind.TriggerCharacter = 2;\r\n    /**\r\n     * Completion was re-triggered as current completion list is incomplete\r\n     */\r\n    CompletionTriggerKind.TriggerForIncompleteCompletions = 3;\r\n})(CompletionTriggerKind = exports.CompletionTriggerKind || (exports.CompletionTriggerKind = {}));\r\n/**\r\n * Request to request completion at a given text document position. The request's\r\n * parameter is of type [TextDocumentPosition](#TextDocumentPosition) the response\r\n * is of type [CompletionItem[]](#CompletionItem) or [CompletionList](#CompletionList)\r\n * or a Thenable that resolves to such.\r\n *\r\n * The request can delay the computation of the [`detail`](#CompletionItem.detail)\r\n * and [`documentation`](#CompletionItem.documentation) properties to the `completionItem/resolve`\r\n * request. However, properties that are needed for the initial sorting and filtering, like `sortText`,\r\n * `filterText`, `insertText`, and `textEdit`, must not be changed during resolve.\r\n */\r\nvar CompletionRequest;\r\n(function (CompletionRequest) {\r\n    CompletionRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/completion');\r\n    CompletionRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(CompletionRequest = exports.CompletionRequest || (exports.CompletionRequest = {}));\r\n/**\r\n * Request to resolve additional information for a given completion item.The request's\r\n * parameter is of type [CompletionItem](#CompletionItem) the response\r\n * is of type [CompletionItem](#CompletionItem) or a Thenable that resolves to such.\r\n */\r\nvar CompletionResolveRequest;\r\n(function (CompletionResolveRequest) {\r\n    CompletionResolveRequest.type = new vscode_jsonrpc_1.RequestType('completionItem/resolve');\r\n})(CompletionResolveRequest = exports.CompletionResolveRequest || (exports.CompletionResolveRequest = {}));\r\n/**\r\n * Request to request hover information at a given text document position. The request's\r\n * parameter is of type [TextDocumentPosition](#TextDocumentPosition) the response is of\r\n * type [Hover](#Hover) or a Thenable that resolves to such.\r\n */\r\nvar HoverRequest;\r\n(function (HoverRequest) {\r\n    HoverRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/hover');\r\n})(HoverRequest = exports.HoverRequest || (exports.HoverRequest = {}));\r\nvar SignatureHelpRequest;\r\n(function (SignatureHelpRequest) {\r\n    SignatureHelpRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/signatureHelp');\r\n})(SignatureHelpRequest = exports.SignatureHelpRequest || (exports.SignatureHelpRequest = {}));\r\n/**\r\n * A request to resolve the definition location of a symbol at a given text\r\n * document position. The request's parameter is of type [TextDocumentPosition]\r\n * (#TextDocumentPosition) the response is of either type [Definition](#Definition)\r\n * or a typed array of [DefinitionLink](#DefinitionLink) or a Thenable that resolves\r\n * to such.\r\n */\r\nvar DefinitionRequest;\r\n(function (DefinitionRequest) {\r\n    DefinitionRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/definition');\r\n    DefinitionRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(DefinitionRequest = exports.DefinitionRequest || (exports.DefinitionRequest = {}));\r\n/**\r\n * A request to resolve project-wide references for the symbol denoted\r\n * by the given text document position. The request's parameter is of\r\n * type [ReferenceParams](#ReferenceParams) the response is of type\r\n * [Location[]](#Location) or a Thenable that resolves to such.\r\n */\r\nvar ReferencesRequest;\r\n(function (ReferencesRequest) {\r\n    ReferencesRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/references');\r\n    ReferencesRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(ReferencesRequest = exports.ReferencesRequest || (exports.ReferencesRequest = {}));\r\n/**\r\n * Request to resolve a [DocumentHighlight](#DocumentHighlight) for a given\r\n * text document position. The request's parameter is of type [TextDocumentPosition]\r\n * (#TextDocumentPosition) the request response is of type [DocumentHighlight[]]\r\n * (#DocumentHighlight) or a Thenable that resolves to such.\r\n */\r\nvar DocumentHighlightRequest;\r\n(function (DocumentHighlightRequest) {\r\n    DocumentHighlightRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/documentHighlight');\r\n    DocumentHighlightRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(DocumentHighlightRequest = exports.DocumentHighlightRequest || (exports.DocumentHighlightRequest = {}));\r\n/**\r\n * A request to list all symbols found in a given text document. The request's\r\n * parameter is of type [TextDocumentIdentifier](#TextDocumentIdentifier) the\r\n * response is of type [SymbolInformation[]](#SymbolInformation) or a Thenable\r\n * that resolves to such.\r\n */\r\nvar DocumentSymbolRequest;\r\n(function (DocumentSymbolRequest) {\r\n    DocumentSymbolRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/documentSymbol');\r\n    DocumentSymbolRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(DocumentSymbolRequest = exports.DocumentSymbolRequest || (exports.DocumentSymbolRequest = {}));\r\n/**\r\n * A request to list project-wide symbols matching the query string given\r\n * by the [WorkspaceSymbolParams](#WorkspaceSymbolParams). The response is\r\n * of type [SymbolInformation[]](#SymbolInformation) or a Thenable that\r\n * resolves to such.\r\n */\r\nvar WorkspaceSymbolRequest;\r\n(function (WorkspaceSymbolRequest) {\r\n    WorkspaceSymbolRequest.type = new vscode_jsonrpc_1.RequestType('workspace/symbol');\r\n    WorkspaceSymbolRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(WorkspaceSymbolRequest = exports.WorkspaceSymbolRequest || (exports.WorkspaceSymbolRequest = {}));\r\n/**\r\n * A request to provide commands for the given text document and range.\r\n */\r\nvar CodeActionRequest;\r\n(function (CodeActionRequest) {\r\n    CodeActionRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/codeAction');\r\n    CodeActionRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(CodeActionRequest = exports.CodeActionRequest || (exports.CodeActionRequest = {}));\r\n/**\r\n * A request to provide code lens for the given text document.\r\n */\r\nvar CodeLensRequest;\r\n(function (CodeLensRequest) {\r\n    CodeLensRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/codeLens');\r\n    CodeLensRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(CodeLensRequest = exports.CodeLensRequest || (exports.CodeLensRequest = {}));\r\n/**\r\n * A request to resolve a command for a given code lens.\r\n */\r\nvar CodeLensResolveRequest;\r\n(function (CodeLensResolveRequest) {\r\n    CodeLensResolveRequest.type = new vscode_jsonrpc_1.RequestType('codeLens/resolve');\r\n})(CodeLensResolveRequest = exports.CodeLensResolveRequest || (exports.CodeLensResolveRequest = {}));\r\n/**\r\n * A request to to format a whole document.\r\n */\r\nvar DocumentFormattingRequest;\r\n(function (DocumentFormattingRequest) {\r\n    DocumentFormattingRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/formatting');\r\n})(DocumentFormattingRequest = exports.DocumentFormattingRequest || (exports.DocumentFormattingRequest = {}));\r\n/**\r\n * A request to to format a range in a document.\r\n */\r\nvar DocumentRangeFormattingRequest;\r\n(function (DocumentRangeFormattingRequest) {\r\n    DocumentRangeFormattingRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/rangeFormatting');\r\n})(DocumentRangeFormattingRequest = exports.DocumentRangeFormattingRequest || (exports.DocumentRangeFormattingRequest = {}));\r\n/**\r\n * A request to format a document on type.\r\n */\r\nvar DocumentOnTypeFormattingRequest;\r\n(function (DocumentOnTypeFormattingRequest) {\r\n    DocumentOnTypeFormattingRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/onTypeFormatting');\r\n})(DocumentOnTypeFormattingRequest = exports.DocumentOnTypeFormattingRequest || (exports.DocumentOnTypeFormattingRequest = {}));\r\n/**\r\n * A request to rename a symbol.\r\n */\r\nvar RenameRequest;\r\n(function (RenameRequest) {\r\n    RenameRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/rename');\r\n})(RenameRequest = exports.RenameRequest || (exports.RenameRequest = {}));\r\n/**\r\n * A request to test and perform the setup necessary for a rename.\r\n */\r\nvar PrepareRenameRequest;\r\n(function (PrepareRenameRequest) {\r\n    PrepareRenameRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/prepareRename');\r\n})(PrepareRenameRequest = exports.PrepareRenameRequest || (exports.PrepareRenameRequest = {}));\r\n/**\r\n * A request to provide document links\r\n */\r\nvar DocumentLinkRequest;\r\n(function (DocumentLinkRequest) {\r\n    DocumentLinkRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/documentLink');\r\n    DocumentLinkRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(DocumentLinkRequest = exports.DocumentLinkRequest || (exports.DocumentLinkRequest = {}));\r\n/**\r\n * Request to resolve additional information for a given document link. The request's\r\n * parameter is of type [DocumentLink](#DocumentLink) the response\r\n * is of type [DocumentLink](#DocumentLink) or a Thenable that resolves to such.\r\n */\r\nvar DocumentLinkResolveRequest;\r\n(function (DocumentLinkResolveRequest) {\r\n    DocumentLinkResolveRequest.type = new vscode_jsonrpc_1.RequestType('documentLink/resolve');\r\n})(DocumentLinkResolveRequest = exports.DocumentLinkResolveRequest || (exports.DocumentLinkResolveRequest = {}));\r\n/**\r\n * A request send from the client to the server to execute a command. The request might return\r\n * a workspace edit which the client will apply to the workspace.\r\n */\r\nvar ExecuteCommandRequest;\r\n(function (ExecuteCommandRequest) {\r\n    ExecuteCommandRequest.type = new vscode_jsonrpc_1.RequestType('workspace/executeCommand');\r\n})(ExecuteCommandRequest = exports.ExecuteCommandRequest || (exports.ExecuteCommandRequest = {}));\r\n/**\r\n * A request sent from the server to the client to modified certain resources.\r\n */\r\nvar ApplyWorkspaceEditRequest;\r\n(function (ApplyWorkspaceEditRequest) {\r\n    ApplyWorkspaceEditRequest.type = new vscode_jsonrpc_1.RequestType('workspace/applyEdit');\r\n})(ApplyWorkspaceEditRequest = exports.ApplyWorkspaceEditRequest || (exports.ApplyWorkspaceEditRequest = {}));\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nfunction boolean(value) {\r\n    return value === true || value === false;\r\n}\r\nexports.boolean = boolean;\r\nfunction string(value) {\r\n    return typeof value === 'string' || value instanceof String;\r\n}\r\nexports.string = string;\r\nfunction number(value) {\r\n    return typeof value === 'number' || value instanceof Number;\r\n}\r\nexports.number = number;\r\nfunction error(value) {\r\n    return value instanceof Error;\r\n}\r\nexports.error = error;\r\nfunction func(value) {\r\n    return typeof value === 'function';\r\n}\r\nexports.func = func;\r\nfunction array(value) {\r\n    return Array.isArray(value);\r\n}\r\nexports.array = array;\r\nfunction stringArray(value) {\r\n    return array(value) && value.every(elem => string(elem));\r\n}\r\nexports.stringArray = stringArray;\r\nfunction typedArray(value, check) {\r\n    return Array.isArray(value) && value.every(check);\r\n}\r\nexports.typedArray = typedArray;\r\nfunction thenable(value) {\r\n    return value && func(value.then);\r\n}\r\nexports.thenable = thenable;\r\nfunction objectLiteral(value) {\r\n    // Strictly speaking class instances pass this check as well. Since the LSP\r\n    // doesn't use classes we ignore this for now. If we do we need to add something\r\n    // like this: `Object.getPrototypeOf(Object.getPrototypeOf(x)) === null`\r\n    return value !== null && typeof value === 'object';\r\n}\r\nexports.objectLiteral = objectLiteral;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\n// @ts-ignore: to avoid inlining LocatioLink as dynamic import\r\nlet __noDynamicImport;\r\n/**\r\n * A request to resolve the implementation locations of a symbol at a given text\r\n * document position. The request's parameter is of type [TextDocumentPositioParams]\r\n * (#TextDocumentPositionParams) the response is of type [Definition](#Definition) or a\r\n * Thenable that resolves to such.\r\n */\r\nvar ImplementationRequest;\r\n(function (ImplementationRequest) {\r\n    ImplementationRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/implementation');\r\n    ImplementationRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(ImplementationRequest = exports.ImplementationRequest || (exports.ImplementationRequest = {}));\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\n// @ts-ignore: to avoid inlining LocatioLink as dynamic import\r\nlet __noDynamicImport;\r\n/**\r\n * A request to resolve the type definition locations of a symbol at a given text\r\n * document position. The request's parameter is of type [TextDocumentPositioParams]\r\n * (#TextDocumentPositionParams) the response is of type [Definition](#Definition) or a\r\n * Thenable that resolves to such.\r\n */\r\nvar TypeDefinitionRequest;\r\n(function (TypeDefinitionRequest) {\r\n    TypeDefinitionRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/typeDefinition');\r\n    TypeDefinitionRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(TypeDefinitionRequest = exports.TypeDefinitionRequest || (exports.TypeDefinitionRequest = {}));\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\n/**\r\n * The `workspace/workspaceFolders` is sent from the server to the client to fetch the open workspace folders.\r\n */\r\nvar WorkspaceFoldersRequest;\r\n(function (WorkspaceFoldersRequest) {\r\n    WorkspaceFoldersRequest.type = new vscode_jsonrpc_1.RequestType0('workspace/workspaceFolders');\r\n})(WorkspaceFoldersRequest = exports.WorkspaceFoldersRequest || (exports.WorkspaceFoldersRequest = {}));\r\n/**\r\n * The `workspace/didChangeWorkspaceFolders` notification is sent from the client to the server when the workspace\r\n * folder configuration changes.\r\n */\r\nvar DidChangeWorkspaceFoldersNotification;\r\n(function (DidChangeWorkspaceFoldersNotification) {\r\n    DidChangeWorkspaceFoldersNotification.type = new vscode_jsonrpc_1.NotificationType('workspace/didChangeWorkspaceFolders');\r\n})(DidChangeWorkspaceFoldersNotification = exports.DidChangeWorkspaceFoldersNotification || (exports.DidChangeWorkspaceFoldersNotification = {}));\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\n/**\r\n * The 'workspace/configuration' request is sent from the server to the client to fetch a certain\r\n * configuration setting.\r\n *\r\n * This pull model replaces the old push model were the client signaled configuration change via an\r\n * event. If the server still needs to react to configuration changes (since the server caches the\r\n * result of `workspace/configuration` requests) the server should register for an empty configuration\r\n * change event and empty the cache if such an event is received.\r\n */\r\nvar ConfigurationRequest;\r\n(function (ConfigurationRequest) {\r\n    ConfigurationRequest.type = new vscode_jsonrpc_1.RequestType('workspace/configuration');\r\n})(ConfigurationRequest = exports.ConfigurationRequest || (exports.ConfigurationRequest = {}));\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\n/**\r\n * A request to list all color symbols found in a given text document. The request's\r\n * parameter is of type [DocumentColorParams](#DocumentColorParams) the\r\n * response is of type [ColorInformation[]](#ColorInformation) or a Thenable\r\n * that resolves to such.\r\n */\r\nvar DocumentColorRequest;\r\n(function (DocumentColorRequest) {\r\n    DocumentColorRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/documentColor');\r\n    DocumentColorRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(DocumentColorRequest = exports.DocumentColorRequest || (exports.DocumentColorRequest = {}));\r\n/**\r\n * A request to list all presentation for a color. The request's\r\n * parameter is of type [ColorPresentationParams](#ColorPresentationParams) the\r\n * response is of type [ColorInformation[]](#ColorInformation) or a Thenable\r\n * that resolves to such.\r\n */\r\nvar ColorPresentationRequest;\r\n(function (ColorPresentationRequest) {\r\n    ColorPresentationRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/colorPresentation');\r\n})(ColorPresentationRequest = exports.ColorPresentationRequest || (exports.ColorPresentationRequest = {}));\r\n","\"use strict\";\r\n/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\n/**\r\n * Enum of known range kinds\r\n */\r\nvar FoldingRangeKind;\r\n(function (FoldingRangeKind) {\r\n    /**\r\n     * Folding range for a comment\r\n     */\r\n    FoldingRangeKind[\"Comment\"] = \"comment\";\r\n    /**\r\n     * Folding range for a imports or includes\r\n     */\r\n    FoldingRangeKind[\"Imports\"] = \"imports\";\r\n    /**\r\n     * Folding range for a region (e.g. `#region`)\r\n     */\r\n    FoldingRangeKind[\"Region\"] = \"region\";\r\n})(FoldingRangeKind = exports.FoldingRangeKind || (exports.FoldingRangeKind = {}));\r\n/**\r\n * A request to provide folding ranges in a document. The request's\r\n * parameter is of type [FoldingRangeParams](#FoldingRangeParams), the\r\n * response is of type [FoldingRangeList](#FoldingRangeList) or a Thenable\r\n * that resolves to such.\r\n */\r\nvar FoldingRangeRequest;\r\n(function (FoldingRangeRequest) {\r\n    FoldingRangeRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/foldingRange');\r\n    FoldingRangeRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(FoldingRangeRequest = exports.FoldingRangeRequest || (exports.FoldingRangeRequest = {}));\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\n// @ts-ignore: to avoid inlining LocatioLink as dynamic import\r\nlet __noDynamicImport;\r\n/**\r\n * A request to resolve the type definition locations of a symbol at a given text\r\n * document position. The request's parameter is of type [TextDocumentPositioParams]\r\n * (#TextDocumentPositionParams) the response is of type [Declaration](#Declaration)\r\n * or a typed array of [DeclarationLink](#DeclarationLink) or a Thenable that resolves\r\n * to such.\r\n */\r\nvar DeclarationRequest;\r\n(function (DeclarationRequest) {\r\n    DeclarationRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/declaration');\r\n    DeclarationRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(DeclarationRequest = exports.DeclarationRequest || (exports.DeclarationRequest = {}));\r\n","\"use strict\";\r\n/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\n/**\r\n * A request to provide selection ranges in a document. The request's\r\n * parameter is of type [SelectionRangeParams](#SelectionRangeParams), the\r\n * response is of type [SelectionRange[]](#SelectionRange[]) or a Thenable\r\n * that resolves to such.\r\n */\r\nvar SelectionRangeRequest;\r\n(function (SelectionRangeRequest) {\r\n    SelectionRangeRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/selectionRange');\r\n    SelectionRangeRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(SelectionRangeRequest = exports.SelectionRangeRequest || (exports.SelectionRangeRequest = {}));\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) TypeFox and others. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\n/**\r\n * The direction of a call hierarchy request.\r\n */\r\nvar CallHierarchyDirection;\r\n(function (CallHierarchyDirection) {\r\n    /**\r\n     * The callers\r\n     */\r\n    CallHierarchyDirection.CallsFrom = 1;\r\n    /**\r\n     * The callees\r\n     */\r\n    CallHierarchyDirection.CallsTo = 2;\r\n})(CallHierarchyDirection = exports.CallHierarchyDirection || (exports.CallHierarchyDirection = {}));\r\n/**\r\n * Request to provide the call hierarchy at a given text document position.\r\n *\r\n * The request's parameter is of type [CallHierarchyParams](#CallHierarchyParams). The response\r\n * is of type [CallHierarchyCall[]](#CallHierarchyCall) or a Thenable that resolves to such.\r\n *\r\n * Evaluates the symbol defined (or referenced) at the given position, and returns all incoming or outgoing calls to the symbol(s).\r\n */\r\nvar CallHierarchyRequest;\r\n(function (CallHierarchyRequest) {\r\n    CallHierarchyRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/callHierarchy');\r\n    CallHierarchyRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(CallHierarchyRequest = exports.CallHierarchyRequest || (exports.CallHierarchyRequest = {}));\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\nvar WorkDoneProgress;\r\n(function (WorkDoneProgress) {\r\n    WorkDoneProgress.type = new vscode_jsonrpc_1.ProgressType();\r\n})(WorkDoneProgress = exports.WorkDoneProgress || (exports.WorkDoneProgress = {}));\r\n/**\r\n * The `window/workDoneProgress/create` request is sent from the server to the client to initiate progress\r\n * reporting from the server.\r\n */\r\nvar WorkDoneProgressCreateRequest;\r\n(function (WorkDoneProgressCreateRequest) {\r\n    WorkDoneProgressCreateRequest.type = new vscode_jsonrpc_1.RequestType('window/workDoneProgress/create');\r\n})(WorkDoneProgressCreateRequest = exports.WorkDoneProgressCreateRequest || (exports.WorkDoneProgressCreateRequest = {}));\r\n/**\r\n * The `window/workDoneProgress/cancel` notification is sent from  the client to the server to cancel a progress\r\n * initiated on the server side.\r\n */\r\nvar WorkDoneProgressCancelNotification;\r\n(function (WorkDoneProgressCancelNotification) {\r\n    WorkDoneProgressCancelNotification.type = new vscode_jsonrpc_1.NotificationType('window/workDoneProgress/cancel');\r\n})(WorkDoneProgressCancelNotification = exports.WorkDoneProgressCancelNotification || (exports.WorkDoneProgressCancelNotification = {}));\r\n","/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\n'use strict';\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst code = require(\"vscode\");\nconst proto = require(\"vscode-languageserver-protocol\");\nconst Is = require(\"./utils/is\");\nconst protocolCompletionItem_1 = require(\"./protocolCompletionItem\");\nconst protocolCodeLens_1 = require(\"./protocolCodeLens\");\nconst protocolDocumentLink_1 = require(\"./protocolDocumentLink\");\nfunction createConverter(uriConverter) {\n    const nullConverter = (value) => value.toString();\n    const _uriConverter = uriConverter || nullConverter;\n    function asUri(value) {\n        return _uriConverter(value);\n    }\n    function asTextDocumentIdentifier(textDocument) {\n        return {\n            uri: _uriConverter(textDocument.uri)\n        };\n    }\n    function asVersionedTextDocumentIdentifier(textDocument) {\n        return {\n            uri: _uriConverter(textDocument.uri),\n            version: textDocument.version\n        };\n    }\n    function asOpenTextDocumentParams(textDocument) {\n        return {\n            textDocument: {\n                uri: _uriConverter(textDocument.uri),\n                languageId: textDocument.languageId,\n                version: textDocument.version,\n                text: textDocument.getText()\n            }\n        };\n    }\n    function isTextDocumentChangeEvent(value) {\n        let candidate = value;\n        return !!candidate.document && !!candidate.contentChanges;\n    }\n    function isTextDocument(value) {\n        let candidate = value;\n        return !!candidate.uri && !!candidate.version;\n    }\n    function asChangeTextDocumentParams(arg) {\n        if (isTextDocument(arg)) {\n            let result = {\n                textDocument: {\n                    uri: _uriConverter(arg.uri),\n                    version: arg.version\n                },\n                contentChanges: [{ text: arg.getText() }]\n            };\n            return result;\n        }\n        else if (isTextDocumentChangeEvent(arg)) {\n            let document = arg.document;\n            let result = {\n                textDocument: {\n                    uri: _uriConverter(document.uri),\n                    version: document.version\n                },\n                contentChanges: arg.contentChanges.map((change) => {\n                    let range = change.range;\n                    return {\n                        range: {\n                            start: { line: range.start.line, character: range.start.character },\n                            end: { line: range.end.line, character: range.end.character }\n                        },\n                        rangeLength: change.rangeLength,\n                        text: change.text\n                    };\n                })\n            };\n            return result;\n        }\n        else {\n            throw Error('Unsupported text document change parameter');\n        }\n    }\n    function asCloseTextDocumentParams(textDocument) {\n        return {\n            textDocument: asTextDocumentIdentifier(textDocument)\n        };\n    }\n    function asSaveTextDocumentParams(textDocument, includeContent = false) {\n        let result = {\n            textDocument: asVersionedTextDocumentIdentifier(textDocument)\n        };\n        if (includeContent) {\n            result.text = textDocument.getText();\n        }\n        return result;\n    }\n    function asTextDocumentSaveReason(reason) {\n        switch (reason) {\n            case code.TextDocumentSaveReason.Manual:\n                return proto.TextDocumentSaveReason.Manual;\n            case code.TextDocumentSaveReason.AfterDelay:\n                return proto.TextDocumentSaveReason.AfterDelay;\n            case code.TextDocumentSaveReason.FocusOut:\n                return proto.TextDocumentSaveReason.FocusOut;\n        }\n        return proto.TextDocumentSaveReason.Manual;\n    }\n    function asWillSaveTextDocumentParams(event) {\n        return {\n            textDocument: asTextDocumentIdentifier(event.document),\n            reason: asTextDocumentSaveReason(event.reason)\n        };\n    }\n    function asTextDocumentPositionParams(textDocument, position) {\n        return {\n            textDocument: asTextDocumentIdentifier(textDocument),\n            position: asWorkerPosition(position)\n        };\n    }\n    function asTriggerKind(triggerKind) {\n        switch (triggerKind) {\n            case code.CompletionTriggerKind.TriggerCharacter:\n                return proto.CompletionTriggerKind.TriggerCharacter;\n            case code.CompletionTriggerKind.TriggerForIncompleteCompletions:\n                return proto.CompletionTriggerKind.TriggerForIncompleteCompletions;\n            default:\n                return proto.CompletionTriggerKind.Invoked;\n        }\n    }\n    function asCompletionParams(textDocument, position, context) {\n        return {\n            textDocument: asTextDocumentIdentifier(textDocument),\n            position: asWorkerPosition(position),\n            context: {\n                triggerKind: asTriggerKind(context.triggerKind),\n                triggerCharacter: context.triggerCharacter\n            }\n        };\n    }\n    function asWorkerPosition(position) {\n        return { line: position.line, character: position.character };\n    }\n    function asPosition(value) {\n        if (value === void 0) {\n            return undefined;\n        }\n        else if (value === null) {\n            return null;\n        }\n        return { line: value.line, character: value.character };\n    }\n    function asPositions(value) {\n        let result = [];\n        for (let elem of value) {\n            result.push(asPosition(elem));\n        }\n        return result;\n    }\n    function asRange(value) {\n        if (value === void 0 || value === null) {\n            return value;\n        }\n        return { start: asPosition(value.start), end: asPosition(value.end) };\n    }\n    function asDiagnosticSeverity(value) {\n        switch (value) {\n            case code.DiagnosticSeverity.Error:\n                return proto.DiagnosticSeverity.Error;\n            case code.DiagnosticSeverity.Warning:\n                return proto.DiagnosticSeverity.Warning;\n            case code.DiagnosticSeverity.Information:\n                return proto.DiagnosticSeverity.Information;\n            case code.DiagnosticSeverity.Hint:\n                return proto.DiagnosticSeverity.Hint;\n        }\n    }\n    function asDiagnosticTags(tags) {\n        if (!tags) {\n            return undefined;\n        }\n        let result = [];\n        for (let tag of tags) {\n            let converted = asDiagnosticTag(tag);\n            if (converted !== undefined) {\n                result.push(converted);\n            }\n        }\n        return result.length > 0 ? result : undefined;\n    }\n    function asDiagnosticTag(tag) {\n        switch (tag) {\n            case code.DiagnosticTag.Unnecessary:\n                return proto.DiagnosticTag.Unnecessary;\n            default:\n                return undefined;\n        }\n    }\n    function asDiagnostic(item) {\n        let result = proto.Diagnostic.create(asRange(item.range), item.message);\n        if (Is.number(item.severity)) {\n            result.severity = asDiagnosticSeverity(item.severity);\n        }\n        if (Is.number(item.code) || Is.string(item.code)) {\n            result.code = item.code;\n        }\n        if (Array.isArray(item.tags)) {\n            result.tags = asDiagnosticTags(item.tags);\n        }\n        ;\n        if (item.source) {\n            result.source = item.source;\n        }\n        return result;\n    }\n    function asDiagnostics(items) {\n        if (items === void 0 || items === null) {\n            return items;\n        }\n        return items.map(asDiagnostic);\n    }\n    function asDocumentation(format, documentation) {\n        switch (format) {\n            case '$string':\n                return documentation;\n            case proto.MarkupKind.PlainText:\n                return { kind: format, value: documentation };\n            case proto.MarkupKind.Markdown:\n                return { kind: format, value: documentation.value };\n            default:\n                return `Unsupported Markup content received. Kind is: ${format}`;\n        }\n    }\n    function asCompletionItemKind(value, original) {\n        if (original !== void 0) {\n            return original;\n        }\n        return value + 1;\n    }\n    function asCompletionItem(item) {\n        let result = { label: item.label };\n        let protocolItem = item instanceof protocolCompletionItem_1.default ? item : undefined;\n        if (item.detail) {\n            result.detail = item.detail;\n        }\n        // We only send items back we created. So this can't be something else than\n        // a string right now.\n        if (item.documentation) {\n            if (!protocolItem || protocolItem.documentationFormat === '$string') {\n                result.documentation = item.documentation;\n            }\n            else {\n                result.documentation = asDocumentation(protocolItem.documentationFormat, item.documentation);\n            }\n        }\n        if (item.filterText) {\n            result.filterText = item.filterText;\n        }\n        fillPrimaryInsertText(result, item);\n        if (Is.number(item.kind)) {\n            result.kind = asCompletionItemKind(item.kind, protocolItem && protocolItem.originalItemKind);\n        }\n        if (item.sortText) {\n            result.sortText = item.sortText;\n        }\n        if (item.additionalTextEdits) {\n            result.additionalTextEdits = asTextEdits(item.additionalTextEdits);\n        }\n        if (item.commitCharacters) {\n            result.commitCharacters = item.commitCharacters.slice();\n        }\n        if (item.command) {\n            result.command = asCommand(item.command);\n        }\n        if (item.preselect === true || item.preselect === false) {\n            result.preselect = item.preselect;\n        }\n        if (protocolItem) {\n            if (protocolItem.data !== void 0) {\n                result.data = protocolItem.data;\n            }\n            if (protocolItem.deprecated === true || protocolItem.deprecated === false) {\n                result.deprecated = protocolItem.deprecated;\n            }\n        }\n        return result;\n    }\n    function fillPrimaryInsertText(target, source) {\n        let format = proto.InsertTextFormat.PlainText;\n        let text;\n        let range = undefined;\n        if (source.textEdit) {\n            text = source.textEdit.newText;\n            range = asRange(source.textEdit.range);\n        }\n        else if (source.insertText instanceof code.SnippetString) {\n            format = proto.InsertTextFormat.Snippet;\n            text = source.insertText.value;\n        }\n        else {\n            text = source.insertText;\n        }\n        if (source.range) {\n            range = asRange(source.range);\n        }\n        target.insertTextFormat = format;\n        if (source.fromEdit && text && range) {\n            target.textEdit = { newText: text, range: range };\n        }\n        else {\n            target.insertText = text;\n        }\n    }\n    function asTextEdit(edit) {\n        return { range: asRange(edit.range), newText: edit.newText };\n    }\n    function asTextEdits(edits) {\n        if (edits === void 0 || edits === null) {\n            return edits;\n        }\n        return edits.map(asTextEdit);\n    }\n    function asReferenceParams(textDocument, position, options) {\n        return {\n            textDocument: asTextDocumentIdentifier(textDocument),\n            position: asWorkerPosition(position),\n            context: { includeDeclaration: options.includeDeclaration }\n        };\n    }\n    function asCodeActionContext(context) {\n        if (context === void 0 || context === null) {\n            return context;\n        }\n        let only;\n        if (context.only && Is.string(context.only.value)) {\n            only = [context.only.value];\n        }\n        return proto.CodeActionContext.create(asDiagnostics(context.diagnostics), only);\n    }\n    function asCommand(item) {\n        let result = proto.Command.create(item.title, item.command);\n        if (item.arguments) {\n            result.arguments = item.arguments;\n        }\n        return result;\n    }\n    function asCodeLens(item) {\n        let result = proto.CodeLens.create(asRange(item.range));\n        if (item.command) {\n            result.command = asCommand(item.command);\n        }\n        if (item instanceof protocolCodeLens_1.default) {\n            if (item.data) {\n                result.data = item.data;\n            }\n            ;\n        }\n        return result;\n    }\n    function asFormattingOptions(item) {\n        return { tabSize: item.tabSize, insertSpaces: item.insertSpaces };\n    }\n    function asDocumentSymbolParams(textDocument) {\n        return {\n            textDocument: asTextDocumentIdentifier(textDocument)\n        };\n    }\n    function asCodeLensParams(textDocument) {\n        return {\n            textDocument: asTextDocumentIdentifier(textDocument)\n        };\n    }\n    function asDocumentLink(item) {\n        let result = proto.DocumentLink.create(asRange(item.range));\n        if (item.target) {\n            result.target = asUri(item.target);\n        }\n        let protocolItem = item instanceof protocolDocumentLink_1.default ? item : undefined;\n        if (protocolItem && protocolItem.data) {\n            result.data = protocolItem.data;\n        }\n        return result;\n    }\n    function asDocumentLinkParams(textDocument) {\n        return {\n            textDocument: asTextDocumentIdentifier(textDocument)\n        };\n    }\n    return {\n        asUri,\n        asTextDocumentIdentifier,\n        asVersionedTextDocumentIdentifier,\n        asOpenTextDocumentParams,\n        asChangeTextDocumentParams,\n        asCloseTextDocumentParams,\n        asSaveTextDocumentParams,\n        asWillSaveTextDocumentParams,\n        asTextDocumentPositionParams,\n        asCompletionParams,\n        asWorkerPosition,\n        asRange,\n        asPosition,\n        asPositions,\n        asDiagnosticSeverity,\n        asDiagnostic,\n        asDiagnostics,\n        asCompletionItem,\n        asTextEdit,\n        asReferenceParams,\n        asCodeActionContext,\n        asCommand,\n        asCodeLens,\n        asFormattingOptions,\n        asDocumentSymbolParams,\n        asCodeLensParams,\n        asDocumentLink,\n        asDocumentLinkParams\n    };\n}\nexports.createConverter = createConverter;\n","/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\n'use strict';\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst code = require(\"vscode\");\nconst ls = require(\"vscode-languageserver-protocol\");\nconst Is = require(\"./utils/is\");\nconst protocolCompletionItem_1 = require(\"./protocolCompletionItem\");\nconst protocolCodeLens_1 = require(\"./protocolCodeLens\");\nconst protocolDocumentLink_1 = require(\"./protocolDocumentLink\");\nvar CodeBlock;\n(function (CodeBlock) {\n    function is(value) {\n        let candidate = value;\n        return candidate && Is.string(candidate.language) && Is.string(candidate.value);\n    }\n    CodeBlock.is = is;\n})(CodeBlock || (CodeBlock = {}));\nfunction createConverter(uriConverter) {\n    const nullConverter = (value) => code.Uri.parse(value);\n    const _uriConverter = uriConverter || nullConverter;\n    function asUri(value) {\n        return _uriConverter(value);\n    }\n    function asDiagnostics(diagnostics) {\n        return diagnostics.map(asDiagnostic);\n    }\n    function asDiagnostic(diagnostic) {\n        let result = new code.Diagnostic(asRange(diagnostic.range), diagnostic.message, asDiagnosticSeverity(diagnostic.severity));\n        if (Is.number(diagnostic.code) || Is.string(diagnostic.code)) {\n            result.code = diagnostic.code;\n        }\n        if (diagnostic.source) {\n            result.source = diagnostic.source;\n        }\n        if (diagnostic.relatedInformation) {\n            result.relatedInformation = asRelatedInformation(diagnostic.relatedInformation);\n        }\n        if (Array.isArray(diagnostic.tags)) {\n            result.tags = asDiagnosticTags(diagnostic.tags);\n        }\n        return result;\n    }\n    function asRelatedInformation(relatedInformation) {\n        return relatedInformation.map(asDiagnosticRelatedInformation);\n    }\n    function asDiagnosticRelatedInformation(information) {\n        return new code.DiagnosticRelatedInformation(asLocation(information.location), information.message);\n    }\n    function asDiagnosticTags(tags) {\n        if (!tags) {\n            return undefined;\n        }\n        let result = [];\n        for (let tag of tags) {\n            let converted = asDiagnosticTag(tag);\n            if (converted !== undefined) {\n                result.push(converted);\n            }\n        }\n        return result.length > 0 ? result : undefined;\n    }\n    function asDiagnosticTag(tag) {\n        switch (tag) {\n            case ls.DiagnosticTag.Unnecessary:\n                return code.DiagnosticTag.Unnecessary;\n            default:\n                return undefined;\n        }\n    }\n    function asPosition(value) {\n        if (!value) {\n            return undefined;\n        }\n        return new code.Position(value.line, value.character);\n    }\n    function asRange(value) {\n        if (!value) {\n            return undefined;\n        }\n        return new code.Range(asPosition(value.start), asPosition(value.end));\n    }\n    function asDiagnosticSeverity(value) {\n        if (value === void 0 || value === null) {\n            return code.DiagnosticSeverity.Error;\n        }\n        switch (value) {\n            case ls.DiagnosticSeverity.Error:\n                return code.DiagnosticSeverity.Error;\n            case ls.DiagnosticSeverity.Warning:\n                return code.DiagnosticSeverity.Warning;\n            case ls.DiagnosticSeverity.Information:\n                return code.DiagnosticSeverity.Information;\n            case ls.DiagnosticSeverity.Hint:\n                return code.DiagnosticSeverity.Hint;\n        }\n        return code.DiagnosticSeverity.Error;\n    }\n    function asHoverContent(value) {\n        if (Is.string(value)) {\n            return new code.MarkdownString(value);\n        }\n        else if (CodeBlock.is(value)) {\n            let result = new code.MarkdownString();\n            return result.appendCodeblock(value.value, value.language);\n        }\n        else if (Array.isArray(value)) {\n            let result = [];\n            for (let element of value) {\n                let item = new code.MarkdownString();\n                if (CodeBlock.is(element)) {\n                    item.appendCodeblock(element.value, element.language);\n                }\n                else {\n                    item.appendMarkdown(element);\n                }\n                result.push(item);\n            }\n            return result;\n        }\n        else {\n            let result;\n            switch (value.kind) {\n                case ls.MarkupKind.Markdown:\n                    return new code.MarkdownString(value.value);\n                case ls.MarkupKind.PlainText:\n                    result = new code.MarkdownString();\n                    result.appendText(value.value);\n                    return result;\n                default:\n                    result = new code.MarkdownString();\n                    result.appendText(`Unsupported Markup content received. Kind is: ${value.kind}`);\n                    return result;\n            }\n        }\n    }\n    function asDocumentation(value) {\n        if (Is.string(value)) {\n            return value;\n        }\n        else {\n            switch (value.kind) {\n                case ls.MarkupKind.Markdown:\n                    return new code.MarkdownString(value.value);\n                case ls.MarkupKind.PlainText:\n                    return value.value;\n                default:\n                    return `Unsupported Markup content received. Kind is: ${value.kind}`;\n            }\n        }\n    }\n    function asHover(hover) {\n        if (!hover) {\n            return undefined;\n        }\n        return new code.Hover(asHoverContent(hover.contents), asRange(hover.range));\n    }\n    function asCompletionResult(result) {\n        if (!result) {\n            return undefined;\n        }\n        if (Array.isArray(result)) {\n            let items = result;\n            return items.map(asCompletionItem);\n        }\n        let list = result;\n        return new code.CompletionList(list.items.map(asCompletionItem), list.isIncomplete);\n    }\n    function asCompletionItemKind(value) {\n        // Protocol item kind is 1 based, codes item kind is zero based.\n        if (ls.CompletionItemKind.Text <= value && value <= ls.CompletionItemKind.TypeParameter) {\n            return [value - 1, undefined];\n        }\n        ;\n        return [code.CompletionItemKind.Text, value];\n    }\n    function asCompletionItem(item) {\n        let result = new protocolCompletionItem_1.default(item.label);\n        if (item.detail) {\n            result.detail = item.detail;\n        }\n        if (item.documentation) {\n            result.documentation = asDocumentation(item.documentation);\n            result.documentationFormat = Is.string(item.documentation) ? '$string' : item.documentation.kind;\n        }\n        ;\n        if (item.filterText) {\n            result.filterText = item.filterText;\n        }\n        let insertText = asCompletionInsertText(item);\n        if (insertText) {\n            result.insertText = insertText.text;\n            result.range = insertText.range;\n            result.fromEdit = insertText.fromEdit;\n        }\n        if (Is.number(item.kind)) {\n            let [itemKind, original] = asCompletionItemKind(item.kind);\n            result.kind = itemKind;\n            if (original) {\n                result.originalItemKind = original;\n            }\n        }\n        if (item.sortText) {\n            result.sortText = item.sortText;\n        }\n        if (item.additionalTextEdits) {\n            result.additionalTextEdits = asTextEdits(item.additionalTextEdits);\n        }\n        if (Is.stringArray(item.commitCharacters)) {\n            result.commitCharacters = item.commitCharacters.slice();\n        }\n        if (item.command) {\n            result.command = asCommand(item.command);\n        }\n        if (item.deprecated === true || item.deprecated === false) {\n            result.deprecated = item.deprecated;\n        }\n        if (item.preselect === true || item.preselect === false) {\n            result.preselect = item.preselect;\n        }\n        if (item.data !== void 0) {\n            result.data = item.data;\n        }\n        return result;\n    }\n    function asCompletionInsertText(item) {\n        if (item.textEdit) {\n            if (item.insertTextFormat === ls.InsertTextFormat.Snippet) {\n                return { text: new code.SnippetString(item.textEdit.newText), range: asRange(item.textEdit.range), fromEdit: true };\n            }\n            else {\n                return { text: item.textEdit.newText, range: asRange(item.textEdit.range), fromEdit: true };\n            }\n        }\n        else if (item.insertText) {\n            if (item.insertTextFormat === ls.InsertTextFormat.Snippet) {\n                return { text: new code.SnippetString(item.insertText), fromEdit: false };\n            }\n            else {\n                return { text: item.insertText, fromEdit: false };\n            }\n        }\n        else {\n            return undefined;\n        }\n    }\n    function asTextEdit(edit) {\n        if (!edit) {\n            return undefined;\n        }\n        return new code.TextEdit(asRange(edit.range), edit.newText);\n    }\n    function asTextEdits(items) {\n        if (!items) {\n            return undefined;\n        }\n        return items.map(asTextEdit);\n    }\n    function asSignatureHelp(item) {\n        if (!item) {\n            return undefined;\n        }\n        let result = new code.SignatureHelp();\n        if (Is.number(item.activeSignature)) {\n            result.activeSignature = item.activeSignature;\n        }\n        else {\n            // activeSignature was optional in the past\n            result.activeSignature = 0;\n        }\n        if (Is.number(item.activeParameter)) {\n            result.activeParameter = item.activeParameter;\n        }\n        else {\n            // activeParameter was optional in the past\n            result.activeParameter = 0;\n        }\n        if (item.signatures) {\n            result.signatures = asSignatureInformations(item.signatures);\n        }\n        return result;\n    }\n    function asSignatureInformations(items) {\n        return items.map(asSignatureInformation);\n    }\n    function asSignatureInformation(item) {\n        let result = new code.SignatureInformation(item.label);\n        if (item.documentation) {\n            result.documentation = asDocumentation(item.documentation);\n        }\n        if (item.parameters) {\n            result.parameters = asParameterInformations(item.parameters);\n        }\n        return result;\n    }\n    function asParameterInformations(item) {\n        return item.map(asParameterInformation);\n    }\n    function asParameterInformation(item) {\n        let result = new code.ParameterInformation(item.label);\n        if (item.documentation) {\n            result.documentation = asDocumentation(item.documentation);\n        }\n        ;\n        return result;\n    }\n    function asLocation(item) {\n        if (!item) {\n            return undefined;\n        }\n        return new code.Location(_uriConverter(item.uri), asRange(item.range));\n    }\n    function asDeclarationResult(item) {\n        if (!item) {\n            return undefined;\n        }\n        return asLocationResult(item);\n    }\n    function asDefinitionResult(item) {\n        if (!item) {\n            return undefined;\n        }\n        return asLocationResult(item);\n    }\n    function asLocationLink(item) {\n        if (!item) {\n            return undefined;\n        }\n        let result = {\n            targetUri: _uriConverter(item.targetUri),\n            targetRange: asRange(item.targetSelectionRange),\n            originSelectionRange: asRange(item.originSelectionRange),\n            targetSelectionRange: asRange(item.targetSelectionRange)\n        };\n        if (!result.targetSelectionRange) {\n            throw new Error(`targetSelectionRange must not be undefined or null`);\n        }\n        return result;\n    }\n    function asLocationResult(item) {\n        if (!item) {\n            return undefined;\n        }\n        if (Is.array(item)) {\n            if (item.length === 0) {\n                return [];\n            }\n            else if (ls.LocationLink.is(item[0])) {\n                let links = item;\n                return links.map((link) => asLocationLink(link));\n            }\n            else {\n                let locations = item;\n                return locations.map((location) => asLocation(location));\n            }\n        }\n        else if (ls.LocationLink.is(item)) {\n            return [asLocationLink(item)];\n        }\n        else {\n            return asLocation(item);\n        }\n    }\n    function asReferences(values) {\n        if (!values) {\n            return undefined;\n        }\n        return values.map(location => asLocation(location));\n    }\n    function asDocumentHighlights(values) {\n        if (!values) {\n            return undefined;\n        }\n        return values.map(asDocumentHighlight);\n    }\n    function asDocumentHighlight(item) {\n        let result = new code.DocumentHighlight(asRange(item.range));\n        if (Is.number(item.kind)) {\n            result.kind = asDocumentHighlightKind(item.kind);\n        }\n        return result;\n    }\n    function asDocumentHighlightKind(item) {\n        switch (item) {\n            case ls.DocumentHighlightKind.Text:\n                return code.DocumentHighlightKind.Text;\n            case ls.DocumentHighlightKind.Read:\n                return code.DocumentHighlightKind.Read;\n            case ls.DocumentHighlightKind.Write:\n                return code.DocumentHighlightKind.Write;\n        }\n        return code.DocumentHighlightKind.Text;\n    }\n    function asSymbolInformations(values, uri) {\n        if (!values) {\n            return undefined;\n        }\n        return values.map(information => asSymbolInformation(information, uri));\n    }\n    function asSymbolKind(item) {\n        if (item <= ls.SymbolKind.TypeParameter) {\n            // Symbol kind is one based in the protocol and zero based in code.\n            return item - 1;\n        }\n        return code.SymbolKind.Property;\n    }\n    function asSymbolInformation(item, uri) {\n        // Symbol kind is one based in the protocol and zero based in code.\n        let result = new code.SymbolInformation(item.name, asSymbolKind(item.kind), asRange(item.location.range), item.location.uri ? _uriConverter(item.location.uri) : uri);\n        if (item.containerName) {\n            result.containerName = item.containerName;\n        }\n        return result;\n    }\n    function asDocumentSymbols(values) {\n        if (values === void 0 || values === null) {\n            return undefined;\n        }\n        return values.map(asDocumentSymbol);\n    }\n    function asDocumentSymbol(value) {\n        let result = new code.DocumentSymbol(value.name, value.detail || '', asSymbolKind(value.kind), asRange(value.range), asRange(value.selectionRange));\n        if (value.children !== void 0 && value.children.length > 0) {\n            let children = [];\n            for (let child of value.children) {\n                children.push(asDocumentSymbol(child));\n            }\n            result.children = children;\n        }\n        return result;\n    }\n    function asCommand(item) {\n        let result = { title: item.title, command: item.command };\n        if (item.arguments) {\n            result.arguments = item.arguments;\n        }\n        return result;\n    }\n    function asCommands(items) {\n        if (!items) {\n            return undefined;\n        }\n        return items.map(asCommand);\n    }\n    const kindMapping = new Map();\n    kindMapping.set('', code.CodeActionKind.Empty);\n    kindMapping.set(ls.CodeActionKind.QuickFix, code.CodeActionKind.QuickFix);\n    kindMapping.set(ls.CodeActionKind.Refactor, code.CodeActionKind.Refactor);\n    kindMapping.set(ls.CodeActionKind.RefactorExtract, code.CodeActionKind.RefactorExtract);\n    kindMapping.set(ls.CodeActionKind.RefactorInline, code.CodeActionKind.RefactorInline);\n    kindMapping.set(ls.CodeActionKind.RefactorRewrite, code.CodeActionKind.RefactorRewrite);\n    kindMapping.set(ls.CodeActionKind.Source, code.CodeActionKind.Source);\n    kindMapping.set(ls.CodeActionKind.SourceOrganizeImports, code.CodeActionKind.SourceOrganizeImports);\n    function asCodeActionKind(item) {\n        if (item === void 0 || item === null) {\n            return undefined;\n        }\n        let result = kindMapping.get(item);\n        if (result) {\n            return result;\n        }\n        let parts = item.split('.');\n        result = code.CodeActionKind.Empty;\n        for (let part of parts) {\n            result = result.append(part);\n        }\n        return result;\n    }\n    function asCodeActionKinds(items) {\n        if (items === void 0 || items === null) {\n            return undefined;\n        }\n        return items.map(kind => asCodeActionKind(kind));\n    }\n    function asCodeAction(item) {\n        if (item === void 0 || item === null) {\n            return undefined;\n        }\n        let result = new code.CodeAction(item.title);\n        if (item.kind !== void 0) {\n            result.kind = asCodeActionKind(item.kind);\n        }\n        if (item.diagnostics) {\n            result.diagnostics = asDiagnostics(item.diagnostics);\n        }\n        if (item.edit) {\n            result.edit = asWorkspaceEdit(item.edit);\n        }\n        if (item.command) {\n            result.command = asCommand(item.command);\n        }\n        return result;\n    }\n    function asCodeLens(item) {\n        if (!item) {\n            return undefined;\n        }\n        let result = new protocolCodeLens_1.default(asRange(item.range));\n        if (item.command) {\n            result.command = asCommand(item.command);\n        }\n        if (item.data !== void 0 && item.data !== null) {\n            result.data = item.data;\n        }\n        return result;\n    }\n    function asCodeLenses(items) {\n        if (!items) {\n            return undefined;\n        }\n        return items.map((codeLens) => asCodeLens(codeLens));\n    }\n    function asWorkspaceEdit(item) {\n        if (!item) {\n            return undefined;\n        }\n        let result = new code.WorkspaceEdit();\n        if (item.documentChanges) {\n            item.documentChanges.forEach(change => {\n                if (ls.CreateFile.is(change)) {\n                    result.createFile(_uriConverter(change.uri), change.options);\n                }\n                else if (ls.RenameFile.is(change)) {\n                    result.renameFile(_uriConverter(change.oldUri), _uriConverter(change.newUri), change.options);\n                }\n                else if (ls.DeleteFile.is(change)) {\n                    result.deleteFile(_uriConverter(change.uri), change.options);\n                }\n                else if (ls.TextDocumentEdit.is(change)) {\n                    result.set(_uriConverter(change.textDocument.uri), asTextEdits(change.edits));\n                }\n                else {\n                    console.error(`Unknown workspace edit change received:\\n${JSON.stringify(change, undefined, 4)}`);\n                }\n            });\n        }\n        else if (item.changes) {\n            Object.keys(item.changes).forEach(key => {\n                result.set(_uriConverter(key), asTextEdits(item.changes[key]));\n            });\n        }\n        return result;\n    }\n    function asDocumentLink(item) {\n        let range = asRange(item.range);\n        let target = item.target ? asUri(item.target) : undefined;\n        // target must be optional in DocumentLink\n        let link = new protocolDocumentLink_1.default(range, target);\n        if (item.data !== void 0 && item.data !== null) {\n            link.data = item.data;\n        }\n        return link;\n    }\n    function asDocumentLinks(items) {\n        if (!items) {\n            return undefined;\n        }\n        return items.map(asDocumentLink);\n    }\n    function asColor(color) {\n        return new code.Color(color.red, color.green, color.blue, color.alpha);\n    }\n    function asColorInformation(ci) {\n        return new code.ColorInformation(asRange(ci.range), asColor(ci.color));\n    }\n    function asColorInformations(colorInformation) {\n        if (Array.isArray(colorInformation)) {\n            return colorInformation.map(asColorInformation);\n        }\n        return undefined;\n    }\n    function asColorPresentation(cp) {\n        let presentation = new code.ColorPresentation(cp.label);\n        presentation.additionalTextEdits = asTextEdits(cp.additionalTextEdits);\n        if (cp.textEdit) {\n            presentation.textEdit = asTextEdit(cp.textEdit);\n        }\n        return presentation;\n    }\n    function asColorPresentations(colorPresentations) {\n        if (Array.isArray(colorPresentations)) {\n            return colorPresentations.map(asColorPresentation);\n        }\n        return undefined;\n    }\n    function asFoldingRangeKind(kind) {\n        if (kind) {\n            switch (kind) {\n                case ls.FoldingRangeKind.Comment:\n                    return code.FoldingRangeKind.Comment;\n                case ls.FoldingRangeKind.Imports:\n                    return code.FoldingRangeKind.Imports;\n                case ls.FoldingRangeKind.Region:\n                    return code.FoldingRangeKind.Region;\n            }\n        }\n        return void 0;\n    }\n    function asFoldingRange(r) {\n        return new code.FoldingRange(r.startLine, r.endLine, asFoldingRangeKind(r.kind));\n    }\n    function asFoldingRanges(foldingRanges) {\n        if (Array.isArray(foldingRanges)) {\n            return foldingRanges.map(asFoldingRange);\n        }\n        return void 0;\n    }\n    function asSelectionRange(selectionRange) {\n        return new code.SelectionRange(asRange(selectionRange.range), selectionRange.parent ? asSelectionRange(selectionRange.parent) : undefined);\n    }\n    function asSelectionRanges(selectionRanges) {\n        if (!Array.isArray(selectionRanges)) {\n            return [];\n        }\n        let result = [];\n        for (let range of selectionRanges) {\n            result.push(asSelectionRange(range));\n        }\n        return result;\n    }\n    return {\n        asUri,\n        asDiagnostics,\n        asDiagnostic,\n        asRange,\n        asPosition,\n        asDiagnosticSeverity,\n        asHover,\n        asCompletionResult,\n        asCompletionItem,\n        asTextEdit,\n        asTextEdits,\n        asSignatureHelp,\n        asSignatureInformations,\n        asSignatureInformation,\n        asParameterInformations,\n        asParameterInformation,\n        asDeclarationResult,\n        asDefinitionResult,\n        asLocation,\n        asReferences,\n        asDocumentHighlights,\n        asDocumentHighlight,\n        asDocumentHighlightKind,\n        asSymbolKind,\n        asSymbolInformations,\n        asSymbolInformation,\n        asDocumentSymbols,\n        asDocumentSymbol,\n        asCommand,\n        asCommands,\n        asCodeAction,\n        asCodeActionKind,\n        asCodeActionKinds,\n        asCodeLens,\n        asCodeLenses,\n        asWorkspaceEdit,\n        asDocumentLink,\n        asDocumentLinks,\n        asFoldingRangeKind,\n        asFoldingRange,\n        asFoldingRanges,\n        asColor,\n        asColorInformation,\n        asColorInformations,\n        asColorPresentation,\n        asColorPresentations,\n        asSelectionRange,\n        asSelectionRanges\n    };\n}\nexports.createConverter = createConverter;\n","/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\n'use strict';\nObject.defineProperty(exports, \"__esModule\", { value: true });\nclass Delayer {\n    constructor(defaultDelay) {\n        this.defaultDelay = defaultDelay;\n        this.timeout = undefined;\n        this.completionPromise = undefined;\n        this.onSuccess = undefined;\n        this.task = undefined;\n    }\n    trigger(task, delay = this.defaultDelay) {\n        this.task = task;\n        if (delay >= 0) {\n            this.cancelTimeout();\n        }\n        if (!this.completionPromise) {\n            this.completionPromise = new Promise((resolve) => {\n                this.onSuccess = resolve;\n            }).then(() => {\n                this.completionPromise = undefined;\n                this.onSuccess = undefined;\n                var result = this.task();\n                this.task = undefined;\n                return result;\n            });\n        }\n        if (delay >= 0 || this.timeout === void 0) {\n            this.timeout = setTimeout(() => {\n                this.timeout = undefined;\n                this.onSuccess(undefined);\n            }, delay >= 0 ? delay : this.defaultDelay);\n        }\n        return this.completionPromise;\n    }\n    forceDelivery() {\n        if (!this.completionPromise) {\n            return undefined;\n        }\n        this.cancelTimeout();\n        let result = this.task();\n        this.completionPromise = undefined;\n        this.onSuccess = undefined;\n        this.task = undefined;\n        return result;\n    }\n    isTriggered() {\n        return this.timeout !== void 0;\n    }\n    cancel() {\n        this.cancelTimeout();\n        this.completionPromise = undefined;\n    }\n    cancelTimeout() {\n        if (this.timeout !== void 0) {\n            clearTimeout(this.timeout);\n            this.timeout = undefined;\n        }\n    }\n}\nexports.Delayer = Delayer;\n","/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\n'use strict';\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst UUID = require(\"./utils/uuid\");\nconst Is = require(\"./utils/is\");\nconst vscode_1 = require(\"vscode\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst client_1 = require(\"./client\");\nfunction ensure(target, key) {\n    if (target[key] === void 0) {\n        target[key] = {};\n    }\n    return target[key];\n}\nclass ColorProviderFeature extends client_1.TextDocumentFeature {\n    constructor(client) {\n        super(client, vscode_languageserver_protocol_1.DocumentColorRequest.type);\n    }\n    fillClientCapabilities(capabilites) {\n        ensure(ensure(capabilites, 'textDocument'), 'colorProvider').dynamicRegistration = true;\n    }\n    initialize(capabilities, documentSelector) {\n        if (!capabilities.colorProvider) {\n            return;\n        }\n        const implCapabilities = capabilities.colorProvider;\n        const id = Is.string(implCapabilities.id) && implCapabilities.id.length > 0 ? implCapabilities.id : UUID.generateUuid();\n        const selector = implCapabilities.documentSelector || documentSelector;\n        if (selector) {\n            this.register(this.messages, {\n                id,\n                registerOptions: Object.assign({}, { documentSelector: selector })\n            });\n        }\n    }\n    registerLanguageProvider(options) {\n        let client = this._client;\n        let provideColorPresentations = (color, context, token) => {\n            const requestParams = {\n                color,\n                textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(context.document),\n                range: client.code2ProtocolConverter.asRange(context.range)\n            };\n            return client.sendRequest(vscode_languageserver_protocol_1.ColorPresentationRequest.type, requestParams, token).then(this.asColorPresentations.bind(this), (error) => {\n                client.logFailedRequest(vscode_languageserver_protocol_1.ColorPresentationRequest.type, error);\n                return Promise.resolve(null);\n            });\n        };\n        let provideDocumentColors = (document, token) => {\n            const requestParams = {\n                textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document)\n            };\n            return client.sendRequest(vscode_languageserver_protocol_1.DocumentColorRequest.type, requestParams, token).then(this.asColorInformations.bind(this), (error) => {\n                client.logFailedRequest(vscode_languageserver_protocol_1.ColorPresentationRequest.type, error);\n                return Promise.resolve(null);\n            });\n        };\n        let middleware = client.clientOptions.middleware;\n        return vscode_1.languages.registerColorProvider(options.documentSelector, {\n            provideColorPresentations: (color, context, token) => {\n                return middleware.provideColorPresentations\n                    ? middleware.provideColorPresentations(color, context, token, provideColorPresentations)\n                    : provideColorPresentations(color, context, token);\n            },\n            provideDocumentColors: (document, token) => {\n                return middleware.provideDocumentColors\n                    ? middleware.provideDocumentColors(document, token, provideDocumentColors)\n                    : provideDocumentColors(document, token);\n            }\n        });\n    }\n    asColor(color) {\n        return new vscode_1.Color(color.red, color.green, color.blue, color.alpha);\n    }\n    asColorInformations(colorInformation) {\n        if (Array.isArray(colorInformation)) {\n            return colorInformation.map(ci => {\n                return new vscode_1.ColorInformation(this._client.protocol2CodeConverter.asRange(ci.range), this.asColor(ci.color));\n            });\n        }\n        return [];\n    }\n    asColorPresentations(colorPresentations) {\n        if (Array.isArray(colorPresentations)) {\n            return colorPresentations.map(cp => {\n                let presentation = new vscode_1.ColorPresentation(cp.label);\n                presentation.additionalTextEdits = this._client.protocol2CodeConverter.asTextEdits(cp.additionalTextEdits);\n                presentation.textEdit = this._client.protocol2CodeConverter.asTextEdit(cp.textEdit);\n                return presentation;\n            });\n        }\n        return [];\n    }\n}\nexports.ColorProviderFeature = ColorProviderFeature;\n","/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\n'use strict';\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst vscode_1 = require(\"vscode\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nclass ConfigurationFeature {\n    constructor(_client) {\n        this._client = _client;\n    }\n    fillClientCapabilities(capabilities) {\n        capabilities.workspace = capabilities.workspace || {};\n        capabilities.workspace.configuration = true;\n    }\n    initialize() {\n        let client = this._client;\n        client.onRequest(vscode_languageserver_protocol_1.ConfigurationRequest.type, (params, token) => {\n            let configuration = (params) => {\n                let result = [];\n                for (let item of params.items) {\n                    let resource = item.scopeUri !== void 0 && item.scopeUri !== null ? this._client.protocol2CodeConverter.asUri(item.scopeUri) : undefined;\n                    result.push(this.getConfiguration(resource, item.section !== null ? item.section : undefined));\n                }\n                return result;\n            };\n            let middleware = client.clientOptions.middleware.workspace;\n            return middleware && middleware.configuration\n                ? middleware.configuration(params, token, configuration)\n                : configuration(params, token);\n        });\n    }\n    getConfiguration(resource, section) {\n        let result = null;\n        if (section) {\n            let index = section.lastIndexOf('.');\n            if (index === -1) {\n                result = vscode_1.workspace.getConfiguration(undefined, resource).get(section);\n            }\n            else {\n                let config = vscode_1.workspace.getConfiguration(section.substr(0, index), resource);\n                if (config) {\n                    result = config.get(section.substr(index + 1));\n                }\n            }\n        }\n        else {\n            let config = vscode_1.workspace.getConfiguration(undefined, resource);\n            result = {};\n            for (let key of Object.keys(config)) {\n                if (config.has(key)) {\n                    result[key] = config.get(key);\n                }\n            }\n        }\n        if (!result) {\n            return null;\n        }\n        return result;\n    }\n}\nexports.ConfigurationFeature = ConfigurationFeature;\n","/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\n'use strict';\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst UUID = require(\"./utils/uuid\");\nconst Is = require(\"./utils/is\");\nconst vscode_1 = require(\"vscode\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst client_1 = require(\"./client\");\nfunction ensure(target, key) {\n    if (target[key] === void 0) {\n        target[key] = {};\n    }\n    return target[key];\n}\nclass ImplementationFeature extends client_1.TextDocumentFeature {\n    constructor(client) {\n        super(client, vscode_languageserver_protocol_1.ImplementationRequest.type);\n    }\n    fillClientCapabilities(capabilites) {\n        let implementationSupport = ensure(ensure(capabilites, 'textDocument'), 'implementation');\n        implementationSupport.dynamicRegistration = true;\n        implementationSupport.linkSupport = true;\n    }\n    initialize(capabilities, documentSelector) {\n        if (!capabilities.implementationProvider) {\n            return;\n        }\n        if (capabilities.implementationProvider === true) {\n            if (!documentSelector) {\n                return;\n            }\n            this.register(this.messages, {\n                id: UUID.generateUuid(),\n                registerOptions: Object.assign({}, { documentSelector: documentSelector })\n            });\n        }\n        else {\n            const implCapabilities = capabilities.implementationProvider;\n            const id = Is.string(implCapabilities.id) && implCapabilities.id.length > 0 ? implCapabilities.id : UUID.generateUuid();\n            const selector = implCapabilities.documentSelector || documentSelector;\n            if (selector) {\n                this.register(this.messages, {\n                    id,\n                    registerOptions: Object.assign({}, { documentSelector: selector })\n                });\n            }\n        }\n    }\n    registerLanguageProvider(options) {\n        let client = this._client;\n        let provideImplementation = (document, position, token) => {\n            return client.sendRequest(vscode_languageserver_protocol_1.ImplementationRequest.type, client.code2ProtocolConverter.asTextDocumentPositionParams(document, position), token).then(client.protocol2CodeConverter.asDefinitionResult, (error) => {\n                client.logFailedRequest(vscode_languageserver_protocol_1.ImplementationRequest.type, error);\n                return Promise.resolve(null);\n            });\n        };\n        let middleware = client.clientOptions.middleware;\n        return vscode_1.languages.registerImplementationProvider(options.documentSelector, {\n            provideImplementation: (document, position, token) => {\n                return middleware.provideImplementation\n                    ? middleware.provideImplementation(document, position, token, provideImplementation)\n                    : provideImplementation(document, position, token);\n            }\n        });\n    }\n}\nexports.ImplementationFeature = ImplementationFeature;\n","/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\n'use strict';\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst UUID = require(\"./utils/uuid\");\nconst Is = require(\"./utils/is\");\nconst vscode_1 = require(\"vscode\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst client_1 = require(\"./client\");\nfunction ensure(target, key) {\n    if (target[key] === void 0) {\n        target[key] = {};\n    }\n    return target[key];\n}\nclass TypeDefinitionFeature extends client_1.TextDocumentFeature {\n    constructor(client) {\n        super(client, vscode_languageserver_protocol_1.TypeDefinitionRequest.type);\n    }\n    fillClientCapabilities(capabilites) {\n        ensure(ensure(capabilites, 'textDocument'), 'typeDefinition').dynamicRegistration = true;\n        let typeDefinitionSupport = ensure(ensure(capabilites, 'textDocument'), 'typeDefinition');\n        typeDefinitionSupport.dynamicRegistration = true;\n        typeDefinitionSupport.linkSupport = true;\n    }\n    initialize(capabilities, documentSelector) {\n        if (!capabilities.typeDefinitionProvider) {\n            return;\n        }\n        if (capabilities.typeDefinitionProvider === true) {\n            if (!documentSelector) {\n                return;\n            }\n            this.register(this.messages, {\n                id: UUID.generateUuid(),\n                registerOptions: Object.assign({}, { documentSelector: documentSelector })\n            });\n        }\n        else {\n            const implCapabilities = capabilities.typeDefinitionProvider;\n            const id = Is.string(implCapabilities.id) && implCapabilities.id.length > 0 ? implCapabilities.id : UUID.generateUuid();\n            const selector = implCapabilities.documentSelector || documentSelector;\n            if (selector) {\n                this.register(this.messages, {\n                    id,\n                    registerOptions: Object.assign({}, { documentSelector: selector })\n                });\n            }\n        }\n    }\n    registerLanguageProvider(options) {\n        let client = this._client;\n        let provideTypeDefinition = (document, position, token) => {\n            return client.sendRequest(vscode_languageserver_protocol_1.TypeDefinitionRequest.type, client.code2ProtocolConverter.asTextDocumentPositionParams(document, position), token).then(client.protocol2CodeConverter.asDefinitionResult, (error) => {\n                client.logFailedRequest(vscode_languageserver_protocol_1.TypeDefinitionRequest.type, error);\n                return Promise.resolve(null);\n            });\n        };\n        let middleware = client.clientOptions.middleware;\n        return vscode_1.languages.registerTypeDefinitionProvider(options.documentSelector, {\n            provideTypeDefinition: (document, position, token) => {\n                return middleware.provideTypeDefinition\n                    ? middleware.provideTypeDefinition(document, position, token, provideTypeDefinition)\n                    : provideTypeDefinition(document, position, token);\n            }\n        });\n    }\n}\nexports.TypeDefinitionFeature = TypeDefinitionFeature;\n","/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\n'use strict';\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst UUID = require(\"./utils/uuid\");\nconst vscode_1 = require(\"vscode\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nfunction access(target, key) {\n    if (target === void 0) {\n        return undefined;\n    }\n    return target[key];\n}\nclass WorkspaceFoldersFeature {\n    constructor(_client) {\n        this._client = _client;\n        this._listeners = new Map();\n    }\n    get messages() {\n        return vscode_languageserver_protocol_1.DidChangeWorkspaceFoldersNotification.type;\n    }\n    fillInitializeParams(params) {\n        let folders = vscode_1.workspace.workspaceFolders;\n        if (folders === void 0) {\n            params.workspaceFolders = null;\n        }\n        else {\n            params.workspaceFolders = folders.map(folder => this.asProtocol(folder));\n        }\n    }\n    fillClientCapabilities(capabilities) {\n        capabilities.workspace = capabilities.workspace || {};\n        capabilities.workspace.workspaceFolders = true;\n    }\n    initialize(capabilities) {\n        let client = this._client;\n        client.onRequest(vscode_languageserver_protocol_1.WorkspaceFoldersRequest.type, (token) => {\n            let workspaceFolders = () => {\n                let folders = vscode_1.workspace.workspaceFolders;\n                if (folders === void 0) {\n                    return null;\n                }\n                let result = folders.map((folder) => {\n                    return this.asProtocol(folder);\n                });\n                return result;\n            };\n            let middleware = client.clientOptions.middleware.workspace;\n            return middleware && middleware.workspaceFolders\n                ? middleware.workspaceFolders(token, workspaceFolders)\n                : workspaceFolders(token);\n        });\n        let value = access(access(access(capabilities, 'workspace'), 'workspaceFolders'), 'changeNotifications');\n        let id;\n        if (typeof value === 'string') {\n            id = value;\n        }\n        else if (value === true) {\n            id = UUID.generateUuid();\n        }\n        if (id) {\n            this.register(this.messages, {\n                id: id,\n                registerOptions: undefined\n            });\n        }\n    }\n    register(_message, data) {\n        let id = data.id;\n        let client = this._client;\n        let disposable = vscode_1.workspace.onDidChangeWorkspaceFolders((event) => {\n            let didChangeWorkspaceFolders = (event) => {\n                let params = {\n                    event: {\n                        added: event.added.map(folder => this.asProtocol(folder)),\n                        removed: event.removed.map(folder => this.asProtocol(folder))\n                    }\n                };\n                this._client.sendNotification(vscode_languageserver_protocol_1.DidChangeWorkspaceFoldersNotification.type, params);\n            };\n            let middleware = client.clientOptions.middleware.workspace;\n            middleware && middleware.didChangeWorkspaceFolders\n                ? middleware.didChangeWorkspaceFolders(event, didChangeWorkspaceFolders)\n                : didChangeWorkspaceFolders(event);\n        });\n        this._listeners.set(id, disposable);\n    }\n    unregister(id) {\n        let disposable = this._listeners.get(id);\n        if (disposable === void 0) {\n            return;\n        }\n        this._listeners.delete(id);\n        disposable.dispose();\n    }\n    dispose() {\n        for (let disposable of this._listeners.values()) {\n            disposable.dispose();\n        }\n        this._listeners.clear();\n    }\n    asProtocol(workspaceFolder) {\n        if (workspaceFolder === void 0) {\n            return null;\n        }\n        return { uri: this._client.code2ProtocolConverter.asUri(workspaceFolder.uri), name: workspaceFolder.name };\n    }\n}\nexports.WorkspaceFoldersFeature = WorkspaceFoldersFeature;\n","/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\n'use strict';\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst UUID = require(\"./utils/uuid\");\nconst Is = require(\"./utils/is\");\nconst vscode_1 = require(\"vscode\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst client_1 = require(\"./client\");\nfunction ensure(target, key) {\n    if (target[key] === void 0) {\n        target[key] = {};\n    }\n    return target[key];\n}\nclass FoldingRangeFeature extends client_1.TextDocumentFeature {\n    constructor(client) {\n        super(client, vscode_languageserver_protocol_1.FoldingRangeRequest.type);\n    }\n    fillClientCapabilities(capabilites) {\n        let capability = ensure(ensure(capabilites, 'textDocument'), 'foldingRange');\n        capability.dynamicRegistration = true;\n        capability.rangeLimit = 5000;\n        capability.lineFoldingOnly = true;\n    }\n    initialize(capabilities, documentSelector) {\n        if (!capabilities.foldingRangeProvider) {\n            return;\n        }\n        const implCapabilities = capabilities.foldingRangeProvider;\n        const id = Is.string(implCapabilities.id) && implCapabilities.id.length > 0 ? implCapabilities.id : UUID.generateUuid();\n        const selector = implCapabilities.documentSelector || documentSelector;\n        if (selector) {\n            this.register(this.messages, {\n                id,\n                registerOptions: Object.assign({}, { documentSelector: selector })\n            });\n        }\n    }\n    registerLanguageProvider(options) {\n        let client = this._client;\n        let provideFoldingRanges = (document, _, token) => {\n            const requestParams = {\n                textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document)\n            };\n            return client.sendRequest(vscode_languageserver_protocol_1.FoldingRangeRequest.type, requestParams, token).then(this.asFoldingRanges.bind(this), (error) => {\n                client.logFailedRequest(vscode_languageserver_protocol_1.FoldingRangeRequest.type, error);\n                return Promise.resolve(null);\n            });\n        };\n        let middleware = client.clientOptions.middleware;\n        return vscode_1.languages.registerFoldingRangeProvider(options.documentSelector, {\n            provideFoldingRanges(document, context, token) {\n                return middleware.provideFoldingRanges\n                    ? middleware.provideFoldingRanges(document, context, token, provideFoldingRanges)\n                    : provideFoldingRanges(document, context, token);\n            }\n        });\n    }\n    asFoldingRangeKind(kind) {\n        if (kind) {\n            switch (kind) {\n                case vscode_languageserver_protocol_1.FoldingRangeKind.Comment:\n                    return vscode_1.FoldingRangeKind.Comment;\n                case vscode_languageserver_protocol_1.FoldingRangeKind.Imports:\n                    return vscode_1.FoldingRangeKind.Imports;\n                case vscode_languageserver_protocol_1.FoldingRangeKind.Region:\n                    return vscode_1.FoldingRangeKind.Region;\n            }\n        }\n        return void 0;\n    }\n    asFoldingRanges(foldingRanges) {\n        if (Array.isArray(foldingRanges)) {\n            return foldingRanges.map(r => {\n                return new vscode_1.FoldingRange(r.startLine, r.endLine, this.asFoldingRangeKind(r.kind));\n            });\n        }\n        return [];\n    }\n}\nexports.FoldingRangeFeature = FoldingRangeFeature;\n","/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\n'use strict';\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst UUID = require(\"./utils/uuid\");\nconst Is = require(\"./utils/is\");\nconst vscode_1 = require(\"vscode\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst client_1 = require(\"./client\");\nfunction ensure(target, key) {\n    if (target[key] === void 0) {\n        target[key] = {};\n    }\n    return target[key];\n}\nclass DeclarationFeature extends client_1.TextDocumentFeature {\n    constructor(client) {\n        super(client, vscode_languageserver_protocol_1.DeclarationRequest.type);\n    }\n    fillClientCapabilities(capabilites) {\n        let declarationSupport = ensure(ensure(capabilites, 'textDocument'), 'declaration');\n        declarationSupport.dynamicRegistration = true;\n        declarationSupport.linkSupport = true;\n    }\n    initialize(capabilities, documentSelector) {\n        if (!capabilities.declarationProvider) {\n            return;\n        }\n        if (capabilities.declarationProvider === true) {\n            if (!documentSelector) {\n                return;\n            }\n            this.register(this.messages, {\n                id: UUID.generateUuid(),\n                registerOptions: Object.assign({}, { documentSelector: documentSelector })\n            });\n        }\n        else {\n            const declCapabilities = capabilities.declarationProvider;\n            const id = Is.string(declCapabilities.id) && declCapabilities.id.length > 0 ? declCapabilities.id : UUID.generateUuid();\n            const selector = declCapabilities.documentSelector || documentSelector;\n            if (selector) {\n                this.register(this.messages, {\n                    id,\n                    registerOptions: Object.assign({}, { documentSelector: selector })\n                });\n            }\n        }\n    }\n    registerLanguageProvider(options) {\n        let client = this._client;\n        let provideDeclaration = (document, position, token) => {\n            return client.sendRequest(vscode_languageserver_protocol_1.DeclarationRequest.type, client.code2ProtocolConverter.asTextDocumentPositionParams(document, position), token).then(client.protocol2CodeConverter.asDeclarationResult, (error) => {\n                client.logFailedRequest(vscode_languageserver_protocol_1.DeclarationRequest.type, error);\n                return Promise.resolve(null);\n            });\n        };\n        let middleware = client.clientOptions.middleware;\n        return vscode_1.languages.registerDeclarationProvider(options.documentSelector, {\n            provideDeclaration: (document, position, token) => {\n                return middleware.provideDeclaration\n                    ? middleware.provideDeclaration(document, position, token, provideDeclaration)\n                    : provideDeclaration(document, position, token);\n            }\n        });\n    }\n}\nexports.DeclarationFeature = DeclarationFeature;\n","/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\n'use strict';\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst UUID = require(\"./utils/uuid\");\nconst Is = require(\"./utils/is\");\nconst vscode_1 = require(\"vscode\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst client_1 = require(\"./client\");\nfunction ensure(target, key) {\n    if (target[key] === void 0) {\n        target[key] = Object.create(null);\n    }\n    return target[key];\n}\nclass SelectionRangeFeature extends client_1.TextDocumentFeature {\n    constructor(client) {\n        super(client, vscode_languageserver_protocol_1.SelectionRangeRequest.type);\n    }\n    fillClientCapabilities(cap) {\n        let capabilites = cap;\n        let capability = ensure(ensure(capabilites, 'textDocument'), 'selectionRange');\n        capability.dynamicRegistration = true;\n    }\n    initialize(cap, documentSelector) {\n        let capabilities = cap;\n        if (!capabilities.selectionRangeProvider) {\n            return;\n        }\n        const implCapabilities = capabilities.selectionRangeProvider;\n        const id = Is.string(implCapabilities.id) && implCapabilities.id.length > 0 ? implCapabilities.id : UUID.generateUuid();\n        const selector = implCapabilities.documentSelector || documentSelector;\n        if (selector) {\n            this.register(this.messages, {\n                id,\n                registerOptions: Object.assign({}, { documentSelector: selector })\n            });\n        }\n    }\n    registerLanguageProvider(options) {\n        let client = this._client;\n        let provideSelectionRanges = (document, positions, token) => {\n            const requestParams = {\n                textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document),\n                positions: client.code2ProtocolConverter.asPositions(positions)\n            };\n            return client.sendRequest(vscode_languageserver_protocol_1.SelectionRangeRequest.type, requestParams, token).then((ranges) => client.protocol2CodeConverter.asSelectionRanges(ranges), (error) => {\n                client.logFailedRequest(vscode_languageserver_protocol_1.SelectionRangeRequest.type, error);\n                return Promise.resolve(null);\n            });\n        };\n        let middleware = client.clientOptions.middleware;\n        return vscode_1.languages.registerSelectionRangeProvider(options.documentSelector, {\n            provideSelectionRanges(document, positions, token) {\n                return middleware.provideSelectionRanges\n                    ? middleware.provideSelectionRanges(document, positions, token, provideSelectionRanges)\n                    : provideSelectionRanges(document, positions, token);\n            }\n        });\n    }\n}\nexports.SelectionRangeFeature = SelectionRangeFeature;\n","/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\n'use strict';\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst vscode_1 = require(\"vscode\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst Is = require(\"./utils/is\");\nfunction ensure(target, key) {\n    if (target[key] === void 0) {\n        target[key] = Object.create(null);\n    }\n    return target[key];\n}\nclass ProgressPart {\n    constructor(client, params) {\n        let location = params.cancellable ? vscode_1.ProgressLocation.Notification : vscode_1.ProgressLocation.Window;\n        this._reported = 0;\n        vscode_1.window.withProgress({ location, cancellable: params.cancellable, title: params.title }, (progress, token) => __awaiter(this, void 0, void 0, function* () {\n            this._progress = progress;\n            this._infinite = params.percentage === undefined;\n            this._token = token;\n            this._token.onCancellationRequested(() => {\n                client.sendNotification(vscode_languageserver_protocol_1.Proposed.ProgressCancelNotification.type, { id: params.id });\n            });\n            this.report(params);\n            return new Promise((resolve, reject) => {\n                this._resolve = resolve;\n                this._reject = reject;\n            });\n        }));\n    }\n    report(params) {\n        if (this._infinite && Is.string(params.message)) {\n            this._progress.report({ message: params.message });\n        }\n        else if (Is.number(params.percentage)) {\n            let percentage = Math.max(0, Math.min(params.percentage, 100));\n            let delta = Math.max(0, percentage - this._reported);\n            this._progress.report({ message: params.message, increment: delta });\n            this._reported += delta;\n        }\n    }\n    cancel() {\n        this._reject();\n    }\n    done() {\n        this._resolve();\n    }\n}\nclass ProgressFeature {\n    constructor(_client) {\n        this._client = _client;\n        this._progresses = new Map();\n    }\n    fillClientCapabilities(cap) {\n        let capabilities = cap;\n        ensure(capabilities, 'window').progress = true;\n    }\n    initialize() {\n        let client = this._client;\n        let progresses = this._progresses;\n        let startHandler = (params) => {\n            if (Is.string(params.id)) {\n                let progress = new ProgressPart(this._client, params);\n                this._progresses.set(params.id, progress);\n            }\n        };\n        client.onNotification(vscode_languageserver_protocol_1.Proposed.ProgressStartNotification.type, startHandler);\n        let reportHandler = (params) => {\n            let progress = this._progresses.get(params.id);\n            if (progress !== undefined) {\n                progress.report(params);\n            }\n        };\n        client.onNotification(vscode_languageserver_protocol_1.Proposed.ProgressReportNotification.type, reportHandler);\n        let doneHandler = (params) => {\n            let progress = progresses.get(params.id);\n            if (progress !== undefined) {\n                progress.done();\n                progresses.delete(params.id);\n            }\n        };\n        client.onNotification(vscode_languageserver_protocol_1.Proposed.ProgressDoneNotification.type, doneHandler);\n    }\n}\nexports.ProgressFeature = ProgressFeature;\n","/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\n'use strict';\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst UUID = require(\"./utils/uuid\");\nconst Is = require(\"./utils/is\");\nconst vscode_1 = require(\"vscode\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst client_1 = require(\"./client\");\nfunction ensure(target, key) {\n    if (target[key] === void 0) {\n        target[key] = {};\n    }\n    return target[key];\n}\nclass CallHierarchyProvider {\n    constructor(client) {\n        this.client = client;\n        this._middleware = client.clientOptions.middleware;\n    }\n    provideCallHierarchyItem(document, postion, token) {\n        return this._middleware.provideCallHierarchy\n            ? this._middleware.provideCallHierarchy(document, postion, token, (document, position, token) => this.doProvideCallHierarchyItem(document, position, token))\n            : this.doProvideCallHierarchyItem(document, postion, token);\n    }\n    resolveCallHierarchyItem(item, direction, token) {\n        return this._middleware.resolveCallHierarchy\n            ? this._middleware.resolveCallHierarchy(item, direction, token, (item, direction, token) => this.doResolveCallHierarchyItem(item, direction, token))\n            : this.doResolveCallHierarchyItem(item, direction, token);\n    }\n    doProvideCallHierarchyItem(document, position, token) {\n        const client = this.client;\n        return client.sendRequest(vscode_languageserver_protocol_1.Proposed.CallHierarchyRequest.type, this.asCallHierarchyParams(document, position), token).then((values) => {\n            if (!Array.isArray(values) || values.length === 0) {\n                return undefined;\n            }\n            return this.asCallHierarchyItem(values[0].from);\n        });\n    }\n    doResolveCallHierarchyItem(item, direction, token) {\n        const client = this.client;\n        const converter = client.code2ProtocolConverter;\n        const params = {\n            textDocument: {\n                uri: converter.asUri(item.uri)\n            },\n            position: converter.asPosition(item.selectionRange.start),\n            direction: direction\n        };\n        const makeKey = (item) => {\n            let key = {\n                uri: item.uri,\n                range: {\n                    start: {\n                        line: item.selectionRange.start.line,\n                        character: item.selectionRange.start.character\n                    },\n                    end: {\n                        line: item.selectionRange.end.line,\n                        character: item.selectionRange.end.character\n                    }\n                }\n            };\n            return JSON.stringify(key);\n        };\n        return client.sendRequest(vscode_languageserver_protocol_1.Proposed.CallHierarchyRequest.type, params, token).then(values => {\n            if (!Array.isArray(values) || values.length === 0) {\n                return undefined;\n            }\n            const result = new Map();\n            for (let relation of values) {\n                let key = makeKey(relation.from);\n                let resultItem = result.get(key);\n                if (resultItem === undefined) {\n                    const callItem = this.asCallHierarchyItem(relation.from);\n                    resultItem = [callItem, []];\n                    result.set(key, resultItem);\n                }\n                resultItem[1].push(this.asLocation(relation.to));\n            }\n            return Array.from(result.values());\n        });\n    }\n    asCallHierarchyParams(document, postion) {\n        const converter = this.client.code2ProtocolConverter;\n        return {\n            textDocument: converter.asTextDocumentIdentifier(document),\n            position: converter.asPosition(postion),\n            direction: vscode_languageserver_protocol_1.Proposed.CallHierarchyDirection.CallsFrom\n        };\n    }\n    asCallHierarchyItem(value) {\n        const converter = this.client.protocol2CodeConverter;\n        return new vscode_1.CallHierarchyItem(converter.asSymbolKind(value.kind), value.name, value.detail || '', converter.asUri(value.uri), converter.asRange(value.range), converter.asRange(value.selectionRange));\n    }\n    asLocation(value) {\n        const converter = this.client.protocol2CodeConverter;\n        return new vscode_1.Location(converter.asUri(value.uri), converter.asRange(value.selectionRange));\n    }\n}\nclass CallHierarchyFeature extends client_1.TextDocumentFeature {\n    constructor(client) {\n        super(client, vscode_languageserver_protocol_1.Proposed.CallHierarchyRequest.type);\n    }\n    fillClientCapabilities(cap) {\n        let capabilites = cap;\n        let capability = ensure(ensure(capabilites, 'textDocument'), 'callHierarchy');\n        capability.dynamicRegistration = true;\n    }\n    initialize(cap, documentSelector) {\n        let capabilities = cap;\n        if (!capabilities.callHierarchyProvider) {\n            return;\n        }\n        const implCapabilities = capabilities.callHierarchyProvider;\n        const id = Is.string(implCapabilities.id) && implCapabilities.id.length > 0 ? implCapabilities.id : UUID.generateUuid();\n        const selector = implCapabilities.documentSelector || documentSelector;\n        if (selector) {\n            this.register(this.messages, {\n                id,\n                registerOptions: Object.assign({}, { documentSelector: selector })\n            });\n        }\n    }\n    registerLanguageProvider(options) {\n        let client = this._client;\n        let provider = new CallHierarchyProvider(client);\n        return vscode_1.languages.registerCallHierarchyProvider(options.documentSelector, provider);\n    }\n}\nexports.CallHierarchyFeature = CallHierarchyFeature;\n","/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\n'use strict';\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst cp = require(\"child_process\");\nconst path_1 = require(\"path\");\nconst isWindows = (process.platform === 'win32');\nconst isMacintosh = (process.platform === 'darwin');\nconst isLinux = (process.platform === 'linux');\nfunction terminate(process, cwd) {\n    if (isWindows) {\n        try {\n            // This we run in Atom execFileSync is available.\n            // Ignore stderr since this is otherwise piped to parent.stderr\n            // which might be already closed.\n            let options = {\n                stdio: ['pipe', 'pipe', 'ignore']\n            };\n            if (cwd) {\n                options.cwd = cwd;\n            }\n            cp.execFileSync('taskkill', ['/T', '/F', '/PID', process.pid.toString()], options);\n            return true;\n        }\n        catch (err) {\n            return false;\n        }\n    }\n    else if (isLinux || isMacintosh) {\n        try {\n            var cmd = path_1.join(__dirname, 'terminateProcess.sh');\n            var result = cp.spawnSync(cmd, [process.pid.toString()]);\n            return result.error ? false : true;\n        }\n        catch (err) {\n            return false;\n        }\n    }\n    else {\n        process.kill('SIGKILL');\n        return true;\n    }\n}\nexports.terminate = terminate;\n","import {\r\n    TextEditorDecorationType,\r\n    Disposable,\r\n    ExtensionContext,\r\n    workspace,\r\n    window,\r\n    DecorationOptions,\r\n    TextEditor,\r\n    Uri,\r\n    DecorationRenderOptions,\r\n    OverviewRulerLane,\r\n    DecorationRangeBehavior\r\n} from \"vscode\"\r\nimport { MetricsUtil } from \"../metrics/MetricsUtil\";\r\nimport { IMetricsModel } from \"tsmetrics-core/lib/MetricsModel\";\r\nimport { IVSCodeMetricsConfiguration } from \"../metrics/common/VSCodeMetricsConfiguration\";\r\n\r\nexport class EditorDecoration implements Disposable {\r\n    private low: TextEditorDecorationType;\r\n    private normal: TextEditorDecorationType;\r\n    private high: TextEditorDecorationType;\r\n    private extreme: TextEditorDecorationType;\r\n    private decorationModeEnabled: boolean = false;\r\n    private decorationTemplate: string;\r\n    private overviewRulerModeEnabled: boolean = false;\r\n\r\n    private metricsUtil: MetricsUtil;\r\n    private didChangeTextDocument: Disposable;\r\n    private didOpenTextDocument: Disposable;\r\n    constructor(context: ExtensionContext, metricsUtil: MetricsUtil) {\r\n        this.metricsUtil = metricsUtil;\r\n\r\n        const debouncedUpdate = this.debounce(() => this.update(), 500);\r\n        this.didChangeTextDocument = workspace.onDidChangeTextDocument(e => {\r\n            debouncedUpdate();\r\n        });\r\n        this.didOpenTextDocument = window.onDidChangeActiveTextEditor(e => {\r\n            this.disposeDecorators();\r\n            this.update();\r\n        });\r\n        this.update();\r\n    }\r\n\r\n    private debounce(func: () => void, timeout): () => void {\r\n        let id;\r\n        return () => {\r\n            clearTimeout(id);\r\n            id = setTimeout(() => func(), timeout);\r\n        };\r\n    }\r\n\r\n    private update() {\r\n        const editor = window.activeTextEditor;\r\n\r\n        if (!editor || !editor.document) {\r\n            return;\r\n        }\r\n        const document = editor.document;\r\n        const settings = this.metricsUtil.appConfig.getCodeMetricsSettings(document.uri);\r\n\r\n        const languageDisabled = this.metricsUtil.selector.filter(s => s.language == document.languageId).length == 0;\r\n        const decorationDisabled = !(settings.DecorationModeEnabled || settings.OverviewRulerModeEnabled);\r\n        if (decorationDisabled || languageDisabled) {\r\n            this.clearDecorators(editor);\r\n            return;\r\n        }\r\n        // for some reason the context is lost\r\n        var thisContext = this;\r\n        this.metricsUtil.getMetrics(document).then(\r\n            metrics => {\r\n                if (thisContext.settingsChanged(settings) || this.low == null) {\r\n                    thisContext.clearDecorators(editor);\r\n                    thisContext.updateDecorators(settings, document.uri);\r\n                }\r\n                const toDecoration = (model: IMetricsModel): DecorationOptions => {\r\n                    return {\r\n                        hoverMessage: model.toString(settings),\r\n                        range: thisContext.metricsUtil.toDecorationRange(model.start, document)\r\n                    };\r\n                };\r\n                const complexityAndModel: ComplexityToModel[] = metrics.map(p => {\r\n                    return { complexity: p.getCollectedComplexity(), model: p };\r\n                });\r\n\r\n                const lowLevelDecorations = complexityAndModel\r\n                    .filter(p => p.complexity <= settings.ComplexityLevelNormal)\r\n                    .map(p => toDecoration(p.model));\r\n\r\n                const normalLevelDecorations = complexityAndModel\r\n                    .filter(\r\n                        p =>\r\n                            p.complexity > settings.ComplexityLevelNormal &&\r\n                            p.complexity <= settings.ComplexityLevelHigh\r\n                    )\r\n                    .map(p => toDecoration(p.model));\r\n\r\n                const highLevelDecorations = complexityAndModel\r\n                    .filter(\r\n                        p =>\r\n                            p.complexity > settings.ComplexityLevelHigh &&\r\n                            p.complexity <= settings.ComplexityLevelExtreme\r\n                    )\r\n                    .map(p => toDecoration(p.model));\r\n\r\n                const extremeLevelDecorations = complexityAndModel\r\n                    .filter(p => p.complexity > settings.ComplexityLevelExtreme)\r\n                    .map(p => toDecoration(p.model));\r\n\r\n                editor.setDecorations(thisContext.low, lowLevelDecorations);\r\n                editor.setDecorations(thisContext.normal, normalLevelDecorations);\r\n                editor.setDecorations(thisContext.high, highLevelDecorations);\r\n                editor.setDecorations(thisContext.extreme, extremeLevelDecorations);\r\n            },\r\n            e => {\r\n                var exmsg = \"\";\r\n                if (e.message) {\r\n                    exmsg += e.message;\r\n                }\r\n                if (e.stack) {\r\n                    exmsg += \" | stack: \" + e.stack;\r\n                }\r\n                console.error(exmsg);\r\n            }\r\n        );\r\n    }\r\n    private settingsChanged(settings: IVSCodeMetricsConfiguration): boolean {\r\n        const changed =\r\n            settings.DecorationModeEnabled != this.decorationModeEnabled ||\r\n            settings.DecorationTemplate != this.decorationTemplate ||\r\n            settings.OverviewRulerModeEnabled != this.overviewRulerModeEnabled;\r\n        this.decorationModeEnabled = settings.DecorationModeEnabled;\r\n        this.decorationTemplate = settings.DecorationTemplate;\r\n        this.overviewRulerModeEnabled = settings.OverviewRulerModeEnabled;\r\n        return changed;\r\n    }\r\n    private clearDecorators(editor: TextEditor) {\r\n        this.low && editor.setDecorations(this.low, []);\r\n        this.normal && editor.setDecorations(this.normal, []);\r\n        this.high && editor.setDecorations(this.high, []);\r\n        this.extreme && editor.setDecorations(this.extreme, []);\r\n        this.disposeDecorators();\r\n    }\r\n\r\n    private updateDecorators(settings: IVSCodeMetricsConfiguration, resource: Uri) {\r\n        const size: number = workspace.getConfiguration(\"editor\", resource).get(\"fontSize\");\r\n\r\n        this.low = this.createDecorationType(\r\n            settings.DecorationModeEnabled,\r\n            settings.OverviewRulerModeEnabled,\r\n            settings.DecorationTemplate,\r\n            settings.ComplexityColorLow,\r\n            size\r\n        );\r\n        this.normal = this.createDecorationType(\r\n            settings.DecorationModeEnabled,\r\n            settings.OverviewRulerModeEnabled,\r\n            settings.DecorationTemplate,\r\n            settings.ComplexityColorNormal,\r\n            size\r\n        );\r\n        this.high = this.createDecorationType(\r\n            settings.DecorationModeEnabled,\r\n            settings.OverviewRulerModeEnabled,\r\n            settings.DecorationTemplate,\r\n            settings.ComplexityColorHigh,\r\n            size\r\n        );\r\n        this.extreme = this.createDecorationType(\r\n            settings.DecorationModeEnabled,\r\n            settings.OverviewRulerModeEnabled,\r\n            settings.DecorationTemplate,\r\n            settings.ComplexityColorExtreme,\r\n            size\r\n        );\r\n    }\r\n    createDecorationType(\r\n        decorationModeEnabled: boolean,\r\n        overviewRulerModeEnabled: boolean,\r\n        decorationTemplate: string,\r\n        color: string,\r\n        size: number\r\n    ) {\r\n        const options: DecorationRenderOptions = {\r\n            overviewRulerLane: OverviewRulerLane.Right,\r\n            overviewRulerColor: color,\r\n            before: {\r\n                contentIconPath: this.getContentIconPath(decorationTemplate, color, size),\r\n                margin: `${size / 2}px`\r\n            }\r\n        };\r\n        if (!decorationModeEnabled) {\r\n            options.before = null;\r\n        }\r\n        if (!overviewRulerModeEnabled) {\r\n            options.overviewRulerColor = null;\r\n        }\r\n        options.rangeBehavior = DecorationRangeBehavior.ClosedClosed;\r\n        return window.createTextEditorDecorationType(options);\r\n    }\r\n    getContentIconPath(\r\n        decorationTemplate: string,\r\n        color: string,\r\n        size: number\r\n    ): Uri {\r\n        const templateVariables = { color, size };\r\n        const decoration = decorationTemplate\r\n            .replace(/\\{\\{(.+?)\\}\\}/g, (match, varName) => templateVariables[varName]);\r\n        return Uri.parse(\r\n            `data:image/svg+xml,` +\r\n            encodeURIComponent(decoration)\r\n        );\r\n    }\r\n    disposeDecorators() {\r\n        this.low && this.low.dispose();\r\n        this.normal && this.normal.dispose();\r\n        this.high && this.high.dispose();\r\n        this.extreme && this.extreme.dispose();\r\n        this.low = null;\r\n        this.normal = null;\r\n        this.high = null;\r\n        this.extreme = null;\r\n    }\r\n\r\n    public dispose(): void {\r\n        this.disposeDecorators();\r\n        this.didChangeTextDocument.dispose();\r\n        this.didOpenTextDocument.dispose();\r\n    }\r\n}\r\n\r\ninterface ComplexityToModel {\r\n    complexity: number;\r\n    model: IMetricsModel;\r\n}\r\n"],"sourceRoot":""}